{"ast":null,"code":"import { ship_traffic_Statistics_Search_Form } from '@core/interfaces/ships-traffic/ships-traffic';\nimport { Fillter } from '@shared/classes/filter';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/@core/services/Banners-logos.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../../@core/services/modules/ships-trafic/ships-traffic.service\";\nimport * as i5 from \"@angular/platform-browser\";\nimport * as i6 from \"../../../../@shared/components/app/horizontal-search/horizontal-search.component\";\nimport * as i7 from \"@swimlane/ngx-charts\";\nimport * as i8 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return {\n    \"selected focus\": a0\n  };\n};\n\nfunction ShipsTrafficStatisticsDetailsComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 22);\n    i0.ɵɵlistener(\"click\", function ShipsTrafficStatisticsDetailsComponent_li_19_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.filter({\n        id: i_r2.country,\n        type: \"countries\"\n      }, \"\");\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", i_r2.country)(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.country == i_r2.country));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r2.country);\n  }\n}\n\nfunction ShipsTrafficStatisticsDetailsComponent_div_26_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵelementStart(2, \"section\", 34);\n    i0.ɵɵelement(3, \"div\", 35);\n    i0.ɵɵelementStart(4, \"section\", 36);\n    i0.ɵɵelementStart(5, \"h5\", 37);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"section\", 38);\n    i0.ɵɵelementStart(8, \"h5\", 37);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"section\", 38);\n    i0.ɵɵelementStart(11, \"h5\", 37);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r8 = ctx.$implicit;\n    const i1_r6 = i0.ɵɵnextContext().index;\n    i0.ɵɵproperty(\"id\", \"collapseOne-\" + i1_r6);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i_r8.country);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r8.load);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r8.nums);\n  }\n}\n\nconst _c1 = function (a1) {\n  return [\"/companies-guide/poultry/companies_details/0/\", a1];\n};\n\nfunction ShipsTrafficStatisticsDetailsComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelement(1, \"div\");\n    i0.ɵɵelementStart(2, \"div\", 24);\n    i0.ɵɵelementStart(3, \"div\", 25);\n    i0.ɵɵelementStart(4, \"div\", 26);\n    i0.ɵɵelementStart(5, \"h5\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 27);\n    i0.ɵɵelement(8, \"i\", 28);\n    i0.ɵɵtext(9, \"\\u0627\\u0644\\u0645\\u0632\\u064A\\u062F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"a\", 29);\n    i0.ɵɵelementStart(11, \"a\", 30);\n    i0.ɵɵtext(12, \"\\u0639\\u0646 \\u0627\\u0644\\u0634\\u0631\\u0643\\u0629\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ShipsTrafficStatisticsDetailsComponent_div_26_div_13_Template, 13, 4, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r5 = ctx.$implicit;\n    const i1_r6 = ctx.index;\n    i0.ɵɵadvance(4);\n    i0.ɵɵattribute(\"data-target\", \"#collapseOne-\" + i1_r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r5.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c1, i_r5.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i_r5.data);\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    \"open\": a0\n  };\n};\n\nexport let ShipsTrafficStatisticsDetailsComponent = /*#__PURE__*/(() => {\n  class ShipsTrafficStatisticsDetailsComponent {\n    constructor(BannerLogoService, fb, route, ship, titleService) {\n      this.BannerLogoService = BannerLogoService;\n      this.fb = fb;\n      this.route = route;\n      this.ship = ship;\n      this.titleService = titleService;\n      this.id = 0;\n      this.country = '';\n      this.open = false;\n      this.fillter = new Fillter();\n      this.view = [700, 400];\n      this.chart = []; // options\n\n      this.gradient = true;\n      this.showLegend = true;\n      this.showLabels = true;\n      this.isDoughnut = false;\n      this.legendPosition = 'below';\n      this.colorScheme = {\n        domain: ['#5AA454', '#A10A28', '#C7B42C', '#AAAAAA']\n      };\n    }\n\n    ngOnInit() {\n      this.titleService.setTitle('تفاصيل حركة السفن');\n      this.fromToForm = this.fb.group({\n        country: [],\n        from: [],\n        to: []\n      });\n      this.h_search_form = ship_traffic_Statistics_Search_Form;\n      this.route.params.subscribe(prm => {\n        this.id = prm['id'];\n        this.country = prm['country'];\n      });\n      this.route.data.subscribe(res => {\n        var _a;\n\n        this.data = res['resolve'].data; // data.data\n\n        console.log(this.data);\n        (_a = this.data) === null || _a === void 0 ? void 0 : _a.ships_charts.forEach(item => {\n          var _a;\n\n          return (_a = this.chart) === null || _a === void 0 ? void 0 : _a.push({\n            name: item.product,\n            value: item.load\n          });\n        });\n        this.single = this.chart;\n      });\n    }\n\n    filter(value, type) {\n      if (type) {\n        //this  condation works only  at small view port screen\n        let f = this.fromToForm.controls; // console.log(f['from'].value)\n        // console.log(this.country)\n\n        this.ship.StatisticsDetails(f['from'].value, f['to'].value, this.country, this.id).subscribe(res => {\n          this.data = res.data;\n        });\n      } else {\n        let f = this.fillter.filterdata;\n        this.fillter.filter(value); // console.log(f)\n\n        this.country = f['country_id'];\n        this.ship.StatisticsDetails(f['from'], f['to'], f['country_id'], this.id).subscribe(res => {\n          this.data = res.data;\n        });\n      }\n    }\n\n    toggle() {\n      this.open = !this.open;\n    }\n\n  }\n\n  ShipsTrafficStatisticsDetailsComponent.ɵfac = function ShipsTrafficStatisticsDetailsComponent_Factory(t) {\n    return new (t || ShipsTrafficStatisticsDetailsComponent)(i0.ɵɵdirectiveInject(i1.BannersLogoservice), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ShipsTrafficService), i0.ɵɵdirectiveInject(i5.Title));\n  };\n\n  ShipsTrafficStatisticsDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShipsTrafficStatisticsDetailsComponent,\n    selectors: [[\"app-ships-traffic-statistics-details\"]],\n    decls: 27,\n    vars: 14,\n    consts: [[1, \"main__content__body\"], [1, \"container\"], [1, \"mt-3\", \"mt-lg-0\"], [3, \"data\", \"ships\", \"newItemEvent\"], [1, \"ngx\", 2, \"width\", \"auto\", \"height\", \"500px\"], [1, \"ngx\", 3, \"results\", \"gradient\", \"legend\", \"labels\", \"doughnut\"], [1, \"global__container\", \"container\"], [1, \"row\", \"no-gutters\"], [1, \"col-12\", \"col-md-6\", \"m-auto\", \"my-2\", \"chart__container\"], [\"id\", \"chart3\"], [1, \"col-12\", \"p-0\", \"statistics__main\"], [1, \"table\", \"table__container\"], [1, \"table__head\", \"justify-content-around\"], [1, \"title\", \"title__categories\"], [\"tabindex\", \"0\", 1, \"nice-select\", \"select__categories\", \"country\", 3, \"ngClass\", \"click\"], [1, \"current\"], [1, \"list\"], [\"class\", \"option\", 3, \"value\", \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"title\"], [1, \"border-0\", \"table__body\"], [1, \"row\", \"rows__container\"], [\"id\", \"accordion\", 4, \"ngFor\", \"ngForOf\"], [1, \"option\", 3, \"value\", \"ngClass\", \"click\"], [\"id\", \"accordion\"], [1, \"card\", 2, \"border-radius\", \"16px\"], [\"id\", \"headingOne\", 1, \"card-header\", \"flex\", \"border-bottom-0\", 2, \"border-radius\", \"16px\"], [\"data-toggle\", \"collapse\", \"aria-expanded\", \"false\", \"aria-controls\", \"collapseOne\", 1, \"btn\", 2, \"float\", \"right\", \"color\", \"#0C6A22\"], [2, \"color\", \"#686868\"], [1, \"fa-solid\", \"fa-chevron-down\", \"px-1\"], [1, \"btn\", \"btn-link\", 2, \"float\", \"left\", \"text-decoration\", \"none\"], [2, \"color\", \"#0C6A22\", 3, \"routerLink\"], [\"class\", \"collapse  \", \"aria-labelledby\", \"headingOne\", \"data-parent\", \"#accordion\", 3, \"id\", 4, \"ngFor\", \"ngForOf\"], [\"aria-labelledby\", \"headingOne\", \"data-parent\", \"#accordion\", 1, \"collapse\", 3, \"id\"], [1, \"card-body\"], [1, \"rows\", 2, \"min-height\", \"25px\"], [1, \"wall\"], [1, \"data\", \"display__flex\", \"test\"], [1, \"data__content\"], [1, \"data\", \"display__flex\"]],\n    template: function ShipsTrafficStatisticsDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"app-horizontal-search\", 3);\n        i0.ɵɵlistener(\"newItemEvent\", function ShipsTrafficStatisticsDetailsComponent_Template_app_horizontal_search_newItemEvent_4_listener($event) {\n          return ctx.filter($event, \"\");\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelement(6, \"ngx-charts-pie-chart\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"article\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"section\", 8);\n        i0.ɵɵelement(10, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵelementStart(12, \"article\", 11);\n        i0.ɵɵelementStart(13, \"section\", 12);\n        i0.ɵɵelementStart(14, \"section\", 13);\n        i0.ɵɵelementStart(15, \"div\", 14);\n        i0.ɵɵlistener(\"click\", function ShipsTrafficStatisticsDetailsComponent_Template_div_click_15_listener() {\n          return ctx.toggle();\n        });\n        i0.ɵɵelementStart(16, \"span\", 15);\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ul\", 16);\n        i0.ɵɵtemplate(19, ShipsTrafficStatisticsDetailsComponent_li_19_Template, 2, 5, \"li\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"section\", 18);\n        i0.ɵɵtext(21, \" \\u0627\\u0644\\u0643\\u0645\\u064A\\u0629 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"section\", 18);\n        i0.ɵɵtext(23, \"\\u0645\\u0642\\u062F\\u0627\\u0631 \\u062A\\u063A\\u064A\\u0631 \\u0627\\u0644\\u0643\\u0645\\u064A\\u0629 \\u0639\\u0646 \\u0627\\u0644\\u0645\\u0631\\u0643\\u0628 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\\u0629 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 19);\n        i0.ɵɵelementStart(25, \"section\", 20);\n        i0.ɵɵtemplate(26, ShipsTrafficStatisticsDetailsComponent_div_26_Template, 14, 6, \"div\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.h_search_form == null ? null : ctx.h_search_form.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"data\", ctx.h_search_form)(\"ships\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"results\", ctx.single)(\"gradient\", ctx.gradient)(\"legend\", ctx.showLegend)(\"labels\", ctx.showLabels)(\"doughnut\", ctx.isDoughnut);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c2, ctx.open));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.country);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data == null ? null : ctx.data.countries);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data == null ? null : ctx.data.companies);\n      }\n    },\n    directives: [i6.HorizontalSearchComponent, i7.PieChartComponent, i8.NgClass, i8.NgForOf, i3.RouterLinkWithHref],\n    styles: [\".test{width:59rem}.accordion{width:100%!important}.ngx{flex-direction:row;flex-wrap:wrap}.title{width:27%!important;height:55px!important}.current{display:inline-block!important;width:100%!important;text-align:center!important;overflow:hidden!important;white-space:nowrap!important;text-overflow:ellipsis!important}@media only screen and (min-width: 1800px){.chart-legend{position:absolute;margin-right:500px}}@media only screen and (min-width: 1400px) and (max-width: 1800px){.chart-legend{position:absolute;margin-right:300px}}@media only screen and (max-width: 1400px){.ngx-charts{margin:auto}.chart-legend{display:none!important}}\\n\"],\n    encapsulation: 2\n  });\n  return ShipsTrafficStatisticsDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}