{"ast":null,"code":"import { PLATFORM_ID } from '@angular/core';\nimport { catchError, EMPTY } from 'rxjs';\nimport { isPlatformBrowser } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/modules/sectors/stock-exchange/statistics-module/_core/statistics.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/toastr.service\";\nimport * as i4 from \"../../services/alert.service\";\nexport class StatisticsMembersResolver {\n  constructor(statistics, router, toster, alertService, platformId) {\n    this.statistics = statistics;\n    this.router = router;\n    this.toster = toster;\n    this.alertService = alertService;\n    this.isBrowser = isPlatformBrowser(platformId);\n  }\n\n  resolve(route, state) {\n    let type = route.paramMap.get('type') || '';\n    let id = route.paramMap.get('id') || '';\n    let arr = '';\n\n    if (type === 'المحلية') {\n      type = 'local';\n    } else if (type === 'الأعلاف') {\n      type = 'fodder';\n    } // console.log(\"resolver is work \",id,type)\n\n\n    if (type == \"fodder\") {\n      if (this.isBrowser) {\n        arr = localStorage.getItem('stockId');\n      }\n\n      return this.statistics.StatisicsMembersFodder(id, type, '', '', '0', '').pipe(catchError(e => {\n        this.toster.showFail(e.error.error);\n        this.alertService.error(e.error.error);\n        return EMPTY;\n      }));\n    } else {\n      return this.statistics.StatisicsMembersLocal(id, type, '', '', '').pipe(catchError(e => {\n        // this.router.navigate([\"\"]);\n        this.toster.showFail(e.error.error);\n        this.alertService.error(e.error.error);\n        return EMPTY;\n      }));\n    }\n  } //   async resolve1(route: ActivatedRouteSnapshot){\n  //     let type = route.paramMap.get('type')|| ''\n  //     let id = route.paramMap.get('id') || ''\n  //     console.log(\"resolver is work 1111\",id,type)\n  //     if(type == \"fodder\") {\n  //       await this.statistics.StatisicsListFodder(id).subscribe(res => {\n  //         this.arr+=res.data?.list_members[0].id      \n  //         console.log('====================================');\n  //         console.log(this.arr);\n  //         console.log('====================================');\n  //     })\n  //   }\n  // }\n\n\n  subtractDays(numOfDays, date = new Date()) {\n    date.setDate(date.getDate() - numOfDays);\n    let shortDate;\n\n    if (date.getMonth() + 1 < 10) {\n      shortDate = date.getFullYear() + '-0' + (date.getMonth() + 1) + '-' + date.getDate();\n    } else {\n      shortDate = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\n    }\n\n    return shortDate;\n  }\n\n}\n\nStatisticsMembersResolver.ɵfac = function StatisticsMembersResolver_Factory(t) {\n  return new (t || StatisticsMembersResolver)(i0.ɵɵinject(i1.StatisticsService), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.ToasterService), i0.ɵɵinject(i4.AlertService), i0.ɵɵinject(PLATFORM_ID));\n};\n\nStatisticsMembersResolver.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StatisticsMembersResolver,\n  factory: StatisticsMembersResolver.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["D:/elkenany_angular/Elkenany_V3/src/app/@core/resolver/stock-statistics/statistics-members-resolver.service.ts"],"names":["PLATFORM_ID","catchError","EMPTY","isPlatformBrowser","i0","i1","i2","i3","i4","StatisticsMembersResolver","constructor","statistics","router","toster","alertService","platformId","isBrowser","resolve","route","state","type","paramMap","get","id","arr","localStorage","getItem","StatisicsMembersFodder","pipe","e","showFail","error","StatisicsMembersLocal","subtractDays","numOfDays","date","Date","setDate","getDate","shortDate","getMonth","getFullYear","ɵfac","StatisticsMembersResolver_Factory","t","ɵɵinject","StatisticsService","Router","ToasterService","AlertService","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import { PLATFORM_ID } from '@angular/core';\r\nimport { catchError, EMPTY } from 'rxjs';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@app/modules/sectors/stock-exchange/statistics-module/_core/statistics.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"../../services/toastr.service\";\r\nimport * as i4 from \"../../services/alert.service\";\r\nexport class StatisticsMembersResolver {\r\n    constructor(statistics, router, toster, alertService, platformId) {\r\n        this.statistics = statistics;\r\n        this.router = router;\r\n        this.toster = toster;\r\n        this.alertService = alertService;\r\n        this.isBrowser = isPlatformBrowser(platformId);\r\n    }\r\n    resolve(route, state) {\r\n        let type = route.paramMap.get('type') || '';\r\n        let id = route.paramMap.get('id') || '';\r\n        let arr = '';\r\n        if (type === 'المحلية') {\r\n            type = 'local';\r\n        }\r\n        else if (type === 'الأعلاف') {\r\n            type = 'fodder';\r\n        }\r\n        // console.log(\"resolver is work \",id,type)\r\n        if (type == \"fodder\") {\r\n            if (this.isBrowser) {\r\n                arr = localStorage.getItem('stockId');\r\n            }\r\n            return this.statistics.StatisicsMembersFodder(id, type, '', '', '0', '').pipe(catchError((e) => {\r\n                this.toster.showFail(e.error.error);\r\n                this.alertService.error(e.error.error);\r\n                return EMPTY;\r\n            }));\r\n        }\r\n        else {\r\n            return this.statistics.StatisicsMembersLocal(id, type, '', '', '').pipe(catchError((e) => {\r\n                // this.router.navigate([\"\"]);\r\n                this.toster.showFail(e.error.error);\r\n                this.alertService.error(e.error.error);\r\n                return EMPTY;\r\n            }));\r\n        }\r\n    }\r\n    //   async resolve1(route: ActivatedRouteSnapshot){\r\n    //     let type = route.paramMap.get('type')|| ''\r\n    //     let id = route.paramMap.get('id') || ''\r\n    //     console.log(\"resolver is work 1111\",id,type)\r\n    //     if(type == \"fodder\") {\r\n    //       await this.statistics.StatisicsListFodder(id).subscribe(res => {\r\n    //         this.arr+=res.data?.list_members[0].id      \r\n    //         console.log('====================================');\r\n    //         console.log(this.arr);\r\n    //         console.log('====================================');\r\n    //     })\r\n    //   }\r\n    // }\r\n    subtractDays(numOfDays, date = new Date()) {\r\n        date.setDate(date.getDate() - numOfDays);\r\n        let shortDate;\r\n        if (date.getMonth() + 1 < 10) {\r\n            shortDate = date.getFullYear() + '-0' + (date.getMonth() + 1) + '-' + date.getDate();\r\n        }\r\n        else {\r\n            shortDate = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\r\n        }\r\n        return shortDate;\r\n    }\r\n}\r\nStatisticsMembersResolver.ɵfac = function StatisticsMembersResolver_Factory(t) { return new (t || StatisticsMembersResolver)(i0.ɵɵinject(i1.StatisticsService), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.ToasterService), i0.ɵɵinject(i4.AlertService), i0.ɵɵinject(PLATFORM_ID)); };\r\nStatisticsMembersResolver.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: StatisticsMembersResolver, factory: StatisticsMembersResolver.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}