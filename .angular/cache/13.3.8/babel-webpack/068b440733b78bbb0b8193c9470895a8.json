{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@app/@core/services/auth/auth.service\";\nimport * as i4 from \"@app/@core/services/alert.service\";\nimport * as i5 from \"ngx-spinner\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"../../../@shared/components/alert/alert.component\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../../@shared/components/form/submit-button/submit-button.component\";\n\nfunction ForgetPasswordComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"h5\", 3);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.message);\n  }\n}\n\nfunction ForgetPasswordComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"article\", 5);\n    i0.ɵɵelementStart(2, \"h2\", 6);\n    i0.ɵɵtext(3, \"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 7);\n    i0.ɵɵelementStart(5, \"section\", 8);\n    i0.ɵɵelementStart(6, \"div\", 9);\n    i0.ɵɵelementStart(7, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function ForgetPasswordComponent_div_2_Template_form_ngSubmit_7_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.sendCode();\n    });\n    i0.ɵɵelement(8, \"input\", 11);\n    i0.ɵɵelement(9, \"app-submit-button\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.forgetForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"form\", ctx_r1.forgetForm)(\"loading\", ctx_r1.loading)(\"title\", \" \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0643\\u0648\\u062F \\u062A\\u063A\\u064A\\u064A\\u0631 \\u0627\\u0644\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0633\\u0631\\u064A \\u0639\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0645\\u064A\\u0644 \");\n  }\n}\n\nfunction ForgetPasswordComponent_div_3__svg_svg_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 20);\n    i0.ɵɵelement(1, \"path\", 21);\n    i0.ɵɵelement(2, \"path\", 22);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ForgetPasswordComponent_div_3__svg_svg_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 20);\n    i0.ɵɵelement(1, \"path\", 23);\n    i0.ɵɵelement(2, \"path\", 24);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"/\\u0646\\u0633\\u064A\\u062A-\\u0643\\u0644\\u0645\\u0629-\\u0627\\u0644\\u0633\\u0631\"];\n};\n\nfunction ForgetPasswordComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"article\", 5);\n    i0.ɵɵelementStart(2, \"h2\", 6);\n    i0.ɵɵtext(3, \"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 7);\n    i0.ɵɵelementStart(5, \"section\", 8);\n    i0.ɵɵelementStart(6, \"div\", 9);\n    i0.ɵɵelementStart(7, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function ForgetPasswordComponent_div_3_Template_form_ngSubmit_7_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onSubmit();\n    });\n    i0.ɵɵelement(8, \"input\", 13);\n    i0.ɵɵelementStart(9, \"div\", 14);\n    i0.ɵɵelement(10, \"input\", 15);\n    i0.ɵɵelementStart(11, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ForgetPasswordComponent_div_3_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.hide = !ctx_r9.hide;\n    });\n    i0.ɵɵtemplate(12, ForgetPasswordComponent_div_3__svg_svg_12_Template, 3, 0, \"svg\", 17);\n    i0.ɵɵtemplate(13, ForgetPasswordComponent_div_3__svg_svg_13_Template, 3, 0, \"svg\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"section\", 18);\n    i0.ɵɵelementStart(15, \"a\", 19);\n    i0.ɵɵtext(16, \"\\u0627\\u0639\\u0627\\u062F\\u0629 \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0627\\u0644\\u0643\\u0648\\u062F\\u061F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"app-submit-button\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.codeForm);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"type\", ctx_r2.hide ? \"password\" : \"text\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx_r2.hide);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.hide);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.hide);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"form\", ctx_r2.codeForm)(\"loading\", ctx_r2.loading)(\"title\", \" \\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0633\\u0631\");\n  }\n}\n\nexport let ForgetPasswordComponent = /*#__PURE__*/(() => {\n  class ForgetPasswordComponent {\n    constructor(router, fb, // private location: Location,\n    route, authService, alertService, spinner, titleService) {\n      this.router = router;\n      this.fb = fb;\n      this.route = route;\n      this.authService = authService;\n      this.alertService = alertService;\n      this.spinner = spinner;\n      this.titleService = titleService;\n      this.loading = false;\n      this.hide = true;\n      this.submitted = false;\n      this.count = 0;\n      this.code = false;\n      this.message = \"\";\n    }\n\n    isDataSaved() {\n      return !this.forgetForm.dirty;\n    }\n\n    ngOnInit() {\n      this.titleService.setTitle(\" نسيت كلمةالسر\"); // this.analytics.setUpAnalytics();\n\n      this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n      this.forgetForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]]\n      });\n      this.codeForm = this.fb.group({\n        code: ['', [Validators.required, Validators.minLength(5)]],\n        password: ['', [Validators.required, Validators.minLength(6)]]\n      });\n    }\n\n    get f() {\n      return this.codeForm.controls;\n    }\n\n    sendCode() {\n      this.spinner.show();\n      const payload = {\n        email: this.forgetForm.controls['email'].value\n      };\n      console.log('====================================');\n      console.log(payload.email);\n      console.log('====================================');\n      this.authService.forget_password(payload).subscribe(res => {\n        console.log('forget ', res.message);\n        this.spinner.hide();\n        this.code = true;\n        this.message = res.message;\n        setTimeout(() => {\n          this.message = \"\";\n        }, 2000);\n      }, err => {\n        this.spinner.hide();\n        console.log(err);\n        this.alertService.error(err.error.error);\n      });\n    }\n\n    onSubmit() {\n      this.spinner.show();\n      const payload = {\n        email: this.forgetForm.controls['email'].value,\n        code: this.codeForm.controls['code'].value,\n        password: this.codeForm.controls['password'].value\n      };\n      this.authService.foget_code(payload).subscribe(res => {\n        console.log('forget ', res.message);\n        this.spinner.hide(); // this.alertService.success(res.message!)\n\n        this.message = res.message;\n        setTimeout(() => {\n          this.message = \"\";\n          this.router.navigate(['تسجيل-الدخول']);\n        }, 2000);\n      }, err => {\n        this.spinner.hide();\n        console.log(err);\n        this.alertService.error(err.error.error);\n      });\n    }\n\n  }\n\n  ForgetPasswordComponent.ɵfac = function ForgetPasswordComponent_Factory(t) {\n    return new (t || ForgetPasswordComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.AlertService), i0.ɵɵdirectiveInject(i5.NgxSpinnerService), i0.ɵɵdirectiveInject(i6.Title));\n  };\n\n  ForgetPasswordComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ForgetPasswordComponent,\n    selectors: [[\"app-forget-password\"]],\n    decls: 4,\n    vars: 3,\n    consts: [[\"class\", \"alert alert-success d-flex align-items-center m-auto w-75\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"main__content__body mt-5\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\", \"d-flex\", \"align-items-center\", \"m-auto\", \"w-75\"], [1, \"alert-heading\", \"align-items-center\", \"m-auto\"], [1, \"main__content__body\", \"mt-5\"], [1, \"container\", \"sign-up\"], [1, \"main-title\", \"font-weight-bold\"], [1, \"auth__holder\"], [1, \"sign-up-box\"], [1, \"form__container\"], [\"dir\", \"rtl\", 1, \"form__box\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"email\", \"placeholder\", \"\\u0627\\u0644\\u0625\\u064A\\u0645\\u064A\\u0644\", \"type\", \"text\", 1, \"inputs\"], [1, \"btn__submit\", 3, \"form\", \"loading\", \"title\"], [\"formControlName\", \"code\", \"placeholder\", \"\\u0627\\u0644\\u0643\\u0648\\u062F\", \"type\", \"text\", 1, \"inputs\"], [1, \"buttonIn\"], [\"formControlName\", \"password\", \"placeholder\", \" \\u0627\\u0644\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0633\\u0631\\u064A \\u0627\\u0644\\u062C\\u062F\\u064A\\u062F\", \"type\", \"password\", 1, \"inputs\", 3, \"type\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", \"type\", \"button\", 1, \"our-font-color\", \"w-auto\", 3, \"click\"], [\"class\", \"vertical-baseline\", \"fill\", \"#9B9B9B\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"width\", \"24\", \"xmlns\", \"http://www.w3.org/2000/svg\", 4, \"ngIf\"], [1, \"login-options\"], [1, \"forgot-password\", \"links\", \"m-auto\", 3, \"routerLink\"], [\"fill\", \"#9B9B9B\", \"height\", \"24\", \"viewBox\", \"0 0 24 24\", \"width\", \"24\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"vertical-baseline\"], [\"d\", \"M0 0h24v24H0z\", \"fill\", \"none\"], [\"d\", \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"], [\"d\", \"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z\", \"fill\", \"none\"], [\"d\", \"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"]],\n    template: function ForgetPasswordComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"alert\");\n        i0.ɵɵtemplate(1, ForgetPasswordComponent_div_1_Template, 3, 1, \"div\", 0);\n        i0.ɵɵtemplate(2, ForgetPasswordComponent_div_2_Template, 10, 4, \"div\", 1);\n        i0.ɵɵtemplate(3, ForgetPasswordComponent_div_3_Template, 18, 11, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.message != \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.code == false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.code);\n      }\n    },\n    directives: [i7.AlertComponent, i8.NgIf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i9.SubmitButtonComponent, i1.RouterLinkWithHref],\n    styles: [\"\"]\n  });\n  return ForgetPasswordComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}