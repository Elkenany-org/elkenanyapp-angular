{"ast":null,"code":"import { ship_traffic_Statistics_Search_Form } from '@app/@core/interfaces/ships-traffic/ships-traffic';\nimport { Fillter } from '@shared/classes/filter';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@app/@core/services/Banners-logos.service\";\nimport * as i4 from \"../../../../@core/services/modules/ships-trafic/ships-traffic.service\";\nimport * as i5 from \"@angular/platform-browser\";\nimport * as i6 from \"../../../../@shared/components/app/horizontal-search/horizontal-search.component\";\nimport * as i7 from \"@swimlane/ngx-charts\";\nimport * as i8 from \"@angular/common\";\n\nfunction ShipsTrafficStatisticsComponent_option_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", i_r2.country);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r2.country);\n  }\n}\n\nconst _c0 = function (a1, a2) {\n  return [\"/ships-traffic/statistics-details\", a1, a2];\n};\n\nfunction ShipsTrafficStatisticsComponent_section_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 30);\n    i0.ɵɵelementStart(1, \"section\", 31);\n    i0.ɵɵelementStart(2, \"h4\", 32);\n    i0.ɵɵelementStart(3, \"a\", 33);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 26);\n    i0.ɵɵelementStart(6, \"section\", 31);\n    i0.ɵɵelementStart(7, \"h4\", 32);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"div\", 26);\n    i0.ɵɵelementStart(10, \"section\", 31);\n    i0.ɵɵelementStart(11, \"h4\", 32);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction2(4, _c0, ctx_r1.product(i_r3.product), i_r3.country));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r3.product);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r3.country);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i_r3.load);\n  }\n}\n\nexport let ShipsTrafficStatisticsComponent = /*#__PURE__*/(() => {\n  class ShipsTrafficStatisticsComponent {\n    constructor(route, fb, BannerLogoService, ship, titleService) {\n      this.route = route;\n      this.fb = fb;\n      this.BannerLogoService = BannerLogoService;\n      this.ship = ship;\n      this.titleService = titleService;\n      this.view = [700, 400];\n      this.chart = []; // options\n\n      this.gradient = true;\n      this.showLegend = true;\n      this.showLabels = true;\n      this.isDoughnut = false;\n      this.legendPosition = 'below';\n      this.colorScheme = {\n        domain: ['#5AA454', '#A10A28', '#C7B42C', '#AAAAAA']\n      };\n      this.fillter = new Fillter(); // Object.assign(this, { single });\n    }\n\n    ngOnInit() {\n      this.titleService.setTitle('إحصائيات حركة السفن');\n      this.fromToForm = this.fb.group({\n        from: [],\n        to: []\n      });\n      this.h_search_form = ship_traffic_Statistics_Search_Form;\n      this.route.data.subscribe(data => {\n        var _a;\n\n        this.countries = data['resolve'].data.countries;\n        this.data = data['resolve'].data;\n        (_a = this.data) === null || _a === void 0 ? void 0 : _a.products.forEach(item => this.chart.push({\n          name: item.name,\n          value: item.load\n        }));\n        this.single = this.chart;\n        console.log(this.single);\n      });\n    }\n\n    filter(value, type) {\n      let f = this.fillter.filterdata;\n\n      if (type) {\n        //this type come from only mobile view\n        if (type == \"date-from\") {\n          this.fillter.filter({\n            name: value,\n            type: 'date-from'\n          });\n        } else if (type == \"date-to\") {\n          this.fillter.filter({\n            name: value,\n            type: 'date-to'\n          });\n        }\n      } else {\n        this.fillter.filter(value);\n      }\n\n      this.ship.Statistics(f['sort'], f['from'], f['to'], f['country_id']).subscribe(res => {\n        var _a;\n\n        this.data = res.data;\n        (_a = this.data) === null || _a === void 0 ? void 0 : _a.products.forEach(item => this.chart.push({\n          name: item.name,\n          value: item.load\n        }));\n        this.single = this.chart;\n      });\n    }\n\n    onSelect(data) {// console.log('Item clicked', JSON.parse(JSON.stringify(data)));\n    }\n\n    onActivate(data) {// console.log('Activate', JSON.parse(JSON.stringify(data)));\n    }\n\n    onDeactivate(data) {// console.log('Deactivate', JSON.parse(JSON.stringify(data)));\n    }\n\n    product(name) {\n      var _a, _b;\n\n      let t = ((_b = (_a = this.data) === null || _a === void 0 ? void 0 : _a.products.find(i => i.name == name)) === null || _b === void 0 ? void 0 : _b.id) + '';\n      return t;\n    }\n\n  }\n\n  ShipsTrafficStatisticsComponent.ɵfac = function ShipsTrafficStatisticsComponent_Factory(t) {\n    return new (t || ShipsTrafficStatisticsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.BannersLogoservice), i0.ɵɵdirectiveInject(i4.ShipsTrafficService), i0.ɵɵdirectiveInject(i5.Title));\n  };\n\n  ShipsTrafficStatisticsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShipsTrafficStatisticsComponent,\n    selectors: [[\"app-ships-traffic-statistics\"]],\n    decls: 48,\n    vars: 10,\n    consts: [[1, \"main__content__body\"], [1, \"container\"], [1, \"mt-3\", \"mt-lg-0\"], [3, \"data\", \"ships\", \"newItemEvent\"], [1, \"ngx\", 2, \"width\", \"auto\", \"height\", \"500px\"], [3, \"results\", \"gradient\", \"legend\", \"labels\", \"doughnut\", \"select\", \"activate\", \"deactivate\"], [1, \"global__container\", \"container\"], [1, \"row\", \"no-gutters\"], [1, \"col-12\", \"col-md-6\", \"m-auto\", \"my-2\", \"chart__container\"], [\"id\", \"chart3\"], [1, \"col-12\"], [1, \"row\"], [1, \"col-12\", \"col-md-6\"], [1, \"multi__selectContainer\"], [1, \"multi__title\"], [\"id\", \"multiple-checkboxes\", 1, \"selectCategories\", \"form-control\", 3, \"change\"], [\"value\", \"0\"], [\"value\", \"2\"], [\"value\", \"1\"], [\"value\", \"3\"], [\"value\", \"4\"], [1, \"select__categories\", \"selectCategories\", \"form-control\", 3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"table__container\", \"table-hover\", \"table-chart-5\"], [1, \"table__head\"], [1, \"title\"], [1, \"wall\"], [1, \"table__body\", \"row__shadow\"], [\"class\", \"table__row\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"table__row\"], [1, \"cell__container\"], [1, \"cell__content\"], [1, \"item__link\", 3, \"routerLink\"]],\n    template: function ShipsTrafficStatisticsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"app-horizontal-search\", 3);\n        i0.ɵɵlistener(\"newItemEvent\", function ShipsTrafficStatisticsComponent_Template_app_horizontal_search_newItemEvent_4_listener($event) {\n          return ctx.filter($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"ngx-charts-pie-chart\", 5);\n        i0.ɵɵlistener(\"select\", function ShipsTrafficStatisticsComponent_Template_ngx_charts_pie_chart_select_6_listener($event) {\n          return ctx.onSelect($event);\n        })(\"activate\", function ShipsTrafficStatisticsComponent_Template_ngx_charts_pie_chart_activate_6_listener($event) {\n          return ctx.onActivate($event);\n        })(\"deactivate\", function ShipsTrafficStatisticsComponent_Template_ngx_charts_pie_chart_deactivate_6_listener($event) {\n          return ctx.onDeactivate($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"article\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"section\", 8);\n        i0.ɵɵelement(10, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵelementStart(12, \"div\", 11);\n        i0.ɵɵelementStart(13, \"div\", 12);\n        i0.ɵɵelementStart(14, \"div\", 13);\n        i0.ɵɵelementStart(15, \"h4\", 14);\n        i0.ɵɵtext(16, \"\\u0627\\u0644\\u0646\\u0648\\u0639\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"select\", 15);\n        i0.ɵɵlistener(\"change\", function ShipsTrafficStatisticsComponent_Template_select_change_17_listener($event) {\n          return ctx.filter({\n            id: $event.target.value,\n            type: \"sort\"\n          });\n        });\n        i0.ɵɵelementStart(18, \"option\", 16);\n        i0.ɵɵtext(19, \"\\u0627\\u0644\\u0643\\u0644\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"option\", 17);\n        i0.ɵɵtext(21, \"\\u0642\\u0645\\u062D\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"option\", 18);\n        i0.ɵɵtext(23, \"\\u0630\\u0631\\u0629\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"option\", 19);\n        i0.ɵɵtext(25, \"\\u0635\\u0648\\u064A\\u0627\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"option\", 20);\n        i0.ɵɵtext(27, \"\\u0633\\u0643\\u0631\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 12);\n        i0.ɵɵelementStart(29, \"div\", 13);\n        i0.ɵɵelementStart(30, \"h4\", 14);\n        i0.ɵɵtext(31, \"\\u0627\\u0644\\u0645\\u0646\\u0634\\u0623\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"select\", 21);\n        i0.ɵɵlistener(\"change\", function ShipsTrafficStatisticsComponent_Template_select_change_32_listener($event) {\n          return ctx.filter({\n            id: $event.target.value,\n            type: \"countries\"\n          });\n        });\n        i0.ɵɵelementStart(33, \"option\", 16);\n        i0.ɵɵtext(34, \"\\u0627\\u0644\\u0643\\u0644\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(35, ShipsTrafficStatisticsComponent_option_35_Template, 2, 2, \"option\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"section\", 23);\n        i0.ɵɵelementStart(37, \"section\", 24);\n        i0.ɵɵelementStart(38, \"span\", 25);\n        i0.ɵɵtext(39, \"\\u0627\\u0644\\u0646\\u0648\\u0639\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(40, \"div\", 26);\n        i0.ɵɵelementStart(41, \"span\", 25);\n        i0.ɵɵtext(42, \" \\u0627\\u0644\\u0645\\u0646\\u0634\\u0623 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"div\", 26);\n        i0.ɵɵelementStart(44, \"span\", 25);\n        i0.ɵɵtext(45, \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\", 27);\n        i0.ɵɵtemplate(47, ShipsTrafficStatisticsComponent_section_47_Template, 13, 7, \"section\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.h_search_form == null ? null : ctx.h_search_form.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"data\", ctx.h_search_form)(\"ships\", true);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"results\", ctx.single)(\"gradient\", ctx.gradient)(\"legend\", ctx.showLegend)(\"labels\", ctx.showLabels)(\"doughnut\", ctx.isDoughnut);\n        i0.ɵɵadvance(29);\n        i0.ɵɵproperty(\"ngForOf\", ctx.countries);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngForOf\", ctx.data == null ? null : ctx.data.ships);\n      }\n    },\n    directives: [i6.HorizontalSearchComponent, i7.PieChartComponent, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i8.NgForOf, i1.RouterLinkWithHref],\n    styles: [\".test{width:59rem}.accordion{width:100%!important}.ngx{flex-direction:row;flex-wrap:wrap}@media only screen and (min-width: 1800px){.chart-legend{position:absolute;margin-right:500px}}@media only screen and (min-width: 1400px) and (max-width: 1800px){.chart-legend{position:absolute;margin-right:300px}}@media only screen and (max-width: 1400px){.ngx-charts{margin:auto}.chart-legend{display:none!important}}@media only screen and (max-width: 450px){.ngx{height:300px!important;margin-left:40px;padding:-50px!important}}.title{width:32%!important}.company__link__container a:hover{color:var(--yellow)!important}.cell__container{width:30%!important}\\n\"],\n    encapsulation: 2\n  });\n  return ShipsTrafficStatisticsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}