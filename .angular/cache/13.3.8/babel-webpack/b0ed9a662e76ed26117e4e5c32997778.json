{"ast":null,"code":"import { map } from 'rxjs';\nimport { Home_Stock_Search_Form_Data } from '@app/@core/@data/app/stock-exchange/stock-exchange';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../@core/services/modules/stock-exchange/stock-exchange.service\";\nimport * as i2 from \"@app/@core/services/Banners-logos.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/platform-browser\";\nimport * as i6 from \"../../../../@shared/components/app/banner-logos/banner-logos.component\";\nimport * as i7 from \"../../../../@shared/components/app/horizontal-search/horizontal-search.component\";\nimport * as i8 from \"../../../../@shared/components/app/card/card.component\";\nimport * as i9 from \"../../../../@shared/components/loader/loader.component\";\n\nfunction HomeStockExchangeComponent_app_loader_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\n\nexport let HomeStockExchangeComponent = /*#__PURE__*/(() => {\n  class HomeStockExchangeComponent {\n    constructor(stockExchange, BannerLogoService, route, activatedRoute, location, router, titleService) {\n      this.stockExchange = stockExchange;\n      this.BannerLogoService = BannerLogoService;\n      this.route = route;\n      this.activatedRoute = activatedRoute;\n      this.location = location;\n      this.router = router;\n      this.titleService = titleService;\n      this.loading = false;\n      this.filterData = {\n        type: \"\",\n        sort: \"\",\n        search: \"\"\n      };\n    }\n\n    ngOnInit() {\n      this.titleService.setTitle(\"البورصة اليومية\");\n      this.h_search_form = Home_Stock_Search_Form_Data; //set initial data to horizontal component \n\n      this.activatedRoute.data.pipe(map(data => {\n        return data;\n      })).subscribe(res => {\n        this.stock_Ex_Data = res['resolve'];\n        this.BannerLogoService.setBanner(res['resolve'].banners);\n        this.BannerLogoService.setLogo(res['resolve'].logos);\n        this.loading = false;\n      });\n      this.route.params.subscribe(params => {\n        this.type = params['type'];\n        this.filterData['sector'] = params['type'];\n        this.stockExchange.Filter_list(params['type']).subscribe(res => {\n          var _a, _b; //override data to match the data format of horizontal components\n\n\n          this.h_search_form.controls.find(i => i.role === \"sector\").option = (_a = res.data) === null || _a === void 0 ? void 0 : _a.sectors;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option = (_b = res.data) === null || _b === void 0 ? void 0 : _b.sort;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id !== 0).selected = 0;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option.unshift({\n            \"id\": 0,\n            \"name\": \"الأكثر أهمية\",\n            \"value\": ''\n          });\n          let title = this.h_search_form.controls.find(i => i.role === \"sector\").option.find(i => i.selected == 1).name;\n          localStorage.setItem('stockTitle', ' القسم ' + title);\n          this.filterData['sector'] = this.h_search_form.controls.find(i => i.role === \"sector\").option.find(i => i.selected == 1).id;\n          this.location.go(`/البورصة/${this.filterData['sector']}`);\n          this.h_search_form.controls[3].routerLink = `/البورصة/${this.filterData['sector']}/إحصائيات`;\n        });\n      });\n    }\n\n    filter(value) {\n      let sort = '';\n      this.route.params.subscribe(params => {\n        switch (value.type) {\n          case \"sector\":\n            this.filterData['sector'] = value.id;\n            this.type = this.filterData['sector'];\n            this.router.navigate(['البورصة/', this.type]);\n            break;\n\n          case \"sort\":\n            this.filterData['sort'] = value.id;\n            this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id === value.id).selected = 1;\n            this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id !== value.id).selected = 0;\n            sort = this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id === value.id).value;\n            break;\n\n          case \"search\":\n            this.filterData['search'] = value.name;\n            break;\n\n          default:\n            break;\n        }\n      }); //  console.log( this.h_search_form.controls.find((i:any) => i.role === \"sort\").option);\n\n      if (value.type != 'sector') {\n        this.stockExchange.GetStockExchangeV2(this.filterData['sector'], sort, this.filterData['search']).subscribe(res => {\n          this.stock_Ex_Data = res;\n          this.BannerLogoService.setBanner(this.stock_Ex_Data.banners);\n          this.BannerLogoService.setLogo(this.stock_Ex_Data.logos);\n          this.h_search_form.controls.find(i => i.role === \"sector\").option = this.stock_Ex_Data.sectors;\n          this.loading = false;\n        });\n      }\n\n      let title = this.h_search_form.controls.find(i => i.role === \"sector\").option.find(i => i.selected == 1).name;\n      localStorage.setItem('stockTitle', ' القسم ' + title);\n    }\n\n    navigate(id) {// this.router.navigate([`/stock-exchange/poultry/stock-exchange/${id}/${this.type}`]);\n    }\n\n    navigateV2(data) {\n      let temp = data.type;\n\n      if (data.type === 'local') {\n        temp = 'المحلية';\n      } else if (data.type === 'fodder') {\n        temp = 'الأعلاف';\n      }\n\n      this.router.navigate([`/البورصة/${this.filterData['sector']}/${temp}/${data.id}`]);\n    }\n\n  }\n\n  HomeStockExchangeComponent.ɵfac = function HomeStockExchangeComponent_Factory(t) {\n    return new (t || HomeStockExchangeComponent)(i0.ɵɵdirectiveInject(i1.StockExchangeService), i0.ɵɵdirectiveInject(i2.BannersLogoservice), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i5.Title));\n  };\n\n  HomeStockExchangeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeStockExchangeComponent,\n    selectors: [[\"app-stock-exchange\"]],\n    decls: 10,\n    vars: 11,\n    consts: [[4, \"ngIf\"], [1, \"main__content__body\"], [1, \"container\"], [1, \"mt-3\", \"mt-lg-0\"], [3, \"loading\", \"type\"], [3, \"data\", \"newItemEvent\"], [1, \"container\", \"global__container\"], [3, \"flag\", \"maincard\", \"data\", \"loading\", \"navigation\", \"outpiutData\"]],\n    template: function HomeStockExchangeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, HomeStockExchangeComponent_app_loader_0_Template, 1, 0, \"app-loader\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"h1\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"app-banners-logo\", 4);\n        i0.ɵɵelement(6, \"app-banners-logo\", 4);\n        i0.ɵɵelementStart(7, \"app-horizontal-search\", 5);\n        i0.ɵɵlistener(\"newItemEvent\", function HomeStockExchangeComponent_Template_app_horizontal_search_newItemEvent_7_listener($event) {\n          return ctx.filter($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"article\", 6);\n        i0.ɵɵelementStart(9, \"app-card\", 7);\n        i0.ɵɵlistener(\"navigation\", function HomeStockExchangeComponent_Template_app_card_navigation_9_listener($event) {\n          return ctx.navigate($event);\n        })(\"outpiutData\", function HomeStockExchangeComponent_Template_app_card_outpiutData_9_listener($event) {\n          return ctx.navigateV2($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.h_search_form.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"loading\", ctx.loading)(\"type\", \"banner\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"loading\", ctx.loading)(\"type\", \"logo\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"data\", ctx.h_search_form);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"flag\", false)(\"maincard\", true)(\"data\", ctx.stock_Ex_Data == null ? null : ctx.stock_Ex_Data.sub_sections)(\"loading\", ctx.loading);\n      }\n    },\n    directives: [i4.NgIf, i6.BannerLogosComponent, i7.HorizontalSearchComponent, i8.CardComponent, i9.LoaderComponent],\n    styles: [\".item[_ngcontent-%COMP%], .fb-item[_ngcontent-%COMP%]{width:auto;height:auto;margin:10px auto;border:1px solid #eaeaea;padding:10px}.gravatar[_ngcontent-%COMP%]{width:100px;height:90px}.gravatar-title[_ngcontent-%COMP%]{width:500px;padding:10px;height:80px}.first-section-wrapper[_ngcontent-%COMP%], .second-section-wrapper[_ngcontent-%COMP%]{width:100%;height:auto;flex:1}.first-section-wrapper[_ngcontent-%COMP%]{display:inline-flex}.second-section-wrapper[_ngcontent-%COMP%]{margin-top:30px}.wrapper[_ngcontent-%COMP%]{width:100%;flex:1}.item-with-background[_ngcontent-%COMP%]{background:#121212;padding:10px}.loader[_ngcontent-%COMP%]{box-sizing:border-box;background-repeat:no-repeat;background:#eff1f6 no-repeat;background-color:#eff1f6;line-height:1;overflow:hidden;position:relative}.content-loaded-image[_ngcontent-%COMP%]{display:inline-block;width:80px;height:80px;background-color:#aeaeae;margin:5px;border-radius:50%}.gravatar-title-name[_ngcontent-%COMP%]{margin-top:0;width:200px;border-radius:0;height:15px;margin-bottom:15px;font-size:18px}.gravatar-description[_ngcontent-%COMP%]{width:170px;border-radius:0;height:15px;font-size:12px}\"]\n  });\n  return HomeStockExchangeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}