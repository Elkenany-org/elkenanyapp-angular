{"ast":null,"code":"import { employment_Search_Form_Data } from '@app/@core/interfaces/employment/employment-home-data';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/@core/services/modules/employment/employment.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"@app/@core/services/Banners-logos.service\";\nimport * as i5 from \"../../../../@shared/components/app/horizontal-search/horizontal-search.component\";\nimport * as i6 from \"../../../../@shared/components/app/card/card.component\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"ngx-pagination\";\n\nfunction EmploymentHomeComponent_li_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"li\");\n  }\n}\n\nconst _c0 = function () {\n  return [\"active\"];\n};\n\nconst _c1 = function () {\n  return [];\n};\n\nconst _c2 = function (a1) {\n  return {\n    itemsPerPage: 1,\n    currentPage: a1\n  };\n};\n\nexport let EmploymentHomeComponent = /*#__PURE__*/(() => {\n  class EmploymentHomeComponent {\n    constructor(emplymentService, route, router, activatedRoute, titleService, BannerLogoService) {\n      this.emplymentService = emplymentService;\n      this.route = route;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.titleService = titleService;\n      this.BannerLogoService = BannerLogoService;\n      this.loading = true; // public page= {last_page: 0, current_page:0}\n\n      this.filterData = {\n        type: \"\",\n        sort: \"\",\n        search: \"\",\n        page: '',\n        category: \"\"\n      };\n      this.page = {\n        last_page: 0,\n        current_page: 0\n      };\n    }\n\n    ngOnInit() {\n      this.h_search_form = employment_Search_Form_Data; //set initial data to horizontal component \n\n      this.titleService.setTitle(' الوظائف ');\n      this.route.params.subscribe(params => {\n        this.emplymentService.Filter_list().subscribe(res => {\n          var _a, _b;\n\n          this.h_search_form.controls.find(i => i.role === \"category\").option = (_a = res.data) === null || _a === void 0 ? void 0 : _a.categories;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option = (_b = res.data) === null || _b === void 0 ? void 0 : _b.sort;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id !== 1).selected = 1;\n          this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id === 1).selected = 0;\n          this.h_search_form.controls.find(i => i.role === \"category\").option.find(i => i.id === 1).selected = 1;\n          this.h_search_form.controls.find(i => i.role === \"category\").option.find(i => i.id !== 1).selected = 0;\n        });\n        this.activatedRoute.data.pipe(map(data => {\n          return data['resolve'].data;\n        })).subscribe(res => {\n          this.Jobs_Data = res.jobs;\n          this.page.current_page = res.current_page;\n          this.page.last_page = res.last_page;\n          this.BannerLogoService.setBanner(res.banners);\n          this.loading = false;\n        });\n      });\n    }\n\n    filter(value) {\n      this.route.params.subscribe(params => {\n        switch (value.type) {\n          case \"category\":\n            this.filterData['category'] = value.id;\n            this.h_search_form.controls.find(i => i.role === \"category\").option.find(i => i.id === value.id).selected = 1;\n            this.h_search_form.controls.find(i => i.role === \"category\").option.find(i => i.id !== value.id).selected = 0;\n            break;\n\n          case \"sort\":\n            if (value.id == 0) {\n              this.filterData['sort'] = '';\n            } else {\n              this.filterData['sort'] = value.id;\n            }\n\n            this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id === value.id).selected = 1;\n            this.h_search_form.controls.find(i => i.role === \"sort\").option.find(i => i.id !== value.id).selected = 0;\n            break;\n\n          case \"search\":\n            this.filterData['search'] = value.name; // console.log('date'+value.name);    \n\n            break;\n\n          default:\n            // \n            break;\n        }\n      });\n      this.emplymentService.AllJobs(this.filterData['sort'], this.filterData['search'], this.filterData['category'], '').subscribe(res => {\n        var _a, _b, _c;\n\n        this.page.current_page = (_a = res.data) === null || _a === void 0 ? void 0 : _a.current_page;\n        this.page.last_page = (_b = res.data) === null || _b === void 0 ? void 0 : _b.last_page;\n        this.Jobs_Data = (_c = res.data) === null || _c === void 0 ? void 0 : _c.jobs;\n      });\n    }\n\n    navigate(id) {\n      // console.log(id)\n      this.router.navigate([`/الوظائف/تفاصيل-الوظيفة/${id}`]);\n    }\n\n    next_page(page) {\n      this.filterData[\"page\"] = page + '';\n      this.emplymentService.AllJobs(this.filterData['sort'], this.filterData['search'], this.filterData['category'], this.filterData[\"page\"]).subscribe(res => {\n        var _a, _b, _c;\n\n        this.page.current_page = (_a = res.data) === null || _a === void 0 ? void 0 : _a.current_page;\n        this.page.last_page = (_b = res.data) === null || _b === void 0 ? void 0 : _b.last_page;\n        this.Jobs_Data = (_c = res.data) === null || _c === void 0 ? void 0 : _c.jobs;\n      });\n    }\n\n  }\n\n  EmploymentHomeComponent.ɵfac = function EmploymentHomeComponent_Factory(t) {\n    return new (t || EmploymentHomeComponent)(i0.ɵɵdirectiveInject(i1.EmploymentService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Title), i0.ɵɵdirectiveInject(i4.BannersLogoservice));\n  };\n\n  EmploymentHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmploymentHomeComponent,\n    selectors: [[\"app-employment-home\"]],\n    decls: 31,\n    vars: 18,\n    consts: [[1, \"container\"], [1, \"mt-3\", \"mt-lg-0\"], [1, \"page__tabs\", \"nb-0\", \"container\"], [1, \"tabs__list\"], [\"routerLink\", \"./\", 1, \"list__item\", \"list__item-2\"], [1, \"list__link\", 3, \"routerLinkActive\"], [\"routerLink\", \"\\u0648\\u0638\\u0627\\u0626\\u0641\\u0643\", 1, \"list__item\", \"list__item-2\"], [1, \"landing\", \"mb-2\"], [1, \"bg\"], [\"src\", \"assets/images/jobs.png\", \"alt\", \"\"], [1, \"content\"], [1, \"my-2\"], [1, \"links\"], [\"href\", \"\", 1, \"link\"], [3, \"data\", \"newItemEvent\"], [1, \"global__container\", \"container\"], [3, \"data\", \"jobcard\", \"loading\", \"flag\", \"navigation\"], [1, \"row\", \"pagination__container\"], [1, \"col-12\"], [1, \"pagination\"], [4, \"ngFor\", \"ngForOf\"], [\"previousLabel\", \"\", \"nextLabel\", \"\", 3, \"maxSize\", \"click\", \"pageChange\"]],\n    template: function EmploymentHomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"ul\", 3);\n        i0.ɵɵelementStart(5, \"li\", 4);\n        i0.ɵɵelementStart(6, \"a\", 5);\n        i0.ɵɵtext(7, \"\\u0627\\u0644\\u0648\\u0638\\u0627\\u0626\\u0641\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"li\", 6);\n        i0.ɵɵelementStart(9, \"a\", 5);\n        i0.ɵɵtext(10, \"\\u0648\\u0638\\u0627\\u0626\\u0641\\u0643\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"div\", 0);\n        i0.ɵɵelementStart(13, \"div\", 8);\n        i0.ɵɵelement(14, \"img\", 9);\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵelementStart(16, \"h1\", 11);\n        i0.ɵɵtext(17, \"\\u0627\\u0639\\u0631\\u0641 \\u0623\\u0643\\u062B\\u0631 \\u0639\\u0646 \\u0627\\u0644\\u0648\\u0638\\u0627\\u0626\\u0641\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 12);\n        i0.ɵɵelementStart(19, \"a\", 13);\n        i0.ɵɵtext(20, \"\\u0623\\u062D\\u062F\\u062B \\u0627\\u0644\\u0648\\u0638\\u0627\\u0626\\u0641\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"app-horizontal-search\", 14);\n        i0.ɵɵlistener(\"newItemEvent\", function EmploymentHomeComponent_Template_app_horizontal_search_newItemEvent_21_listener($event) {\n          return ctx.filter($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"article\", 15);\n        i0.ɵɵelementStart(23, \"app-card\", 16);\n        i0.ɵɵlistener(\"navigation\", function EmploymentHomeComponent_Template_app_card_navigation_23_listener($event) {\n          return ctx.navigate($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 17);\n        i0.ɵɵelementStart(25, \"div\", 18);\n        i0.ɵɵelementStart(26, \"div\", 19);\n        i0.ɵɵelementStart(27, \"ul\");\n        i0.ɵɵtemplate(28, EmploymentHomeComponent_li_28_Template, 1, 0, \"li\", 20);\n        i0.ɵɵpipe(29, \"paginate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"pagination-controls\", 21);\n        i0.ɵɵlistener(\"click\", function EmploymentHomeComponent_Template_pagination_controls_click_30_listener() {\n          return ctx.next_page(ctx.page.current_page);\n        })(\"pageChange\", function EmploymentHomeComponent_Template_pagination_controls_pageChange_30_listener($event) {\n          return ctx.page.current_page = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.h_search_form.title);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"routerLinkActive\", i0.ɵɵpureFunction0(13, _c0));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLinkActive\", i0.ɵɵpureFunction0(14, _c0));\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"data\", ctx.h_search_form);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"data\", ctx.Jobs_Data)(\"jobcard\", true)(\"loading\", ctx.loading)(\"flag\", false);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(29, 10, i0.ɵɵpureFunction0(15, _c1).constructor(ctx.page.last_page), i0.ɵɵpureFunction1(16, _c2, ctx.page.current_page)));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"maxSize\", 10);\n      }\n    },\n    directives: [i2.RouterLink, i2.RouterLinkActive, i5.HorizontalSearchComponent, i6.CardComponent, i7.NgForOf, i8.PaginationControlsComponent],\n    pipes: [i8.PaginatePipe],\n    styles: [\".slick-dots[_ngcontent-%COMP%]{display:none!important}.page__tabs[_ngcontent-%COMP%]{background:#F3F3F3 0% 0% no-repeat padding-box;box-shadow:0 6px 6px #00000026;border-radius:20px;margin-bottom:2rem;padding-left:2rem;padding-right:2rem}.list__link[_ngcontent-%COMP%]{margin-bottom:1rem;margin-top:2rem}@media screen and (max-width: 768px){.page__tabs[_ngcontent-%COMP%]{width:95%}}@media screen and (max-width: 1400px){.page__tabs[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 1400px){.page__tabs[_ngcontent-%COMP%]{width:50%}}\"]\n  });\n  return EmploymentHomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}