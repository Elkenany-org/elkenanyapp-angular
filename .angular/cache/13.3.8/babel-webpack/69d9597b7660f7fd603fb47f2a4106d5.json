{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Injectable, InjectionToken, Input, EventEmitter, Directive, Output, HostListener, PLATFORM_ID, Inject, SecurityContext, ViewChild, Injector, HostBinding, NgModule } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport * as i5 from '@angular/platform-browser';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\nimport * as i1 from '@angular/cdk/overlay';\nimport { OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { Subject, timer } from 'rxjs';\nimport { map, filter, switchMap, takeUntil } from 'rxjs/operators';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport * as i1$1 from '@angular/cdk/layout';\nimport { Breakpoints } from '@angular/cdk/layout';\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Key of the keyboard's key `enter`\n */\n\nfunction LoadingSpinnerComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelement(2, \"div\", 4);\n    i0.ɵɵelement(3, \"div\", 5);\n    i0.ɵɵelement(4, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 7);\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 9);\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵelementStart(2, \"div\", 11);\n    i0.ɵɵelement(3, \"span\", 12);\n    i0.ɵɵelement(4, \"span\", 13);\n    i0.ɵɵelement(5, \"span\", 14);\n    i0.ɵɵelement(6, \"span\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵelement(2, \"div\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction LoadingSpinnerComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 18);\n    i0.ɵɵelement(2, \"span\");\n    i0.ɵɵelement(3, \"span\");\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelement(5, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    width: a0,\n    height: a1\n  };\n};\n\nfunction CurrentImageComponent_ng_container_4_ng_container_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 11);\n    i0.ɵɵlistener(\"click\", function CurrentImageComponent_ng_container_4_ng_container_1_img_1_Template_img_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return ctx_r9.onNavigationEvent(\"left\", $event, ctx_r9.clickAction);\n    })(\"keyup\", function CurrentImageComponent_ng_container_4_ng_container_1_img_1_Template_img_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return ctx_r11.onNavigationEvent(\"left\", $event, ctx_r11.keyboardAction);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const leftPreview_r5 = i0.ɵɵnextContext().ngIf;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", leftPreview_r5.modal.alt ? leftPreview_r5.modal.alt : ctx_r6.getAltDescriptionByImage(leftPreview_r5));\n    i0.ɵɵproperty(\"src\", (leftPreview_r5.plain == null ? null : leftPreview_r5.plain.img) ? leftPreview_r5.plain == null ? null : leftPreview_r5.plain.img : leftPreview_r5.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", (leftPreview_r5.plain == null ? null : leftPreview_r5.plain.fallbackImg) ? leftPreview_r5.plain == null ? null : leftPreview_r5.plain.fallbackImg : leftPreview_r5.modal.fallbackImg)(\"hidden\", ctx_r6.loading)(\"sizeConfig\", i0.ɵɵpureFunction2(8, _c0, ctx_r6.slideConfig == null ? null : ctx_r6.slideConfig.sidePreviews == null ? null : ctx_r6.slideConfig.sidePreviews.size.width, ctx_r6.slideConfig == null ? null : ctx_r6.slideConfig.sidePreviews == null ? null : ctx_r6.slideConfig.sidePreviews.size.height))(\"title\", leftPreview_r5.modal.title || leftPreview_r5.modal.title === \"\" ? leftPreview_r5.modal.title : ctx_r6.getDescriptionToDisplay(leftPreview_r5))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", leftPreview_r5.modal.ariaLabel);\n  }\n}\n\nfunction CurrentImageComponent_ng_container_4_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 12);\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"sizeConfig\", i0.ɵɵpureFunction2(1, _c0, ctx_r8.slideConfig == null ? null : ctx_r8.slideConfig.sidePreviews == null ? null : ctx_r8.slideConfig.sidePreviews.size.width, ctx_r8.slideConfig == null ? null : ctx_r8.slideConfig.sidePreviews == null ? null : ctx_r8.slideConfig.sidePreviews.size.height));\n  }\n}\n\nfunction CurrentImageComponent_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CurrentImageComponent_ng_container_4_ng_container_1_img_1_Template, 1, 11, \"img\", 9);\n    i0.ɵɵtemplate(2, CurrentImageComponent_ng_container_4_ng_container_1_ng_template_2_Template, 1, 4, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(3);\n\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isFirstImage)(\"ngIfElse\", _r7);\n  }\n}\n\nfunction CurrentImageComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CurrentImageComponent_ng_container_4_ng_container_1_Template, 4, 2, \"ng-container\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getLeftPreviewImage());\n  }\n}\n\nfunction CurrentImageComponent_figcaption_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"figcaption\", 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"description\", ctx_r1.currentImageConfig == null ? null : ctx_r1.currentImageConfig.description)(\"innerHTML\", ctx_r1.getDescriptionToDisplay(), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction CurrentImageComponent_ng_container_9_ng_container_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 16);\n    i0.ɵɵlistener(\"click\", function CurrentImageComponent_ng_container_9_ng_container_1_img_1_Template_img_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return ctx_r18.onNavigationEvent(\"right\", $event, ctx_r18.clickAction);\n    })(\"keyup\", function CurrentImageComponent_ng_container_9_ng_container_1_img_1_Template_img_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return ctx_r20.onNavigationEvent(\"right\", $event, ctx_r20.keyboardAction);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rightPreview_r14 = i0.ɵɵnextContext().ngIf;\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", rightPreview_r14.modal.alt ? rightPreview_r14.modal.alt : ctx_r15.getAltDescriptionByImage(rightPreview_r14));\n    i0.ɵɵproperty(\"src\", (rightPreview_r14.plain == null ? null : rightPreview_r14.plain.img) ? rightPreview_r14.plain == null ? null : rightPreview_r14.plain.img : rightPreview_r14.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", (rightPreview_r14.plain == null ? null : rightPreview_r14.plain.fallbackImg) ? rightPreview_r14.plain == null ? null : rightPreview_r14.plain.fallbackImg : rightPreview_r14.modal.fallbackImg)(\"hidden\", ctx_r15.loading)(\"sizeConfig\", i0.ɵɵpureFunction2(8, _c0, ctx_r15.slideConfig == null ? null : ctx_r15.slideConfig.sidePreviews == null ? null : ctx_r15.slideConfig.sidePreviews.size.width, ctx_r15.slideConfig == null ? null : ctx_r15.slideConfig.sidePreviews == null ? null : ctx_r15.slideConfig.sidePreviews.size.height))(\"title\", rightPreview_r14.modal.title || rightPreview_r14.modal.title === \"\" ? rightPreview_r14.modal.title : ctx_r15.getDescriptionToDisplay(rightPreview_r14))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", rightPreview_r14.modal.ariaLabel);\n  }\n}\n\nfunction CurrentImageComponent_ng_container_9_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"sizeConfig\", i0.ɵɵpureFunction2(1, _c0, ctx_r17.slideConfig == null ? null : ctx_r17.slideConfig.sidePreviews == null ? null : ctx_r17.slideConfig.sidePreviews.size.width, ctx_r17.slideConfig == null ? null : ctx_r17.slideConfig.sidePreviews == null ? null : ctx_r17.slideConfig.sidePreviews.size.height));\n  }\n}\n\nfunction CurrentImageComponent_ng_container_9_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CurrentImageComponent_ng_container_9_ng_container_1_img_1_Template, 1, 11, \"img\", 14);\n    i0.ɵɵtemplate(2, CurrentImageComponent_ng_container_9_ng_container_1_ng_template_2_Template, 1, 4, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r16 = i0.ɵɵreference(3);\n\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r13.isLastImage)(\"ngIfElse\", _r16);\n  }\n}\n\nfunction CurrentImageComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CurrentImageComponent_ng_container_9_ng_container_1_Template, 4, 2, \"ng-container\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.getRightPreviewImage());\n  }\n}\n\nfunction CurrentImageComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ks-loading-spinner\", 18);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"loadingConfig\", ctx_r3.currentImageConfig == null ? null : ctx_r3.currentImageConfig.loadingConfig)(\"accessibilityConfig\", ctx_r3.accessibilityConfig);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"font-size\": a0\n  };\n};\n\nfunction UpperButtonsComponent_ng_container_1_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 3);\n    i0.ɵɵlistener(\"click\", function UpperButtonsComponent_ng_container_1_a_1_Template_a_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const btn_r2 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.onEvent(btn_r2, $event);\n    })(\"keyup\", function UpperButtonsComponent_ng_container_1_a_1_Template_a_keyup_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const btn_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.onEvent(btn_r2, $event);\n    });\n    i0.ɵɵelement(1, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const btn_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"sizeConfig\", i0.ɵɵpureFunction2(8, _c0, btn_r2.size == null ? null : btn_r2.size.width, btn_r2.size == null ? null : btn_r2.size.height))(\"ngStyle\", i0.ɵɵpureFunction1(11, _c1, btn_r2.fontSize))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", btn_r2.ariaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", btn_r2.className, \"\");\n    i0.ɵɵpropertyInterpolate(\"title\", btn_r2.title);\n  }\n}\n\nfunction UpperButtonsComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, UpperButtonsComponent_ng_container_1_a_1_Template, 2, 13, \"a\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.buttons)(\"ngForTrackBy\", ctx_r0.trackById);\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\n\nfunction DotsComponent_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function DotsComponent_ng_container_1_div_1_Template_div_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const index_r3 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.onDotEvent(index_r3, $event);\n    })(\"keyup\", function DotsComponent_ng_container_1_div_1_Template_div_keyup_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const index_r3 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.onDotEvent(index_r3, $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const index_r3 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(3, _c2, ctx_r1.isActive(index_r3)))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", (ctx_r1.accessibilityConfig == null ? null : ctx_r1.accessibilityConfig.dotAriaLabel) + \" \" + (index_r3 + 1));\n  }\n}\n\nfunction DotsComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, DotsComponent_ng_container_1_div_1_Template, 1, 5, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.images)(\"ngForTrackBy\", ctx_r0.trackById);\n  }\n}\n\nfunction PreviewsComponent_ng_container_1_ng_container_3_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 7);\n    i0.ɵɵlistener(\"click\", function PreviewsComponent_ng_container_1_ng_container_3_img_1_Template_img_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const preview_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.onImageEvent(preview_r2, $event, ctx_r5.clickAction);\n    })(\"keyup\", function PreviewsComponent_ng_container_1_ng_container_3_img_1_Template_img_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const preview_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onImageEvent(preview_r2, $event, ctx_r8.keyboardAction);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const preview_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMapInterpolate2(\"inside preview-image \", ctx_r4.isActive(preview_r2) ? \"active\" : \"\", \"\", !(ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.clickable) ? \" unclickable\" : \"\", \"\");\n    i0.ɵɵpropertyInterpolate(\"alt\", preview_r2.modal.alt ? preview_r2.modal.alt : \"\");\n    i0.ɵɵproperty(\"src\", (preview_r2.plain == null ? null : preview_r2.plain.img) ? preview_r2.plain == null ? null : preview_r2.plain.img : preview_r2.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", (preview_r2.plain == null ? null : preview_r2.plain.fallbackImg) ? preview_r2.plain == null ? null : preview_r2.plain.fallbackImg : preview_r2.modal.fallbackImg)(\"sizeConfig\", i0.ɵɵpureFunction2(11, _c0, (ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.size) ? ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.size == null ? null : ctx_r4.previewConfig.size.width : ctx_r4.defaultPreviewSize.width, (ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.size) ? ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.size == null ? null : ctx_r4.previewConfig.size.height : ctx_r4.defaultPreviewSize.height))(\"title\", preview_r2.modal.title || preview_r2.modal.title === \"\" ? preview_r2.modal.title : \"\")(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", preview_r2.modal.ariaLabel ? preview_r2.modal.ariaLabel : \"\");\n  }\n}\n\nfunction PreviewsComponent_ng_container_1_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PreviewsComponent_ng_container_1_ng_container_3_img_1_Template, 1, 14, \"img\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const preview_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", preview_r2 == null ? null : preview_r2.modal == null ? null : preview_r2.modal.img);\n  }\n}\n\nfunction PreviewsComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function PreviewsComponent_ng_container_1_Template_a_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onNavigationEvent(\"left\", $event);\n    })(\"keyup\", function PreviewsComponent_ng_container_1_Template_a_keyup_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onNavigationEvent(\"left\", $event);\n    });\n    i0.ɵɵelement(2, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, PreviewsComponent_ng_container_1_ng_container_3_Template, 2, 1, \"ng-container\", 4);\n    i0.ɵɵelementStart(4, \"a\", 5);\n    i0.ɵɵlistener(\"click\", function PreviewsComponent_ng_container_1_Template_a_click_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onNavigationEvent(\"right\", $event);\n    })(\"keyup\", function PreviewsComponent_ng_container_1_Template_a_keyup_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onNavigationEvent(\"right\", $event);\n    });\n    i0.ɵɵelement(5, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tabIndex\", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.start > 0 ? 0 : -1);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.previewScrollPrevAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.start > 0 ? \"left-arrow-preview-image\" : \"empty-arrow-preview-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.previewScrollPrevTitle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.previews)(\"ngForTrackBy\", ctx_r0.trackById);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tabIndex\", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.end < ctx_r0.images.length ? 0 : -1);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.previewScrollNextAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.end < ctx_r0.images.length ? \"right-arrow-preview-image\" : \"empty-arrow-preview-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.previewScrollNextTitle);\n  }\n}\n\nfunction CarouselPreviewsComponent_nav_0_ng_container_4_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 8);\n    i0.ɵɵlistener(\"click\", function CarouselPreviewsComponent_nav_0_ng_container_4_img_1_Template_img_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const preview_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.onImageEvent(preview_r2, $event, ctx_r5.clickAction);\n    })(\"keyup\", function CarouselPreviewsComponent_nav_0_ng_container_4_img_1_Template_img_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const preview_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onImageEvent(preview_r2, $event, ctx_r8.keyboardAction);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const preview_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMapInterpolate2(\"inside preview-image\", ctx_r4.isActive(preview_r2) ? \" active\" : \"\", \"\", !(ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.clickable) ? \" unclickable\" : \"\", \"\");\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r4.getAlt(preview_r2));\n    i0.ɵɵproperty(\"src\", (preview_r2.plain == null ? null : preview_r2.plain.img) ? preview_r2.plain == null ? null : preview_r2.plain.img : preview_r2.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", (preview_r2.plain == null ? null : preview_r2.plain.fallbackImg) ? preview_r2.plain == null ? null : preview_r2.plain.fallbackImg : preview_r2.modal.fallbackImg)(\"sizeConfig\", i0.ɵɵpureFunction2(11, _c0, ctx_r4.previewConfig == null ? null : ctx_r4.previewConfig.width, ctx_r4.previewMaxHeight))(\"title\", ctx_r4.getTitle(preview_r2))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", ctx_r4.getAriaLabel(preview_r2));\n  }\n}\n\nfunction CarouselPreviewsComponent_nav_0_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CarouselPreviewsComponent_nav_0_ng_container_4_img_1_Template, 1, 14, \"img\", 7);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const preview_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", preview_r2 == null ? null : preview_r2.modal == null ? null : preview_r2.modal.img);\n  }\n}\n\nfunction CarouselPreviewsComponent_nav_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"nav\", 1);\n    i0.ɵɵelementStart(1, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function CarouselPreviewsComponent_nav_0_Template_a_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onNavigationEvent(\"left\", $event);\n    })(\"keyup\", function CarouselPreviewsComponent_nav_0_Template_a_keyup_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onNavigationEvent(\"left\", $event);\n    });\n    i0.ɵɵelement(2, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4);\n    i0.ɵɵtemplate(4, CarouselPreviewsComponent_nav_0_ng_container_4_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 6);\n    i0.ɵɵlistener(\"click\", function CarouselPreviewsComponent_nav_0_Template_a_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onNavigationEvent(\"right\", $event);\n    })(\"keyup\", function CarouselPreviewsComponent_nav_0_Template_a_keyup_5_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onNavigationEvent(\"right\", $event);\n    });\n    i0.ɵɵelement(6, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"title\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewsContainerTitle);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewsContainerAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tabIndex\", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.start > 0 ? 0 : -1);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewScrollPrevAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.start > 0 ? \"left-arrow-preview-image\" : \"empty-arrow-preview-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewScrollPrevTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.previews)(\"ngForTrackBy\", ctx_r0.trackById);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tabIndex\", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.end < ctx_r0.images.length ? 0 : -1);\n    i0.ɵɵattribute(\"aria-label\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewScrollNextAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", (ctx_r0.previewConfig == null ? null : ctx_r0.previewConfig.arrows) && ctx_r0.end < ctx_r0.images.length ? \"right-arrow-preview-image\" : \"empty-arrow-preview-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r0.accessibilityConfig == null ? null : ctx_r0.accessibilityConfig.carouselPreviewScrollNextTitle);\n  }\n}\n\nconst _c3 = \".arrow-preview-image[_ngcontent-%COMP%], .right-arrow-preview-image[_ngcontent-%COMP%], .left-arrow-preview-image[_ngcontent-%COMP%], .empty-arrow-preview-image[_ngcontent-%COMP%]{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image[_ngcontent-%COMP%]{background:black;opacity:0}.left-arrow-preview-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.right-arrow-preview-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}\";\n\nfunction CarouselComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵprojection(0);\n  }\n}\n\nfunction CarouselComponent_figure_3_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 12);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_figure_3_a_1_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.onNavigationEvent(\"left\", $event, ctx_r7.clickAction);\n    })(\"keyup\", function CarouselComponent_figure_3_a_1_Template_a_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.onNavigationEvent(\"left\", $event, ctx_r9.keyboardAction);\n    });\n    i0.ɵɵelement(1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"tabIndex\", ctx_r3.isLastImage && !ctx_r3.carouselSlideInfinite ? -1 : 0);\n    i0.ɵɵattribute(\"aria-label\", ctx_r3.accessibilityConfig == null ? null : ctx_r3.accessibilityConfig.carouselPrevImageAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", ctx_r3.isFirstImage && !ctx_r3.carouselSlideInfinite || !ctx_r3.carouselConfig.showArrows ? \"empty-arrow-image\" : \"left-arrow-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r3.accessibilityConfig == null ? null : ctx_r3.accessibilityConfig.carouselPrevImageTitle);\n  }\n}\n\nfunction CarouselComponent_figure_3_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction CarouselComponent_figure_3_figcaption_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"figcaption\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"description\", ctx_r5.carouselImageConfig == null ? null : ctx_r5.carouselImageConfig.description)(\"innerHTML\", ctx_r5.getDescriptionToDisplay(), i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction CarouselComponent_figure_3_a_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_figure_3_a_5_Template_a_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.onNavigationEvent(\"right\", $event, ctx_r10.clickAction);\n    })(\"keyup\", function CarouselComponent_figure_3_a_5_Template_a_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.onNavigationEvent(\"right\", $event, ctx_r12.keyboardAction);\n    });\n    i0.ɵɵelement(1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"tabIndex\", ctx_r6.isLastImage && !ctx_r6.carouselSlideInfinite ? -1 : 0);\n    i0.ɵɵattribute(\"aria-label\", ctx_r6.accessibilityConfig == null ? null : ctx_r6.accessibilityConfig.carouselNextImageAriaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"inside \", ctx_r6.isLastImage && !ctx_r6.carouselSlideInfinite || !ctx_r6.carouselConfig.showArrows ? \"empty-arrow-image\" : \"right-arrow-image\", \"\");\n    i0.ɵɵproperty(\"title\", ctx_r6.accessibilityConfig == null ? null : ctx_r6.accessibilityConfig.carouselNextImageTitle);\n  }\n}\n\nconst _c4 = function (a0) {\n  return {\n    width: a0,\n    height: \"\"\n  };\n};\n\nconst _c5 = function (a0, a1) {\n  return {\n    maxWidth: a0,\n    maxHeight: a1\n  };\n};\n\nfunction CarouselComponent_figure_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"figure\", 4);\n    i0.ɵɵtemplate(1, CarouselComponent_figure_3_a_1_Template, 2, 6, \"a\", 5);\n    i0.ɵɵtemplate(2, CarouselComponent_figure_3_ng_container_2_Template, 1, 0, \"ng-container\", 6);\n    i0.ɵɵelementStart(3, \"img\", 7);\n    i0.ɵɵlistener(\"click\", function CarouselComponent_figure_3_Template_img_click_3_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onClickCurrentImage();\n    })(\"swipeleft\", function CarouselComponent_figure_3_Template_img_swipeleft_3_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.swipe($event.type);\n    })(\"swiperight\", function CarouselComponent_figure_3_Template_img_swiperight_3_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.swipe($event.type);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CarouselComponent_figure_3_figcaption_4_Template, 1, 2, \"figcaption\", 8);\n    i0.ɵɵtemplate(5, CarouselComponent_figure_3_a_5_Template, 2, 6, \"a\", 9);\n    i0.ɵɵelementStart(6, \"div\", 10);\n    i0.ɵɵelementStart(7, \"ks-dots\", 11);\n    i0.ɵɵlistener(\"clickDot\", function CarouselComponent_figure_3_Template_ks_dots_clickDot_7_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.onClickDot($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(2);\n\n    i0.ɵɵproperty(\"sizeConfig\", i0.ɵɵpureFunction1(18, _c4, ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.maxWidth));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.showArrows);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"object-fit\", ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.objectFit);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r2.currentImage.modal.alt ? ctx_r2.currentImage.modal.alt : ctx_r2.getAltDescriptionByImage());\n    i0.ɵɵproperty(\"maxSizeConfig\", i0.ɵɵpureFunction2(20, _c5, ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.maxWidth, ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.maxHeight))(\"src\", ctx_r2.currentImage.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", ctx_r2.currentImage.modal.fallbackImg)(\"title\", ctx_r2.currentImage.modal.title || ctx_r2.currentImage.modal.title === \"\" ? ctx_r2.currentImage.modal.title : ctx_r2.getTitleToDisplay())(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", ctx_r2.currentImage.modal.ariaLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.getDescriptionToDisplay() !== \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.carouselConfig == null ? null : ctx_r2.carouselConfig.showArrows);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r2.id)(\"currentImage\", ctx_r2.currentImage)(\"images\", ctx_r2.images)(\"dotsConfig\", ctx_r2.carouselDotsConfig);\n  }\n}\n\nconst _c6 = function (a0) {\n  return {\n    maxWidth: a0,\n    maxHeight: \"\"\n  };\n};\n\nconst _c7 = [\"*\"];\nconst _c8 = \".arrow-image[_ngcontent-%COMP%], .right-arrow-image[_ngcontent-%COMP%], .left-arrow-image[_ngcontent-%COMP%], .empty-arrow-image[_ngcontent-%COMP%]{width:30px;height:30px;background-size:30px}.empty-arrow-image[_ngcontent-%COMP%]{background:black;opacity:0}.left-arrow-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.right-arrow-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}\";\n\nfunction PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 5);\n    i0.ɵɵlistener(\"click\", function PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_img_1_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.showModalGalleryByImage(imgCol_r4);\n    })(\"keyup\", function PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_img_1_Template_img_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.onNavigationEvent($event, imgCol_r4);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", (imgCol_r4.plain == null ? null : imgCol_r4.plain.alt) ? imgCol_r4.plain == null ? null : imgCol_r4.plain.alt : ctx_r9.getAltPlainDescriptionByImage(imgCol_r4));\n    i0.ɵɵproperty(\"src\", (imgCol_r4.plain == null ? null : imgCol_r4.plain.img) ? imgCol_r4.plain == null ? null : imgCol_r4.plain.img : imgCol_r4.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", (imgCol_r4.plain == null ? null : imgCol_r4.plain.fallbackImg) ? imgCol_r4.plain == null ? null : imgCol_r4.plain.fallbackImg : imgCol_r4.modal.fallbackImg)(\"sizeConfig\", i0.ɵɵpureFunction2(7, _c0, ctx_r9.size == null ? null : ctx_r9.size.width, ctx_r9.size == null ? null : ctx_r9.size.height))(\"title\", (imgCol_r4.plain == null ? null : imgCol_r4.plain.title) || (imgCol_r4.plain == null ? null : imgCol_r4.plain.title) === \"\" ? imgCol_r4.plain == null ? null : imgCol_r4.plain.title : ctx_r9.getTitleDisplay(imgCol_r4))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", imgCol_r4.plain == null ? null : imgCol_r4.plain.ariaLabel);\n  }\n}\n\nfunction PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_img_1_Template, 1, 10, \"img\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const imgCol_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", imgCol_r4 == null ? null : imgCol_r4.modal == null ? null : imgCol_r4.modal.img);\n  }\n}\n\nfunction PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_a_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 7);\n    i0.ɵɵlistener(\"click\", function PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_a_0_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return ctx_r18.showModalGalleryByImage(imgCol_r4);\n    })(\"keyup\", function PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_a_0_Template_a_keyup_0_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return ctx_r21.onNavigationEvent($event, imgCol_r4);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const imgCol_r4 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleMap(ctx_r17.plainGalleryConfig == null ? null : ctx_r17.plainGalleryConfig.advanced == null ? null : ctx_r17.plainGalleryConfig.advanced.additionalBackground);\n    i0.ɵɵproperty(\"image\", imgCol_r4)(\"sizeConfig\", i0.ɵɵpureFunction2(7, _c0, ctx_r17.size == null ? null : ctx_r17.size.width, ctx_r17.size == null ? null : ctx_r17.size.height))(\"title\", (imgCol_r4.plain == null ? null : imgCol_r4.plain.title) || (imgCol_r4.plain == null ? null : imgCol_r4.plain.title) === \"\" ? imgCol_r4.plain == null ? null : imgCol_r4.plain.title : ctx_r17.getTitleDisplay(imgCol_r4))(\"tabIndex\", 0);\n    i0.ɵɵattribute(\"aria-label\", imgCol_r4.plain == null ? null : imgCol_r4.plain.ariaLabel);\n  }\n}\n\nfunction PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_a_0_Template, 1, 10, \"a\", 6);\n  }\n\n  if (rf & 2) {\n    const imgCol_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngIf\", imgCol_r4 == null ? null : imgCol_r4.modal == null ? null : imgCol_r4.modal.img);\n  }\n}\n\nfunction PlainGalleryComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PlainGalleryComponent_ng_container_1_ng_container_1_ng_container_1_Template, 2, 1, \"ng-container\", 2);\n    i0.ɵɵtemplate(2, PlainGalleryComponent_ng_container_1_ng_container_1_ng_template_2_Template, 1, 1, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(3);\n\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r3.plainGalleryConfig == null ? null : ctx_r3.plainGalleryConfig.advanced == null ? null : ctx_r3.plainGalleryConfig.advanced.aTags))(\"ngIfElse\", _r7);\n  }\n}\n\nfunction PlainGalleryComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PlainGalleryComponent_ng_container_1_ng_container_1_Template, 4, 2, \"ng-container\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const imgRow_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", imgRow_r1);\n  }\n}\n\nconst ENTER_KEY = 'Enter';\n/**\n * Code of the keyboard's key `enter`\n */\n\nconst ENTER_CODE = 'Enter';\n/**\n * Key of the keyboard's key `esc`\n */\n\nconst ESC_KEY = 'Escape';\n/**\n * Code of the keyboard's key `esc`\n */\n\nconst ESC_CODE = 'Escape';\n/**\n * Key of the keyboard's key 'right arrow'\n */\n\nconst RIGHT_ARROW_KEY = 'ArrowRight';\n/**\n * Code of the keyboard's key 'right arrow'\n */\n\nconst RIGHT_ARROW_CODE = 'ArrowRight';\n/**\n * Key of the keyboard's key 'left arrow'\n */\n\nconst LEFT_ARROW_KEY = 'ArrowLeft';\n/**\n * Code of the keyboard's key 'left arrow'\n */\n\nconst LEFT_ARROW_CODE = 'ArrowLeft';\n/**\n * Key of the keyboard's key 'left arrow'\n */\n\nconst UP_ARROW_KEY = 'ArrowUp';\n/**\n * Code of the keyboard's key 'left arrow'\n */\n\nconst UP_ARROW_CODE = 'ArrowUp';\n/**\n * Key of the keyboard's key 'left arrow'\n */\n\nconst DOWN_ARROW_KEY = 'ArrowDown';\n/**\n * Code of the keyboard's key 'left arrow'\n */\n\nconst DOWN_ARROW_CODE = 'ArrowDown';\n/**\n * Key of the keyboard's key `space`\n */\n\nconst SPACE_KEY = '';\n/**\n * Code of the keyboard's key `space`\n */\n\nconst SPACE_CODE = 'Space';\n/**\n * Const to represent the right direction\n */\n\nconst DIRECTION_RIGHT = 'right';\n/**\n * Const to represent the left direction\n */\n\nconst DIRECTION_LEFT = 'left';\n/**\n * Keycode of the main mouse button\n */\n\nconst MOUSE_MAIN_BUTTON_CLICK = 0;\n/**\n * Const NEXT\n */\n\nconst NEXT = 1;\n/**\n * Const PREV\n */\n\nconst PREV = -1;\n/**\n * Const NOTHING to represents a situation when it isn't both NEXT and PREV\n */\n\nconst NOTHING = 0;\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Provides some useful methods to add accessibility features to subclasses.\n * In particular, it exposes a method to handle navigation event with both Keyboard and Mouse\n * and another with also the direction (right or left).\n */\n\nclass AccessibleComponent {\n  constructor() {}\n  /**\n   * Method to handle navigation events with both Keyboard and Mouse.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent | MouseEvent event payload\n   * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleNavigationEvent(direction, event) {\n    if (!event) {\n      return NOTHING;\n    }\n\n    if (event instanceof KeyboardEvent) {\n      return this.handleKeyboardNavigationEvent(direction, event);\n    } else if (event instanceof MouseEvent) {\n      return this.handleMouseNavigationEvent(direction, event);\n    }\n\n    return NOTHING;\n  }\n  /**\n   * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n   * @param event KeyboardEvent | MouseEvent payload\n   * @returns number 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleImageEvent(event) {\n    if (!event) {\n      return NOTHING;\n    }\n\n    if (event instanceof KeyboardEvent) {\n      return this.handleImageKeyboardEvent(event);\n    } else if (event instanceof MouseEvent) {\n      return this.handleImageMouseEvent(event);\n    }\n\n    return NOTHING;\n  }\n  /**\n   * Private method to handle keyboard events over an image.\n   * @param event KeyboardEvent payload\n   * @returns number 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleImageKeyboardEvent(event) {\n    const key = event.code;\n\n    if (key === SPACE_CODE || key === ENTER_CODE) {\n      return NEXT;\n    }\n\n    return NOTHING;\n  }\n  /**\n   * Private method to handle mouse events over an image.\n   * @param MouseEvent event payload\n   * @returns number 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleImageMouseEvent(event) {\n    const mouseBtn = event.button;\n\n    if (mouseBtn === MOUSE_MAIN_BUTTON_CLICK) {\n      return NEXT;\n    }\n\n    return NOTHING;\n  }\n  /**\n   * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent event payload\n   * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleKeyboardNavigationEvent(direction, event) {\n    const key = event.code;\n\n    if (key === SPACE_CODE || key === ENTER_CODE) {\n      return direction === DIRECTION_RIGHT ? NEXT : PREV;\n    }\n\n    return NOTHING;\n  }\n  /**\n   * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param MouseEvent event payload\n   * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n   */\n\n\n  handleMouseNavigationEvent(direction, event) {\n    const mouseBtn = event.button;\n\n    if (mouseBtn === MOUSE_MAIN_BUTTON_CLICK) {\n      return direction === DIRECTION_RIGHT ? NEXT : PREV;\n    }\n\n    return NOTHING;\n  }\n\n}\n\nAccessibleComponent.ɵfac = function AccessibleComponent_Factory(t) {\n  return new (t || AccessibleComponent)();\n};\n\nAccessibleComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AccessibleComponent,\n  selectors: [[\"ks-accessible\"]],\n  decls: 0,\n  vars: 0,\n  template: function AccessibleComponent_Template(rf, ctx) {},\n  encapsulation: 2,\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AccessibleComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-accessible',\n      template: ``,\n      changeDetection: ChangeDetectionStrategy.OnPush\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Class `Image` that represents an image with both `modal` and `plain` configurations.\n * Both image `id` and `modal` are mandatory, instead `plain` is optional.\n */\n\n\nclass Image {\n  constructor(id, modal, plain) {\n    this.id = id;\n    this.modal = modal;\n    this.plain = plain;\n  }\n\n}\n/**\n * Class `ImageEvent` that represents the event payload with the result and the triggered action.\n * It also contains the source id of the gallery that emitted this event\n */\n\n\nclass ImageEvent {\n  constructor(galleryId, action, result) {\n    this.galleryId = galleryId;\n    this.action = action;\n    this.result = result;\n  }\n\n}\n/**\n * Class `ImageModalEvent` that represents the event payload with galleryId, result and the triggered action.\n */\n\n\nclass ImageModalEvent extends ImageEvent {\n  constructor(galleryId, action, result) {\n    super(galleryId, action, result);\n  }\n\n}\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Enum `Action` with a list of possible actions, based on the source of the action.\n */\n\n\nvar Action;\n\n(function (Action) {\n  Action[Action[\"NORMAL\"] = 0] = \"NORMAL\";\n  Action[Action[\"CLICK\"] = 1] = \"CLICK\";\n  Action[Action[\"KEYBOARD\"] = 2] = \"KEYBOARD\";\n  Action[Action[\"SWIPE\"] = 3] = \"SWIPE\";\n  Action[Action[\"LOAD\"] = 4] = \"LOAD\";\n  Action[Action[\"AUTOPLAY\"] = 5] = \"AUTOPLAY\";\n})(Action || (Action = {}));\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Utility function to get the index of the input `image` from `arrayOfImages`\n * @param Image image to get the index. The image 'id' must be a number >= 0\n * @param Image[] arrayOfImages to search the image within it\n * @returns number the index of the image. -1 if not found.\n * @throws an Error if either image or arrayOfImages are not valid,\n *  or if the input image doesn't contain an 'id', or the 'id' is < 0\n */\n\n\nfunction getIndex(image, arrayOfImages) {\n  if (!image) {\n    throw new Error('image must be a valid Image object');\n  }\n\n  if (!arrayOfImages) {\n    throw new Error('arrayOfImages must be a valid Image[]');\n  }\n\n  if (!image.id && image.id !== 0) {\n    // id = 0 is admitted\n    throw new Error(`A numeric Image 'id' is mandatory`);\n  }\n\n  if (image.id < 0) {\n    throw new Error(`Image 'id' must be >= 0`);\n  }\n\n  return arrayOfImages.findIndex(val => val.id === image.id);\n}\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Enum `DescriptionStrategy` with keys and their relative key codes.\n */\n\n\nvar DescriptionStrategy;\n\n(function (DescriptionStrategy) {\n  DescriptionStrategy[DescriptionStrategy[\"ALWAYS_HIDDEN\"] = 1] = \"ALWAYS_HIDDEN\";\n  DescriptionStrategy[DescriptionStrategy[\"ALWAYS_VISIBLE\"] = 2] = \"ALWAYS_VISIBLE\";\n  DescriptionStrategy[DescriptionStrategy[\"HIDE_IF_EMPTY\"] = 3] = \"HIDE_IF_EMPTY\";\n})(DescriptionStrategy || (DescriptionStrategy = {}));\n/**\n * Default accessibility configuration.\n */\n\n\nconst KS_DEFAULT_ACCESSIBILITY_CONFIG = {\n  backgroundAriaLabel: 'Modal gallery full screen background',\n  backgroundTitle: '',\n  plainGalleryContentAriaLabel: 'Plain gallery content',\n  plainGalleryContentTitle: '',\n  modalGalleryContentAriaLabel: 'Modal gallery content',\n  modalGalleryContentTitle: '',\n  loadingSpinnerAriaLabel: 'The current image is loading. Please be patient.',\n  loadingSpinnerTitle: 'The current image is loading. Please be patient.',\n  mainContainerAriaLabel: 'Current image and navigation',\n  mainContainerTitle: '',\n  mainPrevImageAriaLabel: 'Previous image',\n  mainPrevImageTitle: 'Previous image',\n  mainNextImageAriaLabel: 'Next image',\n  mainNextImageTitle: 'Next image',\n  dotsContainerAriaLabel: 'Image navigation dots',\n  dotsContainerTitle: '',\n  dotAriaLabel: 'Navigate to image number',\n  previewsContainerAriaLabel: 'Image previews',\n  previewsContainerTitle: '',\n  previewScrollPrevAriaLabel: 'Scroll previous previews',\n  previewScrollPrevTitle: 'Scroll previous previews',\n  previewScrollNextAriaLabel: 'Scroll next previews',\n  previewScrollNextTitle: 'Scroll next previews',\n  carouselContainerAriaLabel: 'Current image and navigation',\n  carouselContainerTitle: '',\n  carouselPrevImageAriaLabel: 'Previous image',\n  carouselPrevImageTitle: 'Previous image',\n  carouselNextImageAriaLabel: 'Next image',\n  carouselNextImageTitle: 'Next image',\n  carouselPreviewsContainerAriaLabel: 'Image previews',\n  carouselPreviewsContainerTitle: '',\n  carouselPreviewScrollPrevAriaLabel: 'Scroll previous previews',\n  carouselPreviewScrollPrevTitle: 'Scroll previous previews',\n  carouselPreviewScrollNextAriaLabel: 'Scroll next previews',\n  carouselPreviewScrollNextTitle: 'Scroll next previews'\n};\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Enum `ButtonsStrategy` to configure the logic of a button.\n */\n\nvar ButtonsStrategy;\n\n(function (ButtonsStrategy) {\n  // don't use 0 here\n  // the first index is 1 and all of the following members are auto-incremented from that point on\n  ButtonsStrategy[ButtonsStrategy[\"DEFAULT\"] = 1] = \"DEFAULT\";\n  ButtonsStrategy[ButtonsStrategy[\"SIMPLE\"] = 2] = \"SIMPLE\";\n  ButtonsStrategy[ButtonsStrategy[\"ADVANCED\"] = 3] = \"ADVANCED\";\n  ButtonsStrategy[ButtonsStrategy[\"FULL\"] = 4] = \"FULL\";\n  ButtonsStrategy[ButtonsStrategy[\"CUSTOM\"] = 5] = \"CUSTOM\";\n})(ButtonsStrategy || (ButtonsStrategy = {}));\n/**\n * Enum `ButtonType` is the type of a button.\n */\n\n\nvar ButtonType;\n\n(function (ButtonType) {\n  // don't use 0 here\n  // the first index is 1 and all of the following members are auto-incremented from that point on\n  ButtonType[ButtonType[\"DELETE\"] = 1] = \"DELETE\";\n  ButtonType[ButtonType[\"EXTURL\"] = 2] = \"EXTURL\";\n  ButtonType[ButtonType[\"DOWNLOAD\"] = 3] = \"DOWNLOAD\";\n  ButtonType[ButtonType[\"CLOSE\"] = 4] = \"CLOSE\";\n  ButtonType[ButtonType[\"CUSTOM\"] = 5] = \"CUSTOM\";\n  ButtonType[ButtonType[\"FULLSCREEN\"] = 6] = \"FULLSCREEN\";\n})(ButtonType || (ButtonType = {}));\n/**\n * Array of admitted types of buttons.\n */\n\n\nconst WHITELIST_BUTTON_TYPES = [ButtonType.FULLSCREEN, ButtonType.DELETE, ButtonType.EXTURL, ButtonType.DOWNLOAD, ButtonType.CLOSE, ButtonType.CUSTOM];\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Class `LineLayout` to configure a linear plain gallery.\n */\n\nclass LineLayout {\n  constructor(size, breakConfig, justify) {\n    this.size = size;\n    this.breakConfig = breakConfig;\n    this.justify = justify;\n  }\n\n}\n/**\n * Class `GridLayout` to configure a grid plain gallery.\n */\n\n\nclass GridLayout {\n  constructor(size, breakConfig) {\n    this.size = size;\n    this.breakConfig = breakConfig;\n  }\n\n}\n/**\n * Enum `PlainGalleryStrategy` to choose the behaviour of the plain gallery.\n */\n\n\nvar PlainGalleryStrategy;\n\n(function (PlainGalleryStrategy) {\n  // don't use 0 here\n  // the first index is 1 and all of the following members are auto-incremented from that point on\n  PlainGalleryStrategy[PlainGalleryStrategy[\"ROW\"] = 1] = \"ROW\";\n  PlainGalleryStrategy[PlainGalleryStrategy[\"COLUMN\"] = 2] = \"COLUMN\";\n  PlainGalleryStrategy[PlainGalleryStrategy[\"GRID\"] = 3] = \"GRID\";\n  PlainGalleryStrategy[PlainGalleryStrategy[\"CUSTOM\"] = 4] = \"CUSTOM\"; // full custom strategy\n})(PlainGalleryStrategy || (PlainGalleryStrategy = {}));\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Enum `LoadingType` with a list of possible types.\n */\n\n\nvar LoadingType;\n\n(function (LoadingType) {\n  LoadingType[LoadingType[\"STANDARD\"] = 1] = \"STANDARD\";\n  LoadingType[LoadingType[\"CIRCULAR\"] = 2] = \"CIRCULAR\";\n  LoadingType[LoadingType[\"BARS\"] = 3] = \"BARS\";\n  LoadingType[LoadingType[\"DOTS\"] = 4] = \"DOTS\";\n  LoadingType[LoadingType[\"CUBE_FLIPPING\"] = 5] = \"CUBE_FLIPPING\";\n  LoadingType[LoadingType[\"CIRCLES\"] = 6] = \"CIRCLES\";\n  LoadingType[LoadingType[\"EXPLOSING_SQUARES\"] = 7] = \"EXPLOSING_SQUARES\";\n})(LoadingType || (LoadingType = {}));\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n\nconst DEFAULT_PREVIEW_SIZE = {\n  height: '50px',\n  width: 'auto'\n};\nconst DEFAULT_LAYOUT = new LineLayout(DEFAULT_PREVIEW_SIZE, {\n  length: -1,\n  wrap: false\n}, 'flex-start');\nconst DEFAULT_PLAIN_CONFIG = {\n  strategy: PlainGalleryStrategy.ROW,\n  layout: DEFAULT_LAYOUT,\n  advanced: {\n    aTags: false,\n    additionalBackground: '50% 50%/cover'\n  }\n};\nconst DEFAULT_LOADING = {\n  enable: true,\n  type: LoadingType.STANDARD\n};\nconst DEFAULT_DESCRIPTION_STYLE = {\n  bgColor: 'rgba(0, 0, 0, .5)',\n  textColor: 'white',\n  marginTop: '0px',\n  marginBottom: '0px',\n  marginLeft: '0px',\n  marginRight: '0px'\n};\nconst DEFAULT_DESCRIPTION = {\n  strategy: DescriptionStrategy.ALWAYS_VISIBLE,\n  imageText: 'Image ',\n  numberSeparator: '/',\n  beforeTextDescription: ' - ',\n  style: DEFAULT_DESCRIPTION_STYLE\n};\nconst DEFAULT_CAROUSEL_DESCRIPTION = {\n  strategy: DescriptionStrategy.ALWAYS_HIDDEN,\n  imageText: 'Image ',\n  numberSeparator: '/',\n  beforeTextDescription: ' - ',\n  style: DEFAULT_DESCRIPTION_STYLE\n};\nconst DEFAULT_CURRENT_IMAGE_CONFIG = {\n  navigateOnClick: true,\n  loadingConfig: DEFAULT_LOADING,\n  description: DEFAULT_DESCRIPTION,\n  downloadable: false,\n  invertSwipe: false\n};\nconst DEFAULT_CAROUSEL_IMAGE_CONFIG = {\n  description: DEFAULT_CAROUSEL_DESCRIPTION,\n  invertSwipe: false\n};\nconst DEFAULT_CURRENT_CAROUSEL_CONFIG = {\n  maxWidth: '100%',\n  maxHeight: '400px',\n  showArrows: true,\n  objectFit: 'cover',\n  keyboardEnable: true,\n  modalGalleryEnable: false\n};\nconst DEFAULT_CURRENT_CAROUSEL_PLAY = {\n  autoPlay: true,\n  interval: 5000,\n  pauseOnHover: true\n};\nconst DEFAULT_CAROUSEL_BREAKPOINTS = {\n  xSmall: 100,\n  small: 100,\n  medium: 150,\n  large: 200,\n  xLarge: 200\n};\nconst DEFAULT_CAROUSEL_PREVIEWS_CONFIG = {\n  visible: true,\n  number: 4,\n  arrows: true,\n  clickable: true,\n  width: 100 / 4 + '%',\n  maxHeight: '200px',\n  breakpoints: DEFAULT_CAROUSEL_BREAKPOINTS\n};\nconst DEFAULT_KEYBOARD_SERVICE_CONFIG = {\n  shortcuts: ['ctrl+s', 'meta+s'],\n  disableSsrWorkaround: false\n};\nconst DEFAULT_SLIDE_CONFIG = {\n  infinite: false,\n  playConfig: {\n    autoPlay: false,\n    interval: 5000,\n    pauseOnHover: true\n  },\n  sidePreviews: {\n    show: true,\n    size: {\n      width: '100px',\n      height: 'auto'\n    }\n  }\n};\nconst DEFAULT_PREVIEW_CONFIG = {\n  visible: true,\n  number: 3,\n  arrows: true,\n  clickable: true,\n  size: DEFAULT_PREVIEW_SIZE\n};\nconst DEFAULT_CONFIG = Object.freeze({\n  slideConfig: DEFAULT_SLIDE_CONFIG,\n  accessibilityConfig: KS_DEFAULT_ACCESSIBILITY_CONFIG,\n  previewConfig: DEFAULT_PREVIEW_CONFIG,\n  buttonsConfig: {\n    visible: true,\n    strategy: ButtonsStrategy.DEFAULT\n  },\n  dotsConfig: {\n    visible: true\n  },\n  plainGalleryConfig: DEFAULT_PLAIN_CONFIG,\n  currentImageConfig: DEFAULT_CURRENT_IMAGE_CONFIG,\n  keyboardConfig: undefined,\n  carouselConfig: DEFAULT_CURRENT_CAROUSEL_CONFIG,\n  carouselImageConfig: DEFAULT_CAROUSEL_IMAGE_CONFIG,\n  carouselPreviewsConfig: DEFAULT_CAROUSEL_PREVIEWS_CONFIG,\n  carouselPlayConfig: DEFAULT_CURRENT_CAROUSEL_PLAY,\n  carouselDotsConfig: {\n    visible: true\n  },\n  carouselSlideInfinite: true,\n  enableCloseOutside: true,\n  keyboardServiceConfig: DEFAULT_KEYBOARD_SERVICE_CONFIG\n});\n/**\n * Service to handle library configuration in a unique place\n */\n\nclass ConfigService {\n  constructor() {\n    this.configMap = new Map();\n  }\n\n  getConfig(id) {\n    this.initIfNotExists(id);\n    return this.configMap.get(id);\n  }\n\n  setConfig(id, obj) {\n    this.initIfNotExists(id);\n\n    if (!obj) {\n      return;\n    }\n\n    if (!DEFAULT_CONFIG || !DEFAULT_CONFIG.slideConfig || !DEFAULT_CONFIG.slideConfig.sidePreviews || !DEFAULT_CONFIG.previewConfig || !DEFAULT_CONFIG.previewConfig.size || !DEFAULT_CONFIG.previewConfig.number || !DEFAULT_CONFIG.plainGalleryConfig || !DEFAULT_CONFIG.currentImageConfig || !DEFAULT_CONFIG.currentImageConfig || !DEFAULT_CONFIG.currentImageConfig.description || !DEFAULT_CONFIG.carouselImageConfig || !DEFAULT_CONFIG.carouselImageConfig.description || !DEFAULT_CONFIG.carouselPreviewsConfig || !DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints || !DEFAULT_CAROUSEL_PREVIEWS_CONFIG.number) {\n      throw new Error('Internal library error - DEFAULT_CONFIG must be fully initialized!!!');\n    }\n\n    const newConfig = Object.assign({}, this.configMap.get(id));\n\n    if (obj.slideConfig) {\n      let playConfig;\n      let sidePreviews;\n      let size;\n\n      if (obj.slideConfig.playConfig) {\n        playConfig = Object.assign({}, DEFAULT_CONFIG.slideConfig.playConfig, obj.slideConfig.playConfig);\n      } else {\n        playConfig = DEFAULT_CONFIG.slideConfig.playConfig;\n      }\n\n      if (obj.slideConfig.sidePreviews) {\n        if (obj.slideConfig.sidePreviews.size) {\n          size = Object.assign({}, DEFAULT_CONFIG.slideConfig.sidePreviews.size, obj.slideConfig.sidePreviews.size);\n        } else {\n          size = DEFAULT_CONFIG.slideConfig.sidePreviews.size;\n        }\n\n        sidePreviews = Object.assign({}, DEFAULT_CONFIG.slideConfig.sidePreviews, obj.slideConfig.sidePreviews);\n      } else {\n        sidePreviews = DEFAULT_CONFIG.slideConfig.sidePreviews;\n        size = DEFAULT_CONFIG.slideConfig.sidePreviews.size;\n      }\n\n      const newSlideConfig = Object.assign({}, DEFAULT_CONFIG.slideConfig, obj.slideConfig);\n      newSlideConfig.playConfig = playConfig;\n      newSlideConfig.sidePreviews = sidePreviews;\n      newSlideConfig.sidePreviews.size = size;\n      newConfig.slideConfig = newSlideConfig;\n    }\n\n    if (obj.accessibilityConfig) {\n      newConfig.accessibilityConfig = Object.assign({}, DEFAULT_CONFIG.accessibilityConfig, obj.accessibilityConfig);\n    }\n\n    if (obj.previewConfig) {\n      let size;\n      let num;\n\n      if (obj.previewConfig.size) {\n        size = Object.assign({}, DEFAULT_CONFIG.previewConfig.size, obj.previewConfig.size);\n      } else {\n        size = DEFAULT_CONFIG.previewConfig.size;\n      }\n\n      if (obj.previewConfig.number) {\n        if (obj.previewConfig.number <= 0) {\n          // if number is <= 0 reset to default\n          num = DEFAULT_CONFIG.previewConfig.number;\n        } else {\n          num = obj.previewConfig.number;\n        }\n      } else {\n        num = DEFAULT_CONFIG.previewConfig.number;\n      }\n\n      const newPreviewConfig = Object.assign({}, DEFAULT_CONFIG.previewConfig, obj.previewConfig);\n      newPreviewConfig.size = size;\n      newPreviewConfig.number = num;\n      newConfig.previewConfig = newPreviewConfig;\n    }\n\n    if (obj.buttonsConfig) {\n      newConfig.buttonsConfig = Object.assign({}, DEFAULT_CONFIG.buttonsConfig, obj.buttonsConfig);\n    }\n\n    if (obj.dotsConfig) {\n      newConfig.dotsConfig = Object.assign({}, DEFAULT_CONFIG.dotsConfig, obj.dotsConfig);\n    }\n\n    if (obj.plainGalleryConfig) {\n      let advanced;\n      let layout;\n\n      if (obj.plainGalleryConfig.advanced) {\n        advanced = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig.advanced, obj.plainGalleryConfig.advanced);\n      } else {\n        advanced = DEFAULT_CONFIG.plainGalleryConfig.advanced;\n      }\n\n      if (obj.plainGalleryConfig.layout) {\n        // it isn't mandatory to use assign, because obj.plainGalleryConfig.layout is an instance of class (LineaLayout, GridLayout)\n        layout = obj.plainGalleryConfig.layout;\n      } else {\n        layout = DEFAULT_CONFIG.plainGalleryConfig.layout;\n      }\n\n      const newPlainGalleryConfig = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig, obj.plainGalleryConfig);\n      newPlainGalleryConfig.layout = layout;\n      newPlainGalleryConfig.advanced = advanced;\n      newConfig.plainGalleryConfig = initPlainGalleryConfig(newPlainGalleryConfig);\n    }\n\n    if (obj.currentImageConfig) {\n      let loading;\n      let description;\n      let descriptionStyle;\n\n      if (obj.currentImageConfig.loadingConfig) {\n        loading = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.loadingConfig, obj.currentImageConfig.loadingConfig);\n      } else {\n        loading = DEFAULT_CONFIG.currentImageConfig.loadingConfig;\n      }\n\n      if (obj.currentImageConfig.description) {\n        description = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.description, obj.currentImageConfig.description);\n\n        if (obj.currentImageConfig.description.style) {\n          descriptionStyle = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.description.style, obj.currentImageConfig.description.style);\n        } else {\n          descriptionStyle = DEFAULT_CONFIG.currentImageConfig.description.style;\n        }\n      } else {\n        description = DEFAULT_CONFIG.currentImageConfig.description;\n        descriptionStyle = DEFAULT_CONFIG.currentImageConfig.description.style;\n      }\n\n      const newCurrentImageConfig = Object.assign({}, DEFAULT_CONFIG.currentImageConfig, obj.currentImageConfig);\n      newCurrentImageConfig.loadingConfig = loading;\n      newCurrentImageConfig.description = description;\n      newCurrentImageConfig.description.style = descriptionStyle;\n      newConfig.currentImageConfig = newCurrentImageConfig;\n    }\n\n    if (obj.keyboardConfig) {\n      newConfig.keyboardConfig = Object.assign({}, DEFAULT_CONFIG.keyboardConfig, obj.keyboardConfig);\n    } // carousel\n\n\n    if (obj.carouselConfig) {\n      newConfig.carouselConfig = Object.assign({}, DEFAULT_CONFIG.carouselConfig, obj.carouselConfig);\n    }\n\n    if (obj.carouselImageConfig) {\n      let description;\n      let descriptionStyle;\n\n      if (obj.carouselImageConfig.description) {\n        description = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig.description, obj.carouselImageConfig.description);\n\n        if (obj.carouselImageConfig.description.style) {\n          descriptionStyle = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig.description.style, obj.carouselImageConfig.description.style);\n        } else {\n          descriptionStyle = DEFAULT_CONFIG.carouselImageConfig.description.style;\n        }\n      } else {\n        description = DEFAULT_CONFIG.carouselImageConfig.description;\n        descriptionStyle = DEFAULT_CONFIG.carouselImageConfig.description.style;\n      }\n\n      const newCarouselImageConfig = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig, obj.carouselImageConfig);\n      newCarouselImageConfig.description = description;\n      newCarouselImageConfig.description.style = descriptionStyle;\n      newConfig.carouselImageConfig = newCarouselImageConfig;\n    }\n\n    if (obj.carouselPlayConfig) {\n      // check values\n      if (obj.carouselPlayConfig.interval <= 0) {\n        throw new Error(`Carousel's interval must be a number >= 0`);\n      }\n\n      newConfig.carouselPlayConfig = Object.assign({}, DEFAULT_CONFIG.carouselPlayConfig, obj.carouselPlayConfig);\n    }\n\n    if (obj.carouselPreviewsConfig) {\n      // check values\n      let num;\n      let breakpoints;\n\n      if (!obj.carouselPreviewsConfig.number || obj.carouselPreviewsConfig.number <= 0) {\n        num = DEFAULT_CAROUSEL_PREVIEWS_CONFIG.number;\n      } else {\n        num = obj.carouselPreviewsConfig.number;\n      }\n\n      if (obj.carouselPreviewsConfig.breakpoints) {\n        breakpoints = Object.assign({}, DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints, obj.carouselPreviewsConfig.breakpoints);\n      } else {\n        breakpoints = DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints;\n      }\n\n      newConfig.carouselPreviewsConfig = Object.assign({}, DEFAULT_CONFIG.carouselPreviewsConfig, obj.carouselPreviewsConfig);\n      newConfig.carouselPreviewsConfig.number = num;\n      newConfig.carouselPreviewsConfig.breakpoints = breakpoints; // Init preview image width based on the number of previews in PreviewConfig\n      // Don't move this line above, because I need to be sure that both configPreview.number\n      // and configPreview.size are initialized\n\n      newConfig.carouselPreviewsConfig.width = 100 / newConfig.carouselPreviewsConfig.number + '%';\n    }\n\n    if (obj.carouselDotsConfig) {\n      newConfig.carouselDotsConfig = Object.assign({}, DEFAULT_CONFIG.carouselDotsConfig, obj.carouselDotsConfig);\n    }\n\n    if (obj.carouselSlideInfinite === undefined) {\n      newConfig.carouselSlideInfinite = DEFAULT_CONFIG.carouselSlideInfinite;\n    } else {\n      newConfig.carouselSlideInfinite = obj.carouselSlideInfinite;\n    }\n\n    if (obj.enableCloseOutside === undefined) {\n      newConfig.enableCloseOutside = DEFAULT_CONFIG.enableCloseOutside;\n    } else {\n      newConfig.enableCloseOutside = obj.enableCloseOutside;\n    }\n\n    if (obj.keyboardServiceConfig) {\n      newConfig.keyboardServiceConfig = Object.assign({}, DEFAULT_KEYBOARD_SERVICE_CONFIG, obj.keyboardServiceConfig);\n    }\n\n    this.configMap.set(id, newConfig);\n  }\n\n  initIfNotExists(id) {\n    if (!this.configMap.has(id)) {\n      this.configMap.set(id, DEFAULT_CONFIG);\n    }\n  }\n\n}\n\nConfigService.ɵfac = function ConfigService_Factory(t) {\n  return new (t || ConfigService)();\n};\n\nConfigService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ConfigService,\n  factory: ConfigService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ConfigService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n/**\n * Function to build and return a `PlainGalleryConfig` object, proving also default values and validating the input object.\n * @param plainGalleryConfig object with the config requested by user\n * @returns PlainGalleryConfig the plain gallery configuration\n * @throws an Error if layout and strategy aren't compatible\n */\n\n\nfunction initPlainGalleryConfig(plainGalleryConfig) {\n  const newPlayGalleryConfig = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig, plainGalleryConfig);\n\n  if (newPlayGalleryConfig.layout instanceof LineLayout) {\n    if (newPlayGalleryConfig.strategy !== PlainGalleryStrategy.ROW && newPlayGalleryConfig.strategy !== PlainGalleryStrategy.COLUMN) {\n      throw new Error('LineLayout requires either ROW or COLUMN strategy');\n    }\n\n    if (!newPlayGalleryConfig.layout || !newPlayGalleryConfig.layout.breakConfig) {\n      throw new Error('Both layout and breakConfig must be valid');\n    }\n  }\n\n  if (newPlayGalleryConfig.layout instanceof GridLayout) {\n    if (newPlayGalleryConfig.strategy !== PlainGalleryStrategy.GRID) {\n      throw new Error('GridLayout requires GRID strategy');\n    }\n\n    if (!newPlayGalleryConfig.layout || !newPlayGalleryConfig.layout.breakConfig) {\n      throw new Error('Both layout and breakConfig must be valid');\n    } // force wrap for grid layout\n\n\n    newPlayGalleryConfig.layout.breakConfig.wrap = true;\n  }\n\n  return newPlayGalleryConfig;\n}\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n\nconst DIALOG_DATA = new InjectionToken('DIALOG_DATA');\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\nconst Keyboard = {\n  ESC: ESC_CODE,\n  LEFT_ARROW: LEFT_ARROW_CODE,\n  RIGHT_ARROW: RIGHT_ARROW_CODE,\n  UP_ARROW: UP_ARROW_CODE,\n  DOWN_ARROW: DOWN_ARROW_CODE\n};\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with the loading spinner\n */\n\nclass LoadingSpinnerComponent {\n  constructor() {\n    /**\n     * Enum of type `LoadingType` to choose the standard loading spinner.\n     * Declared here to be used inside the template.\n     */\n    this.loadingStandard = LoadingType.STANDARD;\n    /**\n     * Enum of type `LoadingType` to choose the bars loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingBars = LoadingType.BARS;\n    /**\n     * Enum of type `LoadingType` to choose the circular loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingCircular = LoadingType.CIRCULAR;\n    /**\n     * Enum of type `LoadingType` to choose the dots loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingDots = LoadingType.DOTS;\n    /**\n     * Enum of type `LoadingType` to choose the cube flipping loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingCubeFlipping = LoadingType.CUBE_FLIPPING;\n    /**\n     * Enum of type `LoadingType` to choose the circles loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingCircles = LoadingType.CIRCLES;\n    /**\n     * Enum of type `LoadingType` to choose the explosing squares loading spinner.\n     * Declared here to be used inside the template.\n     */\n\n    this.loadingExplosingSquares = LoadingType.EXPLOSING_SQUARES;\n  }\n\n}\n\nLoadingSpinnerComponent.ɵfac = function LoadingSpinnerComponent_Factory(t) {\n  return new (t || LoadingSpinnerComponent)();\n};\n\nLoadingSpinnerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LoadingSpinnerComponent,\n  selectors: [[\"ks-loading-spinner\"]],\n  inputs: {\n    loadingConfig: \"loadingConfig\",\n    accessibilityConfig: \"accessibilityConfig\"\n  },\n  decls: 9,\n  vars: 10,\n  consts: [[3, \"title\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"cssload-loader\"], [1, \"cssload-inner\", \"cssload-one\"], [1, \"cssload-inner\", \"cssload-two\"], [1, \"cssload-inner\", \"cssload-three\"], [1, \"loader-bars\"], [1, \"loader-circular\"], [1, \"loader-dots\"], [1, \"cube-wrapper\"], [1, \"cube-folding\"], [1, \"leaf1\"], [1, \"leaf2\"], [1, \"leaf3\"], [1, \"leaf4\"], [\"id\", \"preloader\"], [\"id\", \"loader\"], [1, \"loader\"]],\n  template: function LoadingSpinnerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementContainerStart(1, 1);\n      i0.ɵɵtemplate(2, LoadingSpinnerComponent_ng_container_2_Template, 5, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(3, LoadingSpinnerComponent_ng_container_3_Template, 2, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(4, LoadingSpinnerComponent_ng_container_4_Template, 2, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(5, LoadingSpinnerComponent_ng_container_5_Template, 2, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(6, LoadingSpinnerComponent_ng_container_6_Template, 7, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(7, LoadingSpinnerComponent_ng_container_7_Template, 3, 0, \"ng-container\", 2);\n      i0.ɵɵtemplate(8, LoadingSpinnerComponent_ng_container_8_Template, 6, 0, \"ng-container\", 2);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.loadingSpinnerTitle);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.loadingSpinnerAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitch\", ctx.loadingConfig == null ? null : ctx.loadingConfig.type);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingStandard);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingBars);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingCircular);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingDots);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingCubeFlipping);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingCircles);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngSwitchCase\", ctx.loadingExplosingSquares);\n    }\n  },\n  directives: [i2.NgSwitch, i2.NgSwitchCase],\n  styles: [\".cssload-loader[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;width:64px;height:64px;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;perspective:800px}.cssload-inner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%}.cssload-inner.cssload-one[_ngcontent-%COMP%]{left:0%;top:0%;animation:cssload-rotate-one .6s linear infinite;-o-animation:cssload-rotate-one .6s linear infinite;-ms-animation:cssload-rotate-one .6s linear infinite;-webkit-animation:cssload-rotate-one .6s linear infinite;-moz-animation:cssload-rotate-one .6s linear infinite;border-bottom:3px solid rgba(255,255,255,.99)}.cssload-inner.cssload-two[_ngcontent-%COMP%]{right:0%;top:0%;animation:cssload-rotate-two .6s linear infinite;-o-animation:cssload-rotate-two .6s linear infinite;-ms-animation:cssload-rotate-two .6s linear infinite;-webkit-animation:cssload-rotate-two .6s linear infinite;-moz-animation:cssload-rotate-two .6s linear infinite;border-right:3px solid rgb(255,255,255)}.cssload-inner.cssload-three[_ngcontent-%COMP%]{right:0%;bottom:0%;animation:cssload-rotate-three .6s linear infinite;-o-animation:cssload-rotate-three .6s linear infinite;-ms-animation:cssload-rotate-three .6s linear infinite;-webkit-animation:cssload-rotate-three .6s linear infinite;-moz-animation:cssload-rotate-three .6s linear infinite;border-top:3px solid rgb(255,255,255)}@keyframes cssload-rotate-one{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes cssload-rotate-two{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes cssload-rotate-three{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}\", \".loader-dots[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;font-size:10px;margin:auto;width:1em;height:1em;border-radius:50%;text-indent:-9999em;animation:load4 1.3s infinite linear;transform:translateZ(0)}@keyframes load4{0%,to{box-shadow:0 -3em 0 .2em,2em -2em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em}12.5%{box-shadow:0 -3em,2em -2em 0 .2em,3em 0,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}25%{box-shadow:0 -3em 0 -.5em,2em -2em,3em 0 0 .2em,2em 2em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}37.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0,2em 2em 0 .2em,0 3em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}50%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em,0 3em 0 .2em,-2em 2em,-3em 0 0 -1em,-2em -2em 0 -1em}62.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em,-2em 2em 0 .2em,-3em 0,-2em -2em 0 -1em}75%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0 0 .2em,-2em -2em}87.5%{box-shadow:0 -3em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0,-2em -2em 0 .2em}}\", \".loader-bars[_ngcontent-%COMP%], .loader-bars[_ngcontent-%COMP%]:before, .loader-bars[_ngcontent-%COMP%]:after{background:#fefcff;animation:load1 1s infinite ease-in-out;width:1em;height:4em}.loader-bars[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;text-indent:-9999em;margin:auto;font-size:11px;transform:translateZ(0);animation-delay:-.16s}.loader-bars[_ngcontent-%COMP%]:before, .loader-bars[_ngcontent-%COMP%]:after{position:absolute;top:0;content:\\\"\\\"}.loader-bars[_ngcontent-%COMP%]:before{left:-1.5em;animation-delay:-.32s}.loader-bars[_ngcontent-%COMP%]:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}\", \".loader-circular[_ngcontent-%COMP%], .loader-circular[_ngcontent-%COMP%]:after{border-radius:50%;width:10em;height:10em}.loader-circular[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;font-size:10px;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\", \".cube-folding[_ngcontent-%COMP%]{width:50px;height:50px;display:inline-block;transform:rotate(45deg);font-size:0}.cube-folding[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;width:25px;height:25px;transform:scale(1.1);display:inline-block}.cube-folding[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:\\\"\\\";background-color:#fff;position:absolute;left:0;top:0;display:block;width:25px;height:25px;transform-origin:100% 100%;animation:folding 2.5s infinite linear both}.cube-folding[_ngcontent-%COMP%]   .leaf2[_ngcontent-%COMP%]{transform:rotate(90deg) scale(1.1)}.cube-folding[_ngcontent-%COMP%]   .leaf2[_ngcontent-%COMP%]:before{animation-delay:.3s;background-color:#f2f2f2}.cube-folding[_ngcontent-%COMP%]   .leaf3[_ngcontent-%COMP%]{transform:rotate(270deg) scale(1.1)}.cube-folding[_ngcontent-%COMP%]   .leaf3[_ngcontent-%COMP%]:before{animation-delay:.9s;background-color:#f2f2f2}.cube-folding[_ngcontent-%COMP%]   .leaf4[_ngcontent-%COMP%]{transform:rotate(180deg) scale(1.1)}.cube-folding[_ngcontent-%COMP%]   .leaf4[_ngcontent-%COMP%]:before{animation-delay:.6s;background-color:#e6e6e6}@keyframes folding{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.cube-wrapper[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;text-align:center}@keyframes text{to{top:35px}}@keyframes shadow{to{bottom:-18px;width:100px}}\", \"#preloader[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}#loader[_ngcontent-%COMP%]{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-75px 0 0 -75px;border-radius:50%;border:3px solid transparent;border-top-color:#b4b4b4;animation:spin 2s linear infinite}#loader[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#d9d9d9;animation:spin 3s linear infinite}#loader[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:15px;left:15px;right:15px;bottom:15px;border-radius:50%;border:3px solid transparent;border-top-color:#fff;animation:spin 1.5s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\", \"@keyframes loader{0%,10%,to{width:60px;height:60px}65%{width:150px;height:150px}}@keyframes loaderBlock{0%,30%{transform:rotate(0)}55%{background-color:#b4b4b4}to{transform:rotate(90deg)}}@keyframes loaderBlockInverse{0%,20%{transform:rotate(0)}55%{background-color:#d9d9d9}to{transform:rotate(-90deg)}}.loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:60px;height:60px;transform:translate(-50%,-50%) rotate(45deg) translate(0);animation:loader 1.2s infinite ease-in-out}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;display:block;width:40px;height:40px;background-color:#fff;animation:loaderBlock 1.2s infinite ease-in-out both}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){top:0;left:0}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){top:0;right:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){bottom:0;left:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){bottom:0;right:0}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LoadingSpinnerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-loading-spinner',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div [attr.aria-label]=\\\"accessibilityConfig?.loadingSpinnerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.loadingSpinnerTitle\\\">\\n\\n  <ng-container [ngSwitch]=\\\"loadingConfig?.type\\\">\\n    <ng-container *ngSwitchCase=\\\"loadingStandard\\\">\\n      <div class=\\\"cssload-loader\\\">\\n        <div class=\\\"cssload-inner cssload-one\\\"></div>\\n        <div class=\\\"cssload-inner cssload-two\\\"></div>\\n        <div class=\\\"cssload-inner cssload-three\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingBars\\\">\\n      <div class=\\\"loader-bars\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircular\\\">\\n      <div class=\\\"loader-circular\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingDots\\\">\\n      <div class=\\\"loader-dots\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCubeFlipping\\\">\\n      <div class=\\\"cube-wrapper\\\">\\n        <div class=\\\"cube-folding\\\">\\n          <span class=\\\"leaf1\\\"></span>\\n          <span class=\\\"leaf2\\\"></span>\\n          <span class=\\\"leaf3\\\"></span>\\n          <span class=\\\"leaf4\\\"></span>\\n        </div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircles\\\">\\n      <div id=\\\"preloader\\\">\\n        <div id=\\\"loader\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingExplosingSquares\\\">\\n      <div class=\\\"loader\\\">\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n      </div>\\n    </ng-container>\\n  </ng-container>\\n</div>\\n\",\n      styles: [\".cssload-loader{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;width:64px;height:64px;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;perspective:800px}.cssload-inner{position:absolute;width:100%;height:100%;box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%}.cssload-inner.cssload-one{left:0%;top:0%;animation:cssload-rotate-one .6s linear infinite;-o-animation:cssload-rotate-one .6s linear infinite;-ms-animation:cssload-rotate-one .6s linear infinite;-webkit-animation:cssload-rotate-one .6s linear infinite;-moz-animation:cssload-rotate-one .6s linear infinite;border-bottom:3px solid rgba(255,255,255,.99)}.cssload-inner.cssload-two{right:0%;top:0%;animation:cssload-rotate-two .6s linear infinite;-o-animation:cssload-rotate-two .6s linear infinite;-ms-animation:cssload-rotate-two .6s linear infinite;-webkit-animation:cssload-rotate-two .6s linear infinite;-moz-animation:cssload-rotate-two .6s linear infinite;border-right:3px solid rgb(255,255,255)}.cssload-inner.cssload-three{right:0%;bottom:0%;animation:cssload-rotate-three .6s linear infinite;-o-animation:cssload-rotate-three .6s linear infinite;-ms-animation:cssload-rotate-three .6s linear infinite;-webkit-animation:cssload-rotate-three .6s linear infinite;-moz-animation:cssload-rotate-three .6s linear infinite;border-top:3px solid rgb(255,255,255)}@keyframes cssload-rotate-one{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes cssload-rotate-two{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes cssload-rotate-three{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}\\n\", \".loader-dots{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;font-size:10px;margin:auto;width:1em;height:1em;border-radius:50%;text-indent:-9999em;animation:load4 1.3s infinite linear;transform:translateZ(0)}@keyframes load4{0%,to{box-shadow:0 -3em 0 .2em,2em -2em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em}12.5%{box-shadow:0 -3em,2em -2em 0 .2em,3em 0,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}25%{box-shadow:0 -3em 0 -.5em,2em -2em,3em 0 0 .2em,2em 2em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}37.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0,2em 2em 0 .2em,0 3em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}50%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em,0 3em 0 .2em,-2em 2em,-3em 0 0 -1em,-2em -2em 0 -1em}62.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em,-2em 2em 0 .2em,-3em 0,-2em -2em 0 -1em}75%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0 0 .2em,-2em -2em}87.5%{box-shadow:0 -3em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0,-2em -2em 0 .2em}}\\n\", \".loader-bars,.loader-bars:before,.loader-bars:after{background:#fefcff;animation:load1 1s infinite ease-in-out;width:1em;height:4em}.loader-bars{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;text-indent:-9999em;margin:auto;font-size:11px;transform:translateZ(0);animation-delay:-.16s}.loader-bars:before,.loader-bars:after{position:absolute;top:0;content:\\\"\\\"}.loader-bars:before{left:-1.5em;animation-delay:-.32s}.loader-bars:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}\\n\", \".loader-circular,.loader-circular:after{border-radius:50%;width:10em;height:10em}.loader-circular{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;font-size:10px;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \".cube-folding{width:50px;height:50px;display:inline-block;transform:rotate(45deg);font-size:0}.cube-folding span{position:relative;width:25px;height:25px;transform:scale(1.1);display:inline-block}.cube-folding span:before{content:\\\"\\\";background-color:#fff;position:absolute;left:0;top:0;display:block;width:25px;height:25px;transform-origin:100% 100%;animation:folding 2.5s infinite linear both}.cube-folding .leaf2{transform:rotate(90deg) scale(1.1)}.cube-folding .leaf2:before{animation-delay:.3s;background-color:#f2f2f2}.cube-folding .leaf3{transform:rotate(270deg) scale(1.1)}.cube-folding .leaf3:before{animation-delay:.9s;background-color:#f2f2f2}.cube-folding .leaf4{transform:rotate(180deg) scale(1.1)}.cube-folding .leaf4:before{animation-delay:.6s;background-color:#e6e6e6}@keyframes folding{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.cube-wrapper{position:fixed;left:50%;top:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;text-align:center}@keyframes text{to{top:35px}}@keyframes shadow{to{bottom:-18px;width:100px}}\\n\", \"#preloader{position:fixed;top:0;left:0;width:100%;height:100%}#loader{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-75px 0 0 -75px;border-radius:50%;border:3px solid transparent;border-top-color:#b4b4b4;animation:spin 2s linear infinite}#loader:before{content:\\\"\\\";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#d9d9d9;animation:spin 3s linear infinite}#loader:after{content:\\\"\\\";position:absolute;top:15px;left:15px;right:15px;bottom:15px;border-radius:50%;border:3px solid transparent;border-top-color:#fff;animation:spin 1.5s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \"@keyframes loader{0%,10%,to{width:60px;height:60px}65%{width:150px;height:150px}}@keyframes loaderBlock{0%,30%{transform:rotate(0)}55%{background-color:#b4b4b4}to{transform:rotate(90deg)}}@keyframes loaderBlockInverse{0%,20%{transform:rotate(0)}55%{background-color:#d9d9d9}to{transform:rotate(-90deg)}}.loader{position:absolute;top:50%;left:50%;width:60px;height:60px;transform:translate(-50%,-50%) rotate(45deg) translate(0);animation:loader 1.2s infinite ease-in-out}.loader span{position:absolute;display:block;width:40px;height:40px;background-color:#fff;animation:loaderBlock 1.2s infinite ease-in-out both}.loader span:nth-child(1){top:0;left:0}.loader span:nth-child(2){top:0;right:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(3){bottom:0;left:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(4){bottom:0;right:0}\\n\"]\n    }]\n  }], null, {\n    loadingConfig: [{\n      type: Input\n    }],\n    accessibilityConfig: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n\nclass KeyboardNavigationDirective {\n  constructor() {\n    this.keyboardNavigation = new EventEmitter();\n  }\n  /**\n   * Listener to catch keyboard's events and call the right method based on the key.\n   * For instance, pressing esc, this will call `closeGallery(Action.KEYBOARD)` and so on.\n   * If you passed a valid `keyboardConfig` esc, right and left buttons will be customized based on your data.\n   * @param e KeyboardEvent caught by the listener.\n   */\n\n\n  onKeyDown(e) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.keyboardNavigation.emit(e.code);\n  }\n\n}\n\nKeyboardNavigationDirective.ɵfac = function KeyboardNavigationDirective_Factory(t) {\n  return new (t || KeyboardNavigationDirective)();\n};\n\nKeyboardNavigationDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: KeyboardNavigationDirective,\n  selectors: [[\"\", \"ksKeyboardNavigation\", \"\"]],\n  hostBindings: function KeyboardNavigationDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keydown\", function KeyboardNavigationDirective_keydown_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  inputs: {\n    isOpen: \"isOpen\"\n  },\n  outputs: {\n    keyboardNavigation: \"keyboardNavigation\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(KeyboardNavigationDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksKeyboardNavigation]'\n    }]\n  }], null, {\n    isOpen: [{\n      type: Input\n    }],\n    keyboardNavigation: [{\n      type: Output\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['window:keydown', ['$event']]\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to add fallback image if the original one is not reachable.\n */\n\n\nclass FallbackImageDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n    this.fallbackApplied = new EventEmitter();\n  }\n\n  onError() {\n    if (!this.fallbackImg) {\n      this.fallbackApplied.emit(false);\n      return;\n    }\n\n    this.renderer.setAttribute(this.el.nativeElement, 'src', this.fallbackImg.toString());\n    this.fallbackApplied.emit(true);\n  }\n\n}\n\nFallbackImageDirective.ɵfac = function FallbackImageDirective_Factory(t) {\n  return new (t || FallbackImageDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nFallbackImageDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: FallbackImageDirective,\n  selectors: [[\"\", \"ksFallbackImage\", \"\"]],\n  hostBindings: function FallbackImageDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"error\", function FallbackImageDirective_error_HostBindingHandler() {\n        return ctx.onError();\n      });\n    }\n  },\n  inputs: {\n    fallbackImg: \"fallbackImg\"\n  },\n  outputs: {\n    fallbackApplied: \"fallbackApplied\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FallbackImageDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksFallbackImage]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    fallbackImg: [{\n      type: Input\n    }],\n    fallbackApplied: [{\n      type: Output\n    }],\n    onError: [{\n      type: HostListener,\n      args: ['error']\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to change the size of an element.\n */\n\n\nclass SizeDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change both width and height of an element.\n   */\n\n\n  applyStyle() {\n    if (!this.sizeConfig) {\n      return;\n    } // apply [style.width]\n\n\n    if (this.sizeConfig.width) {\n      this.renderer.setStyle(this.el.nativeElement, 'width', this.sizeConfig.width);\n    }\n\n    if (this.sizeConfig.height) {\n      this.renderer.setStyle(this.el.nativeElement, 'height', this.sizeConfig.height);\n    }\n  }\n\n}\n\nSizeDirective.ɵfac = function SizeDirective_Factory(t) {\n  return new (t || SizeDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nSizeDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: SizeDirective,\n  selectors: [[\"\", \"ksSize\", \"\"]],\n  inputs: {\n    sizeConfig: \"sizeConfig\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SizeDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksSize]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    sizeConfig: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to customize the description.\n */\n\n\nclass DescriptionDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change description's style.\n   */\n\n\n  applyStyle() {\n    if (!this.description) {\n      return;\n    }\n\n    if (this.description.style) {\n      this.renderer.setStyle(this.el.nativeElement, 'background', this.description.style.bgColor);\n      this.renderer.setStyle(this.el.nativeElement, 'color', this.description.style.textColor);\n\n      if (this.description.style.width) {\n        this.renderer.setStyle(this.el.nativeElement, 'width', this.description.style.width);\n      }\n\n      if (this.description.style.height) {\n        this.renderer.setStyle(this.el.nativeElement, 'height', this.description.style.height);\n      }\n\n      if (this.description.style.position) {\n        this.renderer.setStyle(this.el.nativeElement, 'position', this.description.style.position);\n      }\n\n      if (this.description.style.top) {\n        this.renderer.setStyle(this.el.nativeElement, 'top', this.description.style.top);\n      }\n\n      if (this.description.style.bottom) {\n        this.renderer.setStyle(this.el.nativeElement, 'bottom', this.description.style.bottom);\n      }\n\n      if (this.description.style.left) {\n        this.renderer.setStyle(this.el.nativeElement, 'left', this.description.style.left);\n      }\n\n      if (this.description.style.right) {\n        this.renderer.setStyle(this.el.nativeElement, 'right', this.description.style.right);\n      }\n\n      this.renderer.setStyle(this.el.nativeElement, 'margin-top', this.description.style.marginTop ? this.description.style.marginTop : '0px');\n      this.renderer.setStyle(this.el.nativeElement, 'margin-bottom', this.description.style.marginBottom ? this.description.style.marginBottom : '0px');\n      this.renderer.setStyle(this.el.nativeElement, 'margin-left', this.description.style.marginLeft ? this.description.style.marginLeft : '0px');\n      this.renderer.setStyle(this.el.nativeElement, 'margin-right', this.description.style.marginRight ? this.description.style.marginRight : '0px');\n    }\n  }\n\n}\n\nDescriptionDirective.ɵfac = function DescriptionDirective_Factory(t) {\n  return new (t || DescriptionDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nDescriptionDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DescriptionDirective,\n  selectors: [[\"\", \"ksDescription\", \"\"]],\n  inputs: {\n    description: \"description\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DescriptionDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksDescription]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    description: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with the current image with some additional elements like arrows and side previews.\n */\n\n\nclass CurrentImageComponent extends AccessibleComponent {\n  // use public ChangeDetectorRef to be able to call it from spec files to trigger change detection\n  // tslint:disable-next-line:no-any\n  constructor(platformId, ngZone, ref, configService) {\n    super();\n    this.platformId = platformId;\n    this.ngZone = ngZone;\n    this.ref = ref;\n    this.configService = configService;\n    /**\n     * Output to emit an event when images are loaded. The payload contains an `ImageLoadEvent`.\n     */\n\n    this.loadImage = new EventEmitter();\n    /**\n     * Output to emit any changes of the current image. The payload contains an `ImageModalEvent`.\n     */\n\n    this.changeImage = new EventEmitter();\n    /**\n     * Output to emit an event when the modal gallery is closed. The payload contains an `ImageModalEvent`.\n     */\n\n    this.closeGallery = new EventEmitter();\n    /**\n     * Subject to play modal-gallery.\n     */\n\n    this.start$ = new Subject();\n    /**\n     * Subject to stop modal-gallery.\n     */\n\n    this.stop$ = new Subject();\n    /**\n     * Enum of type `Action` that represents a normal action.\n     * Declared here to be used inside the template.\n     */\n\n    this.normalAction = Action.NORMAL;\n    /**\n     * Enum of type `Action` that represents a mouse click on a button.\n     * Declared here to be used inside the template.\n     */\n\n    this.clickAction = Action.CLICK;\n    /**\n     * Enum of type `Action` that represents a keyboard action.\n     * Declared here to be used inside the template.\n     */\n\n    this.keyboardAction = Action.KEYBOARD;\n    /**\n     * Boolean that it's true when you are watching the first image (currently visible).\n     * False by default\n     */\n\n    this.isFirstImage = false;\n    /**\n     * Boolean that it's true when you are watching the last image (currently visible).\n     * False by default\n     */\n\n    this.isLastImage = false;\n    /**\n     * Boolean that it's true if an image of the modal gallery is still loading.\n     * True by default\n     */\n\n    this.loading = true;\n    /**\n     * Private object without type to define all swipe actions used by hammerjs.\n     */\n\n    this.SWIPE_ACTION = {\n      LEFT: 'swipeleft',\n      RIGHT: 'swiperight',\n      UP: 'swipeup',\n      DOWN: 'swipedown'\n    };\n  }\n  /**\n   * Listener to stop the gallery when the mouse pointer is over the current image.\n   */\n\n\n  onMouseEnter() {\n    // if carousel feature is disable, don't do anything in any case\n    if (!this.slideConfig || !this.slideConfig.playConfig) {\n      return;\n    }\n\n    if (!this.slideConfig.playConfig.pauseOnHover) {\n      return;\n    }\n\n    this.stopCarousel();\n  }\n  /**\n   * Listener to play the gallery when the mouse pointer leave the current image.\n   */\n\n\n  onMouseLeave() {\n    // if carousel feature is disable, don't do anything in any case\n    if (!this.slideConfig || !this.slideConfig.playConfig) {\n      return;\n    }\n\n    if (!this.slideConfig.playConfig.pauseOnHover || !this.slideConfig.playConfig.autoPlay) {\n      return;\n    }\n\n    this.playCarousel();\n  }\n  /**\n   * Method ´ngOnInit´ to init configuration.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.buttonsConfig) {\n      throw new Error('Internal library error - libConfig and buttonsConfig must be defined');\n    }\n\n    this.slideConfig = libConfig.slideConfig;\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n    this.currentImageConfig = libConfig.currentImageConfig;\n    this.keyboardConfig = libConfig.keyboardConfig;\n  }\n  /**\n   * Method ´ngOnChanges´ to update `loading` status and emit events.\n   * If the gallery is open, then it will also manage boundary arrows and sliding.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges(changes) {\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    const images = changes.images;\n    const currentImage = changes.currentImage;\n\n    if (currentImage && currentImage.previousValue !== currentImage.currentValue) {\n      this.updateIndexes();\n    } else if (images && images.previousValue !== images.currentValue) {\n      this.updateIndexes();\n    }\n\n    const slideConfig = changes.slideConfig;\n\n    if (slideConfig && slideConfig.previousValue !== slideConfig.currentValue) {\n      this.slideConfig = libConfig.slideConfig;\n    }\n  }\n  /**\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   */\n\n\n  ngAfterContentInit() {\n    // interval doesn't play well with SSR and protractor,\n    // so we should run it in the browser and outside Angular\n    if (isPlatformBrowser(this.platformId)) {\n      this.ngZone.runOutsideAngular(() => {\n        this.start$.pipe(map(() => this.slideConfig && this.slideConfig.playConfig && this.slideConfig.playConfig.autoPlay && this.slideConfig.playConfig.interval), // tslint:disable-next-line:no-any\n        filter(interval => interval > 0), switchMap(interval => timer(interval).pipe(takeUntil(this.stop$)))).subscribe(() => this.ngZone.run(() => {\n          if (!this.isLastImage) {\n            this.nextImage(Action.AUTOPLAY);\n          }\n\n          this.ref.markForCheck();\n        }));\n        this.start$.next();\n      });\n    }\n  }\n  /**\n   * Method to handle keypress based on the `keyboardConfig` input. It gets the code of\n   * the key that triggered the keypress event to navigate between images or to close the modal gallery.\n   * @param code string of the key that triggered the keypress event\n   */\n\n\n  onKeyPress(code) {\n    const esc = this.keyboardConfig && this.keyboardConfig.esc ? this.keyboardConfig.esc : Keyboard.ESC;\n    const right = this.keyboardConfig && this.keyboardConfig.right ? this.keyboardConfig.right : Keyboard.RIGHT_ARROW;\n    const left = this.keyboardConfig && this.keyboardConfig.left ? this.keyboardConfig.left : Keyboard.LEFT_ARROW;\n\n    switch (code) {\n      case esc:\n        this.closeGallery.emit(new ImageModalEvent(this.id, Action.KEYBOARD, true));\n        break;\n\n      case right:\n        this.nextImage(Action.KEYBOARD);\n        break;\n\n      case left:\n        this.prevImage(Action.KEYBOARD);\n        break;\n    }\n  }\n  /**\n   * Method to get the image description based on input params.\n   * If you provide a full description this will be the visible description, otherwise,\n   * it will be built using the `Description` object, concatenating its fields.\n   * @param Image image to get its description. If not provided it will be the current image\n   * @returns String description of the image (or the current image if not provided)\n   * @throws an Error if description isn't available\n   */\n\n\n  getDescriptionToDisplay(image = this.currentImage) {\n    if (!this.currentImageConfig || !this.currentImageConfig.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    }\n\n    const imageWithoutDescription = !image.modal || !image.modal.description || image.modal.description === '';\n\n    switch (this.currentImageConfig.description.strategy) {\n      case DescriptionStrategy.HIDE_IF_EMPTY:\n        return imageWithoutDescription ? '' : image.modal.description + '';\n\n      case DescriptionStrategy.ALWAYS_HIDDEN:\n        return '';\n\n      default:\n        // ----------- DescriptionStrategy.ALWAYS_VISIBLE -----------------\n        return this.buildTextDescription(image, imageWithoutDescription);\n    }\n  }\n  /**\n   * Method to get `alt attribute`.\n   * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n   * @param Image image to get its alt description. If not provided it will be the current image\n   * @returns String alt description of the image (or the current image if not provided)\n   */\n\n\n  getAltDescriptionByImage(image = this.currentImage) {\n    if (!image) {\n      return '';\n    }\n\n    return image.modal && image.modal.description ? image.modal.description : `Image ${getIndex(image, this.images) + 1}`;\n  }\n  /**\n   * Method to get the title attributes based on descriptions.\n   * This is useful to prevent accessibility issues, because if DescriptionStrategy is ALWAYS_HIDDEN,\n   * it prevents an empty string as title.\n   * @param Image image to get its description. If not provided it will be the current image\n   * @returns String title of the image based on descriptions\n   * @throws an Error if description isn't available\n   */\n\n\n  getTitleToDisplay(image = this.currentImage) {\n    if (!this.currentImageConfig || !this.currentImageConfig.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    }\n\n    const imageWithoutDescription = !image.modal || !image.modal.description || image.modal.description === '';\n    const description = this.buildTextDescription(image, imageWithoutDescription);\n    return description;\n  }\n  /**\n   * Method to get the left side preview image.\n   * @returns Image the image to show as size preview on the left\n   */\n\n\n  getLeftPreviewImage() {\n    if (!this.slideConfig) {\n      throw new Error('Internal library error - slideConfig must be defined');\n    }\n\n    const currentIndex = getIndex(this.currentImage, this.images);\n\n    if (currentIndex === 0 && this.slideConfig.infinite) {\n      // the current image is the first one,\n      // so the previous one is the last image\n      // because infinite is true\n      return this.images[this.images.length - 1];\n    }\n\n    this.handleBoundaries(currentIndex);\n    return this.images[Math.max(currentIndex - 1, 0)];\n  }\n  /**\n   * Method to get the right side preview image.\n   * @returns Image the image to show as size preview on the right\n   */\n\n\n  getRightPreviewImage() {\n    if (!this.slideConfig) {\n      throw new Error('Internal library error - slideConfig must be defined');\n    }\n\n    const currentIndex = getIndex(this.currentImage, this.images);\n\n    if (currentIndex === this.images.length - 1 && this.slideConfig.infinite) {\n      // the current image is the last one,\n      // so the next one is the first image\n      // because infinite is true\n      return this.images[0];\n    }\n\n    this.handleBoundaries(currentIndex);\n    return this.images[Math.min(currentIndex + 1, this.images.length - 1)];\n  }\n  /**\n   * Method called by events from both keyboard and mouse on an image.\n   * This will invoke the nextImage method.\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the event or `Action.NORMAL` if not provided\n   */\n\n\n  onImageEvent(event, action = Action.NORMAL) {\n    if (!this.currentImageConfig) {\n      throw new Error('Internal library error - currentImageConfig must be defined');\n    } // check if triggered by a mouse click\n    // If yes, It should block navigation when navigateOnClick is false\n\n\n    if (action === Action.CLICK && !this.currentImageConfig.navigateOnClick) {\n      // a user has requested to block navigation via configCurrentImage.navigateOnClick property\n      return;\n    }\n\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT) {\n      this.nextImage(action);\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a navigation arrow.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the event or `Action.NORMAL` if not provided\n   * @param boolean disable to disable navigation\n   */\n\n\n  onNavigationEvent(direction, event, action = Action.NORMAL, disable = false) {\n    if (disable) {\n      return;\n    }\n\n    const result = super.handleNavigationEvent(direction, event);\n\n    if (result === NEXT) {\n      this.nextImage(action);\n    } else if (result === PREV) {\n      this.prevImage(action);\n    }\n  }\n  /**\n   * Method to go back to the previous image.\n   * @param action Enum of type `Action` that represents the source\n   *  action that moved back to the previous image. `Action.NORMAL` by default.\n   */\n\n\n  prevImage(action = Action.NORMAL) {\n    // check if prevImage should be blocked\n    if (this.isPreventSliding(0)) {\n      return;\n    }\n\n    const prevImage = this.getPrevImage();\n    this.loading = !prevImage.previouslyLoaded;\n    this.changeImage.emit(new ImageModalEvent(this.id, action, getIndex(prevImage, this.images)));\n    this.start$.next();\n  }\n  /**\n   * Method to go back to the previous image.\n   * @param action Enum of type `Action` that represents the source\n   *  action that moved to the next image. `Action.NORMAL` by default.\n   */\n\n\n  nextImage(action = Action.NORMAL) {\n    // check if nextImage should be blocked\n    if (this.isPreventSliding(this.images.length - 1)) {\n      return;\n    }\n\n    const nextImage = this.getNextImage();\n    this.loading = !nextImage.previouslyLoaded;\n    this.changeImage.emit(new ImageModalEvent(this.id, action, getIndex(nextImage, this.images)));\n    this.start$.next();\n  }\n  /**\n   * Method to emit an event as loadImage output to say that the requested image if loaded.\n   * This method is invoked by the javascript's 'load' event on an img tag.\n   * @param Event event that triggered the load\n   */\n\n\n  onImageLoad(event) {\n    const loadImageData = {\n      status: true,\n      index: getIndex(this.currentImage, this.images),\n      id: this.currentImage.id\n    };\n    this.loadImage.emit(loadImageData);\n    this.loading = false;\n  }\n  /**\n   * Method used by Hammerjs to support touch gestures (you can also invert the swipe direction with configCurrentImage.invertSwipe).\n   * @param action String that represent the direction of the swipe action. 'swiperight' by default.\n   */\n\n\n  swipe(action = this.SWIPE_ACTION.RIGHT) {\n    if (!this.currentImageConfig) {\n      throw new Error('Internal library error - currentImageConfig must be defined');\n    }\n\n    switch (action) {\n      case this.SWIPE_ACTION.RIGHT:\n        if (this.currentImageConfig.invertSwipe) {\n          this.prevImage(Action.SWIPE);\n        } else {\n          this.nextImage(Action.SWIPE);\n        }\n\n        break;\n\n      case this.SWIPE_ACTION.LEFT:\n        if (this.currentImageConfig.invertSwipe) {\n          this.nextImage(Action.SWIPE);\n        } else {\n          this.prevImage(Action.SWIPE);\n        }\n\n        break;\n      // case this.SWIPE_ACTION.UP:\n      //   break;\n      // case this.SWIPE_ACTION.DOWN:\n      //   break;\n    }\n  }\n  /**\n   * Method used in `modal-gallery.component` to get the index of an image to delete.\n   * @param Image image to get the index, or the visible image, if not passed\n   * @returns number the index of the image\n   */\n\n\n  getIndexToDelete(image = this.currentImage) {\n    return getIndex(image, this.images);\n  }\n  /**\n   * Method to play modal gallery.\n   */\n\n\n  playCarousel() {\n    this.start$.next();\n  }\n  /**\n   * Stops modal gallery from cycling through items.\n   */\n\n\n  stopCarousel() {\n    this.stop$.next();\n  }\n  /**\n   * Method to cleanup resources. In fact, this will stop the modal gallery.\n   * This is an Angular's lifecycle hook that is called when this component is destroyed.\n   */\n\n\n  ngOnDestroy() {\n    this.stopCarousel();\n  }\n  /**\n   * Private method to update both `isFirstImage` and `isLastImage` based on\n   * the index of the current image.\n   * @param number currentIndex is the index of the current image\n   */\n\n\n  handleBoundaries(currentIndex) {\n    if (this.images.length === 1) {\n      this.isFirstImage = true;\n      this.isLastImage = true;\n      this.ref.markForCheck();\n      return;\n    }\n\n    if (!this.slideConfig || this.slideConfig.infinite === true) {\n      // infinite sliding enabled\n      this.isFirstImage = false;\n      this.isLastImage = false;\n      this.ref.markForCheck();\n    } else {\n      // execute this only if infinite sliding is disabled\n      switch (currentIndex) {\n        case 0:\n          this.isFirstImage = true;\n          this.isLastImage = false;\n          this.ref.markForCheck();\n          break;\n\n        case this.images.length - 1:\n          this.isFirstImage = false;\n          this.isLastImage = true;\n          this.ref.markForCheck();\n          break;\n\n        default:\n          this.isFirstImage = false;\n          this.isLastImage = false;\n          this.ref.markForCheck();\n          break;\n      }\n    }\n  }\n  /**\n   * Private method to check if next/prev actions should be blocked.\n   * It checks if slideConfig.infinite === false and if the image index is equals to the input parameter.\n   * If yes, it returns true to say that sliding should be blocked, otherwise not.\n   * @param number boundaryIndex that could be either the beginning index (0) or the last index\n   *  of images (this.images.length - 1).\n   * @returns boolean true if slideConfig.infinite === false and the current index is\n   *  either the first or the last one.\n   */\n\n\n  isPreventSliding(boundaryIndex) {\n    return !!this.slideConfig && this.slideConfig.infinite === false && getIndex(this.currentImage, this.images) === boundaryIndex;\n  }\n  /**\n   * Private method to get the next index.\n   * This is necessary because at the end, when you call next again, you'll go to the first image.\n   * That happens because all modal images are shown like in a circle.\n   */\n\n\n  getNextImage() {\n    const currentIndex = getIndex(this.currentImage, this.images);\n    let newIndex = 0;\n\n    if (currentIndex >= 0 && currentIndex < this.images.length - 1) {\n      newIndex = currentIndex + 1;\n    } else {\n      newIndex = 0; // start from the first index\n    }\n\n    return this.images[newIndex];\n  }\n  /**\n   * Private method to get the previous index.\n   * This is necessary because at index 0, when you call prev again, you'll go to the last image.\n   * That happens because all modal images are shown like in a circle.\n   */\n\n\n  getPrevImage() {\n    const currentIndex = getIndex(this.currentImage, this.images);\n    let newIndex = 0;\n\n    if (currentIndex > 0 && currentIndex <= this.images.length - 1) {\n      newIndex = currentIndex - 1;\n    } else {\n      newIndex = this.images.length - 1; // start from the last index\n    }\n\n    return this.images[newIndex];\n  }\n  /**\n   * Private method to build a text description.\n   * This is used also to create titles.\n   * @param Image image to get its description. If not provided it will be the current image.\n   * @param boolean imageWithoutDescription is a boolean that it's true if the image hasn't a 'modal' description.\n   * @returns String description built concatenating image fields with a specific logic.\n   */\n\n\n  buildTextDescription(image, imageWithoutDescription) {\n    if (!this.currentImageConfig || !this.currentImageConfig.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    } // If customFullDescription use it, otherwise proceed to build a description\n\n\n    if (this.currentImageConfig.description.customFullDescription && this.currentImageConfig.description.customFullDescription !== '') {\n      return this.currentImageConfig.description.customFullDescription;\n    }\n\n    const currentIndex = getIndex(image, this.images); // If the current image hasn't a description,\n    // prevent to write the ' - ' (or this.description.beforeTextDescription)\n\n    const prevDescription = this.currentImageConfig.description.imageText ? this.currentImageConfig.description.imageText : '';\n    const midSeparator = this.currentImageConfig.description.numberSeparator ? this.currentImageConfig.description.numberSeparator : '';\n    const middleDescription = currentIndex + 1 + midSeparator + this.images.length;\n\n    if (imageWithoutDescription) {\n      return prevDescription + middleDescription;\n    }\n\n    const currImgDescription = image.modal && image.modal.description ? image.modal.description : '';\n    const endDescription = this.currentImageConfig.description.beforeTextDescription + currImgDescription;\n    return prevDescription + middleDescription + endDescription;\n  }\n  /**\n   * Private method to call handleBoundaries when ngOnChanges is called.\n   */\n\n\n  updateIndexes() {\n    try {\n      if (this.isOpen) {\n        const index = getIndex(this.currentImage, this.images);\n        this.handleBoundaries(index);\n      }\n    } catch (err) {\n      console.error('Cannot get the current image index in current-image');\n      throw err;\n    }\n  }\n\n}\n\nCurrentImageComponent.ɵfac = function CurrentImageComponent_Factory(t) {\n  return new (t || CurrentImageComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(ConfigService));\n};\n\nCurrentImageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CurrentImageComponent,\n  selectors: [[\"ks-current-image\"]],\n  hostBindings: function CurrentImageComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mouseenter\", function CurrentImageComponent_mouseenter_HostBindingHandler() {\n        return ctx.onMouseEnter();\n      })(\"mouseleave\", function CurrentImageComponent_mouseleave_HostBindingHandler() {\n        return ctx.onMouseLeave();\n      });\n    }\n  },\n  inputs: {\n    id: \"id\",\n    currentImage: \"currentImage\",\n    images: \"images\",\n    isOpen: \"isOpen\"\n  },\n  outputs: {\n    loadImage: \"loadImage\",\n    changeImage: \"changeImage\",\n    closeGallery: \"closeGallery\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 13,\n  vars: 34,\n  consts: [[\"ksKeyboardNavigation\", \"\", 1, \"main-image-container\", 3, \"isOpen\", \"title\", \"keyboardNavigation\"], [1, \"left-sub-container\"], [\"role\", \"button\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"aria-hidden\", \"true\", 3, \"title\"], [4, \"ngIf\"], [\"id\", \"current-figure\"], [\"id\", \"current-image\", \"ksFallbackImage\", \"\", \"role\", \"img\", 1, \"inside\", 3, \"ngClass\", \"src\", \"fallbackImg\", \"title\", \"alt\", \"tabIndex\", \"load\", \"click\", \"keyup\", \"swipeleft\", \"swiperight\"], [\"class\", \"inside description\", \"ksDescription\", \"\", 3, \"description\", \"innerHTML\", 4, \"ngIf\"], [1, \"right-sub-container\"], [\"class\", \"inside current-image-previous\", \"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"src\", \"fallbackImg\", \"hidden\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\", \"ngIfElse\"], [\"firstImage\", \"\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 1, \"inside\", \"current-image-previous\", 3, \"src\", \"fallbackImg\", \"hidden\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\"], [\"ksSize\", \"\", 1, \"current-image-previous\", \"hidden\", 3, \"sizeConfig\"], [\"ksDescription\", \"\", 1, \"inside\", \"description\", 3, \"description\", \"innerHTML\"], [\"class\", \"inside current-image-next\", \"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"src\", \"fallbackImg\", \"hidden\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\", \"ngIfElse\"], [\"lastImage\", \"\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 1, \"inside\", \"current-image-next\", 3, \"src\", \"fallbackImg\", \"hidden\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\"], [\"ksSize\", \"\", 1, \"current-image-next\", \"hidden\", 3, \"sizeConfig\"], [3, \"loadingConfig\", \"accessibilityConfig\"]],\n  template: function CurrentImageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"main\", 0);\n      i0.ɵɵlistener(\"keyboardNavigation\", function CurrentImageComponent_Template_main_keyboardNavigation_0_listener($event) {\n        return ctx.onKeyPress($event);\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"a\", 2);\n      i0.ɵɵlistener(\"click\", function CurrentImageComponent_Template_a_click_2_listener($event) {\n        return ctx.onNavigationEvent(\"left\", $event);\n      })(\"keyup\", function CurrentImageComponent_Template_a_keyup_2_listener($event) {\n        return ctx.onNavigationEvent(\"left\", $event);\n      });\n      i0.ɵɵelement(3, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, CurrentImageComponent_ng_container_4_Template, 2, 1, \"ng-container\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"figure\", 5);\n      i0.ɵɵelementStart(6, \"img\", 6);\n      i0.ɵɵlistener(\"load\", function CurrentImageComponent_Template_img_load_6_listener($event) {\n        return ctx.onImageLoad($event);\n      })(\"click\", function CurrentImageComponent_Template_img_click_6_listener($event) {\n        return ctx.onImageEvent($event, ctx.clickAction);\n      })(\"keyup\", function CurrentImageComponent_Template_img_keyup_6_listener($event) {\n        return ctx.onImageEvent($event, ctx.keyboardAction);\n      })(\"swipeleft\", function CurrentImageComponent_Template_img_swipeleft_6_listener($event) {\n        return ctx.swipe($event.type);\n      })(\"swiperight\", function CurrentImageComponent_Template_img_swiperight_6_listener($event) {\n        return ctx.swipe($event.type);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, CurrentImageComponent_figcaption_7_Template, 1, 2, \"figcaption\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 8);\n      i0.ɵɵtemplate(9, CurrentImageComponent_ng_container_9_Template, 2, 1, \"ng-container\", 4);\n      i0.ɵɵtemplate(10, CurrentImageComponent_ng_container_10_Template, 2, 2, \"ng-container\", 4);\n      i0.ɵɵelementStart(11, \"a\", 2);\n      i0.ɵɵlistener(\"click\", function CurrentImageComponent_Template_a_click_11_listener($event) {\n        return ctx.onNavigationEvent(\"right\", $event);\n      })(\"keyup\", function CurrentImageComponent_Template_a_keyup_11_listener($event) {\n        return ctx.onNavigationEvent(\"right\", $event);\n      });\n      i0.ɵɵelement(12, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"isOpen\", ctx.isOpen)(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainContainerTitle);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainContainerAriaLabel);\n      i0.ɵɵadvance(2);\n      i0.ɵɵclassMapInterpolate1(\"nav-left \", ctx.isFirstImage ? \"no-pointer\" : \"\", \"\");\n      i0.ɵɵproperty(\"tabIndex\", ctx.isFirstImage ? -1 : 0);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainPrevImageAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMapInterpolate1(\"inside \", ctx.isFirstImage ? \"empty-arrow-image\" : \"left-arrow-image\", \"\");\n      i0.ɵɵproperty(\"title\", ctx.isFirstImage ? \"\" : ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainPrevImageTitle);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.slideConfig == null ? null : ctx.slideConfig.sidePreviews == null ? null : ctx.slideConfig.sidePreviews.show);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"display\", ctx.loading ? \"none\" : \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"alt\", ctx.currentImage.modal.alt ? ctx.currentImage.modal.alt : ctx.getAltDescriptionByImage());\n      i0.ɵɵproperty(\"ngClass\", (ctx.currentImageConfig == null ? null : ctx.currentImageConfig.navigateOnClick) ? \"\" : \"unclickable\")(\"src\", ctx.currentImage.modal.img, i0.ɵɵsanitizeUrl)(\"fallbackImg\", ctx.currentImage.modal.fallbackImg)(\"title\", ctx.currentImage.modal.title || ctx.currentImage.modal.title === \"\" ? ctx.currentImage.modal.title : ctx.getTitleToDisplay())(\"tabIndex\", 0);\n      i0.ɵɵattribute(\"aria-label\", ctx.currentImage.modal.ariaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.getDescriptionToDisplay() !== \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.slideConfig == null ? null : ctx.slideConfig.sidePreviews == null ? null : ctx.slideConfig.sidePreviews.show);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading && (ctx.currentImageConfig == null ? null : ctx.currentImageConfig.loadingConfig == null ? null : ctx.currentImageConfig.loadingConfig.enable));\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMapInterpolate1(\"nav-right \", ctx.isFirstImage ? \"no-pointer\" : \"\", \"\");\n      i0.ɵɵproperty(\"tabIndex\", ctx.isLastImage ? -1 : 0);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainNextImageAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMapInterpolate1(\"inside \", ctx.isLastImage ? \"empty-arrow-image\" : \"right-arrow-image\", \"\");\n      i0.ɵɵproperty(\"title\", ctx.isLastImage ? \"\" : ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.mainNextImageTitle);\n    }\n  },\n  directives: [KeyboardNavigationDirective, i2.NgIf, FallbackImageDirective, i2.NgClass, SizeDirective, DescriptionDirective, LoadingSpinnerComponent],\n  styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}.main-image-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-image-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%], .main-image-container[_ngcontent-%COMP%] > .right-sub-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%], .main-image-container[_ngcontent-%COMP%] > .left-sub-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{animation:animatezoom 1s;cursor:pointer;transition:all .5s}.main-image-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]:hover, .main-image-container[_ngcontent-%COMP%] > .right-sub-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]:hover, .main-image-container[_ngcontent-%COMP%] > .left-sub-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.main-image-container[_ngcontent-%COMP%] > .left-sub-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container[_ngcontent-%COMP%] > .left-sub-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{margin-right:5px;margin-left:15px}.main-image-container[_ngcontent-%COMP%] > .left-sub-container[_ngcontent-%COMP%] > .nav-left.no-pointer[_ngcontent-%COMP%]{cursor:default!important}.main-image-container[_ngcontent-%COMP%] > .right-sub-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container[_ngcontent-%COMP%] > .right-sub-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{margin-right:15px;margin-left:5px}.main-image-container[_ngcontent-%COMP%] > .right-sub-container[_ngcontent-%COMP%] > .nav-right.no-pointer[_ngcontent-%COMP%]{cursor:default!important}.main-image-container[_ngcontent-%COMP%]   #current-figure[_ngcontent-%COMP%]{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}.main-image-container[_ngcontent-%COMP%]   #current-figure[_ngcontent-%COMP%] > #current-image[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block}.main-image-container[_ngcontent-%COMP%]   #current-figure[_ngcontent-%COMP%] > #current-image.unclickable[_ngcontent-%COMP%]{cursor:not-allowed}.main-image-container[_ngcontent-%COMP%]   #current-figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{padding:10px;position:absolute;bottom:0;left:0;right:0}.main-image-container[_ngcontent-%COMP%]   #current-figure[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:bold;text-align:center}#current-image[_ngcontent-%COMP%]{height:auto;max-width:80vw;max-height:60vh;cursor:pointer}@media screen and (min-width: 70vw){#current-image[_ngcontent-%COMP%]{max-width:70vw}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\", \".arrow-image[_ngcontent-%COMP%], .right-arrow-image[_ngcontent-%COMP%], .left-arrow-image[_ngcontent-%COMP%], .empty-arrow-image[_ngcontent-%COMP%]{width:30px;height:30px;background-size:30px}.empty-arrow-image[_ngcontent-%COMP%]{background:black;opacity:0}.left-arrow-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.right-arrow-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}\", \"@media only screen and (max-width: 1024px),only screen and (max-device-width: 1024px){.current-image-previous[_ngcontent-%COMP%]{display:none}.current-image-next[_ngcontent-%COMP%]{display:none}}@media only screen and (min-device-width: 1025px){.current-image-preview[_ngcontent-%COMP%], .current-image-next[_ngcontent-%COMP%], .current-image-previous[_ngcontent-%COMP%]{height:auto;cursor:pointer;opacity:.5;animation:fadein-semi-visible05 .8s;filter:alpha(opacity=50)}.current-image-preview[_ngcontent-%COMP%]:hover, .current-image-next[_ngcontent-%COMP%]:hover, .current-image-previous[_ngcontent-%COMP%]:hover{opacity:1;transition-property:opacity;transition:all .5s ease}.current-image-previous[_ngcontent-%COMP%]{margin-left:10px;margin-right:5px}.current-image-next[_ngcontent-%COMP%]{margin-right:10px;margin-left:5px}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CurrentImageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-current-image',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<main class=\\\"main-image-container\\\"\\n      ksKeyboardNavigation [isOpen]=\\\"isOpen\\\" (keyboardNavigation)=\\\"onKeyPress($event)\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.mainContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.mainContainerTitle\\\">\\n\\n  <div class=\\\"left-sub-container\\\">\\n    <a class=\\\"nav-left {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isFirstImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{isFirstImage ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isFirstImage ? '' : accessibilityConfig?.mainPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getLeftPreviewImage() as leftPreview\\\">\\n        <img *ngIf=\\\"!isFirstImage; else firstImage\\\"\\n             class=\\\"inside current-image-previous\\\"\\n             [src]=\\\"leftPreview.plain?.img ? leftPreview.plain?.img : leftPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"leftPreview.plain?.fallbackImg ? leftPreview.plain?.fallbackImg : leftPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"leftPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(leftPreview.modal.title || leftPreview.modal.title === '') ? leftPreview.modal.title : getDescriptionToDisplay(leftPreview)\\\"\\n             alt=\\\"{{leftPreview.modal.alt ? leftPreview.modal.alt : getAltDescriptionByImage(leftPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\"/>\\n        <ng-template #firstImage>\\n          <div class=\\\"current-image-previous hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"></div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n  </div>\\n\\n\\n  <figure id=\\\"current-figure\\\" [style.display]=\\\"loading ? 'none' : ''\\\">\\n    <img id=\\\"current-image\\\"\\n         class=\\\"inside\\\"\\n         [ngClass]=\\\"currentImageConfig?.navigateOnClick ? '' : 'unclickable'\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (load)=\\\"onImageLoad($event)\\\"\\n         (click)=\\\"onImageEvent($event, clickAction)\\\" (keyup)=\\\"onImageEvent($event, keyboardAction)\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"inside description\\\"\\n                ksDescription [description]=\\\"currentImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\">\\n    </figcaption>\\n  </figure>\\n\\n  <div class=\\\"right-sub-container\\\">\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getRightPreviewImage() as rightPreview\\\">\\n        <img *ngIf=\\\"!isLastImage; else lastImage\\\"\\n             class=\\\"inside current-image-next\\\"\\n             [src]=\\\"rightPreview.plain?.img ? rightPreview.plain?.img : rightPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"rightPreview.plain?.fallbackImg ? rightPreview.plain?.fallbackImg : rightPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"rightPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(rightPreview.modal.title || rightPreview.modal.title === '') ? rightPreview.modal.title : getDescriptionToDisplay(rightPreview)\\\"\\n             alt=\\\"{{rightPreview.modal.alt ? rightPreview.modal.alt : getAltDescriptionByImage(rightPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\"/>\\n        <ng-template #lastImage>\\n          <div class=\\\"current-image-next hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\">\\n          </div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"loading && currentImageConfig?.loadingConfig?.enable\\\">\\n      <ks-loading-spinner [loadingConfig]=\\\"currentImageConfig?.loadingConfig\\\"\\n                          [accessibilityConfig]=\\\"accessibilityConfig\\\"></ks-loading-spinner>\\n    </ng-container>\\n\\n    <a class=\\\"nav-right {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{isLastImage ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isLastImage ? '' : accessibilityConfig?.mainNextImageTitle\\\"></div>\\n    </a>\\n  </div>\\n</main>\\n\",\n      styles: [\":host{display:flex;flex-direction:column;justify-content:center}.main-image-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-image-container .nav,.main-image-container>.right-sub-container>.nav-right,.main-image-container>.left-sub-container>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s}.main-image-container .nav:hover,.main-image-container>.right-sub-container>.nav-right:hover,.main-image-container>.left-sub-container>.nav-left:hover{transform:scale(1.1)}.main-image-container>.left-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.left-sub-container>.nav-left{margin-right:5px;margin-left:15px}.main-image-container>.left-sub-container>.nav-left.no-pointer{cursor:default!important}.main-image-container>.right-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.right-sub-container>.nav-right{margin-right:15px;margin-left:5px}.main-image-container>.right-sub-container>.nav-right.no-pointer{cursor:default!important}.main-image-container #current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}.main-image-container #current-figure>#current-image{max-width:100%;height:auto;display:block}.main-image-container #current-figure>#current-image.unclickable{cursor:not-allowed}.main-image-container #current-figure figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}.main-image-container #current-figure figcaption .description{font-weight:bold;text-align:center}#current-image{height:auto;max-width:80vw;max-height:60vh;cursor:pointer}@media screen and (min-width: 70vw){#current-image{max-width:70vw}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\", \"@media only screen and (max-width: 1024px),only screen and (max-device-width: 1024px){.current-image-previous{display:none}.current-image-next{display:none}}@media only screen and (min-device-width: 1025px){.current-image-preview,.current-image-next,.current-image-previous{height:auto;cursor:pointer;opacity:.5;animation:fadein-semi-visible05 .8s;filter:alpha(opacity=50)}.current-image-preview:hover,.current-image-next:hover,.current-image-previous:hover{opacity:1;transition-property:opacity;transition:all .5s ease}.current-image-previous{margin-left:10px;margin-right:5px}.current-image-next{margin-right:10px;margin-left:5px}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: i0.NgZone\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: ConfigService\n    }];\n  }, {\n    // @ts-ignore\n    id: [{\n      type: Input\n    }],\n    // @ts-ignore\n    currentImage: [{\n      type: Input\n    }],\n    // @ts-ignore\n    images: [{\n      type: Input\n    }],\n    // @ts-ignore\n    isOpen: [{\n      type: Input\n    }],\n    loadImage: [{\n      type: Output\n    }],\n    changeImage: [{\n      type: Output\n    }],\n    closeGallery: [{\n      type: Output\n    }],\n    onMouseEnter: [{\n      type: HostListener,\n      args: ['mouseenter']\n    }],\n    onMouseLeave: [{\n      type: HostListener,\n      args: ['mouseleave']\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Service to intercept ctrl+s (or cmd+s on macOS) using a third-party library, called Mousetrap.\n */\n\n\nclass KeyboardService {\n  // tslint:disable-next-line:no-any\n  constructor(platformId) {\n    this.platformId = platformId;\n  }\n\n  init(config) {\n    return new Promise((resolve, reject) => {\n      // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n      if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n        // To prevent issues with angular-universal on server-side\n        if (isPlatformBrowser(this.platformId)) {\n          import('mousetrap') // tslint:disable-next-line:no-any\n          .then(loaded => {\n            // in this case, the .default is required for Typescript Dynamic Imports\n            this.mousetrapInstance = loaded.default;\n            resolve();\n            return;\n          }).catch(err => {\n            reject(err);\n            return;\n          });\n        } else {\n          resolve();\n          return;\n        }\n      } else {\n        resolve();\n        return;\n      }\n    });\n  }\n  /**\n   * Method to add a lister for ctrl+s/cmd+s keyboard events.\n   * @param (e: KeyboardEvent, combo: string) => any onBind callback function to add shortcuts\n   */\n  // tslint:disable-next-line:no-any\n\n\n  add(onBind, config) {\n    // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n    if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n      // To prevent issues with angular-universal on server-side\n      if (isPlatformBrowser(this.platformId)) {\n        this.mousetrapInstance.bind(config.keyboardServiceConfig.shortcuts, (event, combo) => {\n          if (event.preventDefault) {\n            event.preventDefault();\n          } else {\n            // internet explorer\n            event.returnValue = false;\n          }\n\n          onBind(event, combo);\n        });\n      }\n    }\n  }\n  /**\n   * Method to reset all listeners. Please, call this function when needed\n   * to free resources ad prevent leaks.\n   */\n\n\n  reset(config) {\n    // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n    if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n      // To prevent issues with angular-universal on server-side\n      if (isPlatformBrowser(this.platformId)) {\n        this.mousetrapInstance.reset();\n      }\n    }\n  }\n\n}\n\nKeyboardService.ɵfac = function KeyboardService_Factory(t) {\n  return new (t || KeyboardService)(i0.ɵɵinject(PLATFORM_ID));\n};\n\nKeyboardService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: KeyboardService,\n  factory: KeyboardService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(KeyboardService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Service to check if the provided id is unique\n */\n\n\nclass IdValidatorService {\n  constructor() {\n    this.ids = new Map();\n  }\n  /**\n   * Method to check and reserve an id for the current instance of the library.\n   * In this way, no other instances can use the same id.\n   * @param galleryId number or undefined that represents the unique id of the gallery.\n   * @return boolean true if success. false is never returned, instead an exception is thrown\n   * @throws a error with a message if galleryId is neither unique, < 0 or an integer\n   */\n\n\n  checkAndAdd(galleryId) {\n    if (galleryId === undefined || !Number.isInteger(galleryId) || galleryId < 0) {\n      throw new Error('You must provide a valid [id]=\"unique integer > 0 here\" to the gallery/carousel in your template');\n    }\n\n    if (this.ids.get(galleryId)) {\n      throw new Error(`Cannot create gallery with id=${galleryId} because already used in your application. This must be a unique integer >= 0`);\n    }\n\n    this.ids.set(galleryId, galleryId);\n    return true;\n  }\n  /**\n   * Method to remove a reserved id. In this way you are able to use the id again for another instance of the library.\n   * @param galleryId number or undefined that represents the unique id of the gallery.\n   * @return boolean true if success. false is never returned, instead an exception is thrown*\n   * @throws a error with a message if galleryId is neither integer or < 0\n   * * this should be improved without return true, because it doesn't make sense! :(\n   */\n\n\n  remove(galleryId) {\n    if (galleryId === undefined || !Number.isInteger(galleryId) || galleryId < 0) {\n      throw new Error('You must provide a valid [id]=\"unique integer > 0 here\" to the gallery/carousel in your template');\n    }\n\n    this.ids.delete(galleryId);\n    return true;\n  }\n\n}\n\nIdValidatorService.ɵfac = function IdValidatorService_Factory(t) {\n  return new (t || IdValidatorService)();\n};\n\nIdValidatorService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: IdValidatorService,\n  factory: IdValidatorService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(IdValidatorService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\n/**\n * Default button size object\n */\n\n\nconst KS_DEFAULT_SIZE = {\n  height: 'auto',\n  width: '30px'\n};\n/**\n * Default close button object\n */\n\nconst KS_DEFAULT_BTN_CLOSE = {\n  className: 'close-image',\n  size: KS_DEFAULT_SIZE,\n  type: ButtonType.CLOSE,\n  title: 'Close this modal image gallery',\n  ariaLabel: 'Close this modal image gallery'\n};\n/**\n * Default download button object\n */\n\nconst KS_DEFAULT_BTN_DOWNLOAD = {\n  className: 'download-image',\n  size: KS_DEFAULT_SIZE,\n  type: ButtonType.DOWNLOAD,\n  title: 'Download the current image',\n  ariaLabel: 'Download the current image'\n};\n/**\n * Default exturl button object\n */\n\nconst KS_DEFAULT_BTN_EXTURL = {\n  className: 'ext-url-image',\n  size: KS_DEFAULT_SIZE,\n  type: ButtonType.EXTURL,\n  title: 'Navigate the current image',\n  ariaLabel: 'Navigate the current image'\n}; // /**\n//  * Default refresh button object\n//  */\n// export const KS_DEFAULT_BTN_REFRESH: ButtonConfig = {\n//   className: 'refresh-image',\n//   size: KS_DEFAULT_SIZE,\n//   type: ButtonType.REFRESH,\n//   title: 'Refresh all images',\n//   ariaLabel: 'Refresh all images'\n// };\n\n/**\n * Default delete button object\n */\n\nconst KS_DEFAULT_BTN_DELETE = {\n  className: 'delete-image',\n  size: KS_DEFAULT_SIZE,\n  type: ButtonType.DELETE,\n  title: 'Delete the current image',\n  ariaLabel: 'Delete the current image'\n};\n/**\n * Default full-screen button object\n */\n\nconst KS_DEFAULT_BTN_FULL_SCREEN = {\n  className: 'fullscreen-image',\n  size: KS_DEFAULT_SIZE,\n  type: ButtonType.FULLSCREEN,\n  title: 'Switch to full-screen',\n  ariaLabel: 'Switch to full-screen'\n};\n/**\n * Default rotate button object\n */\n// export const KS_DEFAULT_BTN_ROTATE: ButtonConfig = {\n//   className: 'rotate-image',\n//   size: KS_DEFAULT_SIZE,\n//   type: ButtonType.ROTATE,\n//   title: 'Rotate clockwise of 90 degrees the current image',\n//   ariaLabel: 'Rotate clockwise of 90 degrees the current image'\n// };\n\n/*\n The MIT License (MIT)\n\n Copyright (c) 2017 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with all upper buttons.\n * Also it emits click events as outputs.\n */\n\nclass UpperButtonsComponent extends AccessibleComponent {\n  constructor(configService) {\n    super();\n    this.configService = configService;\n    /**\n     * Output to emit clicks on refresh button. The payload contains a `ButtonEvent`.\n     */\n\n    this.refresh = new EventEmitter();\n    /**\n     * Output to emit clicks on delete button. The payload contains a `ButtonEvent`.\n     */\n\n    this.delete = new EventEmitter();\n    /**\n     * Output to emit clicks on navigate button. The payload contains a `ButtonEvent`.\n     */\n\n    this.navigate = new EventEmitter();\n    /**\n     * Output to emit clicks on download button. The payload contains a `ButtonEvent`.\n     */\n\n    this.download = new EventEmitter();\n    /**\n     * Output to emit clicks on close button. The payload contains a `ButtonEvent`.\n     */\n\n    this.closeButton = new EventEmitter();\n    /**\n     * Output to emit clicks on full-screen button. The payload contains a `ButtonEvent`.\n     */\n\n    this.fullscreen = new EventEmitter();\n    /**\n     * Output to emit clicks on all custom buttons. The payload contains a `ButtonEvent`.\n     */\n\n    this.customEmit = new EventEmitter();\n    /**\n     * Default buttons array for standard configuration\n     */\n\n    this.defaultButtonsDefault = [KS_DEFAULT_BTN_CLOSE];\n    /**\n     * Default buttons array for simple configuration\n     */\n\n    this.simpleButtonsDefault = [KS_DEFAULT_BTN_DOWNLOAD, ...this.defaultButtonsDefault];\n    /**\n     * Default buttons array for advanced configuration\n     */\n\n    this.advancedButtonsDefault = [KS_DEFAULT_BTN_EXTURL, ...this.simpleButtonsDefault];\n    /**\n     * Default buttons array for full configuration\n     */\n\n    this.fullButtonsDefault = [KS_DEFAULT_BTN_FULL_SCREEN, KS_DEFAULT_BTN_DELETE, ...this.advancedButtonsDefault];\n  }\n  /**\n   * Method ´ngOnInit´ to build `configButtons` applying a default value and also to\n   * init the `buttons` array.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.buttonsConfig) {\n      throw new Error('Internal library error - libConfig and buttonsConfig must be defined');\n    }\n\n    this.buttonsConfig = libConfig.buttonsConfig;\n\n    switch (this.buttonsConfig.strategy) {\n      case ButtonsStrategy.SIMPLE:\n        this.buttons = this.addButtonIds(this.simpleButtonsDefault);\n        break;\n\n      case ButtonsStrategy.ADVANCED:\n        this.buttons = this.addButtonIds(this.advancedButtonsDefault);\n        break;\n\n      case ButtonsStrategy.FULL:\n        this.buttons = this.addButtonIds(this.fullButtonsDefault);\n        break;\n\n      case ButtonsStrategy.CUSTOM:\n        this.buttons = this.addButtonIds(this.validateCustomButtons(this.buttonsConfig.buttons));\n        break;\n\n      case ButtonsStrategy.DEFAULT:\n      default:\n        this.buttons = this.addButtonIds(this.defaultButtonsDefault);\n        break;\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a button.\n   * This will call a private method to trigger an output with the right payload.\n   * @param InternalButtonConfig button that called this method\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the source event or `Action.CLICK` if not specified\n   * @throws an error if the button type is unknown\n   */\n\n\n  onEvent(button, event, action = Action.CLICK) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    if (!event) {\n      return;\n    }\n\n    const dataToEmit = {\n      button,\n      // current image initialized as null\n      // (I'll fill this value inside the parent of this component\n      image: null,\n      action,\n      galleryId: this.id\n    };\n\n    switch (button.type) {\n      case ButtonType.DELETE:\n        this.triggerOnMouseAndKeyboard(this.delete, event, dataToEmit);\n        break;\n\n      case ButtonType.EXTURL:\n        if (!this.currentImage || !this.currentImage.modal || !this.currentImage.modal.extUrl) {\n          return;\n        }\n\n        this.triggerOnMouseAndKeyboard(this.navigate, event, dataToEmit);\n        break;\n\n      case ButtonType.DOWNLOAD:\n        this.triggerOnMouseAndKeyboard(this.download, event, dataToEmit);\n        break;\n\n      case ButtonType.CLOSE:\n        this.triggerOnMouseAndKeyboard(this.closeButton, event, dataToEmit);\n        break;\n\n      case ButtonType.CUSTOM:\n        this.triggerOnMouseAndKeyboard(this.customEmit, event, dataToEmit);\n        break;\n\n      case ButtonType.FULLSCREEN:\n        this.triggerOnMouseAndKeyboard(this.fullscreen, event, dataToEmit);\n        break;\n\n      default:\n        throw new Error(`Unknown button's type into ButtonConfig`);\n    }\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item or undefined if the item is not valid\n   */\n\n\n  trackById(index, item) {\n    return item ? item.id : undefined;\n  }\n  /**\n   * Private method to emit an event using the specified output as an `EventEmitter`.\n   * @param EventEmitter<ButtonEvent> emitter is the output to emit the `ButtonEvent`\n   * @param KeyboardEvent | MouseEvent event is the source that triggered this method\n   * @param ButtonEvent dataToEmit payload to emit\n   */\n\n\n  triggerOnMouseAndKeyboard(emitter, event, dataToEmit) {\n    if (!emitter) {\n      throw new Error(`UpperButtonsComponent unknown emitter in triggerOnMouseAndKeyboard`);\n    }\n\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT) {\n      emitter.emit(dataToEmit);\n    }\n  }\n  /**\n   * Private method to add ids to the array of buttons.\n   * It adds ids in a reverse way, to be sure that the last button will always have id = 0.\n   * This is really useful in unit testing to be sure that close button always have id = 0, download 1 and so on...\n   * It's totally transparent to the user.\n   * @param ButtonConfig[] buttons config array\n   * @returns ButtonConfig[] the input array with incremental numeric ids\n   */\n\n\n  addButtonIds(buttons) {\n    return buttons.map((val, i) => Object.assign(val, {\n      id: buttons.length - 1 - i\n    }));\n  }\n  /**\n   * Private method to validate custom buttons received as input.\n   * @param ButtonConfig[] buttons config array. [] by default.\n   * @returns ButtonConfig[] the same input buttons config array\n   * @throws an error is exists a button with an unknown type\n   */\n\n\n  validateCustomButtons(buttons = []) {\n    buttons.forEach(val => {\n      const indexOfButtonType = WHITELIST_BUTTON_TYPES.findIndex(type => type === val.type);\n\n      if (indexOfButtonType === -1) {\n        throw new Error(`Unknown ButtonType. For custom types use ButtonType.CUSTOM`);\n      }\n    });\n    return buttons;\n  }\n\n}\n\nUpperButtonsComponent.ɵfac = function UpperButtonsComponent_Factory(t) {\n  return new (t || UpperButtonsComponent)(i0.ɵɵdirectiveInject(ConfigService));\n};\n\nUpperButtonsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: UpperButtonsComponent,\n  selectors: [[\"ks-upper-buttons\"]],\n  inputs: {\n    id: \"id\",\n    currentImage: \"currentImage\"\n  },\n  outputs: {\n    refresh: \"refresh\",\n    delete: \"delete\",\n    navigate: \"navigate\",\n    download: \"download\",\n    closeButton: \"closeButton\",\n    fullscreen: \"fullscreen\",\n    customEmit: \"customEmit\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 2,\n  vars: 1,\n  consts: [[1, \"buttons-container\"], [4, \"ngIf\"], [\"class\", \"upper-button\", \"ksSize\", \"\", \"role\", \"button\", 3, \"sizeConfig\", \"ngStyle\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"ksSize\", \"\", \"role\", \"button\", 1, \"upper-button\", 3, \"sizeConfig\", \"ngStyle\", \"tabIndex\", \"click\", \"keyup\"], [\"aria-hidden\", \"true\", 3, \"title\"]],\n  template: function UpperButtonsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\", 0);\n      i0.ɵɵtemplate(1, UpperButtonsComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.buttonsConfig || (ctx.buttonsConfig == null ? null : ctx.buttonsConfig.visible));\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, SizeDirective, i2.NgStyle],\n  styles: [\".buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.buttons-container[_ngcontent-%COMP%] > .upper-button[_ngcontent-%COMP%]{align-self:center;margin-right:30px;margin-top:28px;font-size:50px;text-decoration:none;cursor:pointer;animation:animatezoom .6s;color:#fff}@keyframes animatezoom{0%{transform:scale(0)}to{transform:scale(1)}}.base-btn[_ngcontent-%COMP%], .copy[_ngcontent-%COMP%], .refresh-image[_ngcontent-%COMP%], .close-image[_ngcontent-%COMP%], .download-image[_ngcontent-%COMP%], .ext-url-image[_ngcontent-%COMP%], .delete-image[_ngcontent-%COMP%], .fullscreen-image[_ngcontent-%COMP%], .rotate-image[_ngcontent-%COMP%]{width:30px;height:30px;background-size:30px;opacity:.8;transition:all .5s}.base-btn[_ngcontent-%COMP%]:hover, .copy[_ngcontent-%COMP%]:hover, .refresh-image[_ngcontent-%COMP%]:hover, .close-image[_ngcontent-%COMP%]:hover, .download-image[_ngcontent-%COMP%]:hover, .ext-url-image[_ngcontent-%COMP%]:hover, .delete-image[_ngcontent-%COMP%]:hover, .fullscreen-image[_ngcontent-%COMP%]:hover, .rotate-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.rotate-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0IDY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2NCA2NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMzLDJjNy43NDYsMCwxNS4wMjgsMy4wMTcsMjAuNTA1LDguNDk0YzEwLjEzOCwxMC4xMzcsMTEuMzEsMjYuMzk2LDIuNzQsMzcuODQ5TDUyLDUyLjU4OVY0NGgtMnYxMWwxLDFoMTF2LTJoLTguNTgyICAgIGw0LjI5Mi00LjI5M2wwLjA5Mi0wLjEwNmM5LjIxMS0xMi4yNDcsNy45NzItMjkuNjY3LTIuODgzLTQwLjUyMUM0OS4wNjQsMy4yMjUsNDEuMjgsMCwzMywwVjJ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTcuNzU1LDE1LjY1N0wxMiwxMS40MTFWMjBoMlY5bC0xLTFIMnYyaDguNTgyTDYuMjksMTQuMjkzbC0wLjA5MiwwLjEwNkMtMy4wMTMsMjYuNjQ2LTEuNzczLDQ0LjA2Niw5LjA4MSw1NC45MiAgICBDMTQuOTM2LDYwLjc3NSwyMi43Miw2NCwzMSw2NHYtMmMtNy43NDYsMC0xNS4wMjgtMy4wMTctMjAuNTA1LTguNDk0QzAuMzU3LDQzLjM2OS0wLjgxNCwyNy4xMSw3Ljc1NSwxNS42NTd6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.fullscreen-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTMgNTMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzIDUzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNNTIuOTIzLDAuNjE4Yy0wLjEwMS0wLjI0NC0wLjI5Ni0wLjQzOS0wLjU0MS0wLjU0MUM1Mi4yNiwwLjAyNyw1Mi4xMywwLDUyLDBINDBjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoOS41ODYgICBMMzMuMjkzLDE4LjI5M2MtMC4zOTEsMC4zOTEtMC4zOTEsMS4wMjMsMCwxLjQxNEMzMy40ODgsMTkuOTAyLDMzLjc0NCwyMCwzNCwyMHMwLjUxMi0wLjA5OCwwLjcwNy0wLjI5M0w1MSwzLjQxNFYxMyAgIGMwLDAuNTUyLDAuNDQ4LDEsMSwxczEtMC40NDgsMS0xVjFDNTMsMC44Nyw1Mi45NzMsMC43NCw1Mi45MjMsMC42MTh6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTE4LjI5MywzMy4yOTNMMiw0OS41ODZWNDBjMC0wLjU1Mi0wLjQ0OC0xLTEtMXMtMSwwLjQ0OC0xLDF2MTJjMCwwLjEzLDAuMDI3LDAuMjYsMC4wNzcsMC4zODIgICBjMC4xMDEsMC4yNDQsMC4yOTYsMC40MzksMC41NDEsMC41NDFDMC43NCw1Mi45NzMsMC44Nyw1MywxLDUzaDEyYzAuNTUyLDAsMS0wLjQ0OCwxLTFzLTAuNDQ4LTEtMS0xSDMuNDE0bDE2LjI5My0xNi4yOTMgICBjMC4zOTEtMC4zOTEsMC4zOTEtMS4wMjMsMC0xLjQxNFMxOC42ODQsMzIuOTAyLDE4LjI5MywzMy4yOTN6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTEsMTRjMC41NTIsMCwxLTAuNDQ4LDEtMVYzLjQxNGwxNi4yOTIsMTYuMjkyYzAuMTk1LDAuMTk1LDAuNDUxLDAuMjkzLDAuNzA3LDAuMjkzczAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzICAgYzAuMzkxLTAuMzkxLDAuMzkxLTEuMDIzLDAtMS40MTRMMy40MTQsMkgxM2MwLjU1MiwwLDEtMC40NDgsMS0xcy0wLjQ0OC0xLTEtMUgxQzAuODcsMCwwLjc0LDAuMDI3LDAuNjE4LDAuMDc3ICAgQzAuMzczLDAuMTc5LDAuMTc5LDAuMzczLDAuMDc3LDAuNjE4QzAuMDI3LDAuNzQsMCwwLjg3LDAsMXYxMkMwLDEzLjU1MiwwLjQ0OCwxNCwxLDE0eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik01MiwzOWMtMC41NTIsMC0xLDAuNDQ4LTEsMXY5LjU4NkwzNC43MDcsMzMuMjkyYy0wLjM5MS0wLjM5MS0xLjAyMy0wLjM5MS0xLjQxNCwwcy0wLjM5MSwxLjAyMywwLDEuNDE0TDQ5LjU4Niw1MUg0MCAgIGMtMC41NTIsMC0xLDAuNDQ4LTEsMXMwLjQ0OCwxLDEsMWgxMmMwLjEzLDAsMC4yNi0wLjAyNywwLjM4Mi0wLjA3N2MwLjI0NC0wLjEwMSwwLjQzOS0wLjI5NiwwLjU0MS0wLjU0MSAgIEM1Mi45NzMsNTIuMjYsNTMsNTIuMTMsNTMsNTJWNDBDNTMsMzkuNDQ4LDUyLjU1MiwzOSw1MiwzOXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.delete-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4Ni40IDQ4Ni40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODYuNCA0ODYuNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ0Niw3MEgzNDQuOFY1My41YzAtMjkuNS0yNC01My41LTUzLjUtNTMuNWgtOTYuMmMtMjkuNSwwLTUzLjUsMjQtNTMuNSw1My41VjcwSDQwLjRjLTcuNSwwLTEzLjUsNi0xMy41LDEzLjUgICAgUzMyLjksOTcsNDAuNCw5N2gyNC40djMxNy4yYzAsMzkuOCwzMi40LDcyLjIsNzIuMiw3Mi4yaDIxMi40YzM5LjgsMCw3Mi4yLTMyLjQsNzIuMi03Mi4yVjk3SDQ0NmM3LjUsMCwxMy41LTYsMTMuNS0xMy41ICAgIFM0NTMuNSw3MCw0NDYsNzB6IE0xNjguNiw1My41YzAtMTQuNiwxMS45LTI2LjUsMjYuNS0yNi41aDk2LjJjMTQuNiwwLDI2LjUsMTEuOSwyNi41LDI2LjVWNzBIMTY4LjZWNTMuNXogTTM5NC42LDQxNC4yICAgIGMwLDI0LjktMjAuMyw0NS4yLTQ1LjIsNDUuMkgxMzdjLTI0LjksMC00NS4yLTIwLjMtNDUuMi00NS4yVjk3aDMwMi45djMxNy4ySDM5NC42eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0yNDMuMiw0MTFjNy41LDAsMTMuNS02LDEzLjUtMTMuNVYxNTguOWMwLTcuNS02LTEzLjUtMTMuNS0xMy41cy0xMy41LDYtMTMuNSwxMy41djIzOC41ICAgIEMyMjkuNyw0MDQuOSwyMzUuNyw0MTEsMjQzLjIsNDExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNTUuMSwzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzE0MS42LDM5MC4xLDE0Ny43LDM5Ni4xLDE1NS4xLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0zMzEuMywzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzMxNy44LDM5MC4xLDMyMy44LDM5Ni4xLDMzMS4zLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.ext-url-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPjxnPjxnPjxnPjxwYXRoIGQ9Ik00ODAsMjg4djExMmMwLDQ0LjE4My0zNS44MTcsODAtODAsODBIMTEyYy00NC4xODMsMC04MC0zNS44MTctODAtODBWMTEyYzAtNDQuMTgzLDM1LjgxNy04MCw4MC04MGg5NlYwaC05NiAgICAgQzUwLjE0NCwwLDAsNTAuMTQ0LDAsMTEydjI4OGMwLDYxLjg1Niw1MC4xNDQsMTEyLDExMiwxMTJoMjg4YzYxLjg1NiwwLDExMi01MC4xNDQsMTEyLTExMlYyODhINDgweiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNzYsNDE2aDMyVjI4OGMwLTEyNS43NiwxMDcuNTItMTI4LDExMi0xMjhoMTA1LjQ0bC04NC42NCw4NC42NGwyMi41NiwyMi41NmwxMTItMTEyYzYuMjA0LTYuMjQxLDYuMjA0LTE2LjMxOSwwLTIyLjU2ICAgICBsLTExMi0xMTJsLTIyLjcyLDIyLjcybDg0LjgsODQuNjRIMzIwYy0xLjQ0LDAtMTQ0LDEuNzYtMTQ0LDE2MFY0MTZ6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.download-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3MS4yIDQ3MS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzEuMiA0NzEuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ1Ny43LDIzMC4xNWMtNy41LDAtMTMuNSw2LTEzLjUsMTMuNXYxMjIuOGMwLDMzLjQtMjcuMiw2MC41LTYwLjUsNjAuNUg4Ny41Yy0zMy40LDAtNjAuNS0yNy4yLTYwLjUtNjAuNXYtMTI0LjggICAgYzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MTI0LjhjMCw0OC4zLDM5LjMsODcuNSw4Ny41LDg3LjVoMjk2LjJjNDguMywwLDg3LjUtMzkuMyw4Ny41LTg3LjV2LTEyMi44ICAgIEM0NzEuMiwyMzYuMjUsNDY1LjIsMjMwLjE1LDQ1Ny43LDIzMC4xNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMjI2LjEsMzQ2Ljc1YzIuNiwyLjYsNi4xLDQsOS41LDRzNi45LTEuMyw5LjUtNGw4NS44LTg1LjhjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFjLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC02Mi43LDYyLjggICAgVjMwLjc1YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjczLjlsLTYyLjgtNjIuOGMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xICAgIEwyMjYuMSwzNDYuNzV6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.close-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3NS4yIDQ3NS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzUuMiA0NzUuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQwNS42LDY5LjZDMzYwLjcsMjQuNywzMDEuMSwwLDIzNy42LDBzLTEyMy4xLDI0LjctMTY4LDY5LjZTMCwxNzQuMSwwLDIzNy42czI0LjcsMTIzLjEsNjkuNiwxNjhzMTA0LjUsNjkuNiwxNjgsNjkuNiAgICBzMTIzLjEtMjQuNywxNjgtNjkuNnM2OS42LTEwNC41LDY5LjYtMTY4UzQ1MC41LDExNC41LDQwNS42LDY5LjZ6IE0zODYuNSwzODYuNWMtMzkuOCwzOS44LTkyLjcsNjEuNy0xNDguOSw2MS43ICAgIHMtMTA5LjEtMjEuOS0xNDguOS02MS43Yy04Mi4xLTgyLjEtODIuMS0yMTUuNywwLTI5Ny44QzEyOC41LDQ4LjksMTgxLjQsMjcsMjM3LjYsMjdzMTA5LjEsMjEuOSwxNDguOSw2MS43ICAgIEM0NjguNiwxNzAuOCw0NjguNiwzMDQuNCwzODYuNSwzODYuNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMzQyLjMsMTMyLjljLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC04NS42LDg1LjZMMTUyLDEzMi45Yy01LjMtNS4zLTEzLjgtNS4zLTE5LjEsMGMtNS4zLDUuMy01LjMsMTMuOCwwLDE5LjEgICAgbDg1LjYsODUuNmwtODUuNiw4NS42Yy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWMyLjYsMi42LDYuMSw0LDkuNSw0czYuOS0xLjMsOS41LTRsODUuNi04NS42bDg1LjYsODUuNmMyLjYsMi42LDYuMSw0LDkuNSw0ICAgIGMzLjUsMCw2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xbC04NS40LTg1LjZsODUuNi04NS42QzM0Ny42LDE0Ni43LDM0Ny42LDEzOC4yLDM0Mi4zLDEzMi45eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.refresh-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OS43MTEgNDg5LjcxMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg5LjcxMSA0ODkuNzExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48Zz48cGF0aCBkPSJNMTEyLjE1Niw5Ny4xMTFjNzIuMy02NS40LDE4MC41LTY2LjQsMjUzLjgtNi43bC01OC4xLDIuMmMtNy41LDAuMy0xMy4zLDYuNS0xMywxNGMwLjMsNy4zLDYuMywxMywxMy41LDEzICAgIGMwLjIsMCwwLjMsMCwwLjUsMGw4OS4yLTMuM2M3LjMtMC4zLDEzLTYuMiwxMy0xMy41di0xYzAtMC4yLDAtMC4zLDAtMC41di0wLjFsMCwwbC0zLjMtODguMmMtMC4zLTcuNS02LjYtMTMuMy0xNC0xMyAgICBjLTcuNSwwLjMtMTMuMyw2LjUtMTMsMTRsMi4xLDU1LjNjLTM2LjMtMjkuNy04MS00Ni45LTEyOC44LTQ5LjNjLTU5LjItMy0xMTYuMSwxNy4zLTE2MCw1Ny4xYy02MC40LDU0LjctODYsMTM3LjktNjYuOCwyMTcuMSAgICBjMS41LDYuMiw3LDEwLjMsMTMuMSwxMC4zYzEuMSwwLDIuMS0wLjEsMy4yLTAuNGM3LjItMS44LDExLjctOS4xLDkuOS0xNi4zQzM2LjY1NiwyMTguMjExLDU5LjA1NiwxNDUuMTExLDExMi4xNTYsOTcuMTExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik00NjIuNDU2LDE5NS41MTFjLTEuOC03LjItOS4xLTExLjctMTYuMy05LjljLTcuMiwxLjgtMTEuNyw5LjEtOS45LDE2LjNjMTYuOSw2OS42LTUuNiwxNDIuNy01OC43LDE5MC43ICAgIGMtMzcuMywzMy43LTg0LjEsNTAuMy0xMzAuNyw1MC4zYy00NC41LDAtODguOS0xNS4xLTEyNC43LTQ0LjlsNTguOC01LjNjNy40LTAuNywxMi45LTcuMiwxMi4yLTE0LjdzLTcuMi0xMi45LTE0LjctMTIuMmwtODguOSw4ICAgIGMtNy40LDAuNy0xMi45LDcuMi0xMi4yLDE0LjdsOCw4OC45YzAuNiw3LDYuNSwxMi4zLDEzLjQsMTIuM2MwLjQsMCwwLjgsMCwxLjItMC4xYzcuNC0wLjcsMTIuOS03LjIsMTIuMi0xNC43bC00LjgtNTQuMSAgICBjMzYuMywyOS40LDgwLjgsNDYuNSwxMjguMyw0OC45YzMuOCwwLjIsNy42LDAuMywxMS4zLDAuM2M1NS4xLDAsMTA3LjUtMjAuMiwxNDguNy01Ny40ICAgIEM0NTYuMDU2LDM1Ny45MTEsNDgxLjY1NiwyNzQuODExLDQ2Mi40NTYsMTk1LjUxMXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==)}.copy[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OC4zIDQ4OC4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODguMyA0ODguMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMxNC4yNSw4NS40aC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42djMyNS43YzAsMjEuMywxNy4zLDM4LjYsMzguNiwzOC42aDIyN2MyMS4zLDAsMzguNi0xNy4zLDM4LjYtMzguNlYxMjQgICAgQzM1Mi43NSwxMDIuNywzMzUuNDUsODUuNCwzMTQuMjUsODUuNHogTTMyNS43NSw0NDkuNmMwLDYuNC01LjIsMTEuNi0xMS42LDExLjZoLTIyN2MtNi40LDAtMTEuNi01LjItMTEuNi0xMS42VjEyNCAgICBjMC02LjQsNS4yLTExLjYsMTEuNi0xMS42aDIyN2M2LjQsMCwxMS42LDUuMiwxMS42LDExLjZWNDQ5LjZ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTQwMS4wNSwwaC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42YzAsNy41LDYsMTMuNSwxMy41LDEzLjVzMTMuNS02LDEzLjUtMTMuNWMwLTYuNCw1LjItMTEuNiwxMS42LTExLjZoMjI3ICAgIGM2LjQsMCwxMS42LDUuMiwxMS42LDExLjZ2MzI1LjdjMCw2LjQtNS4yLDExLjYtMTEuNiwxMS42Yy03LjUsMC0xMy41LDYtMTMuNSwxMy41czYsMTMuNSwxMy41LDEzLjVjMjEuMywwLDM4LjYtMTcuMywzOC42LTM4LjYgICAgVjM4LjZDNDM5LjY1LDE3LjMsNDIyLjM1LDAsNDAxLjA1LDB6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(UpperButtonsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-upper-buttons',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<header class=\\\"buttons-container\\\">\\n\\n  <ng-container *ngIf=\\\"!buttonsConfig || buttonsConfig?.visible\\\">\\n    <a *ngFor=\\\"let btn of buttons; trackBy: trackById; let index = index\\\"\\n       class=\\\"upper-button\\\"\\n       ksSize [sizeConfig]=\\\"{width: btn.size?.width!, height: btn.size?.height!}\\\"\\n       [ngStyle]=\\\"{'font-size': btn.fontSize}\\\"\\n       [attr.aria-label]=\\\"btn.ariaLabel\\\"\\n       [tabIndex]=\\\"0\\\" role=\\\"button\\\"\\n       (click)=\\\"onEvent(btn, $event)\\\" (keyup)=\\\"onEvent(btn, $event)\\\">\\n      <div class=\\\"inside {{btn.className}}\\\" aria-hidden=\\\"true\\\" title=\\\"{{btn.title}}\\\"></div>\\n    </a>\\n  </ng-container>\\n</header>\\n\",\n      styles: [\".buttons-container{display:flex;flex-direction:row;justify-content:flex-end}.buttons-container>.upper-button{align-self:center;margin-right:30px;margin-top:28px;font-size:50px;text-decoration:none;cursor:pointer;animation:animatezoom .6s;color:#fff}@keyframes animatezoom{0%{transform:scale(0)}to{transform:scale(1)}}.base-btn,.copy,.refresh-image,.close-image,.download-image,.ext-url-image,.delete-image,.fullscreen-image,.rotate-image{width:30px;height:30px;background-size:30px;opacity:.8;transition:all .5s}.base-btn:hover,.copy:hover,.refresh-image:hover,.close-image:hover,.download-image:hover,.ext-url-image:hover,.delete-image:hover,.fullscreen-image:hover,.rotate-image:hover{transform:scale(1.2)}.rotate-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0IDY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2NCA2NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMzLDJjNy43NDYsMCwxNS4wMjgsMy4wMTcsMjAuNTA1LDguNDk0YzEwLjEzOCwxMC4xMzcsMTEuMzEsMjYuMzk2LDIuNzQsMzcuODQ5TDUyLDUyLjU4OVY0NGgtMnYxMWwxLDFoMTF2LTJoLTguNTgyICAgIGw0LjI5Mi00LjI5M2wwLjA5Mi0wLjEwNmM5LjIxMS0xMi4yNDcsNy45NzItMjkuNjY3LTIuODgzLTQwLjUyMUM0OS4wNjQsMy4yMjUsNDEuMjgsMCwzMywwVjJ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTcuNzU1LDE1LjY1N0wxMiwxMS40MTFWMjBoMlY5bC0xLTFIMnYyaDguNTgyTDYuMjksMTQuMjkzbC0wLjA5MiwwLjEwNkMtMy4wMTMsMjYuNjQ2LTEuNzczLDQ0LjA2Niw5LjA4MSw1NC45MiAgICBDMTQuOTM2LDYwLjc3NSwyMi43Miw2NCwzMSw2NHYtMmMtNy43NDYsMC0xNS4wMjgtMy4wMTctMjAuNTA1LTguNDk0QzAuMzU3LDQzLjM2OS0wLjgxNCwyNy4xMSw3Ljc1NSwxNS42NTd6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.fullscreen-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTMgNTMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzIDUzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNNTIuOTIzLDAuNjE4Yy0wLjEwMS0wLjI0NC0wLjI5Ni0wLjQzOS0wLjU0MS0wLjU0MUM1Mi4yNiwwLjAyNyw1Mi4xMywwLDUyLDBINDBjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoOS41ODYgICBMMzMuMjkzLDE4LjI5M2MtMC4zOTEsMC4zOTEtMC4zOTEsMS4wMjMsMCwxLjQxNEMzMy40ODgsMTkuOTAyLDMzLjc0NCwyMCwzNCwyMHMwLjUxMi0wLjA5OCwwLjcwNy0wLjI5M0w1MSwzLjQxNFYxMyAgIGMwLDAuNTUyLDAuNDQ4LDEsMSwxczEtMC40NDgsMS0xVjFDNTMsMC44Nyw1Mi45NzMsMC43NCw1Mi45MjMsMC42MTh6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTE4LjI5MywzMy4yOTNMMiw0OS41ODZWNDBjMC0wLjU1Mi0wLjQ0OC0xLTEtMXMtMSwwLjQ0OC0xLDF2MTJjMCwwLjEzLDAuMDI3LDAuMjYsMC4wNzcsMC4zODIgICBjMC4xMDEsMC4yNDQsMC4yOTYsMC40MzksMC41NDEsMC41NDFDMC43NCw1Mi45NzMsMC44Nyw1MywxLDUzaDEyYzAuNTUyLDAsMS0wLjQ0OCwxLTFzLTAuNDQ4LTEtMS0xSDMuNDE0bDE2LjI5My0xNi4yOTMgICBjMC4zOTEtMC4zOTEsMC4zOTEtMS4wMjMsMC0xLjQxNFMxOC42ODQsMzIuOTAyLDE4LjI5MywzMy4yOTN6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTEsMTRjMC41NTIsMCwxLTAuNDQ4LDEtMVYzLjQxNGwxNi4yOTIsMTYuMjkyYzAuMTk1LDAuMTk1LDAuNDUxLDAuMjkzLDAuNzA3LDAuMjkzczAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzICAgYzAuMzkxLTAuMzkxLDAuMzkxLTEuMDIzLDAtMS40MTRMMy40MTQsMkgxM2MwLjU1MiwwLDEtMC40NDgsMS0xcy0wLjQ0OC0xLTEtMUgxQzAuODcsMCwwLjc0LDAuMDI3LDAuNjE4LDAuMDc3ICAgQzAuMzczLDAuMTc5LDAuMTc5LDAuMzczLDAuMDc3LDAuNjE4QzAuMDI3LDAuNzQsMCwwLjg3LDAsMXYxMkMwLDEzLjU1MiwwLjQ0OCwxNCwxLDE0eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik01MiwzOWMtMC41NTIsMC0xLDAuNDQ4LTEsMXY5LjU4NkwzNC43MDcsMzMuMjkyYy0wLjM5MS0wLjM5MS0xLjAyMy0wLjM5MS0xLjQxNCwwcy0wLjM5MSwxLjAyMywwLDEuNDE0TDQ5LjU4Niw1MUg0MCAgIGMtMC41NTIsMC0xLDAuNDQ4LTEsMXMwLjQ0OCwxLDEsMWgxMmMwLjEzLDAsMC4yNi0wLjAyNywwLjM4Mi0wLjA3N2MwLjI0NC0wLjEwMSwwLjQzOS0wLjI5NiwwLjU0MS0wLjU0MSAgIEM1Mi45NzMsNTIuMjYsNTMsNTIuMTMsNTMsNTJWNDBDNTMsMzkuNDQ4LDUyLjU1MiwzOSw1MiwzOXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.delete-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4Ni40IDQ4Ni40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODYuNCA0ODYuNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ0Niw3MEgzNDQuOFY1My41YzAtMjkuNS0yNC01My41LTUzLjUtNTMuNWgtOTYuMmMtMjkuNSwwLTUzLjUsMjQtNTMuNSw1My41VjcwSDQwLjRjLTcuNSwwLTEzLjUsNi0xMy41LDEzLjUgICAgUzMyLjksOTcsNDAuNCw5N2gyNC40djMxNy4yYzAsMzkuOCwzMi40LDcyLjIsNzIuMiw3Mi4yaDIxMi40YzM5LjgsMCw3Mi4yLTMyLjQsNzIuMi03Mi4yVjk3SDQ0NmM3LjUsMCwxMy41LTYsMTMuNS0xMy41ICAgIFM0NTMuNSw3MCw0NDYsNzB6IE0xNjguNiw1My41YzAtMTQuNiwxMS45LTI2LjUsMjYuNS0yNi41aDk2LjJjMTQuNiwwLDI2LjUsMTEuOSwyNi41LDI2LjVWNzBIMTY4LjZWNTMuNXogTTM5NC42LDQxNC4yICAgIGMwLDI0LjktMjAuMyw0NS4yLTQ1LjIsNDUuMkgxMzdjLTI0LjksMC00NS4yLTIwLjMtNDUuMi00NS4yVjk3aDMwMi45djMxNy4ySDM5NC42eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0yNDMuMiw0MTFjNy41LDAsMTMuNS02LDEzLjUtMTMuNVYxNTguOWMwLTcuNS02LTEzLjUtMTMuNS0xMy41cy0xMy41LDYtMTMuNSwxMy41djIzOC41ICAgIEMyMjkuNyw0MDQuOSwyMzUuNyw0MTEsMjQzLjIsNDExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNTUuMSwzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzE0MS42LDM5MC4xLDE0Ny43LDM5Ni4xLDE1NS4xLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0zMzEuMywzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzMxNy44LDM5MC4xLDMyMy44LDM5Ni4xLDMzMS4zLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.ext-url-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPjxnPjxnPjxnPjxwYXRoIGQ9Ik00ODAsMjg4djExMmMwLDQ0LjE4My0zNS44MTcsODAtODAsODBIMTEyYy00NC4xODMsMC04MC0zNS44MTctODAtODBWMTEyYzAtNDQuMTgzLDM1LjgxNy04MCw4MC04MGg5NlYwaC05NiAgICAgQzUwLjE0NCwwLDAsNTAuMTQ0LDAsMTEydjI4OGMwLDYxLjg1Niw1MC4xNDQsMTEyLDExMiwxMTJoMjg4YzYxLjg1NiwwLDExMi01MC4xNDQsMTEyLTExMlYyODhINDgweiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNzYsNDE2aDMyVjI4OGMwLTEyNS43NiwxMDcuNTItMTI4LDExMi0xMjhoMTA1LjQ0bC04NC42NCw4NC42NGwyMi41NiwyMi41NmwxMTItMTEyYzYuMjA0LTYuMjQxLDYuMjA0LTE2LjMxOSwwLTIyLjU2ICAgICBsLTExMi0xMTJsLTIyLjcyLDIyLjcybDg0LjgsODQuNjRIMzIwYy0xLjQ0LDAtMTQ0LDEuNzYtMTQ0LDE2MFY0MTZ6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.download-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3MS4yIDQ3MS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzEuMiA0NzEuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ1Ny43LDIzMC4xNWMtNy41LDAtMTMuNSw2LTEzLjUsMTMuNXYxMjIuOGMwLDMzLjQtMjcuMiw2MC41LTYwLjUsNjAuNUg4Ny41Yy0zMy40LDAtNjAuNS0yNy4yLTYwLjUtNjAuNXYtMTI0LjggICAgYzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MTI0LjhjMCw0OC4zLDM5LjMsODcuNSw4Ny41LDg3LjVoMjk2LjJjNDguMywwLDg3LjUtMzkuMyw4Ny41LTg3LjV2LTEyMi44ICAgIEM0NzEuMiwyMzYuMjUsNDY1LjIsMjMwLjE1LDQ1Ny43LDIzMC4xNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMjI2LjEsMzQ2Ljc1YzIuNiwyLjYsNi4xLDQsOS41LDRzNi45LTEuMyw5LjUtNGw4NS44LTg1LjhjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFjLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC02Mi43LDYyLjggICAgVjMwLjc1YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjczLjlsLTYyLjgtNjIuOGMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xICAgIEwyMjYuMSwzNDYuNzV6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.close-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3NS4yIDQ3NS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzUuMiA0NzUuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQwNS42LDY5LjZDMzYwLjcsMjQuNywzMDEuMSwwLDIzNy42LDBzLTEyMy4xLDI0LjctMTY4LDY5LjZTMCwxNzQuMSwwLDIzNy42czI0LjcsMTIzLjEsNjkuNiwxNjhzMTA0LjUsNjkuNiwxNjgsNjkuNiAgICBzMTIzLjEtMjQuNywxNjgtNjkuNnM2OS42LTEwNC41LDY5LjYtMTY4UzQ1MC41LDExNC41LDQwNS42LDY5LjZ6IE0zODYuNSwzODYuNWMtMzkuOCwzOS44LTkyLjcsNjEuNy0xNDguOSw2MS43ICAgIHMtMTA5LjEtMjEuOS0xNDguOS02MS43Yy04Mi4xLTgyLjEtODIuMS0yMTUuNywwLTI5Ny44QzEyOC41LDQ4LjksMTgxLjQsMjcsMjM3LjYsMjdzMTA5LjEsMjEuOSwxNDguOSw2MS43ICAgIEM0NjguNiwxNzAuOCw0NjguNiwzMDQuNCwzODYuNSwzODYuNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMzQyLjMsMTMyLjljLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC04NS42LDg1LjZMMTUyLDEzMi45Yy01LjMtNS4zLTEzLjgtNS4zLTE5LjEsMGMtNS4zLDUuMy01LjMsMTMuOCwwLDE5LjEgICAgbDg1LjYsODUuNmwtODUuNiw4NS42Yy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWMyLjYsMi42LDYuMSw0LDkuNSw0czYuOS0xLjMsOS41LTRsODUuNi04NS42bDg1LjYsODUuNmMyLjYsMi42LDYuMSw0LDkuNSw0ICAgIGMzLjUsMCw2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xbC04NS40LTg1LjZsODUuNi04NS42QzM0Ny42LDE0Ni43LDM0Ny42LDEzOC4yLDM0Mi4zLDEzMi45eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.refresh-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OS43MTEgNDg5LjcxMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg5LjcxMSA0ODkuNzExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48Zz48cGF0aCBkPSJNMTEyLjE1Niw5Ny4xMTFjNzIuMy02NS40LDE4MC41LTY2LjQsMjUzLjgtNi43bC01OC4xLDIuMmMtNy41LDAuMy0xMy4zLDYuNS0xMywxNGMwLjMsNy4zLDYuMywxMywxMy41LDEzICAgIGMwLjIsMCwwLjMsMCwwLjUsMGw4OS4yLTMuM2M3LjMtMC4zLDEzLTYuMiwxMy0xMy41di0xYzAtMC4yLDAtMC4zLDAtMC41di0wLjFsMCwwbC0zLjMtODguMmMtMC4zLTcuNS02LjYtMTMuMy0xNC0xMyAgICBjLTcuNSwwLjMtMTMuMyw2LjUtMTMsMTRsMi4xLDU1LjNjLTM2LjMtMjkuNy04MS00Ni45LTEyOC44LTQ5LjNjLTU5LjItMy0xMTYuMSwxNy4zLTE2MCw1Ny4xYy02MC40LDU0LjctODYsMTM3LjktNjYuOCwyMTcuMSAgICBjMS41LDYuMiw3LDEwLjMsMTMuMSwxMC4zYzEuMSwwLDIuMS0wLjEsMy4yLTAuNGM3LjItMS44LDExLjctOS4xLDkuOS0xNi4zQzM2LjY1NiwyMTguMjExLDU5LjA1NiwxNDUuMTExLDExMi4xNTYsOTcuMTExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik00NjIuNDU2LDE5NS41MTFjLTEuOC03LjItOS4xLTExLjctMTYuMy05LjljLTcuMiwxLjgtMTEuNyw5LjEtOS45LDE2LjNjMTYuOSw2OS42LTUuNiwxNDIuNy01OC43LDE5MC43ICAgIGMtMzcuMywzMy43LTg0LjEsNTAuMy0xMzAuNyw1MC4zYy00NC41LDAtODguOS0xNS4xLTEyNC43LTQ0LjlsNTguOC01LjNjNy40LTAuNywxMi45LTcuMiwxMi4yLTE0LjdzLTcuMi0xMi45LTE0LjctMTIuMmwtODguOSw4ICAgIGMtNy40LDAuNy0xMi45LDcuMi0xMi4yLDE0LjdsOCw4OC45YzAuNiw3LDYuNSwxMi4zLDEzLjQsMTIuM2MwLjQsMCwwLjgsMCwxLjItMC4xYzcuNC0wLjcsMTIuOS03LjIsMTIuMi0xNC43bC00LjgtNTQuMSAgICBjMzYuMywyOS40LDgwLjgsNDYuNSwxMjguMyw0OC45YzMuOCwwLjIsNy42LDAuMywxMS4zLDAuM2M1NS4xLDAsMTA3LjUtMjAuMiwxNDguNy01Ny40ICAgIEM0NTYuMDU2LDM1Ny45MTEsNDgxLjY1NiwyNzQuODExLDQ2Mi40NTYsMTk1LjUxMXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==)}.copy{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OC4zIDQ4OC4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODguMyA0ODguMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMxNC4yNSw4NS40aC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42djMyNS43YzAsMjEuMywxNy4zLDM4LjYsMzguNiwzOC42aDIyN2MyMS4zLDAsMzguNi0xNy4zLDM4LjYtMzguNlYxMjQgICAgQzM1Mi43NSwxMDIuNywzMzUuNDUsODUuNCwzMTQuMjUsODUuNHogTTMyNS43NSw0NDkuNmMwLDYuNC01LjIsMTEuNi0xMS42LDExLjZoLTIyN2MtNi40LDAtMTEuNi01LjItMTEuNi0xMS42VjEyNCAgICBjMC02LjQsNS4yLTExLjYsMTEuNi0xMS42aDIyN2M2LjQsMCwxMS42LDUuMiwxMS42LDExLjZWNDQ5LjZ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTQwMS4wNSwwaC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42YzAsNy41LDYsMTMuNSwxMy41LDEzLjVzMTMuNS02LDEzLjUtMTMuNWMwLTYuNCw1LjItMTEuNiwxMS42LTExLjZoMjI3ICAgIGM2LjQsMCwxMS42LDUuMiwxMS42LDExLjZ2MzI1LjdjMCw2LjQtNS4yLDExLjYtMTEuNiwxMS42Yy03LjUsMC0xMy41LDYtMTMuNSwxMy41czYsMTMuNSwxMy41LDEzLjVjMjEuMywwLDM4LjYtMTcuMywzOC42LTM4LjYgICAgVjM4LjZDNDM5LjY1LDE3LjMsNDIyLjM1LDAsNDAxLjA1LDB6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: ConfigService\n    }];\n  }, {\n    id: [{\n      type: Input\n    }],\n    currentImage: [{\n      type: Input\n    }],\n    refresh: [{\n      type: Output\n    }],\n    delete: [{\n      type: Output\n    }],\n    navigate: [{\n      type: Output\n    }],\n    download: [{\n      type: Output\n    }],\n    closeButton: [{\n      type: Output\n    }],\n    fullscreen: [{\n      type: Output\n    }],\n    customEmit: [{\n      type: Output\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with clickable dots (small circles) to navigate between images inside the modal gallery.\n */\n\n\nclass DotsComponent extends AccessibleComponent {\n  constructor(configService) {\n    super();\n    this.configService = configService;\n    /**\n     * Output to emit clicks on dots. The payload contains a number that represent\n     * the index of the clicked dot.\n     */\n\n    this.clickDot = new EventEmitter();\n  }\n  /**\n   * Method ´ngOnInit´ to build `configDots` applying a default value.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n    this.configDots = Object.assign({}, this.dotsConfig);\n  }\n  /**\n   * Method ´ngOnChanges´ to change `configDots` if the input dotsConfig is changed.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   */\n\n\n  ngOnChanges(changes) {\n    const dotsConfigChanges = changes.dotsConfig;\n\n    if (dotsConfigChanges && dotsConfigChanges.currentValue !== dotsConfigChanges.previousValue) {\n      this.configDots = dotsConfigChanges.currentValue;\n    }\n  }\n  /**\n   * Method to check if an image is active (i.e. the current image).\n   * It checks currentImage and images to prevent errors.\n   * @param number index of the image to check if it's active or not\n   * @returns boolean true if is active (and input params are valid), false otherwise\n   */\n\n\n  isActive(index) {\n    if (!this.currentImage || !this.images || this.images.length === 0) {\n      return false;\n    }\n\n    let imageIndex;\n\n    try {\n      imageIndex = getIndex(this.currentImage, this.images);\n    } catch (err) {\n      console.error(`Internal error while trying to show the active 'dot'`, err);\n      return false;\n    }\n\n    return index === imageIndex;\n  }\n  /**\n   * Method called by events from keyboard and mouse.\n   * @param number index of the dot\n   * @param KeyboardEvent | MouseEvent event payload\n   */\n\n\n  onDotEvent(index, event) {\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT) {\n      this.clickDot.emit(index);\n    }\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item\n   */\n\n\n  trackById(index, item) {\n    return item.id;\n  }\n\n}\n\nDotsComponent.ɵfac = function DotsComponent_Factory(t) {\n  return new (t || DotsComponent)(i0.ɵɵdirectiveInject(ConfigService));\n};\n\nDotsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: DotsComponent,\n  selectors: [[\"ks-dots\"]],\n  inputs: {\n    id: \"id\",\n    currentImage: \"currentImage\",\n    images: \"images\",\n    dotsConfig: \"dotsConfig\"\n  },\n  outputs: {\n    clickDot: \"clickDot\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 3,\n  consts: [[1, \"dots-container\", 3, \"title\"], [4, \"ngIf\"], [\"class\", \"inside dot\", \"role\", \"navigation\", 3, \"ngClass\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"role\", \"navigation\", 1, \"inside\", \"dot\", 3, \"ngClass\", \"tabIndex\", \"click\", \"keyup\"]],\n  template: function DotsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0);\n      i0.ɵɵtemplate(1, DotsComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.dotsContainerTitle);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.dotsContainerAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.dotsConfig || (ctx.dotsConfig == null ? null : ctx.dotsConfig.visible));\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, i2.NgClass],\n  styles: [\".dots-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin-bottom:30px}.dots-container[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]{background:#fff;border-radius:5px;height:10px;margin-left:4px;margin-right:4px;width:10px;cursor:pointer;opacity:.5}.dots-container[_ngcontent-%COMP%] > .dot[_ngcontent-%COMP%]:hover{opacity:.9;transition:all .5s ease;transition-property:opacity}.dots-container[_ngcontent-%COMP%] > .dot.active[_ngcontent-%COMP%]{cursor:pointer;opacity:.9}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DotsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-dots',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<nav class=\\\"dots-container\\\" [attr.aria-label]=\\\"accessibilityConfig?.dotsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.dotsContainerTitle\\\">\\n  <ng-container *ngIf=\\\"!dotsConfig || dotsConfig?.visible\\\">\\n    <div class=\\\"inside dot\\\"\\n         *ngFor=\\\"let img of images; trackBy: trackById; let index = index\\\"\\n         [ngClass]=\\\"{'active': isActive(index)}\\\"\\n         [attr.aria-label]=\\\"accessibilityConfig?.dotAriaLabel + ' ' + (index + 1)\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"navigation\\\"\\n         (click)=\\\"onDotEvent(index, $event)\\\" (keyup)=\\\"onDotEvent(index, $event)\\\"></div>\\n  </ng-container>\\n</nav>\\n\",\n      styles: [\".dots-container{display:flex;flex-direction:row;justify-content:center;margin-bottom:30px}.dots-container>.dot{background:#fff;border-radius:5px;height:10px;margin-left:4px;margin-right:4px;width:10px;cursor:pointer;opacity:.5}.dots-container>.dot:hover{opacity:.9;transition:all .5s ease;transition-property:opacity}.dots-container>.dot.active{cursor:pointer;opacity:.9}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: ConfigService\n    }];\n  }, {\n    id: [{\n      type: Input\n    }],\n    currentImage: [{\n      type: Input\n    }],\n    images: [{\n      type: Input\n    }],\n    dotsConfig: [{\n      type: Input\n    }],\n    clickDot: [{\n      type: Output\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with image previews\n */\n\n\nclass PreviewsComponent extends AccessibleComponent {\n  constructor(configService) {\n    super();\n    this.configService = configService;\n    /**\n     * Output to emit the clicked preview. The payload contains the `ImageEvent` associated to the clicked preview.\n     */\n\n    this.clickPreview = new EventEmitter();\n    /**\n     * Enum of type `Action` that represents a mouse click on a button.\n     * Declared here to be used inside the template.\n     */\n\n    this.clickAction = Action.CLICK;\n    /**\n     * Enum of type `Action` that represents a keyboard action.\n     * Declared here to be used inside the template.\n     */\n\n    this.keyboardAction = Action.KEYBOARD;\n    /**\n     * Array of `InternalLibImage` exposed to the template. This field is initialized\n     * applying transformations, default values and so on to the input of the same type.\n     */\n\n    this.previews = [];\n    this.defaultPreviewSize = DEFAULT_PREVIEW_SIZE;\n  }\n  /**\n   * Method ´ngOnInit´ to build `configPreview` applying a default value and also to\n   * init the `previews` array.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n    this.slideConfig = libConfig.slideConfig;\n    this.previewConfig = libConfig.previewConfig;\n\n    if (!this.currentImage || !this.images) {\n      throw new Error('Internal library error - currentImage and images must be defined');\n    }\n\n    this.initPreviews(this.currentImage, this.images);\n  }\n  /**\n   * Method to check if an image is active (i.e. a preview image).\n   * @param InternalLibImage preview is an image to check if it's active or not\n   * @returns boolean true if is active, false otherwise\n   */\n\n\n  isActive(preview) {\n    if (!preview || !this.currentImage) {\n      return false;\n    }\n\n    return preview.id === this.currentImage.id;\n  }\n  /**\n   * Method ´ngOnChanges´ to update `previews` array.\n   * Also, both `start` and `end` local variables will be updated accordingly.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges(changes) {\n    const images = changes.images;\n    const currentImage = changes.currentImage;\n    let prev;\n    let current;\n\n    if (currentImage) {\n      prev = currentImage.previousValue;\n      current = currentImage.currentValue;\n    } else {\n      current = this.currentImage;\n    }\n\n    if (current && images && images.previousValue && images.currentValue) {\n      // I'm in this if statement, if input images are changed (for instance, because I removed one of them with the 'delete button',\n      // or because users changed the images array while modal gallery is still open).\n      // In this case, I have to re-init previews, because the input array of images is changed.\n      this.initPreviews(current, images.currentValue);\n    }\n\n    if (prev && current && prev.id !== current.id) {\n      this.updatePreviews(prev, current);\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a preview.\n   * This will trigger the `clickpreview` output with the input preview as its payload.\n   * @param InternalLibImage preview that triggered this method\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the source event or `Action.NORMAL` if not specified\n   */\n\n\n  onImageEvent(preview, event, action = Action.NORMAL) {\n    if (!this.id || !this.images) {\n      throw new Error('Internal library error - id and images must be defined');\n    }\n\n    if (!this.previewConfig || !this.previewConfig.clickable) {\n      return;\n    }\n\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT || result === PREV) {\n      this.clickPreview.emit(new ImageModalEvent(this.id, action, getIndex(preview, this.images)));\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a navigation arrow.\n   * It also emits an event to specify which arrow.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the source event or `Action.NORMAL` if not specified\n   */\n\n\n  onNavigationEvent(direction, event, action = Action.NORMAL) {\n    const result = super.handleNavigationEvent(direction, event);\n\n    if (result === NEXT) {\n      this.next();\n    } else if (result === PREV) {\n      this.previous();\n    }\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item\n   */\n\n\n  trackById(index, item) {\n    return item.id;\n  }\n  /**\n   * Private method to init previews based on the currentImage and the full array of images.\n   * The current image in mandatory to show always the current preview (as highlighted).\n   * @param InternalLibImage currentImage to decide how to show previews, because I always want to see the current image as highlighted\n   * @param InternalLibImage[] images is the array of all images.\n   */\n\n\n  initPreviews(currentImage, images) {\n    let index;\n\n    try {\n      index = getIndex(currentImage, images);\n    } catch (err) {\n      throw err;\n    }\n\n    switch (index) {\n      case 0:\n        // first image\n        this.setBeginningIndexesPreviews();\n        break;\n\n      case images.length - 1:\n        // last image\n        this.setEndIndexesPreviews();\n        break;\n\n      default:\n        // other images\n        this.setIndexesPreviews();\n        break;\n    }\n\n    this.previews = images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to init both `start` and `end` to the beginning.\n   */\n\n\n  setBeginningIndexesPreviews() {\n    if (!this.previewConfig || !this.images) {\n      throw new Error('Internal library error - previewConfig and images must be defined');\n    }\n\n    this.start = 0;\n    this.end = Math.min(this.previewConfig.number, this.images.length);\n  }\n  /**\n   * Private method to init both `start` and `end` to the end.\n   */\n\n\n  setEndIndexesPreviews() {\n    if (!this.previewConfig || !this.images) {\n      throw new Error('Internal library error - previewConfig and images must be defined');\n    }\n\n    this.start = this.images.length - 1 - (this.previewConfig.number - 1);\n    this.end = this.images.length;\n  }\n  /**\n   * Private method to update both `start` and `end` based on the currentImage.\n   */\n\n\n  setIndexesPreviews() {\n    if (!this.previewConfig || !this.images || !this.currentImage) {\n      throw new Error('Internal library error - previewConfig, currentImage and images must be defined');\n    }\n\n    this.start = getIndex(this.currentImage, this.images) - Math.floor(this.previewConfig.number / 2);\n    this.end = getIndex(this.currentImage, this.images) + Math.floor(this.previewConfig.number / 2) + 1;\n  }\n  /**\n   * Private method to update the visible previews navigating to the right (next).\n   */\n\n\n  next() {\n    if (!this.images) {\n      throw new Error('Internal library error - images must be defined');\n    } // check if nextImage should be blocked\n\n\n    if (this.isPreventSliding(this.images.length - 1)) {\n      return;\n    }\n\n    if (this.end === this.images.length) {\n      return;\n    }\n\n    this.start++;\n    this.end = Math.min(this.end + 1, this.images.length);\n    this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to update the visible previews navigating to the left (previous).\n   */\n\n\n  previous() {\n    if (!this.images) {\n      throw new Error('Internal library error - images must be defined');\n    } // check if prevImage should be blocked\n\n\n    if (this.isPreventSliding(0)) {\n      return;\n    }\n\n    if (this.start === 0) {\n      return;\n    }\n\n    this.start = Math.max(this.start - 1, 0);\n    this.end = Math.min(this.end - 1, this.images.length);\n    this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to block/permit sliding between previews.\n   * @param number boundaryIndex is the first or the last index of `images` input array\n   * @returns boolean if true block sliding, otherwise not\n   */\n\n\n  isPreventSliding(boundaryIndex) {\n    if (!this.images || !this.currentImage) {\n      throw new Error('Internal library error - images and currentImage must be defined');\n    }\n\n    return !!this.slideConfig && this.slideConfig.infinite === false && getIndex(this.currentImage, this.images) === boundaryIndex;\n  }\n  /**\n   * Private method to handle navigation changing the previews array and other variables.\n   */\n\n\n  updatePreviews(prev, current) {\n    if (!this.images) {\n      throw new Error('Internal library error - images must be defined');\n    } // to manage infinite sliding I have to reset both `start` and `end` at the beginning\n    // to show again previews from the first image.\n    // This happens when you navigate over the last image to return to the first one\n\n\n    let prevIndex;\n    let currentIndex;\n\n    try {\n      prevIndex = getIndex(prev, this.images);\n      currentIndex = getIndex(current, this.images);\n    } catch (err) {\n      console.error('Cannot get previous and current image indexes in previews');\n      throw err;\n    }\n\n    if (prevIndex === this.images.length - 1 && currentIndex === 0) {\n      // first image\n      this.setBeginningIndexesPreviews();\n      this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n      return;\n    } // the same for the opposite case, when you navigate back from the fist image to go to the last one.\n\n\n    if (prevIndex === 0 && currentIndex === this.images.length - 1) {\n      // last image\n      this.setEndIndexesPreviews();\n      this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n      return;\n    } // otherwise manage standard scenarios\n\n\n    if (prevIndex > currentIndex) {\n      this.previous();\n    } else if (prevIndex < currentIndex) {\n      this.next();\n    }\n  }\n\n}\n\nPreviewsComponent.ɵfac = function PreviewsComponent_Factory(t) {\n  return new (t || PreviewsComponent)(i0.ɵɵdirectiveInject(ConfigService));\n};\n\nPreviewsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: PreviewsComponent,\n  selectors: [[\"ks-previews\"]],\n  inputs: {\n    id: \"id\",\n    currentImage: \"currentImage\",\n    images: \"images\"\n  },\n  outputs: {\n    clickPreview: \"clickPreview\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 5,\n  consts: [[1, \"previews-container\", 3, \"title\"], [4, \"ngIf\"], [\"role\", \"button\", 1, \"nav-left\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"aria-hidden\", \"true\", 3, \"title\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"role\", \"button\", 1, \"nav-right\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"class\", \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\"]],\n  template: function PreviewsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"nav\", 0);\n      i0.ɵɵtemplate(1, PreviewsComponent_ng_container_1_Template, 6, 14, \"ng-container\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"mobile-visible\", ctx.previewConfig == null ? null : ctx.previewConfig.mobileVisible);\n      i0.ɵɵproperty(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.previewsContainerTitle);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.previewsContainerAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.previewConfig == null ? null : ctx.previewConfig.visible);\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, FallbackImageDirective, SizeDirective],\n  styles: [\"@media only screen and (max-width: 767px),only screen and (max-device-width: 767px){.previews-container[_ngcontent-%COMP%]{display:none}.previews-container[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]{display:none}.previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{display:none}.previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{display:none}.previews-container.mobile-visible[_ngcontent-%COMP%]{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container.mobile-visible[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{display:flex}.previews-container.mobile-visible[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{display:flex}.previews-container.mobile-visible[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]{cursor:pointer;display:flex;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container.mobile-visible[_ngcontent-%COMP%] > .preview-image.active[_ngcontent-%COMP%]{opacity:1}.previews-container.mobile-visible[_ngcontent-%COMP%] > .preview-image.unclickable[_ngcontent-%COMP%]{cursor:not-allowed}.previews-container.mobile-visible[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]:hover{opacity:1;transition:all .5s ease;transition-property:opacity}}@media only screen and (min-device-width: 768px){.previews-container[_ngcontent-%COMP%]{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]{cursor:pointer;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container[_ngcontent-%COMP%] > .preview-image.active[_ngcontent-%COMP%]{opacity:1}.previews-container[_ngcontent-%COMP%] > .preview-image.unclickable[_ngcontent-%COMP%]{cursor:not-allowed}.previews-container[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]:hover{opacity:1;transition:all .5s ease;transition-property:opacity}.previews-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%], .previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%], .previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{color:#919191;cursor:pointer;transition:all .5s}.previews-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]:hover, .previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]:hover, .previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{margin-right:10px}.previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{margin-left:10px}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\", \".arrow-preview-image[_ngcontent-%COMP%], .right-arrow-preview-image[_ngcontent-%COMP%], .left-arrow-preview-image[_ngcontent-%COMP%], .empty-arrow-preview-image[_ngcontent-%COMP%]{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image[_ngcontent-%COMP%]{background:black;opacity:0}.left-arrow-preview-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.right-arrow-preview-image[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.2)}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PreviewsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-previews',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<nav class=\\\"previews-container\\\"\\n     [class.mobile-visible]=\\\"previewConfig?.mobileVisible\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.previewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.previewsContainerTitle\\\">\\n\\n  <ng-container *ngIf=\\\"previewConfig?.visible\\\">\\n    <a class=\\\"nav-left\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollPrevAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollPrevTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image {{isActive(preview) ? 'active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img! : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.size ? previewConfig?.size?.width! : defaultPreviewSize.width,\\n                                 height: previewConfig?.size ? previewConfig?.size?.height! : defaultPreviewSize.height}\\\"\\n           [attr.aria-label]=\\\"preview.modal.ariaLabel ? preview.modal.ariaLabel : ''\\\"\\n           [title]=\\\"(preview.modal.title || preview.modal.title === '') ? preview.modal.title : ''\\\"\\n           alt=\\\"{{preview.modal.alt ? preview.modal.alt : ''}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n\\n\\n    <a class=\\\"nav-right\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollNextAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows! && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollNextTitle\\\"></div>\\n    </a>\\n  </ng-container>\\n\\n</nav>\\n\",\n      styles: [\"@media only screen and (max-width: 767px),only screen and (max-device-width: 767px){.previews-container{display:none}.previews-container>.preview-image{display:none}.previews-container>.nav-left{display:none}.previews-container>.nav-right{display:none}.previews-container.mobile-visible{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container.mobile-visible>.nav-left{display:flex}.previews-container.mobile-visible>.nav-right{display:flex}.previews-container.mobile-visible>.preview-image{cursor:pointer;display:flex;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container.mobile-visible>.preview-image.active{opacity:1}.previews-container.mobile-visible>.preview-image.unclickable{cursor:not-allowed}.previews-container.mobile-visible>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}}@media only screen and (min-device-width: 768px){.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container>.preview-image{cursor:pointer;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container>.preview-image.active{opacity:1}.previews-container>.preview-image.unclickable{cursor:not-allowed}.previews-container>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{color:#919191;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px}.previews-container>.nav-right{margin-left:10px}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: ConfigService\n    }];\n  }, {\n    id: [{\n      type: Input\n    }],\n    currentImage: [{\n      type: Input\n    }],\n    images: [{\n      type: Input\n    }],\n    clickPreview: [{\n      type: Output\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to close the modal gallery clicking on the semi-transparent background.\n * In fact, it listens for a click on all elements that aren't 'inside' and it emits\n * an event using `@Output clickOutside`.\n */\n\n\nclass ClickOutsideDirective {\n  constructor() {\n    /**\n     * Output to emit an event if the clicked element class doesn't contain 'inside' or it is 'hidden'. The payload is a boolean.\n     */\n    this.clickOutside = new EventEmitter();\n  }\n  /**\n   * Method called by Angular itself every click thanks to `@HostListener`.\n   * @param MouseEvent event payload received evey click\n   */\n\n\n  onClick(event) {\n    event.stopPropagation(); // tslint:disable-next-line:no-any\n\n    const target = event.target;\n\n    if (!this.clickOutsideEnable || !target) {\n      return;\n    }\n\n    let isInside = false;\n    let isHidden = false;\n\n    if (typeof target.className !== 'string') {\n      // it happens with @fortawesome/fontawesome 5\n      // for some reasons className is an object with 2 empty properties inside\n      isInside = true;\n    } else {\n      // in normal scenarios, use classname, because it's a simple string\n      isInside = target.className && target.className.includes('inside');\n      isHidden = target.className.includes('hidden');\n    } // if inside => don't close modal gallery\n    // if hidden => close modal gallery\n\n    /*\n        i i' h | close\n        0 1  0 |   1 => close modal gallery\n        0 1  1 |   1 => close modal gallery\n        1 0  0 |   0\n        1 0  1 |   1 => close modal gallery\n     */\n\n\n    if (!isInside || isHidden) {\n      // close modal gallery\n      this.clickOutside.emit(true);\n    }\n  }\n\n}\n\nClickOutsideDirective.ɵfac = function ClickOutsideDirective_Factory(t) {\n  return new (t || ClickOutsideDirective)();\n};\n\nClickOutsideDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: ClickOutsideDirective,\n  selectors: [[\"\", \"ksClickOutside\", \"\"]],\n  hostBindings: function ClickOutsideDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function ClickOutsideDirective_click_HostBindingHandler($event) {\n        return ctx.onClick($event);\n      });\n    }\n  },\n  inputs: {\n    clickOutsideEnable: \"clickOutsideEnable\"\n  },\n  outputs: {\n    clickOutside: \"clickOutside\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ClickOutsideDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksClickOutside]'\n    }]\n  }], null, {\n    clickOutsideEnable: [{\n      type: Input\n    }],\n    clickOutside: [{\n      type: Output\n    }],\n    onClick: [{\n      type: HostListener,\n      args: ['click', ['$event']]\n    }]\n  });\n})();\n\nclass ModalGalleryComponent {\n  constructor(dialogContent, modalGalleryService, keyboardService, // tslint:disable-next-line:ban-types\n  platformId, changeDetectorRef, idValidatorService, configService, sanitizer) {\n    this.dialogContent = dialogContent;\n    this.modalGalleryService = modalGalleryService;\n    this.keyboardService = keyboardService;\n    this.platformId = platformId;\n    this.changeDetectorRef = changeDetectorRef;\n    this.idValidatorService = idValidatorService;\n    this.configService = configService;\n    this.sanitizer = sanitizer;\n    /**\n     * Boolean to enable modal-gallery close behaviour when clicking\n     * on the semi-transparent background. Enabled by default.\n     */\n\n    this.enableCloseOutside = true;\n    /**\n     * Object of type `AccessibilityConfig` to init custom accessibility features.\n     * For instance, it contains titles, alt texts, aria-labels and so on.\n     */\n\n    this.accessibilityConfig = KS_DEFAULT_ACCESSIBILITY_CONFIG;\n    /**\n     * Boolean to open the modal gallery. False by default.\n     */\n\n    this.showGallery = false;\n    this.id = this.dialogContent.id;\n    this.images = this.dialogContent.images;\n    this.currentImage = this.dialogContent.currentImage;\n    this.libConfig = this.dialogContent.libConfig;\n    this.configService.setConfig(this.id, this.libConfig);\n    this.updateImagesSubscription = this.modalGalleryService.updateImages$.subscribe(images => {\n      this.images = images.map(image => {\n        const newImage = Object.assign({}, image, {\n          previouslyLoaded: false\n        });\n        return newImage;\n      });\n      this.initImages();\n      this.images.forEach(image => {\n        if (image.id === this.currentImage.id) {\n          this.currentImage = image;\n        }\n      });\n      this.changeDetectorRef.markForCheck();\n    });\n  }\n  /**\n   * HostListener to catch browser's back button and destroy the gallery.\n   * This prevents weired behaviour about scrolling.\n   * Added to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/159\n   */\n\n\n  onPopState(e) {\n    this.closeGallery();\n  }\n  /**\n   * Method ´ngOnInit´ to init images calling `initImages()`.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.idValidatorService.checkAndAdd(this.id); // id is a mandatory input and must a number > 0\n\n    if (!this.id && this.id !== 0 || this.id < 0) {\n      throw new Error(`'[id]=\"a number >= 0\"' is a mandatory input in angular-modal-gallery.` + `If you are using multiple instances of this library, please be sure to use different ids`);\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.dotsConfig) {\n      throw new Error('Internal library error - libConfig and dotsConfig must be defined');\n    }\n\n    this.dotsConfig = libConfig.dotsConfig;\n    this.registerKeyboardService();\n    setTimeout(() => {\n      this.initImages();\n    }, 0);\n  }\n  /**\n   * Method called by custom upper buttons.\n   * @param event ButtonEvent event payload\n   */\n\n\n  onCustomEmit(event) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n    this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n  }\n  /**\n   * Method called by the full-screen upper button.\n   * @param event ButtonEvent event payload\n   */\n\n\n  onFullScreen(event) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit); // tslint:disable-next-line:no-any\n\n    const doc = document; // tslint:disable-next-line:no-any\n\n    const docEl = document.documentElement;\n    const fullscreenDisabled = !doc.fullscreenElement && !doc.webkitFullscreenElement; // In Safari `requestFullscreen` and `exitFullscreen` are undefined. Safari requires the prefixed version `webkit-`\n    // and it doesn't return promises.\n    // I cannot call `emitButtonAfterHook` only if requestFullScreen is successful, because there are no guarantees across browsers and\n    // I should also handle the case with keyboard \"esc\" button.\n\n    if (fullscreenDisabled) {\n      if (docEl.requestFullscreen) {\n        docEl.requestFullscreen().then(() => {}).catch(() => {\n          console.error('Cannot request full screen');\n        });\n      } else if (docEl.webkitRequestFullscreen) {\n        // For Safari and it doesn't return a promise\n        docEl.webkitRequestFullscreen();\n      }\n    } else {\n      if (doc.exitFullscreen) {\n        doc.exitFullscreen().then(() => {}).catch(() => {\n          console.error('Cannot request exit full screen');\n        });\n      } else if (doc.webkitExitFullscreen) {\n        // For Safari and it doesn't return a promise\n        doc.webkitExitFullscreen();\n      }\n    }\n\n    this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n  }\n  /**\n   * Method called by the delete upper button.\n   * @param event ButtonEvent event payload\n   */\n\n\n  onDelete(event) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n\n    if (this.images.length === 1) {\n      this.closeGallery();\n    }\n\n    if (!this.currentImageComponent) {\n      throw new Error('currentImageComponent must be defined');\n    }\n\n    const imageIndexToDelete = this.currentImageComponent.getIndexToDelete(event.image);\n\n    if (imageIndexToDelete === this.images.length - 1) {\n      // last image\n      this.currentImageComponent.prevImage();\n    } else {\n      this.currentImageComponent.nextImage();\n    }\n\n    this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n  }\n  /**\n   * Method called by the navigate upper button.\n   * @param event ButtonEvent event payload\n   */\n\n\n  onNavigate(event) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit); // To support SSR\n\n    if (isPlatformBrowser(this.platformId)) {\n      if (eventToEmit.image && eventToEmit.image.modal.extUrl) {\n        // where I should open this link? The current tab or another one?\n        if (eventToEmit.button && eventToEmit.button.extUrlInNewTab) {\n          // in this case I should use target _blank to open the url in a new tab, however these is a security issue.\n          // Prevent Reverse Tabnabbing's attacks (https://www.owasp.org/index.php/Reverse_Tabnabbing)\n          // Some resources:\n          // - https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet#Tabnabbing\n          // - https://medium.com/@jitbit/target-blank-the-most-underestimated-vulnerability-ever-96e328301f4c\n          // - https://developer.mozilla.org/en-US/docs/Web/API/Window/open\n          const newWindow = window.open(eventToEmit.image.modal.extUrl, 'noopener,noreferrer,'); // it returns null if the call failed, so I have to do this check\n\n          if (newWindow) {\n            newWindow.opener = null; // required to prevent security issues\n            // emit only in case of success\n\n            this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n          }\n        } else {\n          this.updateLocationHref(eventToEmit.image.modal.extUrl); // emit only in case of success\n\n          this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n        }\n      }\n    }\n  }\n  /**\n   * This method is defined to be spied and replaced in unit testing with a fake method call.\n   * It must be public to be able to use jasmine spyOn method.\n   * @param newHref string new url\n   */\n\n\n  updateLocationHref(newHref) {\n    window.location.href = newHref;\n  }\n  /**\n   * Method called by the download upper button.\n   * @param event ButtonEvent event payload\n   */\n\n\n  onDownload(event) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n    this.downloadImage();\n    this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n  }\n  /**\n   * Method called by the close upper button.\n   * @param event ButtonEvent event payload\n   * @param action Action that triggered the close method. `Action.NORMAL` by default\n   */\n\n\n  onCloseGalleryButton(event, action = Action.NORMAL) {\n    const eventToEmit = this.getButtonEventToEmit(event);\n    this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n    this.closeGallery(action, false);\n  }\n  /**\n   * Method called by CurrentImageComponent and triggered via KeyboardService.\n   * @param event ImageModalEvent event payload\n   * @param action Action that triggered the close method. `Action.NORMAL` by default\n   */\n\n\n  onCloseGallery(event, action = Action.NORMAL) {\n    // remap ImageModalEvent to ButtonEvent\n    const buttonEvent = {\n      button: {\n        type: ButtonType.CLOSE\n      },\n      image: null,\n      action: event.action,\n      galleryId: event.galleryId\n    };\n    this.modalGalleryService.emitButtonBeforeHook(buttonEvent);\n    this.closeGallery(action, false);\n  }\n  /**\n   * Method to close the modal gallery specifying the action.\n   * It also reset the `keyboardService` to prevent multiple listeners.\n   * @param action Action action type. `Action.NORMAL` by default\n   * @param clickOutside boolean that is true if called clicking on the modal background. False by default.\n   */\n\n\n  closeGallery(action = Action.NORMAL, clickOutside = false) {\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.modalGalleryService.emitClose(new ImageModalEvent(this.id, action, true));\n    this.keyboardService.reset(libConfig);\n    this.modalGalleryService.close(this.id, clickOutside);\n  }\n  /**\n   * Method called when the image changes and used to update the `currentImage` object.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  onChangeCurrentImage(event) {\n    const newIndex = event.result;\n\n    if (newIndex < 0 || newIndex >= this.images.length) {\n      return;\n    }\n\n    this.currentImage = this.images[newIndex]; // emit current visible image index\n\n    this.modalGalleryService.emitShow(new ImageModalEvent(this.id, event.action, newIndex + 1)); // emit first/last event based on newIndex value\n\n    this.emitBoundaryEvent(event.action, newIndex);\n  }\n  /**\n   * Method called when you click 'outside' (i.e. on the semi-transparent background)\n   * to close the modal gallery if `enableCloseOutside` is true.\n   * @param event boolean that is true to close the modal gallery, false otherwise\n   */\n\n\n  onClickOutside(event) {\n    if (event && this.enableCloseOutside) {\n      this.closeGallery(Action.CLICK, true);\n    }\n  }\n  /**\n   * Method called when an image is loaded and the loading spinner has gone.\n   * It sets the previouslyLoaded flag inside the Image to hide loading spinner when displayed again.\n   * @param event ImageLoadEvent event payload\n   */\n\n\n  onImageLoad(event) {\n    // sets as previously loaded the image with index specified by `event.status`\n    this.images = this.images.map(img => {\n      if (img && img.id === event.id) {\n        return Object.assign({}, img, {\n          previouslyLoaded: event.status\n        });\n      }\n\n      return img;\n    });\n  }\n  /**\n   * Method called when a dot is clicked and used to update the current image.\n   * @param index number index of the clicked dot\n   */\n\n\n  onClickDot(index) {\n    this.currentImage = this.images[index];\n  }\n  /**\n   * Method called when an image preview is clicked and used to update the current image.\n   * @param event ImageModalEvent preview image\n   */\n\n\n  onClickPreview(event) {\n    this.onChangeCurrentImage(event);\n  }\n  /**\n   * Method to cleanup resources. In fact, this will reset keyboard's service.\n   * This is an Angular's lifecycle hook that is called when this component is destroyed.\n   */\n\n\n  ngOnDestroy() {\n    if (this.keyboardService) {\n      const libConfig = this.configService.getConfig(this.id);\n\n      if (this.id && libConfig) {\n        this.keyboardService.reset(libConfig);\n      }\n    }\n\n    if (this.updateImagesSubscription) {\n      this.updateImagesSubscription.unsubscribe();\n    }\n\n    this.idValidatorService.remove(this.id);\n  }\n  /**\n   * Method to show the modal gallery displaying the currentImage.\n   * It will also register a new `keyboardService` to catch keyboard's events to download the current\n   * image with keyboard's shortcuts. This service, will be removed either when modal gallery component\n   * will be destroyed or when the gallery is closed invoking the `closeGallery` method.\n   * @private\n   */\n\n\n  registerKeyboardService() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.keyboardService.init(libConfig).then(() => {\n      this.keyboardService.add((event, combo) => {\n        if (event.preventDefault) {\n          event.preventDefault();\n        } else {\n          // internet explorer\n          event.returnValue = false;\n        }\n\n        this.downloadImage();\n      }, libConfig);\n    });\n  }\n  /**\n   * Method to download the current image, only if `downloadable` is true.\n   * @private\n   */\n\n\n  downloadImage() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    const currentImageConfig = libConfig.currentImageConfig;\n\n    if (currentImageConfig && !currentImageConfig.downloadable) {\n      return;\n    }\n\n    this.downloadImageAllBrowsers();\n  }\n  /**\n   * Method to convert a base64 to a Blob\n   * @param base64Data string with base64 data\n   * @param contentType string with the MIME type\n   * @return Blob converted from the input base64Data\n   * @private\n   */\n\n\n  base64toBlob(base64Data, contentType = '') {\n    const sliceSize = 1024;\n    const byteCharacters = atob(base64Data);\n    const bytesLength = byteCharacters.length;\n    const slicesCount = Math.ceil(bytesLength / sliceSize);\n    const byteArrays = new Array(slicesCount);\n\n    for (let sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n      const begin = sliceIndex * sliceSize;\n      const end = Math.min(begin + sliceSize, bytesLength);\n      const bytes = new Array(end - begin);\n\n      for (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n        bytes[i] = byteCharacters[offset].charCodeAt(0);\n      }\n\n      byteArrays[sliceIndex] = new Uint8Array(bytes);\n    }\n\n    return new Blob(byteArrays, {\n      type: contentType\n    });\n  }\n  /**\n   * Private method to download the current image for all browsers.\n   * @private\n   */\n\n\n  downloadImageAllBrowsers() {\n    const link = document.createElement('a');\n    let isBase64 = false;\n    let img; // convert a SafeResourceUrl to a string\n\n    if (typeof this.currentImage.modal.img === 'string') {\n      img = this.currentImage.modal.img;\n    } else {\n      // if it's a SafeResourceUrl\n      img = this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, this.currentImage.modal.img);\n    }\n\n    if (img.includes('data:image/') || img.includes(';base64,')) {\n      const extension = img.replace('data:image/', '').split(';base64,')[0];\n      const pureBase64 = img.split(';base64,')[1];\n      const blob = this.base64toBlob(pureBase64, 'image/' + extension);\n      link.href = URL.createObjectURL(blob);\n      isBase64 = true;\n      link.setAttribute('download', this.getFileName(this.currentImage, isBase64, extension));\n    } else {\n      link.href = img;\n      link.setAttribute('download', this.getFileName(this.currentImage, isBase64));\n    }\n\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n  /**\n   * Private method to get the `ButtonEvent` to emit, merging the input `ButtonEvent`\n   * with the current image.\n   * @param event ButtonEvent event payload to return\n   * @returns ButtonEvent event payload with the current image included\n   * @private\n   */\n\n\n  getButtonEventToEmit(event) {\n    return Object.assign(event, {\n      image: this.currentImage\n    });\n  }\n  /**\n   * Private method to get the file name from an input path.\n   * This is used either to get the image's name from its path or from the Image itself,\n   * if specified as 'downloadFileName' by the user.\n   * @param image Image image to extract its file name\n   * @param isBase64 boolean to set if the image is a base64 file or not. False by default.\n   * @param base64Extension string to force the extension of the base64 image. Empty string by default.\n   * @returns string string file name of the input image.\n   * @private\n   */\n\n\n  getFileName(image, isBase64 = false, base64Extension = '') {\n    if (!image.modal.downloadFileName || image.modal.downloadFileName.length === 0) {\n      if (isBase64) {\n        return `Image-${image.id}.${base64Extension !== '' ? base64Extension : 'png'}`;\n      } else {\n        return image.modal.img.replace(/^.*[\\\\\\/]/, '');\n      }\n    } else {\n      return image.modal.downloadFileName;\n    }\n  }\n  /**\n   * Private method to initialize `images` as array of `Image`s.\n   * Also, it will emit ImageModalEvent to say that images are loaded.\n   * @private\n   */\n\n\n  initImages() {\n    this.modalGalleryService.emitHasData(new ImageModalEvent(this.id, Action.LOAD, true));\n    const currentIndex = this.images.indexOf(this.currentImage); // emit a new ImageModalEvent with the index of the current image\n\n    this.modalGalleryService.emitShow(new ImageModalEvent(this.id, Action.LOAD, currentIndex + 1)); // emit first/last event based on newIndex value\n\n    this.emitBoundaryEvent(Action.NORMAL, currentIndex);\n    this.showGallery = this.images.length > 0;\n  }\n  /**\n   * Private method to emit events when either the last or the first image are visible.\n   * @param action Action Enum of type Action that represents the source of the event that changed the\n   *  current image to the first one or the last one.\n   * @param indexToCheck number is the index number of the image (the first or the last one).\n   * @private\n   */\n\n\n  emitBoundaryEvent(action, indexToCheck) {\n    // to emit first/last event\n    switch (indexToCheck) {\n      case 0:\n        this.modalGalleryService.emitFirstImage(new ImageModalEvent(this.id, action, true));\n        break;\n\n      case this.images.length - 1:\n        this.modalGalleryService.emitLastImage(new ImageModalEvent(this.id, action, true));\n        break;\n    }\n  }\n\n}\n\nModalGalleryComponent.ɵfac = function ModalGalleryComponent_Factory(t) {\n  return new (t || ModalGalleryComponent)(i0.ɵɵdirectiveInject(DIALOG_DATA), i0.ɵɵdirectiveInject(ModalGalleryService), i0.ɵɵdirectiveInject(KeyboardService), i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(IdValidatorService), i0.ɵɵdirectiveInject(ConfigService), i0.ɵɵdirectiveInject(i5.DomSanitizer));\n};\n\nModalGalleryComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ModalGalleryComponent,\n  selectors: [[\"ks-modal-gallery\"]],\n  viewQuery: function ModalGalleryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CurrentImageComponent, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.currentImageComponent = _t.first);\n    }\n  },\n  hostBindings: function ModalGalleryComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"popstate\", function ModalGalleryComponent_popstate_HostBindingHandler($event) {\n        return ctx.onPopState($event);\n      }, false, i0.ɵɵresolveWindow);\n    }\n  },\n  decls: 8,\n  vars: 16,\n  consts: [[\"id\", \"modal-gallery-wrapper\", \"ksClickOutside\", \"\", 3, \"title\", \"clickOutsideEnable\", \"clickOutside\"], [\"id\", \"flex-min-height-ie-fix\"], [\"id\", \"modal-gallery-container\"], [3, \"id\", \"currentImage\", \"delete\", \"navigate\", \"download\", \"closeButton\", \"fullscreen\", \"customEmit\"], [3, \"id\", \"images\", \"currentImage\", \"isOpen\", \"loadImage\", \"changeImage\", \"closeGallery\"], [3, \"id\", \"images\", \"currentImage\", \"dotsConfig\", \"clickDot\"], [3, \"id\", \"images\", \"currentImage\", \"clickPreview\"]],\n  template: function ModalGalleryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"clickOutside\", function ModalGalleryComponent_Template_div_clickOutside_0_listener($event) {\n        return ctx.onClickOutside($event);\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"ks-upper-buttons\", 3);\n      i0.ɵɵlistener(\"delete\", function ModalGalleryComponent_Template_ks_upper_buttons_delete_3_listener($event) {\n        return ctx.onDelete($event);\n      })(\"navigate\", function ModalGalleryComponent_Template_ks_upper_buttons_navigate_3_listener($event) {\n        return ctx.onNavigate($event);\n      })(\"download\", function ModalGalleryComponent_Template_ks_upper_buttons_download_3_listener($event) {\n        return ctx.onDownload($event);\n      })(\"closeButton\", function ModalGalleryComponent_Template_ks_upper_buttons_closeButton_3_listener($event) {\n        return ctx.onCloseGalleryButton($event);\n      })(\"fullscreen\", function ModalGalleryComponent_Template_ks_upper_buttons_fullscreen_3_listener($event) {\n        return ctx.onFullScreen($event);\n      })(\"customEmit\", function ModalGalleryComponent_Template_ks_upper_buttons_customEmit_3_listener($event) {\n        return ctx.onCustomEmit($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ks-current-image\", 4);\n      i0.ɵɵlistener(\"loadImage\", function ModalGalleryComponent_Template_ks_current_image_loadImage_4_listener($event) {\n        return ctx.onImageLoad($event);\n      })(\"changeImage\", function ModalGalleryComponent_Template_ks_current_image_changeImage_4_listener($event) {\n        return ctx.onChangeCurrentImage($event);\n      })(\"closeGallery\", function ModalGalleryComponent_Template_ks_current_image_closeGallery_4_listener($event) {\n        return ctx.onCloseGallery($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\");\n      i0.ɵɵelementStart(6, \"ks-dots\", 5);\n      i0.ɵɵlistener(\"clickDot\", function ModalGalleryComponent_Template_ks_dots_clickDot_6_listener($event) {\n        return ctx.onClickDot($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"ks-previews\", 6);\n      i0.ɵɵlistener(\"clickPreview\", function ModalGalleryComponent_Template_ks_previews_clickPreview_7_listener($event) {\n        return ctx.onClickPreview($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"title\", ctx.accessibilityConfig.modalGalleryContentTitle)(\"clickOutsideEnable\", ctx.enableCloseOutside);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig.modalGalleryContentAriaLabel);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"id\", ctx.id)(\"currentImage\", ctx.currentImage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"id\", ctx.id)(\"images\", ctx.images)(\"currentImage\", ctx.currentImage)(\"isOpen\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"id\", ctx.id)(\"images\", ctx.images)(\"currentImage\", ctx.currentImage)(\"dotsConfig\", ctx.dotsConfig);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"id\", ctx.id)(\"images\", ctx.images)(\"currentImage\", ctx.currentImage);\n    }\n  },\n  directives: [ClickOutsideDirective, UpperButtonsComponent, CurrentImageComponent, DotsComponent, PreviewsComponent],\n  styles: [\"#flex-min-height-ie-fix[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}#modal-gallery-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-width:100vw;min-height:100vh}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ModalGalleryComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-modal-gallery',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div id=\\\"modal-gallery-wrapper\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig.modalGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig.modalGalleryContentTitle\\\"\\n     ksClickOutside [clickOutsideEnable]=\\\"enableCloseOutside\\\"\\n     (clickOutside)=\\\"onClickOutside($event)\\\">\\n\\n  <div id=\\\"flex-min-height-ie-fix\\\">\\n    <div id=\\\"modal-gallery-container\\\">\\n\\n      <ks-upper-buttons [id]=\\\"id\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        (delete)=\\\"onDelete($event)\\\"\\n                        (navigate)=\\\"onNavigate($event)\\\"\\n                        (download)=\\\"onDownload($event)\\\"\\n                        (closeButton)=\\\"onCloseGalleryButton($event)\\\"\\n                        (fullscreen)=\\\"onFullScreen($event)\\\"\\n                        (customEmit)=\\\"onCustomEmit($event)\\\"></ks-upper-buttons>\\n\\n      <ks-current-image [id]=\\\"id\\\"\\n                        [images]=\\\"images\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        [isOpen]=\\\"true\\\"\\n                        (loadImage)=\\\"onImageLoad($event)\\\"\\n                        (changeImage)=\\\"onChangeCurrentImage($event)\\\"\\n                        (closeGallery)=\\\"onCloseGallery($event)\\\"></ks-current-image>\\n\\n      <div>\\n        <ks-dots [id]=\\\"id\\\"\\n                 [images]=\\\"images\\\"\\n                 [currentImage]=\\\"currentImage\\\"\\n                 [dotsConfig]=\\\"dotsConfig\\\"\\n                 (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n\\n        <ks-previews [id]=\\\"id\\\"\\n                     [images]=\\\"images\\\"\\n                     [currentImage]=\\\"currentImage\\\"\\n                     (clickPreview)=\\\"onClickPreview($event)\\\"></ks-previews>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n      styles: [\"#flex-min-height-ie-fix{display:flex;flex-direction:column;justify-content:center}#modal-gallery-container{display:flex;flex-direction:column;justify-content:space-between;min-width:100vw;min-height:100vh}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DIALOG_DATA]\n      }]\n    }, {\n      type: ModalGalleryService\n    }, {\n      type: KeyboardService\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: IdValidatorService\n    }, {\n      type: ConfigService\n    }, {\n      type: i5.DomSanitizer\n    }];\n  }, {\n    currentImageComponent: [{\n      type: ViewChild,\n      args: [CurrentImageComponent, {\n        static: true\n      }]\n    }],\n    onPopState: [{\n      type: HostListener,\n      args: ['window:popstate', ['$event']]\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Class that represents the modal dialog instance.\n * It is returned by the open method.\n */\n\n\nclass ModalGalleryRef {\n  constructor(overlayRef) {\n    this.overlayRef = overlayRef;\n    this.close = new Subject();\n    this.close$ = this.close.asObservable();\n    this.show = new Subject();\n    this.show$ = this.show.asObservable();\n    this.firstImage = new Subject();\n    this.firstImage$ = this.firstImage.asObservable();\n    this.lastImage = new Subject();\n    this.lastImage$ = this.lastImage.asObservable();\n    this.hasData = new Subject();\n    this.hasData$ = this.hasData.asObservable();\n    this.buttonBeforeHook = new Subject();\n    this.buttonBeforeHook$ = this.buttonBeforeHook.asObservable();\n    this.buttonAfterHook = new Subject();\n    this.buttonAfterHook$ = this.buttonAfterHook.asObservable();\n  }\n  /**\n   * Close modal dialog, disposing the Overlay.\n   */\n\n\n  closeModal() {\n    this.overlayRef.dispose();\n  }\n  /**\n   * Method to emit close event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitClose(event) {\n    this.close.next(event);\n  }\n  /**\n   * Method to emit show event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitShow(event) {\n    this.show.next(event);\n  }\n  /**\n   * Method to emit firstImage event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitFirstImage(event) {\n    this.firstImage.next(event);\n  }\n  /**\n   * Method to emit lastImage event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitLastImage(event) {\n    this.lastImage.next(event);\n  }\n  /**\n   * Method to emit hasData event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitHasData(event) {\n    this.hasData.next(event);\n  }\n  /**\n   * Method to emit buttonBeforeHook event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitButtonBeforeHook(event) {\n    this.buttonBeforeHook.next(event);\n  }\n  /**\n   * Method to emit buttonAfterHook event.\n   * @param event ImageModalEvent event payload\n   */\n\n\n  emitButtonAfterHook(event) {\n    this.buttonAfterHook.next(event);\n  }\n\n}\n\nconst DEFAULT_DIALOG_CONFIG = {\n  hasBackdrop: true,\n  backdropClass: 'ks-modal-gallery-backdrop',\n  panelClass: 'ks-modal-gallery-panel'\n};\n\nclass ModalGalleryService {\n  constructor(injector, overlay, configService) {\n    this.injector = injector;\n    this.overlay = overlay;\n    this.configService = configService;\n    this.updateImages = new Subject();\n    this.updateImages$ = this.updateImages.asObservable();\n  }\n  /**\n   * Method to open modal gallery passing the configuration\n   * @param config ModalGalleryConfig that contains: id, array of images, current image and optionally the configuration object\n   * @return ModalGalleryRef | undefined is the object used to listen for events.\n   */\n\n\n  open(config) {\n    // Returns an OverlayRef which is a PortalHost\n    const overlayRef = this.createOverlay(); // Instantiate a reference to the dialog\n\n    this.dialogRef = new ModalGalleryRef(overlayRef); // Attach dialog container\n\n    const overlayComponent = this.attachDialogContainer(overlayRef, config, this.dialogRef);\n    overlayRef.backdropClick().subscribe(() => {\n      if (this.dialogRef) {\n        this.dialogRef.closeModal();\n      }\n    });\n    return this.dialogRef;\n  }\n  /**\n   * Method to close a modal gallery previously opened.\n   * @param id Unique identifier of the modal gallery\n   * @param clickOutside boolean is true if closed clicking on the modal backdrop, false otherwise.\n   */\n\n\n  close(id, clickOutside) {\n    const libConfig = this.configService.getConfig(id);\n\n    if (clickOutside) {\n      if (this.dialogRef && libConfig && libConfig.enableCloseOutside) {\n        this.dialogRef.closeModal();\n      }\n    } else {\n      if (this.dialogRef) {\n        this.dialogRef.closeModal();\n      }\n    }\n  }\n  /**\n   * Method to update images array.\n   * @param images Image[] updated array of images\n   */\n\n\n  updateModalImages(images) {\n    this.updateImages.next(images);\n  }\n  /**\n   * Method to emit close event.\n   * @param event ImageModalEvent is the event payload\n   */\n\n\n  emitClose(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitClose(event);\n  }\n  /**\n   * Method to emit show event.\n   * @param event ImageModalEvent is the event payload\n   */\n\n\n  emitShow(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitShow(event);\n  }\n  /**\n   * Method to emit firstImage event.\n   * @param event ImageModalEvent is the event payload\n   */\n\n\n  emitFirstImage(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitFirstImage(event);\n  }\n  /**\n   * Method to emit lastImage event.\n   * @param event ImageModalEvent is the event payload\n   */\n\n\n  emitLastImage(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitLastImage(event);\n  }\n  /**\n   * Method to emit hasData event.\n   * @param event ImageModalEvent is the event payload\n   */\n\n\n  emitHasData(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitHasData(event);\n  }\n  /**\n   * Method to emit buttonBeforeHook event.\n   * @param event ButtonEvent is the event payload\n   */\n\n\n  emitButtonBeforeHook(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitButtonBeforeHook(event);\n  }\n  /**\n   * Method to emit buttonAfterHook event.\n   * @param event ButtonEvent is the event payload\n   */\n\n\n  emitButtonAfterHook(event) {\n    if (!this.dialogRef) {\n      return;\n    }\n\n    this.dialogRef.emitButtonAfterHook(event);\n  }\n  /**\n   * Private method to create an Overlay using Angular CDK APIs\n   * @private\n   */\n\n\n  createOverlay() {\n    const overlayConfig = this.getOverlayConfig();\n    return this.overlay.create(overlayConfig);\n  }\n  /**\n   * Private method to attach ModalGalleryComponent to the overlay.\n   * @param overlayRef OverlayRef is the Overlay object created using Angular CDK APIs\n   * @param config ModalGalleryConfig that contains: id, array of images, current image and optionally the configuration object\n   * @param dialogRef ModalGalleryRef is the object to control the dialog instance\n   * @private\n   */\n\n\n  attachDialogContainer(overlayRef, config, dialogRef) {\n    const injector = Injector.create({\n      parent: this.injector,\n      providers: [{\n        provide: ModalGalleryRef,\n        useValue: dialogRef\n      }, {\n        provide: DIALOG_DATA,\n        useValue: config\n      }]\n    });\n    const containerPortal = new ComponentPortal(ModalGalleryComponent, null, injector);\n    const containerRef = overlayRef.attach(containerPortal);\n    return containerRef.instance;\n  }\n  /**\n   * Private method to create an OverlayConfig instance\n   * @private\n   */\n\n\n  getOverlayConfig() {\n    const positionStrategy = this.overlay.position().global().centerHorizontally().centerVertically();\n    const overlayConfig = new OverlayConfig({\n      hasBackdrop: DEFAULT_DIALOG_CONFIG.hasBackdrop,\n      backdropClass: DEFAULT_DIALOG_CONFIG.backdropClass,\n      panelClass: DEFAULT_DIALOG_CONFIG.panelClass,\n      scrollStrategy: this.overlay.scrollStrategies.block(),\n      positionStrategy\n    });\n    return overlayConfig;\n  }\n\n}\n\nModalGalleryService.ɵfac = function ModalGalleryService_Factory(t) {\n  return new (t || ModalGalleryService)(i0.ɵɵinject(i0.Injector), i0.ɵɵinject(i1.Overlay), i0.ɵɵinject(ConfigService));\n};\n\nModalGalleryService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: ModalGalleryService,\n  factory: ModalGalleryService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ModalGalleryService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i0.Injector\n    }, {\n      type: i1.Overlay\n    }, {\n      type: ConfigService\n    }];\n  }, null);\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Default max height of previews.\n */\n\n\nconst DEFAULT_MAX_HEIGHT = '200px';\n/**\n * Component with image previews for carousel\n */\n\nclass CarouselPreviewsComponent extends AccessibleComponent {\n  constructor(ref, breakpointObserver, // sanitizer is used only to sanitize style before add it to background property when legacyIE11Mode is enabled\n  sanitizer, configService) {\n    super();\n    this.ref = ref;\n    this.breakpointObserver = breakpointObserver;\n    this.sanitizer = sanitizer;\n    this.configService = configService;\n    /**\n     * Variable to change the max-width of the host component\n     */\n\n    this.hostMaxWidth = '100%';\n    /**\n     * Variable to set aria-label of the host component\n     */\n\n    this.ariaLabel = `Carousel previews`;\n    /**\n     * Output to emit the clicked preview. The payload contains the `InternalLibImage` associated to the clicked preview.\n     */\n\n    this.clickPreview = new EventEmitter();\n    /**\n     * Enum of type `Action` that represents a mouse click on a button.\n     * Declared here to be used inside the template.\n     */\n\n    this.clickAction = Action.CLICK;\n    /**\n     * Enum of type `Action` that represents a keyboard action.\n     * Declared here to be used inside the template.\n     */\n\n    this.keyboardAction = Action.KEYBOARD;\n    /**\n     * Array of `InternalLibImage` exposed to the template. This field is initialized\n     * applying transformations, default values and so on to the input of the same type.\n     */\n\n    this.previews = [];\n    /**\n     * Variable with the preview's maxHeight\n     */\n\n    this.previewMaxHeight = DEFAULT_MAX_HEIGHT; // listen for width changes and update preview heights accordingly\n\n    this.breakpointSubscription = breakpointObserver.observe([Breakpoints.XSmall, Breakpoints.Small, Breakpoints.Medium, Breakpoints.Large, Breakpoints.XLarge]).subscribe(result => {\n      if (!this.previewConfig || !this.previewConfig.breakpoints) {\n        return;\n      }\n\n      if (result.breakpoints[Breakpoints.XSmall]) {\n        this.updateHeight(this.previewConfig.breakpoints.xSmall);\n      } else if (result.breakpoints[Breakpoints.Small]) {\n        this.updateHeight(this.previewConfig.breakpoints.small);\n      } else if (result.breakpoints[Breakpoints.Medium]) {\n        this.updateHeight(this.previewConfig.breakpoints.medium);\n      } else if (result.breakpoints[Breakpoints.Large]) {\n        this.updateHeight(this.previewConfig.breakpoints.large);\n      } else if (result.breakpoints[Breakpoints.XLarge]) {\n        this.updateHeight(this.previewConfig.breakpoints.xLarge);\n      }\n    });\n  }\n  /**\n   * Method to update the height of previews, passing the desired height as input.\n   * @param configBreakpointHeight is a number that represent the desired height to set.\n   */\n\n\n  updateHeight(configBreakpointHeight) {\n    if (this.previewConfig && this.previewConfig.maxHeight) {\n      const heightNum = +this.previewConfig.maxHeight.replace('/px/g', '').replace('/%/g', '');\n      this.previewMaxHeight = Math.min(configBreakpointHeight, heightNum) + 'px';\n    } else {\n      const heightNum = +DEFAULT_MAX_HEIGHT.replace('/px/g', '').replace('/%/g', '');\n      this.previewMaxHeight = Math.min(configBreakpointHeight, heightNum) + 'px';\n    }\n\n    this.ref.markForCheck();\n  }\n  /**\n   * Method ´ngOnInit´ to build `configPreview` applying a default value and also to\n   * init the `previews` array.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.carouselConfig = libConfig.carouselConfig;\n    this.previewConfig = libConfig.carouselPreviewsConfig;\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n\n    if (!this.previewConfig || !this.previewConfig.maxHeight || !this.previewConfig.breakpoints) {\n      throw new Error('Internal library error - previewConfig must be defined');\n    } // change the max-width of this component if there is a specified width !== 100% in carouselConfig\n\n\n    if (this.carouselConfig && this.carouselConfig.maxWidth !== '100%') {\n      this.hostMaxWidth = this.carouselConfig.maxWidth;\n    }\n\n    this.previewMaxHeight = this.previewConfig.maxHeight; // init previews based on currentImage and the full array of images\n\n    this.initPreviews(this.currentImage, this.images); // apply custom height based on responsive breakpoints\n    // This is required, because the breakpointSubscription is not triggered at creation,\n    // but only when the width changes\n\n    const isXsmallScreen = this.breakpointObserver.isMatched(Breakpoints.XSmall);\n    const isSmallScreen = this.breakpointObserver.isMatched(Breakpoints.Small);\n    const isMediumScreen = this.breakpointObserver.isMatched(Breakpoints.Medium);\n    const isLargeScreen = this.breakpointObserver.isMatched(Breakpoints.Large);\n    const isxLargeScreen = this.breakpointObserver.isMatched(Breakpoints.XLarge);\n\n    if (isXsmallScreen) {\n      this.updateHeight(this.previewConfig.breakpoints.xSmall);\n    } else if (isSmallScreen) {\n      this.updateHeight(this.previewConfig.breakpoints.small);\n    } else if (isMediumScreen) {\n      this.updateHeight(this.previewConfig.breakpoints.medium);\n    } else if (isLargeScreen) {\n      this.updateHeight(this.previewConfig.breakpoints.large);\n    } else if (isxLargeScreen) {\n      this.updateHeight(this.previewConfig.breakpoints.xLarge);\n    }\n  }\n  /**\n   * Method to check if an image is active (i.e. a preview image).\n   * @param InternalLibImage preview is an image to check if it's active or not\n   * @returns boolean true if is active, false otherwise\n   */\n\n\n  isActive(preview) {\n    if (!preview || !this.currentImage) {\n      return false;\n    }\n\n    return preview.id === this.currentImage.id;\n  }\n  /**\n   * Method ´ngOnChanges´ to update `previews` array.\n   * Also, both `start` and `end` local variables will be updated accordingly.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges(changes) {\n    const simpleChange = changes.currentImage;\n\n    if (!simpleChange) {\n      return;\n    }\n\n    const prev = simpleChange.previousValue;\n    const current = simpleChange.currentValue;\n\n    if (current && changes.images && changes.images.previousValue && changes.images.currentValue) {\n      // I'm in this if statement, if input images are changed (for instance, because I removed one of them with the 'delete button',\n      // or because users changed the images array while modal gallery is still open).\n      // In this case, I have to re-init previews, because the input array of images is changed.\n      this.initPreviews(current, changes.images.currentValue);\n    }\n\n    if (prev && current && prev.id !== current.id) {\n      // to manage infinite sliding I have to reset both `start` and `end` at the beginning\n      // to show again previews from the first image.\n      // This happens when you navigate over the last image to return to the first one\n      let prevIndex;\n      let currentIndex;\n\n      try {\n        prevIndex = getIndex(prev, this.images);\n        currentIndex = getIndex(current, this.images);\n      } catch (err) {\n        console.error('Cannot get previous and current image indexes in previews');\n        throw err;\n      } // apply a formula to get a values to be used to decide if go next, return back or stay without doing anything\n\n\n      const calc = Math.floor((this.end - this.start) / 2) + this.start;\n\n      if (prevIndex === this.images.length - 1 && currentIndex === 0) {\n        // first image\n        this.setBeginningIndexesPreviews();\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n        return;\n      } // the same for the opposite case, when you navigate back from the fist image to go to the last one.\n\n\n      if (prevIndex === 0 && currentIndex === this.images.length - 1) {\n        // last image\n        this.setEndIndexesPreviews();\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n        return;\n      }\n\n      if (this.previewConfig && this.previewConfig.number % 2 === 0) {\n        if (calc > currentIndex) {\n          this.previous();\n        } else {\n          this.next();\n        }\n      } else {\n        if (calc > currentIndex) {\n          this.previous();\n        }\n\n        if (calc < currentIndex) {\n          this.next();\n        }\n      }\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a preview.\n   * This will trigger the `clickpreview` output with the input preview as its payload.\n   * @param InternalLibImage preview that triggered this method\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action that triggered this event (Action.NORMAL by default)\n   */\n\n\n  onImageEvent(preview, event, action = Action.NORMAL) {\n    if (!this.previewConfig || !this.previewConfig.clickable) {\n      return;\n    }\n\n    const clickedImageIndex = this.images.indexOf(preview);\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT) {\n      this.clickPreview.emit({\n        action,\n        result: clickedImageIndex\n      });\n    } else if (result === PREV) {\n      this.clickPreview.emit({\n        action,\n        result: clickedImageIndex\n      });\n    }\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a navigation arrow.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent | MouseEvent event payload\n   */\n\n\n  onNavigationEvent(direction, event) {\n    const result = super.handleNavigationEvent(direction, event);\n\n    if (result === NEXT) {\n      this.next();\n    } else if (result === PREV) {\n      this.previous();\n    }\n  }\n  /**\n   * Method to get aria-label text for a preview image.\n   * @param Image is the preview\n   */\n\n\n  getAriaLabel(preview) {\n    if (!preview.plain) {\n      return preview.modal.ariaLabel || '';\n    }\n\n    return preview.plain.ariaLabel || preview.modal.ariaLabel || '';\n  }\n  /**\n   * Method to get title text for a preview image.\n   * @param Image is the preview\n   */\n\n\n  getTitle(preview) {\n    if (!preview.plain) {\n      return preview.modal.title || '';\n    }\n\n    return preview.plain.title || preview.modal.title || '';\n  }\n  /**\n   * Method to get alt text for a preview image.\n   * @param Image is the preview\n   */\n\n\n  getAlt(preview) {\n    if (!preview.plain) {\n      return preview.modal.alt || '';\n    }\n\n    return preview.plain.alt || preview.modal.alt || '';\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item\n   */\n\n\n  trackById(index, item) {\n    return item.id;\n  }\n  /**\n   * Method used in template to sanitize an url when you need legacyIE11Mode.\n   * In this way you can set an url as background of a div.\n   * @param unsafeStyle is a string or a SafeResourceUrl that represents the url to sanitize.\n   * @param unsafeStyleFallback is a string or a SafeResourceUrl that represents the fallback url to sanitize.\n   * @returns a SafeStyle object that can be used in template without problems.\n   */\n\n\n  sanitizeUrlBgStyle(unsafeStyle, unsafeStyleFallback) {\n    // Method used only to sanitize background-image style before add it to background property when legacyIE11Mode is enabled\n    let bg = 'url(' + unsafeStyle + ')';\n\n    if (!!unsafeStyleFallback) {\n      // if a fallback image is defined, append it. In this way, it will be used by the browser as fallback.\n      bg += ', ' + 'url(' + unsafeStyleFallback + ')';\n    }\n\n    return this.sanitizer.bypassSecurityTrustStyle(bg);\n  }\n  /**\n   * Method to cleanup resources. In fact, it cleans breakpointSubscription.\n   * This is an Angular's lifecycle hook that is called when this component is destroyed.\n   */\n\n\n  ngOnDestroy() {\n    if (this.breakpointSubscription) {\n      this.breakpointSubscription.unsubscribe();\n    }\n  }\n  /**\n   * Private method to init previews based on the currentImage and the full array of images.\n   * The current image in mandatory to show always the current preview (as highlighted).\n   * @param InternalLibImage currentImage to decide how to show previews, because I always want to see the current image as highlighted\n   * @param InternalLibImage[] images is the array of all images.\n   */\n\n\n  initPreviews(currentImage, images) {\n    let index;\n\n    try {\n      index = getIndex(currentImage, images);\n    } catch (err) {\n      throw err;\n    }\n\n    switch (index) {\n      case 0:\n        // first image\n        this.setBeginningIndexesPreviews();\n        break;\n\n      case images.length - 1:\n        // last image\n        this.setEndIndexesPreviews();\n        break;\n      // default:\n      //   // other images\n      //   // TODO unused because it starts always at image 0\n      //   this.setIndexesPreviews();\n      //   break;\n    }\n\n    this.previews = images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to init both `start` and `end` to the beginning.\n   */\n\n\n  setBeginningIndexesPreviews() {\n    if (!this.previewConfig || this.previewConfig.number === undefined) {\n      throw new Error('Internal library error - previewConfig and number must be defined');\n    }\n\n    this.start = 0;\n    this.end = Math.min(this.previewConfig.number, this.images.length);\n  }\n  /**\n   * Private method to init both `start` and `end` to the end.\n   */\n\n\n  setEndIndexesPreviews() {\n    if (!this.previewConfig || this.previewConfig.number === undefined) {\n      throw new Error('Internal library error - previewConfig and number must be defined');\n    }\n\n    this.start = this.images.length - 1 - (this.previewConfig.number - 1);\n    this.end = this.images.length;\n  }\n  /**\n   * Private method to update the visible previews navigating to the right (next).\n   */\n\n\n  next() {\n    // check if nextImage should be blocked\n    if (this.isPreventSliding(this.images.length - 1)) {\n      return;\n    }\n\n    if (this.end === this.images.length) {\n      return;\n    }\n\n    this.start++;\n    this.end = Math.min(this.end + 1, this.images.length);\n    this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to update the visible previews navigating to the left (previous).\n   */\n\n\n  previous() {\n    // check if prevImage should be blocked\n    if (this.isPreventSliding(0)) {\n      return;\n    }\n\n    if (this.start === 0) {\n      return;\n    }\n\n    this.start = Math.max(this.start - 1, 0);\n    this.end = Math.min(this.end - 1, this.images.length);\n    this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n  }\n  /**\n   * Private method to block/permit sliding between previews.\n   * @param number boundaryIndex is the first or the last index of `images` input array\n   * @returns boolean if true block sliding, otherwise not\n   */\n\n\n  isPreventSliding(boundaryIndex) {\n    return getIndex(this.currentImage, this.images) === boundaryIndex;\n  }\n\n}\n\nCarouselPreviewsComponent.ɵfac = function CarouselPreviewsComponent_Factory(t) {\n  return new (t || CarouselPreviewsComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1$1.BreakpointObserver), i0.ɵɵdirectiveInject(i5.DomSanitizer), i0.ɵɵdirectiveInject(ConfigService));\n};\n\nCarouselPreviewsComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CarouselPreviewsComponent,\n  selectors: [[\"ks-carousel-previews\"]],\n  hostVars: 3,\n  hostBindings: function CarouselPreviewsComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵattribute(\"aria-label\", ctx.ariaLabel);\n      i0.ɵɵstyleProp(\"max-width\", ctx.hostMaxWidth);\n    }\n  },\n  inputs: {\n    id: \"id\",\n    currentImage: \"currentImage\",\n    images: \"images\"\n  },\n  outputs: {\n    clickPreview: \"clickPreview\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"previews-container\", 3, \"title\", 4, \"ngIf\"], [1, \"previews-container\", 3, \"title\"], [\"role\", \"button\", 1, \"nav-left\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"aria-hidden\", \"true\", 3, \"title\"], [1, \"preview-inner-container\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"role\", \"button\", 1, \"nav-right\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"class\", \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 3, \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\"]],\n  template: function CarouselPreviewsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CarouselPreviewsComponent_nav_0_Template, 7, 16, \"nav\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.previewConfig == null ? null : ctx.previewConfig.visible);\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, FallbackImageDirective, SizeDirective],\n  styles: [\"[_nghost-%COMP%]{position:relative;margin-top:3px;margin-bottom:3px;width:100%}.previews-container[_ngcontent-%COMP%]{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:0}.previews-container[_ngcontent-%COMP%] > .preview-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:nowrap;width:100%}.previews-container[_ngcontent-%COMP%] > .preview-inner-container[_ngcontent-%COMP%] > .preview-image[_ngcontent-%COMP%]{cursor:pointer;object-fit:cover}.previews-container[_ngcontent-%COMP%] > .preview-inner-container[_ngcontent-%COMP%] > .preview-image.unclickable[_ngcontent-%COMP%]{cursor:not-allowed}.previews-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%], .previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%], .previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 7px);color:#919191;z-index:1000;cursor:pointer;transition:all .5s}.previews-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]:hover, .previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]:hover, .previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{margin-right:10px;left:10px}.previews-container[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%] > .left-arrow-preview-image[_ngcontent-%COMP%]{opacity:1}.previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{margin-left:10px;right:10px}.previews-container[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%] > .right-arrow-preview-image[_ngcontent-%COMP%]{opacity:1}\", _c3],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CarouselPreviewsComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-carousel-previews',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<nav *ngIf=\\\"previewConfig?.visible\\\"\\n     class=\\\"previews-container\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.carouselPreviewsContainerTitle\\\">\\n\\n  <a class=\\\"nav-left\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollPrevAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollPrevTitle\\\"></div>\\n  </a>\\n\\n  <div class=\\\"preview-inner-container\\\">\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image{{isActive(preview) ? ' active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.width!,\\n                                 height: previewMaxHeight}\\\"\\n           [attr.aria-label]=\\\"getAriaLabel(preview)\\\"\\n           [title]=\\\"getTitle(preview)\\\"\\n           alt=\\\"{{getAlt(preview)}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n  </div>\\n\\n  <a class=\\\"nav-right\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollNextAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollNextTitle\\\"></div>\\n  </a>\\n\\n</nav>\\n\",\n      styles: [\":host{position:relative;margin-top:3px;margin-bottom:3px;width:100%}.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:0}.previews-container>.preview-inner-container{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:nowrap;width:100%}.previews-container>.preview-inner-container>.preview-image{cursor:pointer;object-fit:cover}.previews-container>.preview-inner-container>.preview-image.unclickable{cursor:not-allowed}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{position:absolute;top:calc(50% - 7px);color:#919191;z-index:1000;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px;left:10px}.previews-container>.nav-left>.left-arrow-preview-image{opacity:1}.previews-container>.nav-right{margin-left:10px;right:10px}.previews-container>.nav-right>.right-arrow-preview-image{opacity:1}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i1$1.BreakpointObserver\n    }, {\n      type: i5.DomSanitizer\n    }, {\n      type: ConfigService\n    }];\n  }, {\n    hostMaxWidth: [{\n      type: HostBinding,\n      args: ['style.max-width']\n    }],\n    ariaLabel: [{\n      type: HostBinding,\n      args: ['attr.aria-label']\n    }],\n    // @ts-ignore\n    id: [{\n      type: Input\n    }],\n    // @ts-ignore\n    currentImage: [{\n      type: Input\n    }],\n    // @ts-ignore\n    images: [{\n      type: Input\n    }],\n    clickPreview: [{\n      type: Output\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to change the max size of an element.\n */\n\n\nclass MaxSizeDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change both max-width and max-height of an element.\n   */\n\n\n  applyStyle() {\n    if (!this.maxSizeConfig) {\n      return;\n    }\n\n    if (this.maxSizeConfig.maxWidth) {\n      this.renderer.setStyle(this.el.nativeElement, 'max-width', this.maxSizeConfig.maxWidth);\n    }\n\n    if (this.maxSizeConfig.maxHeight) {\n      this.renderer.setStyle(this.el.nativeElement, 'max-height', this.maxSizeConfig.maxHeight);\n    }\n  }\n\n}\n\nMaxSizeDirective.ɵfac = function MaxSizeDirective_Factory(t) {\n  return new (t || MaxSizeDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nMaxSizeDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: MaxSizeDirective,\n  selectors: [[\"\", \"ksMaxSize\", \"\"]],\n  inputs: {\n    maxSizeConfig: \"maxSizeConfig\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MaxSizeDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksMaxSize]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    maxSizeConfig: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with configurable inline/plain carousel.\n */\n\n\nclass CarouselComponent extends AccessibleComponent {\n  constructor( // tslint:disable-next-line:no-any\n  platformId, ngZone, modalGalleryService, configService, ref) {\n    super();\n    this.platformId = platformId;\n    this.ngZone = ngZone;\n    this.modalGalleryService = modalGalleryService;\n    this.configService = configService;\n    this.ref = ref;\n    /**\n     * Attribute to set ariaLabel of the host component\n     */\n\n    this.ariaLabel = `Carousel`;\n    /**\n     * Array of `InternalLibImage` that represent the model of this library with all images,\n     * thumbs and so on.\n     */\n\n    this.images = [];\n    /**\n     * Output to emit an event when an image is clicked.\n     */\n\n    this.clickImage = new EventEmitter();\n    /**\n     * Output to emit an event when current image is changed.\n     */\n\n    this.changeImage = new EventEmitter();\n    /**\n     * Output to emit an event when the current image is the first one.\n     */\n\n    this.firstImage = new EventEmitter();\n    /**\n     * Output to emit an event when the current image is the last one.\n     */\n\n    this.lastImage = new EventEmitter();\n    /**\n     * Enum of type `Action` that represents a mouse click on a button.\n     * Declared here to be used inside the template.\n     */\n\n    this.clickAction = Action.CLICK;\n    /**\n     * Enum of type `Action` that represents a keyboard action.\n     * Declared here to be used inside the template.\n     */\n\n    this.keyboardAction = Action.KEYBOARD;\n    /**\n     * Boolean that it's true when you are watching the first image (currently visible).\n     * False by default\n     */\n\n    this.isFirstImage = false;\n    /**\n     * Boolean that it's true when you are watching the last image (currently visible).\n     * False by default\n     */\n\n    this.isLastImage = false;\n    /**\n     * Subject to play the carousel.\n     */\n\n    this.start$ = new Subject();\n    /**\n     * Subject to stop the carousel.\n     */\n\n    this.stop$ = new Subject();\n    /**\n     * Private object without type to define all swipe actions used by hammerjs.\n     */\n\n    this.SWIPE_ACTION = {\n      LEFT: 'swipeleft',\n      RIGHT: 'swiperight',\n      UP: 'swipeup',\n      DOWN: 'swipedown'\n    };\n  }\n  /**\n   * Listener to stop the gallery when the mouse pointer is over the current image.\n   */\n\n\n  onMouseEnter() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!libConfig.carouselPlayConfig || !libConfig.carouselPlayConfig.pauseOnHover) {\n      return;\n    }\n\n    this.stopCarousel();\n  }\n  /**\n   * Listener to play the gallery when the mouse pointer leave the current image.\n   */\n\n\n  onMouseLeave() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!libConfig.carouselPlayConfig || !libConfig.carouselPlayConfig.pauseOnHover || !libConfig.carouselPlayConfig.autoPlay) {\n      return;\n    }\n\n    this.playCarousel();\n  }\n  /**\n   * Listener to navigate carousel images with keyboard (left).\n   */\n\n\n  onKeyDownLeft() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!libConfig.carouselConfig || !libConfig.carouselConfig.keyboardEnable) {\n      return;\n    }\n\n    this.prevImage();\n  }\n  /**\n   * Listener to navigate carousel images with keyboard (right).\n   */\n\n\n  onKeyDownLRight() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!libConfig.carouselConfig || !libConfig.carouselConfig.keyboardEnable) {\n      return;\n    }\n\n    this.nextImage();\n  }\n\n  ngOnInit() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    if (!this.images || this.images.length === 0) {\n      throw new Error('Internal library error - images array must be defined and with at least an element');\n    }\n\n    this.configService.setConfig(this.id, this.config);\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.currentImage = this.images[0];\n    this.carouselDotsConfig = libConfig.carouselDotsConfig;\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n    this.carouselSlideInfinite = libConfig.carouselSlideInfinite;\n    this.carouselConfig = libConfig.carouselConfig;\n    this.carouselImageConfig = libConfig.carouselImageConfig;\n    this.manageSlideConfig();\n  }\n\n  ngOnChanges(changes) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    } // this.configService.setConfig(this.id, this.config);\n\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    const configChange = changes.config; // handle changes of dotsConfig.visible\n\n    if (configChange && !configChange.firstChange && (((_a = configChange.previousValue.carouselDotsConfig) === null || _a === void 0 ? void 0 : _a.visible) !== ((_b = configChange.currentValue.carouselDotsConfig) === null || _b === void 0 ? void 0 : _b.visible) || !configChange.previousValue.carouselDotsConfig && !configChange.currentValue.carouselDotsConfig)) {\n      this.configService.setConfig(this.id, {\n        carouselDotsConfig: (_c = configChange.currentValue) === null || _c === void 0 ? void 0 : _c.carouselDotsConfig\n      });\n      this.carouselDotsConfig = (_d = configChange.currentValue) === null || _d === void 0 ? void 0 : _d.carouselDotsConfig;\n      this.ref.markForCheck();\n    } // handle changes of carouselConfig.showArrows\n\n\n    if (configChange && !configChange.firstChange && (((_e = configChange.previousValue.carouselConfig) === null || _e === void 0 ? void 0 : _e.showArrows) !== ((_f = configChange.currentValue.carouselConfig) === null || _f === void 0 ? void 0 : _f.showArrows) || !configChange.previousValue.carouselConfig && !configChange.currentValue.carouselConfig)) {\n      this.configService.setConfig(this.id, {\n        carouselConfig: (_g = configChange.currentValue) === null || _g === void 0 ? void 0 : _g.carouselConfig\n      });\n      this.carouselConfig = (_h = configChange.currentValue) === null || _h === void 0 ? void 0 : _h.carouselConfig;\n      this.ref.markForCheck();\n    } // handle changes of playConfig starting/stopping the carousel accordingly\n\n\n    if (configChange && !configChange.firstChange && (((_j = configChange.previousValue.carouselPlayConfig) === null || _j === void 0 ? void 0 : _j.autoPlay) !== ((_k = configChange.currentValue.carouselPlayConfig) === null || _k === void 0 ? void 0 : _k.autoPlay) || !configChange.previousValue.carouselPlayConfig && !configChange.currentValue.carouselPlayConfig)) {\n      this.configService.setConfig(this.id, {\n        carouselPlayConfig: (_l = configChange.currentValue) === null || _l === void 0 ? void 0 : _l.carouselPlayConfig\n      }); // this.configPlay = playConfigChange.currentValue;\n      // if autoplay is enabled, and this is not the\n      // first change (to prevent multiple starts at the beginning)\n\n      if (((_m = configChange.currentValue.carouselPlayConfig) === null || _m === void 0 ? void 0 : _m.autoPlay) && !configChange.firstChange) {\n        this.start$.next();\n      } else {\n        this.stopCarousel();\n      }\n\n      this.ref.markForCheck();\n    }\n  }\n\n  ngAfterContentInit() {\n    // interval doesn't play well with SSR and protractor,\n    // so we should run it in the browser and outside Angular\n    if (isPlatformBrowser(this.platformId)) {\n      if (this.id === null || this.id === undefined) {\n        throw new Error('Internal library error - id must be defined');\n      }\n\n      const libConfig = this.configService.getConfig(this.id);\n\n      if (!libConfig || !libConfig.carouselPlayConfig) {\n        throw new Error('Internal library error - libConfig and carouselPlayConfig must be defined');\n      }\n\n      this.ngZone.runOutsideAngular(() => {\n        this.start$.pipe(map(() => {\n          var _a;\n\n          return (_a = libConfig === null || libConfig === void 0 ? void 0 : libConfig.carouselPlayConfig) === null || _a === void 0 ? void 0 : _a.interval;\n        }), // tslint:disable-next-line:no-any\n        filter(interval => interval > 0), switchMap(interval => timer(interval).pipe(takeUntil(this.stop$)))).subscribe(() => this.ngZone.run(() => {\n          var _a;\n\n          if ((_a = libConfig.carouselPlayConfig) === null || _a === void 0 ? void 0 : _a.autoPlay) {\n            this.nextImage();\n          }\n\n          this.ref.markForCheck();\n        }));\n        this.start$.next();\n      });\n    }\n  }\n  /**\n   * Method called when a dot is clicked and used to update the current image.\n   * @param number index of the clicked dot\n   */\n\n\n  onClickDot(index) {\n    this.changeCurrentImage(this.images[index], Action.NORMAL);\n  }\n  /**\n   * Method called by events from both keyboard and mouse on a navigation arrow.\n   * @param string direction of the navigation that can be either 'next' or 'prev'\n   * @param KeyboardEvent | MouseEvent event payload\n   * @param Action action that triggered the event or `Action.NORMAL` if not provided\n   */\n\n\n  onNavigationEvent(direction, event, action = Action.NORMAL) {\n    const result = super.handleNavigationEvent(direction, event);\n\n    if (result === NEXT) {\n      this.nextImage(action);\n    } else if (result === PREV) {\n      this.prevImage(action);\n    }\n  }\n  /**\n   * Method triggered when you click on the current image.\n   * Also, if modalGalleryEnable is true, you can open the modal-gallery.\n   */\n\n\n  onClickCurrentImage() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.carouselConfig || !this.currentImage) {\n      throw new Error('Internal library error - libConfig, carouselConfig and currentImage must be defined');\n    }\n\n    if (!libConfig.carouselConfig.modalGalleryEnable) {\n      return;\n    }\n\n    const index = getIndex(this.currentImage, this.images);\n    this.clickImage.emit(index);\n  }\n  /**\n   * Method to get the image description based on input params.\n   * If you provide a full description this will be the visible description, otherwise,\n   * it will be built using the `Description` object, concatenating its fields.\n   * @param Image image to get its description. If not provided it will be the current image\n   * @returns String description of the image (or the current image if not provided)\n   * @throws an Error if description isn't available\n   */\n\n\n  getDescriptionToDisplay(image = this.currentImage) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    const configCurrentImageCarousel = libConfig.carouselImageConfig;\n\n    if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    }\n\n    if (!image) {\n      throw new Error('Internal library error - image must be defined');\n    }\n\n    const imageWithoutDescription = !image || !image.modal || !image.modal.description || image.modal.description === '';\n\n    switch (configCurrentImageCarousel.description.strategy) {\n      case DescriptionStrategy.HIDE_IF_EMPTY:\n        return imageWithoutDescription ? '' : image.modal.description + '';\n\n      case DescriptionStrategy.ALWAYS_HIDDEN:\n        return '';\n\n      default:\n        // ----------- DescriptionStrategy.ALWAYS_VISIBLE -----------------\n        return this.buildTextDescription(image, imageWithoutDescription);\n    }\n  }\n  /**\n   * Method used by Hammerjs to support touch gestures (you can also invert the swipe direction with configCurrentImage.invertSwipe).\n   * @param action String that represent the direction of the swipe action. 'swiperight' by default.\n   */\n\n\n  swipe(action = this.SWIPE_ACTION.RIGHT) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.carouselImageConfig) {\n      throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n    }\n\n    const configCurrentImageCarousel = libConfig.carouselImageConfig;\n\n    switch (action) {\n      case this.SWIPE_ACTION.RIGHT:\n        if (configCurrentImageCarousel.invertSwipe) {\n          this.prevImage(Action.SWIPE);\n        } else {\n          this.nextImage(Action.SWIPE);\n        }\n\n        break;\n\n      case this.SWIPE_ACTION.LEFT:\n        if (configCurrentImageCarousel.invertSwipe) {\n          this.nextImage(Action.SWIPE);\n        } else {\n          this.prevImage(Action.SWIPE);\n        }\n\n        break;\n      // case this.SWIPE_ACTION.UP:\n      //   break;\n      // case this.SWIPE_ACTION.DOWN:\n      //   break;\n    }\n  }\n  /**\n   * Method to go back to the previous image.\n   * @param action Enum of type `Action` that represents the source\n   *  action that moved back to the previous image. `Action.NORMAL` by default.\n   */\n\n\n  prevImage(action = Action.NORMAL) {\n    // check if prevImage should be blocked\n    if (this.isPreventSliding(0)) {\n      return;\n    }\n\n    this.changeCurrentImage(this.getPrevImage(), action);\n    this.manageSlideConfig();\n    this.start$.next();\n  }\n  /**\n   * Method to go back to the previous image.\n   * @param action Enum of type `Action` that represents the source\n   *  action that moved to the next image. `Action.NORMAL` by default.\n   */\n\n\n  nextImage(action = Action.NORMAL) {\n    // check if nextImage should be blocked\n    if (this.isPreventSliding(this.images.length - 1)) {\n      return;\n    }\n\n    this.changeCurrentImage(this.getNextImage(), action);\n    this.manageSlideConfig();\n    this.start$.next();\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item\n   */\n\n\n  trackById(index, item) {\n    return item.id;\n  }\n  /**\n   * Method called when an image preview is clicked and used to update the current image.\n   * @param event an ImageEvent object with the relative action and the index of the clicked preview.\n   */\n\n\n  onClickPreview(event) {\n    const imageFound = this.images[event.result];\n\n    if (!!imageFound) {\n      this.manageSlideConfig();\n      this.changeCurrentImage(imageFound, event.action);\n    }\n  }\n  /**\n   * Method to play carousel.\n   */\n\n\n  playCarousel() {\n    this.start$.next();\n  }\n  /**\n   * Stops the carousel from cycling through items.\n   */\n\n\n  stopCarousel() {\n    this.stop$.next();\n  } // TODO remove this because duplicated\n\n  /**\n   * Method to get `alt attribute`.\n   * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n   * @param Image image to get its alt description. If not provided it will be the current image\n   * @returns String alt description of the image (or the current image if not provided)\n   */\n\n\n  getAltDescriptionByImage(image = this.currentImage) {\n    if (!image) {\n      return '';\n    }\n\n    return image.modal && image.modal.description ? image.modal.description : `Image ${getIndex(image, this.images) + 1}`;\n  } // TODO remove this because duplicated\n\n  /**\n   * Method to get the title attributes based on descriptions.\n   * This is useful to prevent accessibility issues, because if DescriptionStrategy is ALWAYS_HIDDEN,\n   * it prevents an empty string as title.\n   * @param Image image to get its description. If not provided it will be the current image\n   * @returns String title of the image based on descriptions\n   * @throws an Error if description isn't available\n   */\n\n\n  getTitleToDisplay(image = this.currentImage) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.carouselImageConfig) {\n      throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n    }\n\n    const configCurrentImageCarousel = libConfig.carouselImageConfig;\n\n    if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    }\n\n    const imageWithoutDescription = !image || !image.modal || !image.modal.description || image.modal.description === '';\n    const description = this.buildTextDescription(image, imageWithoutDescription);\n    return description;\n  }\n  /**\n   * Method to reset carousel (force image with index 0 to be the current image and re-init also previews)\n   */\n  // temporary removed because never tested\n  // reset() {\n  //   if (this.configPlay && this.configPlay.autoPlay) {\n  //     this.stopCarousel();\n  //   }\n  //   this.currentImage = this.images[0];\n  //   this.handleBoundaries(0);\n  //   if (this.configPlay && this.configPlay.autoPlay) {\n  //     this.playCarousel();\n  //   }\n  //   this.ref.markForCheck();\n  // }\n\n  /**\n   * Method to cleanup resources. In fact, this will stop the carousel.\n   * This is an Angular's lifecycle hook that is called when this component is destroyed.\n   */\n\n\n  ngOnDestroy() {\n    this.stopCarousel();\n  }\n  /**\n   * Method to change the current image, receiving the new image as input the relative action.\n   * @param image an Image object that represents the new image to set as current.\n   * @param action Enum of type `Action` that represents the source action that triggered the change.\n   */\n\n\n  changeCurrentImage(image, action) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    this.currentImage = image;\n    const index = getIndex(image, this.images); // emit first/last event based on newIndex value\n\n    this.emitBoundaryEvent(action, index); // emit current visible image index\n\n    this.changeImage.emit(new ImageEvent(this.id, action, index + 1));\n  }\n  /**\n   * Private method to get the next index.\n   * This is necessary because at the end, when you call next again, you'll go to the first image.\n   * That happens because all modal images are shown like in a circle.\n   */\n\n\n  getNextImage() {\n    if (!this.currentImage) {\n      throw new Error('Internal library error - currentImage must be defined');\n    }\n\n    const currentIndex = getIndex(this.currentImage, this.images);\n    let newIndex = 0;\n\n    if (currentIndex >= 0 && currentIndex < this.images.length - 1) {\n      newIndex = currentIndex + 1;\n    } else {\n      newIndex = 0; // start from the first index\n    }\n\n    return this.images[newIndex];\n  }\n  /**\n   * Private method to get the previous index.\n   * This is necessary because at index 0, when you call prev again, you'll go to the last image.\n   * That happens because all modal images are shown like in a circle.\n   */\n\n\n  getPrevImage() {\n    if (!this.currentImage) {\n      throw new Error('Internal library error - currentImage must be defined');\n    }\n\n    const currentIndex = getIndex(this.currentImage, this.images);\n    let newIndex = 0;\n\n    if (currentIndex > 0 && currentIndex <= this.images.length - 1) {\n      newIndex = currentIndex - 1;\n    } else {\n      newIndex = this.images.length - 1; // start from the last index\n    }\n\n    return this.images[newIndex];\n  }\n  /**\n   * Private method to build a text description.\n   * This is used also to create titles.\n   * @param Image image to get its description. If not provided it will be the current image.\n   * @param boolean imageWithoutDescription is a boolean that it's true if the image hasn't a 'modal' description.\n   * @returns String description built concatenating image fields with a specific logic.\n   */\n\n\n  buildTextDescription(image, imageWithoutDescription) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig || !libConfig.carouselImageConfig) {\n      throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n    }\n\n    const configCurrentImageCarousel = libConfig.carouselImageConfig;\n\n    if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n      throw new Error('Description input must be a valid object implementing the Description interface');\n    }\n\n    if (!image) {\n      throw new Error('Internal library error - image must be defined');\n    } // If customFullDescription use it, otherwise proceed to build a description\n\n\n    if (configCurrentImageCarousel.description.customFullDescription && configCurrentImageCarousel.description.customFullDescription !== '') {\n      return configCurrentImageCarousel.description.customFullDescription;\n    }\n\n    const currentIndex = getIndex(image, this.images); // If the current image hasn't a description,\n    // prevent to write the ' - ' (or this.description.beforeTextDescription)\n\n    const prevDescription = configCurrentImageCarousel.description.imageText ? configCurrentImageCarousel.description.imageText : '';\n    const midSeparator = configCurrentImageCarousel.description.numberSeparator ? configCurrentImageCarousel.description.numberSeparator : '';\n    const middleDescription = currentIndex + 1 + midSeparator + this.images.length;\n\n    if (imageWithoutDescription) {\n      return prevDescription + middleDescription;\n    }\n\n    const currImgDescription = image.modal && image.modal.description ? image.modal.description : '';\n    const endDescription = configCurrentImageCarousel.description.beforeTextDescription + currImgDescription;\n    return prevDescription + middleDescription + endDescription;\n  }\n  /**\n   * Private method to update both `isFirstImage` and `isLastImage` based on\n   * the index of the current image.\n   * @param number currentIndex is the index of the current image\n   */\n\n\n  handleBoundaries(currentIndex) {\n    if (this.images.length === 1) {\n      this.isFirstImage = true;\n      this.isLastImage = true;\n      return;\n    }\n\n    switch (currentIndex) {\n      case 0:\n        // execute this only if infinite sliding is disabled\n        this.isFirstImage = true;\n        this.isLastImage = false;\n        break;\n\n      case this.images.length - 1:\n        // execute this only if infinite sliding is disabled\n        this.isFirstImage = false;\n        this.isLastImage = true;\n        break;\n\n      default:\n        this.isFirstImage = false;\n        this.isLastImage = false;\n        break;\n    }\n  }\n  /**\n   * Private method to manage boundary arrows and sliding.\n   * This is based on the slideConfig input to enable/disable 'infinite sliding'.\n   * @param number index of the visible image\n   */\n\n\n  manageSlideConfig() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!this.currentImage) {\n      throw new Error('Internal library error - currentImage must be defined');\n    }\n\n    let index;\n\n    try {\n      index = getIndex(this.currentImage, this.images);\n    } catch (err) {\n      console.error('Cannot get the current image index in current-image');\n      throw err;\n    }\n\n    if (libConfig.carouselSlideInfinite === true) {\n      // enable infinite sliding\n      this.isFirstImage = false;\n      this.isLastImage = false;\n    } else {\n      this.handleBoundaries(index);\n    }\n  }\n  /**\n   * Private method to emit events when either the last or the first image are visible.\n   * @param action Enum of type Action that represents the source of the event that changed the\n   *  current image to the first one or the last one.\n   * @param indexToCheck is the index number of the image (the first or the last one).\n   */\n\n\n  emitBoundaryEvent(action, indexToCheck) {\n    if (this.id === null || this.id === undefined) {\n      return;\n    } // to emit first/last event\n\n\n    switch (indexToCheck) {\n      case 0:\n        this.firstImage.emit(new ImageEvent(this.id, action, true));\n        break;\n\n      case this.images.length - 1:\n        this.lastImage.emit(new ImageEvent(this.id, action, true));\n        break;\n    }\n  }\n  /**\n   * Private method to check if next/prev actions should be blocked.\n   * It checks if carouselSlideInfinite === false and if the image index is equals to the input parameter.\n   * If yes, it returns true to say that sliding should be blocked, otherwise not.\n   * @param number boundaryIndex that could be either the beginning index (0) or the last index\n   *  of images (this.images.length - 1).\n   * @returns boolean true if carouselSlideInfinite === false and the current index is\n   *  either the first or the last one.\n   */\n\n\n  isPreventSliding(boundaryIndex) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    if (!this.currentImage) {\n      throw new Error('Internal library error - currentImage must be defined');\n    }\n\n    return !libConfig.carouselSlideInfinite && getIndex(this.currentImage, this.images) === boundaryIndex;\n  }\n\n}\n\nCarouselComponent.ɵfac = function CarouselComponent_Factory(t) {\n  return new (t || CarouselComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(ModalGalleryService), i0.ɵɵdirectiveInject(ConfigService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nCarouselComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CarouselComponent,\n  selectors: [[\"ks-carousel\"]],\n  hostVars: 1,\n  hostBindings: function CarouselComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mouseenter\", function CarouselComponent_mouseenter_HostBindingHandler() {\n        return ctx.onMouseEnter();\n      })(\"mouseleave\", function CarouselComponent_mouseleave_HostBindingHandler() {\n        return ctx.onMouseLeave();\n      })(\"keydown.arrowLeft\", function CarouselComponent_keydown_arrowLeft_HostBindingHandler() {\n        return ctx.onKeyDownLeft();\n      })(\"keydown.arrowRight\", function CarouselComponent_keydown_arrowRight_HostBindingHandler() {\n        return ctx.onKeyDownLRight();\n      });\n    }\n\n    if (rf & 2) {\n      i0.ɵɵattribute(\"aria-label\", ctx.ariaLabel);\n    }\n  },\n  inputs: {\n    id: \"id\",\n    images: \"images\",\n    config: \"config\"\n  },\n  outputs: {\n    clickImage: \"clickImage\",\n    changeImage: \"changeImage\",\n    firstImage: \"firstImage\",\n    lastImage: \"lastImage\"\n  },\n  features: [i0.ɵɵProvidersFeature([ConfigService]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c7,\n  decls: 5,\n  vars: 9,\n  consts: [[\"id\", \"carousel-container\", \"ksMaxSize\", \"\", 3, \"title\", \"maxSizeConfig\"], [\"content\", \"\"], [\"class\", \"current-figure\", \"ksSize\", \"\", 3, \"sizeConfig\", 4, \"ngIf\"], [3, \"id\", \"images\", \"currentImage\", \"clickPreview\"], [\"ksSize\", \"\", 1, \"current-figure\", 3, \"sizeConfig\"], [\"class\", \"nav-left\", \"role\", \"button\", 3, \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [4, \"ngTemplateOutlet\"], [\"id\", \"current-image\", \"ksMaxSize\", \"\", \"ksFallbackImage\", \"\", \"role\", \"img\", 3, \"maxSizeConfig\", \"src\", \"fallbackImg\", \"title\", \"alt\", \"tabIndex\", \"click\", \"swipeleft\", \"swiperight\"], [\"class\", \"description\", \"ksDescription\", \"\", 3, \"description\", \"innerHTML\", 4, \"ngIf\"], [\"class\", \"nav-right\", \"role\", \"button\", 3, \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [\"id\", \"dots\"], [3, \"id\", \"currentImage\", \"images\", \"dotsConfig\", \"clickDot\"], [\"role\", \"button\", 1, \"nav-left\", 3, \"tabIndex\", \"click\", \"keyup\"], [\"aria-hidden\", \"true\", 3, \"title\"], [\"ksDescription\", \"\", 1, \"description\", 3, \"description\", \"innerHTML\"], [\"role\", \"button\", 1, \"nav-right\", 3, \"tabIndex\", \"click\", \"keyup\"]],\n  template: function CarouselComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"main\", 0);\n      i0.ɵɵtemplate(1, CarouselComponent_ng_template_1_Template, 1, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(3, CarouselComponent_figure_3_Template, 8, 23, \"figure\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ks-carousel-previews\", 3);\n      i0.ɵɵlistener(\"clickPreview\", function CarouselComponent_Template_ks_carousel_previews_clickPreview_4_listener($event) {\n        return ctx.onClickPreview($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.carouselContainerTitle)(\"maxSizeConfig\", i0.ɵɵpureFunction1(7, _c6, ctx.carouselConfig == null ? null : ctx.carouselConfig.maxWidth));\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.carouselContainerAriaLabel);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentImage && ctx.currentImage.modal);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"id\", ctx.id)(\"images\", ctx.images)(\"currentImage\", ctx.currentImage);\n    }\n  },\n  directives: [MaxSizeDirective, i2.NgIf, CarouselPreviewsComponent, SizeDirective, i2.NgTemplateOutlet, FallbackImageDirective, DotsComponent, DescriptionDirective],\n  styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#carousel-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%]{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%], #carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%], #carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{animation:animatezoom 1s;cursor:pointer;transition:all .5s;top:50%;position:absolute}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]:hover, #carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]:hover, #carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]:hover{transform:scale(1.1)}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-left[_ngcontent-%COMP%]{left:5px}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > .nav-right[_ngcontent-%COMP%]{right:5px}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > #current-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{padding:10px;position:absolute;bottom:0;left:0;right:0}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:bold;text-align:center}#carousel-container[_ngcontent-%COMP%] > .current-figure[_ngcontent-%COMP%] > #dots[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%}\", _c8],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CarouselComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-carousel',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [ConfigService],\n      template: \"<main id=\\\"carousel-container\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.carouselContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.carouselContainerTitle\\\"\\n      ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                               maxHeight: ''}\\\">\\n\\n\\n  <!-- Workaround to support 2 ng-content in the same template in 2 ngIf (https://github.com/angular/angular/issues/22972) -->\\n  <ng-template #content><ng-content></ng-content></ng-template>\\n\\n  <figure class=\\\"current-figure\\\" *ngIf=\\\"currentImage && currentImage.modal\\\"\\n          ksSize [sizeConfig]=\\\"{width: carouselConfig?.maxWidth,\\n                                height: ''}\\\">\\n\\n    <a class=\\\"nav-left\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isFirstImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngTemplateOutlet=\\\"content\\\"></ng-container>\\n\\n    <img id=\\\"current-image\\\"\\n         [style.object-fit]=\\\"carouselConfig?.objectFit\\\"\\n         ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                                  maxHeight: carouselConfig?.maxHeight}\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (click)=\\\"onClickCurrentImage()\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"description\\\"\\n                ksDescription [description]=\\\"carouselImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\"></figcaption>\\n\\n    <a class=\\\"nav-right\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isLastImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselNextImageTitle\\\"></div>\\n    </a>\\n\\n    <div id=\\\"dots\\\">\\n      <ks-dots [id]=\\\"id\\\"\\n               [currentImage]=\\\"currentImage\\\"\\n               [images]=\\\"images\\\"\\n               [dotsConfig]=\\\"carouselDotsConfig\\\"\\n               (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n    </div>\\n\\n  </figure>\\n\\n</main>\\n\\n<ks-carousel-previews [id]=\\\"id\\\"\\n                      [images]=\\\"images\\\"\\n                      [currentImage]=\\\"currentImage\\\"\\n                      (clickPreview)=\\\"onClickPreview($event)\\\"></ks-carousel-previews>\\n\",\n      styles: [\":host{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#carousel-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}#carousel-container>.current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}#carousel-container>.current-figure .nav,#carousel-container>.current-figure>.nav-right,#carousel-container>.current-figure>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s;top:50%;position:absolute}#carousel-container>.current-figure .nav:hover,#carousel-container>.current-figure>.nav-right:hover,#carousel-container>.current-figure>.nav-left:hover{transform:scale(1.1)}#carousel-container>.current-figure>.nav-left{left:5px}#carousel-container>.current-figure>.nav-right{right:5px}#carousel-container>.current-figure>#current-image{width:100%;height:auto;display:block}#carousel-container>.current-figure>figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}#carousel-container>.current-figure>figcaption .description{font-weight:bold;text-align:center}#carousel-container>.current-figure>#dots{position:absolute;bottom:20px;width:100%}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }, {\n      type: i0.NgZone\n    }, {\n      type: ModalGalleryService\n    }, {\n      type: ConfigService\n    }, {\n      type: i0.ChangeDetectorRef\n    }];\n  }, {\n    ariaLabel: [{\n      type: HostBinding,\n      args: ['attr.aria-label']\n    }],\n    id: [{\n      type: Input\n    }],\n    images: [{\n      type: Input\n    }],\n    config: [{\n      type: Input\n    }],\n    clickImage: [{\n      type: Output\n    }],\n    changeImage: [{\n      type: Output\n    }],\n    firstImage: [{\n      type: Output\n    }],\n    lastImage: [{\n      type: Output\n    }],\n    onMouseEnter: [{\n      type: HostListener,\n      args: ['mouseenter']\n    }],\n    onMouseLeave: [{\n      type: HostListener,\n      args: ['mouseleave']\n    }],\n    onKeyDownLeft: [{\n      type: HostListener,\n      args: ['keydown.arrowLeft']\n    }],\n    onKeyDownLRight: [{\n      type: HostListener,\n      args: ['keydown.arrowRight']\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to change the flex-wrap css property of an element.\n */\n\n\nclass WrapDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change both width and flex-wrap css properties.\n   */\n\n\n  applyStyle() {\n    // TODO is this right???? If wrap is false I cannot apply width and flex-wrap\n    if (!this.wrap) {\n      return;\n    }\n\n    this.renderer.setStyle(this.el.nativeElement, 'width', this.width);\n    this.renderer.setStyle(this.el.nativeElement, 'flex-wrap', this.wrap ? 'wrap' : 'nowrap');\n  }\n\n}\n\nWrapDirective.ɵfac = function WrapDirective_Factory(t) {\n  return new (t || WrapDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nWrapDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: WrapDirective,\n  selectors: [[\"\", \"ksWrap\", \"\"]],\n  inputs: {\n    wrap: \"wrap\",\n    width: \"width\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(WrapDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksWrap]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    wrap: [{\n      type: Input\n    }],\n    width: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to change the flex-direction of an element, based on two inputs (`direction` and `justify`).\n */\n\n\nclass DirectionDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change both direction and justify of an element.\n   */\n\n\n  applyStyle() {\n    if (!this.direction || !this.justify) {\n      return;\n    }\n\n    this.renderer.setStyle(this.el.nativeElement, 'flex-direction', this.direction);\n    this.renderer.setStyle(this.el.nativeElement, 'justify-content', this.justify);\n  }\n\n}\n\nDirectionDirective.ɵfac = function DirectionDirective_Factory(t) {\n  return new (t || DirectionDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nDirectionDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: DirectionDirective,\n  selectors: [[\"\", \"ksDirection\", \"\"]],\n  inputs: {\n    direction: \"direction\",\n    justify: \"justify\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DirectionDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksDirection]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    direction: [{\n      type: Input\n    }],\n    justify: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to add an image to an `<a>` tag with some additional custom properties.\n */\n\n\nclass ATagBgImageDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to add an image as background of an `<a>` tag.\n   */\n\n\n  applyStyle() {\n    if (!this.image || !this.image.plain && !this.image.modal) {\n      return;\n    }\n\n    const imgPath = this.image.plain && this.image.plain.img ? this.image.plain.img : this.image.modal.img;\n    let bg = `url(\"${imgPath}\") ${this.style}`;\n    const fallbackImgPath = this.image.plain && this.image.plain.fallbackImg ? this.image.plain.fallbackImg : this.image.modal.fallbackImg;\n\n    if (!!fallbackImgPath) {\n      bg += `, url(\"${fallbackImgPath}\") ${this.style}`;\n    }\n\n    this.renderer.setStyle(this.el.nativeElement, 'background', bg);\n  }\n\n}\n\nATagBgImageDirective.ɵfac = function ATagBgImageDirective_Factory(t) {\n  return new (t || ATagBgImageDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nATagBgImageDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: ATagBgImageDirective,\n  selectors: [[\"\", \"ksATagBgImage\", \"\"]],\n  inputs: {\n    image: \"image\",\n    style: \"style\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ATagBgImageDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksATagBgImage]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    image: [{\n      type: Input\n    }],\n    style: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Component with the gallery of thumbs.\n * In receives an array of Images, a boolean to show/hide\n * the gallery (feature used by imagePointer) and a config\n * object to customize the behaviour of this component.\n * Also, it emits click events as outputs.\n */\n\n\nclass PlainGalleryComponent extends AccessibleComponent {\n  constructor(configService) {\n    super();\n    this.configService = configService;\n    /**\n     * Array of `Image` that represent the model of this library with all images, thumbs and so on.\n     */\n\n    this.images = [];\n    /**\n     * Output to emit an event when an image is clicked.\n     */\n\n    this.clickImage = new EventEmitter();\n    /**\n     * Bi-dimensional array of `Image` object to store images to display as plain gallery.\n     * [] by default.\n     */\n\n    this.imageGrid = [];\n    /**\n     * Boolean passed as input to `ks-wrap` directive to configure flex-wrap css property.\n     * However it's not enough, because you need to limit the width using `widthStyle` public variable.\n     * For more info check https://developer.mozilla.org/it/docs/Web/CSS/flex-wrap\n     */\n\n    this.wrapStyle = false;\n    /**\n     * String passed as input to `ks-wrap` directive to set width to be able to force overflow.\n     * In this way, `wrapStyle` (flex-wrap css property) will be used as requested.\n     */\n\n    this.widthStyle = '';\n  }\n  /**\n   * Method ´ngOnInit´ to init both `configPlainGallery` calling `initPlainGalleryConfig()`\n   * and `imageGrid invoking `initImageGrid()`.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    this.configService.setConfig(this.id, this.config);\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    this.accessibilityConfig = libConfig.accessibilityConfig;\n    this.plainGalleryConfig = libConfig.plainGalleryConfig;\n    this.initImageGrid();\n  }\n  /**\n   * Method ´ngOnChanges´ to update both `imageGrid` and`plainGalleryConfig`.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges(changes) {\n    if (this.id === null || this.id === undefined) {\n      throw new Error('Internal library error - id must be defined');\n    }\n\n    const libConfig = this.configService.getConfig(this.id);\n\n    if (!libConfig) {\n      throw new Error('Internal library error - libConfig must be defined');\n    }\n\n    const imagesChange = changes.images;\n    const configChange = changes.plainGalleryConfig; // I'm using !change.firstChange because the first time will be called both onInit and onChange and I don't\n    // want to execute initialization two times.\n\n    if (configChange && !configChange.firstChange && (configChange.previousValue !== configChange.currentValue || !configChange.previousValue && !configChange.currentValue)) {\n      this.plainGalleryConfig = libConfig.plainGalleryConfig; // this.configPlainGallery = this.initPlainGalleryConfig();\n    }\n\n    if (imagesChange && !imagesChange.firstChange && imagesChange.previousValue !== imagesChange.currentValue) {\n      this.initImageGrid();\n    }\n  }\n  /**\n   * Method called when you click on an image of the plain (or inline) gallery.\n   * This will emit the show event with the image as payload.\n   * @param Image img is the Image to show\n   */\n\n\n  showModalGalleryByImage(img) {\n    const index = this.images.findIndex(val => val && img && val.id === img.id);\n    this.showModalGallery(index);\n  }\n  /**\n   * Method called when you navigate between images.\n   * This will emit the show event with the image as payload.\n   * @param KeyboardEvent event that triggered the navigation\n   * @param Image img is the Image to show\n   */\n\n\n  onNavigationEvent(event, img) {\n    const result = super.handleImageEvent(event);\n\n    if (result === NEXT) {\n      this.showModalGalleryByImage(img);\n    }\n  }\n  /**\n   * Method to get `alt attribute`.\n   * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n   * @param Image image to get its alt description.\n   * @returns string alt description of the image\n   */\n\n\n  getAltPlainDescriptionByImage(image) {\n    if (!image) {\n      return '';\n    }\n\n    return image.plain && image.plain.description ? image.plain.description : `Image ${getIndex(image, this.images) + 1}`;\n  }\n  /**\n   * Method to get the title for an image.\n   * @param Image image to get its title\n   * @returns string the title of the input image\n   */\n\n\n  getTitleDisplay(image) {\n    let description = '';\n\n    if (image.plain && image.plain.description) {\n      description = image.plain.description;\n    } else if (image.modal && image.modal.description) {\n      description = image.modal.description;\n    }\n\n    const currentIndex = getIndex(image, this.images);\n    const prevDescription = 'Image ' + (currentIndex + 1) + '/' + this.images.length;\n    let currImgDescription = description ? description : '';\n\n    if (currImgDescription !== '') {\n      currImgDescription = ' - ' + currImgDescription;\n    }\n\n    return prevDescription + currImgDescription;\n  }\n  /**\n   * Method used in the template to track ids in ngFor.\n   * @param number index of the array\n   * @param Image item of the array\n   * @returns number the id of the item\n   */\n\n\n  trackById(index, item) {\n    return item.id;\n  }\n  /**\n   * Method called when you click on an image of the plain (or inline) gallery.\n   * This will emit the show event with the index number as payload.\n   * @param number index of the clicked image\n   */\n\n\n  showModalGallery(index) {\n    this.clickImage.emit(index);\n  }\n  /**\n   * Private method to init both `imageGrid` and other style variables,\n   * based on the layout type.\n   */\n\n\n  initImageGrid() {\n    if (!this.plainGalleryConfig) {\n      throw new Error('Internal library error - plainGalleryConfig must be defined');\n    } // reset the array to prevent issues in case of GridLayout\n\n\n    this.imageGrid = [];\n\n    if (this.plainGalleryConfig.layout instanceof LineLayout) {\n      const layout = this.plainGalleryConfig.layout;\n      const row = this.images.filter((val, i) => i < layout.breakConfig.length || layout.breakConfig.length === -1);\n      this.imageGrid = [row];\n      this.size = this.plainGalleryConfig.layout.size;\n\n      switch (this.plainGalleryConfig.strategy) {\n        case PlainGalleryStrategy.ROW:\n          this.directionStyle = 'row';\n          break;\n\n        case PlainGalleryStrategy.COLUMN:\n          this.directionStyle = 'column';\n          this.wrapStyle = layout.breakConfig.wrap;\n          break;\n      }\n\n      this.justifyStyle = layout.justify;\n    }\n\n    if (this.plainGalleryConfig.layout instanceof GridLayout) {\n      const layout = this.plainGalleryConfig.layout;\n      const count = Math.ceil(this.images.length / layout.breakConfig.length);\n      let start = 0;\n      let end = layout.breakConfig.length - 1;\n\n      for (let j = 0; j < count; j++) {\n        const row = this.images.filter((val, i) => i >= start && i <= end);\n        this.imageGrid.push(row);\n        start = end + 1;\n        end = start + layout.breakConfig.length - 1;\n      }\n\n      this.size = this.plainGalleryConfig.layout.size;\n      const pixels = +layout.size.width.replace('px', '');\n      this.widthStyle = pixels * layout.breakConfig.length + pixels / 2 + 'px';\n      this.wrapStyle = layout.breakConfig.wrap;\n      this.directionStyle = 'row';\n    }\n  }\n\n}\n\nPlainGalleryComponent.ɵfac = function PlainGalleryComponent_Factory(t) {\n  return new (t || PlainGalleryComponent)(i0.ɵɵdirectiveInject(ConfigService));\n};\n\nPlainGalleryComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: PlainGalleryComponent,\n  selectors: [[\"ks-plain-gallery\"]],\n  inputs: {\n    id: \"id\",\n    images: \"images\",\n    config: \"config\"\n  },\n  outputs: {\n    clickImage: \"clickImage\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 7,\n  consts: [[\"ksWrap\", \"\", \"ksDirection\", \"\", 1, \"plain-container\", 3, \"wrap\", \"width\", \"direction\", \"justify\", \"title\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\", \"ngIfElse\"], [\"aTags\", \"\"], [\"ksFallbackImage\", \"\", \"class\", \"image\", \"ksSize\", \"\", \"role\", \"img\", 3, \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [\"ksFallbackImage\", \"\", \"ksSize\", \"\", \"role\", \"img\", 1, \"image\", 3, \"src\", \"fallbackImg\", \"sizeConfig\", \"title\", \"alt\", \"tabIndex\", \"click\", \"keyup\"], [\"class\", \"a-tag-image\", \"ksATagBgImage\", \"\", \"ksSize\", \"\", 3, \"image\", \"style\", \"sizeConfig\", \"title\", \"tabIndex\", \"click\", \"keyup\", 4, \"ngIf\"], [\"ksATagBgImage\", \"\", \"ksSize\", \"\", 1, \"a-tag-image\", 3, \"image\", \"sizeConfig\", \"title\", \"tabIndex\", \"click\", \"keyup\"]],\n  template: function PlainGalleryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, PlainGalleryComponent_ng_container_1_Template, 2, 1, \"ng-container\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"wrap\", ctx.wrapStyle)(\"width\", ctx.widthStyle)(\"direction\", ctx.directionStyle)(\"justify\", ctx.justifyStyle)(\"title\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.plainGalleryContentTitle);\n      i0.ɵɵattribute(\"aria-label\", ctx.accessibilityConfig == null ? null : ctx.accessibilityConfig.plainGalleryContentAriaLabel);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.imageGrid);\n    }\n  },\n  directives: [WrapDirective, DirectionDirective, i2.NgForOf, i2.NgIf, FallbackImageDirective, SizeDirective, ATagBgImageDirective],\n  styles: [\".plain-container[_ngcontent-%COMP%]{align-items:center;display:flex}.plain-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{cursor:pointer;height:auto;margin:2px;width:50px}.plain-container[_ngcontent-%COMP%]   .a-tag-image[_ngcontent-%COMP%]{cursor:pointer;margin:2px}\"],\n  changeDetection: 0\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PlainGalleryComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ks-plain-gallery',\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<div class=\\\"plain-container\\\"\\n     ksWrap [wrap]=\\\"wrapStyle\\\" [width]=\\\"widthStyle\\\"\\n     ksDirection [direction]=\\\"directionStyle\\\" [justify]=\\\"justifyStyle\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.plainGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.plainGalleryContentTitle\\\">\\n\\n  <ng-container *ngFor=\\\"let imgRow of imageGrid; let i = index\\\">\\n    <ng-container *ngFor=\\\"let imgCol of imgRow; let j = index\\\">\\n\\n      <ng-container *ngIf=\\\"!plainGalleryConfig?.advanced?.aTags; else aTags\\\">\\n        <img *ngIf=\\\"imgCol?.modal?.img\\\"\\n             [src]=\\\"imgCol.plain?.img! ? imgCol.plain?.img! : imgCol.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"imgCol.plain?.fallbackImg ? imgCol.plain?.fallbackImg : imgCol.modal.fallbackImg\\\"\\n             class=\\\"image\\\"\\n             ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n             [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n             [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n             alt=\\\"{{imgCol.plain?.alt! ? imgCol.plain?.alt! : getAltPlainDescriptionByImage(imgCol)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"/>\\n      </ng-container>\\n\\n      <!-- Add directive to set background with the image url as param to pass thumb or img-->\\n      <!-- to do something like this <a style=\\\"background: url('path to image') 50% 50%/cover\\\">.-->\\n      <ng-template #aTags>\\n        <a *ngIf=\\\"imgCol?.modal?.img\\\"\\n           class=\\\"a-tag-image\\\"\\n           ksATagBgImage [image]=\\\"imgCol\\\" [style]=\\\"plainGalleryConfig?.advanced?.additionalBackground\\\"\\n           ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n           [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n           [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n           [tabIndex]=\\\"0\\\"\\n           (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"></a>\\n      </ng-template>\\n\\n    </ng-container>\\n  </ng-container>\\n\\n</div>\\n\\n\",\n      styles: [\".plain-container{align-items:center;display:flex}.plain-container .image{cursor:pointer;height:auto;margin:2px;width:50px}.plain-container .a-tag-image{cursor:pointer;margin:2px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: ConfigService\n    }];\n  }, {\n    id: [{\n      type: Input\n    }],\n    images: [{\n      type: Input\n    }],\n    config: [{\n      type: Input\n    }],\n    clickImage: [{\n      type: Output\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (c) 2017 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Array of all components.\n */\n\n\nconst COMPONENTS = [PlainGalleryComponent, CarouselComponent, CarouselPreviewsComponent, UpperButtonsComponent, DotsComponent, PreviewsComponent, CurrentImageComponent, LoadingSpinnerComponent, AccessibleComponent, ModalGalleryComponent];\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Directive to change margins of an element.\n */\n\nclass MarginDirective {\n  constructor(renderer, el) {\n    this.renderer = renderer;\n    this.el = el;\n  }\n  /**\n   * Method ´ngOnInit´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called only one time!!!\n   */\n\n\n  ngOnInit() {\n    this.applyStyle();\n  }\n  /**\n   * Method ´ngOnChanges´ to apply the style of this directive.\n   * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n   * In particular, it's called when any data-bound property of a directive changes!!!\n   */\n\n\n  ngOnChanges() {\n    this.applyStyle();\n  }\n  /**\n   * Private method to change both width and height of an element.\n   */\n\n\n  applyStyle() {\n    if (this.marginLeft) {\n      this.renderer.setStyle(this.el.nativeElement, 'margin-left', this.marginLeft);\n    }\n\n    if (this.marginRight) {\n      this.renderer.setStyle(this.el.nativeElement, 'margin-right', this.marginRight);\n    }\n\n    if (this.marginTop) {\n      this.renderer.setStyle(this.el.nativeElement, 'margin-top', this.marginTop);\n    }\n\n    if (this.marginBottom) {\n      this.renderer.setStyle(this.el.nativeElement, 'margin-bottom', this.marginBottom);\n    }\n  }\n\n}\n\nMarginDirective.ɵfac = function MarginDirective_Factory(t) {\n  return new (t || MarginDirective)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nMarginDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: MarginDirective,\n  selectors: [[\"\", \"ksMargin\", \"\"]],\n  inputs: {\n    marginLeft: \"marginLeft\",\n    marginRight: \"marginRight\",\n    marginTop: \"marginTop\",\n    marginBottom: \"marginBottom\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MarginDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[ksMargin]'\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    marginLeft: [{\n      type: Input\n    }],\n    marginRight: [{\n      type: Input\n    }],\n    marginTop: [{\n      type: Input\n    }],\n    marginBottom: [{\n      type: Input\n    }]\n  });\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Array of all directives.\n */\n\n\nconst DIRECTIVES = [ClickOutsideDirective, SizeDirective, KeyboardNavigationDirective, WrapDirective, DirectionDirective, ATagBgImageDirective, DescriptionDirective, MarginDirective, MaxSizeDirective, FallbackImageDirective];\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n// to prevent bad scrolling behaviour on mobile phone with carousels.\n// From @mohaxspb (https://github.com/Ks89/angular-modal-gallery/pull/187)\n\nclass KsHammerGestureConfig extends HammerGestureConfig {\n  // tslint:disable-next-line:typedef\n  buildHammer(element) {\n    return new Hammer(element, {\n      touchAction: 'pan-y'\n    });\n  }\n\n}\n\nKsHammerGestureConfig.ɵfac = /* @__PURE__ */function () {\n  let ɵKsHammerGestureConfig_BaseFactory;\n  return function KsHammerGestureConfig_Factory(t) {\n    return (ɵKsHammerGestureConfig_BaseFactory || (ɵKsHammerGestureConfig_BaseFactory = i0.ɵɵgetInheritedFactory(KsHammerGestureConfig)))(t || KsHammerGestureConfig);\n  };\n}();\n\nKsHammerGestureConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: KsHammerGestureConfig,\n  factory: KsHammerGestureConfig.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(KsHammerGestureConfig, [{\n    type: Injectable\n  }], null, null);\n})();\n/**\n * Module to import it in the root module of your application.\n */\n\n\nclass GalleryModule {}\n\nGalleryModule.ɵfac = function GalleryModule_Factory(t) {\n  return new (t || GalleryModule)();\n};\n\nGalleryModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: GalleryModule\n});\nGalleryModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [{\n    provide: HAMMER_GESTURE_CONFIG,\n    useClass: KsHammerGestureConfig\n  }],\n  imports: [[CommonModule, OverlayModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GalleryModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, OverlayModule],\n      declarations: [COMPONENTS, DIRECTIVES],\n      exports: [PlainGalleryComponent, CarouselComponent],\n      providers: [{\n        provide: HAMMER_GESTURE_CONFIG,\n        useClass: KsHammerGestureConfig\n      }]\n    }]\n  }], null, null);\n})();\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { Action, ButtonType, ButtonsStrategy, CarouselComponent, DescriptionStrategy, GalleryModule, GridLayout, Image, ImageEvent, ImageModalEvent, KS_DEFAULT_ACCESSIBILITY_CONFIG, KS_DEFAULT_BTN_CLOSE, KS_DEFAULT_BTN_DELETE, KS_DEFAULT_BTN_DOWNLOAD, KS_DEFAULT_BTN_EXTURL, KS_DEFAULT_BTN_FULL_SCREEN, KS_DEFAULT_SIZE, LineLayout, LoadingType, ModalGalleryComponent, ModalGalleryRef, ModalGalleryService, PlainGalleryComponent, PlainGalleryStrategy };","map":{"version":3,"sources":["D:/elkenany_angular/Elkenany_V3/node_modules/@ks89/angular-modal-gallery/fesm2015/ks89-angular-modal-gallery.mjs"],"names":["i0","Component","ChangeDetectionStrategy","Injectable","InjectionToken","Input","EventEmitter","Directive","Output","HostListener","PLATFORM_ID","Inject","SecurityContext","ViewChild","Injector","HostBinding","NgModule","i2","isPlatformBrowser","CommonModule","i5","HammerGestureConfig","HAMMER_GESTURE_CONFIG","i1","OverlayConfig","OverlayModule","Subject","timer","map","filter","switchMap","takeUntil","ComponentPortal","i1$1","Breakpoints","ENTER_KEY","ENTER_CODE","ESC_KEY","ESC_CODE","RIGHT_ARROW_KEY","RIGHT_ARROW_CODE","LEFT_ARROW_KEY","LEFT_ARROW_CODE","UP_ARROW_KEY","UP_ARROW_CODE","DOWN_ARROW_KEY","DOWN_ARROW_CODE","SPACE_KEY","SPACE_CODE","DIRECTION_RIGHT","DIRECTION_LEFT","MOUSE_MAIN_BUTTON_CLICK","NEXT","PREV","NOTHING","AccessibleComponent","constructor","handleNavigationEvent","direction","event","KeyboardEvent","handleKeyboardNavigationEvent","MouseEvent","handleMouseNavigationEvent","handleImageEvent","handleImageKeyboardEvent","handleImageMouseEvent","key","code","mouseBtn","button","ɵfac","ɵcmp","type","args","selector","template","changeDetection","OnPush","Image","id","modal","plain","ImageEvent","galleryId","action","result","ImageModalEvent","Action","getIndex","image","arrayOfImages","Error","findIndex","val","DescriptionStrategy","KS_DEFAULT_ACCESSIBILITY_CONFIG","backgroundAriaLabel","backgroundTitle","plainGalleryContentAriaLabel","plainGalleryContentTitle","modalGalleryContentAriaLabel","modalGalleryContentTitle","loadingSpinnerAriaLabel","loadingSpinnerTitle","mainContainerAriaLabel","mainContainerTitle","mainPrevImageAriaLabel","mainPrevImageTitle","mainNextImageAriaLabel","mainNextImageTitle","dotsContainerAriaLabel","dotsContainerTitle","dotAriaLabel","previewsContainerAriaLabel","previewsContainerTitle","previewScrollPrevAriaLabel","previewScrollPrevTitle","previewScrollNextAriaLabel","previewScrollNextTitle","carouselContainerAriaLabel","carouselContainerTitle","carouselPrevImageAriaLabel","carouselPrevImageTitle","carouselNextImageAriaLabel","carouselNextImageTitle","carouselPreviewsContainerAriaLabel","carouselPreviewsContainerTitle","carouselPreviewScrollPrevAriaLabel","carouselPreviewScrollPrevTitle","carouselPreviewScrollNextAriaLabel","carouselPreviewScrollNextTitle","ButtonsStrategy","ButtonType","WHITELIST_BUTTON_TYPES","FULLSCREEN","DELETE","EXTURL","DOWNLOAD","CLOSE","CUSTOM","LineLayout","size","breakConfig","justify","GridLayout","PlainGalleryStrategy","LoadingType","DEFAULT_PREVIEW_SIZE","height","width","DEFAULT_LAYOUT","length","wrap","DEFAULT_PLAIN_CONFIG","strategy","ROW","layout","advanced","aTags","additionalBackground","DEFAULT_LOADING","enable","STANDARD","DEFAULT_DESCRIPTION_STYLE","bgColor","textColor","marginTop","marginBottom","marginLeft","marginRight","DEFAULT_DESCRIPTION","ALWAYS_VISIBLE","imageText","numberSeparator","beforeTextDescription","style","DEFAULT_CAROUSEL_DESCRIPTION","ALWAYS_HIDDEN","DEFAULT_CURRENT_IMAGE_CONFIG","navigateOnClick","loadingConfig","description","downloadable","invertSwipe","DEFAULT_CAROUSEL_IMAGE_CONFIG","DEFAULT_CURRENT_CAROUSEL_CONFIG","maxWidth","maxHeight","showArrows","objectFit","keyboardEnable","modalGalleryEnable","DEFAULT_CURRENT_CAROUSEL_PLAY","autoPlay","interval","pauseOnHover","DEFAULT_CAROUSEL_BREAKPOINTS","xSmall","small","medium","large","xLarge","DEFAULT_CAROUSEL_PREVIEWS_CONFIG","visible","number","arrows","clickable","breakpoints","DEFAULT_KEYBOARD_SERVICE_CONFIG","shortcuts","disableSsrWorkaround","DEFAULT_SLIDE_CONFIG","infinite","playConfig","sidePreviews","show","DEFAULT_PREVIEW_CONFIG","DEFAULT_CONFIG","Object","freeze","slideConfig","accessibilityConfig","previewConfig","buttonsConfig","DEFAULT","dotsConfig","plainGalleryConfig","currentImageConfig","keyboardConfig","undefined","carouselConfig","carouselImageConfig","carouselPreviewsConfig","carouselPlayConfig","carouselDotsConfig","carouselSlideInfinite","enableCloseOutside","keyboardServiceConfig","ConfigService","configMap","Map","getConfig","initIfNotExists","get","setConfig","obj","newConfig","assign","newSlideConfig","num","newPreviewConfig","newPlainGalleryConfig","initPlainGalleryConfig","loading","descriptionStyle","newCurrentImageConfig","newCarouselImageConfig","set","has","ɵprov","providedIn","newPlayGalleryConfig","COLUMN","GRID","DIALOG_DATA","Keyboard","ESC","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","LoadingSpinnerComponent","loadingStandard","loadingBars","BARS","loadingCircular","CIRCULAR","loadingDots","DOTS","loadingCubeFlipping","CUBE_FLIPPING","loadingCircles","CIRCLES","loadingExplosingSquares","EXPLOSING_SQUARES","NgSwitch","NgSwitchCase","styles","KeyboardNavigationDirective","keyboardNavigation","onKeyDown","e","isOpen","emit","ɵdir","FallbackImageDirective","renderer","el","fallbackApplied","onError","fallbackImg","setAttribute","nativeElement","toString","Renderer2","ElementRef","SizeDirective","ngOnInit","applyStyle","ngOnChanges","sizeConfig","setStyle","DescriptionDirective","position","top","bottom","left","right","CurrentImageComponent","platformId","ngZone","ref","configService","loadImage","changeImage","closeGallery","start$","stop$","normalAction","NORMAL","clickAction","CLICK","keyboardAction","KEYBOARD","isFirstImage","isLastImage","SWIPE_ACTION","LEFT","RIGHT","UP","DOWN","onMouseEnter","stopCarousel","onMouseLeave","playCarousel","libConfig","changes","images","currentImage","previousValue","currentValue","updateIndexes","ngAfterContentInit","runOutsideAngular","pipe","subscribe","run","nextImage","AUTOPLAY","markForCheck","next","onKeyPress","esc","prevImage","getDescriptionToDisplay","imageWithoutDescription","HIDE_IF_EMPTY","buildTextDescription","getAltDescriptionByImage","getTitleToDisplay","getLeftPreviewImage","currentIndex","handleBoundaries","Math","max","getRightPreviewImage","min","onImageEvent","onNavigationEvent","disable","isPreventSliding","getPrevImage","previouslyLoaded","getNextImage","onImageLoad","loadImageData","status","index","swipe","SWIPE","getIndexToDelete","ngOnDestroy","boundaryIndex","newIndex","customFullDescription","prevDescription","midSeparator","middleDescription","currImgDescription","endDescription","err","console","error","NgZone","ChangeDetectorRef","NgIf","NgClass","decorators","KeyboardService","init","config","Promise","resolve","reject","then","loaded","mousetrapInstance","default","catch","add","onBind","bind","combo","preventDefault","returnValue","reset","IdValidatorService","ids","checkAndAdd","Number","isInteger","remove","delete","KS_DEFAULT_SIZE","KS_DEFAULT_BTN_CLOSE","className","title","ariaLabel","KS_DEFAULT_BTN_DOWNLOAD","KS_DEFAULT_BTN_EXTURL","KS_DEFAULT_BTN_DELETE","KS_DEFAULT_BTN_FULL_SCREEN","UpperButtonsComponent","refresh","navigate","download","closeButton","fullscreen","customEmit","defaultButtonsDefault","simpleButtonsDefault","advancedButtonsDefault","fullButtonsDefault","SIMPLE","buttons","addButtonIds","ADVANCED","FULL","validateCustomButtons","onEvent","dataToEmit","triggerOnMouseAndKeyboard","extUrl","trackById","item","emitter","i","forEach","indexOfButtonType","NgForOf","NgStyle","DotsComponent","clickDot","configDots","dotsConfigChanges","isActive","imageIndex","onDotEvent","PreviewsComponent","clickPreview","previews","defaultPreviewSize","initPreviews","preview","prev","current","updatePreviews","previous","setBeginningIndexesPreviews","setEndIndexesPreviews","setIndexesPreviews","img","start","end","floor","prevIndex","ClickOutsideDirective","clickOutside","onClick","stopPropagation","target","clickOutsideEnable","isInside","isHidden","includes","ModalGalleryComponent","dialogContent","modalGalleryService","keyboardService","changeDetectorRef","idValidatorService","sanitizer","showGallery","updateImagesSubscription","updateImages$","newImage","initImages","onPopState","registerKeyboardService","setTimeout","onCustomEmit","eventToEmit","getButtonEventToEmit","emitButtonBeforeHook","emitButtonAfterHook","onFullScreen","doc","document","docEl","documentElement","fullscreenDisabled","fullscreenElement","webkitFullscreenElement","requestFullscreen","webkitRequestFullscreen","exitFullscreen","webkitExitFullscreen","onDelete","currentImageComponent","imageIndexToDelete","onNavigate","extUrlInNewTab","newWindow","window","open","opener","updateLocationHref","newHref","location","href","onDownload","downloadImage","onCloseGalleryButton","onCloseGallery","buttonEvent","emitClose","close","onChangeCurrentImage","emitShow","emitBoundaryEvent","onClickOutside","onClickDot","onClickPreview","unsubscribe","downloadImageAllBrowsers","base64toBlob","base64Data","contentType","sliceSize","byteCharacters","atob","bytesLength","slicesCount","ceil","byteArrays","Array","sliceIndex","begin","bytes","offset","charCodeAt","Uint8Array","Blob","link","createElement","isBase64","sanitize","RESOURCE_URL","extension","replace","split","pureBase64","blob","URL","createObjectURL","getFileName","body","appendChild","click","removeChild","base64Extension","downloadFileName","emitHasData","LOAD","indexOf","indexToCheck","emitFirstImage","emitLastImage","ModalGalleryService","DomSanitizer","static","ModalGalleryRef","overlayRef","close$","asObservable","show$","firstImage","firstImage$","lastImage","lastImage$","hasData","hasData$","buttonBeforeHook","buttonBeforeHook$","buttonAfterHook","buttonAfterHook$","closeModal","dispose","DEFAULT_DIALOG_CONFIG","hasBackdrop","backdropClass","panelClass","injector","overlay","updateImages","createOverlay","dialogRef","overlayComponent","attachDialogContainer","backdropClick","updateModalImages","overlayConfig","getOverlayConfig","create","parent","providers","provide","useValue","containerPortal","containerRef","attach","instance","positionStrategy","global","centerHorizontally","centerVertically","scrollStrategy","scrollStrategies","block","Overlay","DEFAULT_MAX_HEIGHT","CarouselPreviewsComponent","breakpointObserver","hostMaxWidth","previewMaxHeight","breakpointSubscription","observe","XSmall","Small","Medium","Large","XLarge","updateHeight","configBreakpointHeight","heightNum","isXsmallScreen","isMatched","isSmallScreen","isMediumScreen","isLargeScreen","isxLargeScreen","simpleChange","calc","clickedImageIndex","getAriaLabel","getTitle","getAlt","alt","sanitizeUrlBgStyle","unsafeStyle","unsafeStyleFallback","bg","bypassSecurityTrustStyle","BreakpointObserver","MaxSizeDirective","maxSizeConfig","CarouselComponent","clickImage","onKeyDownLeft","onKeyDownLRight","manageSlideConfig","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","configChange","firstChange","changeCurrentImage","onClickCurrentImage","configCurrentImageCarousel","imageFound","NgTemplateOutlet","WrapDirective","DirectionDirective","ATagBgImageDirective","imgPath","fallbackImgPath","PlainGalleryComponent","imageGrid","wrapStyle","widthStyle","initImageGrid","imagesChange","showModalGalleryByImage","showModalGallery","getAltPlainDescriptionByImage","getTitleDisplay","row","directionStyle","justifyStyle","count","j","push","pixels","COMPONENTS","MarginDirective","DIRECTIVES","KsHammerGestureConfig","buildHammer","element","Hammer","touchAction","GalleryModule","ɵmod","ɵinj","useClass","imports","declarations","exports"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,SAASC,SAAT,EAAoBC,uBAApB,EAA6CC,UAA7C,EAAyDC,cAAzD,EAAyEC,KAAzE,EAAgFC,YAAhF,EAA8FC,SAA9F,EAAyGC,MAAzG,EAAiHC,YAAjH,EAA+HC,WAA/H,EAA4IC,MAA5I,EAAoJC,eAApJ,EAAqKC,SAArK,EAAgLC,QAAhL,EAA0LC,WAA1L,EAAuMC,QAAvM,QAAuN,eAAvN;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,SAASC,iBAAT,EAA4BC,YAA5B,QAAgD,iBAAhD;AACA,OAAO,KAAKC,EAAZ,MAAoB,2BAApB;AACA,SAASC,mBAAT,EAA8BC,qBAA9B,QAA2D,2BAA3D;AACA,OAAO,KAAKC,EAAZ,MAAoB,sBAApB;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,sBAA7C;AACA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,MAA/B;AACA,SAASC,GAAT,EAAcC,MAAd,EAAsBC,SAAtB,EAAiCC,SAAjC,QAAkD,gBAAlD;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,OAAO,KAAKC,IAAZ,MAAsB,qBAAtB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;;AAmMsGlC,IAAAA,EAw3B4W,2B;AAx3B5WA,IAAAA,EAw3Boa,4B;AAx3BpaA,IAAAA,EAw3B4c,uB;AAx3B5cA,IAAAA,EAw3BqgB,uB;AAx3BrgBA,IAAAA,EAw3B8jB,uB;AAx3B9jBA,IAAAA,EAw3BunB,e;AAx3BvnBA,IAAAA,EAw3BmoB,wB;;;;;;AAx3BnoBA,IAAAA,EAw3BwpB,2B;AAx3BxpBA,IAAAA,EAw3B4sB,uB;AAx3B5sBA,IAAAA,EAw3B2vB,wB;;;;;;AAx3B3vBA,IAAAA,EAw3BgxB,2B;AAx3BhxBA,IAAAA,EAw3Bw0B,uB;AAx3Bx0BA,IAAAA,EAw3B23B,wB;;;;;;AAx3B33BA,IAAAA,EAw3Bg5B,2B;AAx3Bh5BA,IAAAA,EAw3Bo8B,uB;AAx3Bp8BA,IAAAA,EAw3Bm/B,wB;;;;;;AAx3Bn/BA,IAAAA,EAw3BwgC,2B;AAx3BxgCA,IAAAA,EAw3BokC,6B;AAx3BpkCA,IAAAA,EAw3B0mC,6B;AAx3B1mCA,IAAAA,EAw3BkpC,yB;AAx3BlpCA,IAAAA,EAw3B2rC,yB;AAx3B3rCA,IAAAA,EAw3BouC,yB;AAx3BpuCA,IAAAA,EAw3B6wC,yB;AAx3B7wCA,IAAAA,EAw3BozC,e;AAx3BpzCA,IAAAA,EAw3Bk0C,e;AAx3Bl0CA,IAAAA,EAw3B80C,wB;;;;;;AAx3B90CA,IAAAA,EAw3Bm2C,2B;AAx3Bn2CA,IAAAA,EAw3B05C,6B;AAx3B15CA,IAAAA,EAw3B07C,wB;AAx3B17CA,IAAAA,EAw3B29C,e;AAx3B39CA,IAAAA,EAw3Bu+C,wB;;;;;;AAx3Bv+CA,IAAAA,EAw3B4/C,2B;AAx3B5/CA,IAAAA,EAw3B4jD,6B;AAx3B5jDA,IAAAA,EAw3B4lD,qB;AAx3B5lDA,IAAAA,EAw3BmnD,qB;AAx3BnnDA,IAAAA,EAw3B0oD,qB;AAx3B1oDA,IAAAA,EAw3BiqD,qB;AAx3BjqDA,IAAAA,EAw3BsrD,e;AAx3BtrDA,IAAAA,EAw3BksD,wB;;;;;;;;;;;;;iBAx3BlsDA,E;;AAAAA,IAAAA,EA6sDi1C,6B;AA7sDj1CA,IAAAA,EA6sD8sE;AA7sD9sEA,MAAAA,EA6sD8sE;AAAA,qBA7sD9sEA,EA6sD8sE;AAAA,aAAU,yBAAkB,MAAlB,6BAAV;AAAA;AA7sD9sEA,MAAAA,EA6sD8sE;AAAA,sBA7sD9sEA,EA6sD8sE;AAAA,aAAqE,0BAAkB,MAAlB,iCAArE;AAAA,M;AA7sD9sEA,IAAAA,EA6sDi1C,e;;;;2BA7sDj1CA,E;mBAAAA,E;AAAAA,IAAAA,EA6sDkjE,oI;AA7sDljEA,IAAAA,EA6sDm8C,iLA7sDn8CA,EA6sDm8C,6PA7sDn8CA,EA6sDm8C,mc;AA7sDn8CA,IAAAA,EA6sD21D,0D;;;;;;AA7sD31DA,IAAAA,EA6sDu3E,wB;;;;mBA7sDv3EA,E;AAAAA,IAAAA,EA6sD27E,0BA7sD37EA,EA6sD27E,4R;;;;;;AA7sD37EA,IAAAA,EA6sD0wC,2B;AA7sD1wCA,IAAAA,EA6sDi1C,mG;AA7sDj1CA,IAAAA,EA6sDk1E,0HA7sDl1EA,EA6sDk1E,wB;AA7sDl1EA,IAAAA,EA6sDilF,wB;;;;gBA7sDjlFA,E;;mBAAAA,E;AAAAA,IAAAA,EA6sDu1C,a;AA7sDv1CA,IAAAA,EA6sDu1C,0D;;;;;;AA7sDv1CA,IAAAA,EA6sD0sC,2B;AA7sD1sCA,IAAAA,EA6sD0wC,qG;AA7sD1wCA,IAAAA,EA6sDsmF,wB;;;;mBA7sDtmFA,E;AAAAA,IAAAA,EA6sDyxC,a;AA7sDzxCA,IAAAA,EA6sDyxC,iD;;;;;;AA7sDzxCA,IAAAA,EA6sDkhH,+B;;;;mBA7sDlhHA,E;AAAAA,IAAAA,EA6sDspH,4JA7sDtpHA,EA6sDspH,gB;;;;;;iBA7sDtpHA,E;;AAAAA,IAAAA,EA6sD29H,6B;AA7sD39HA,IAAAA,EA6sDg2J;AA7sDh2JA,MAAAA,EA6sDg2J;AAAA,sBA7sDh2JA,EA6sDg2J;AAAA,aAAU,0BAAkB,OAAlB,8BAAV;AAAA;AA7sDh2JA,MAAAA,EA6sDg2J;AAAA,sBA7sDh2JA,EA6sDg2J;AAAA,aAAsE,0BAAkB,OAAlB,iCAAtE;AAAA,M;AA7sDh2JA,IAAAA,EA6sD29H,e;;;;6BA7sD39HA,E;oBAAAA,E;AAAAA,IAAAA,EA6sDisJ,2I;AA7sDjsJA,IAAAA,EA6sDukI,2LA7sDvkIA,EA6sDukI,wQA7sDvkIA,EA6sDukI,kd;AA7sDvkIA,IAAAA,EA6sDq+I,4D;;;;;;AA7sDr+IA,IAAAA,EA6sD0gK,wB;;;;oBA7sD1gKA,E;AAAAA,IAAAA,EA6sD0kK,0BA7sD1kKA,EA6sD0kK,kS;;;;;;AA7sD1kKA,IAAAA,EA6sDk5H,2B;AA7sDl5HA,IAAAA,EA6sD29H,oG;AA7sD39HA,IAAAA,EA6sDs+J,0HA7sDt+JA,EA6sDs+J,wB;AA7sDt+JA,IAAAA,EA6sD4uK,wB;;;;iBA7sD5uKA,E;;oBAAAA,E;AAAAA,IAAAA,EA6sDi+H,a;AA7sDj+HA,IAAAA,EA6sDi+H,2D;;;;;;AA7sDj+HA,IAAAA,EA6sDk1H,2B;AA7sDl1HA,IAAAA,EA6sDk5H,qG;AA7sDl5HA,IAAAA,EA6sDiwK,wB;;;;mBA7sDjwKA,E;AAAAA,IAAAA,EA6sDi6H,a;AA7sDj6HA,IAAAA,EA6sDi6H,kD;;;;;;AA7sDj6HA,IAAAA,EA6sDwxK,2B;AA7sDxxKA,IAAAA,EA6sD62K,uC;AA7sD72KA,IAAAA,EA6sD2hL,wB;;;;mBA7sD3hLA,E;AAAAA,IAAAA,EA6sDi4K,a;AA7sDj4KA,IAAAA,EA6sDi4K,mK;;;;;;;;;;;;gBA7sDj4KA,E;;AAAAA,IAAAA,EA0sEyb,0B;AA1sEzbA,IAAAA,EA0sEowB;AAAA,0BA1sEpwBA,EA0sEowB;AAAA;AAAA,qBA1sEpwBA,EA0sEowB;AAAA,aAAU,8BAAV;AAAA;AAAA,0BA1sEpwBA,EA0sEowB;AAAA;AAAA,qBA1sEpwBA,EA0sEowB;AAAA,aAA2C,8BAA3C;AAAA,M;AA1sEpwBA,IAAAA,EA0sE80B,uB;AA1sE90BA,IAAAA,EA0sE+6B,e;;;;;AA1sE/6BA,IAAAA,EA0sE+iB,0BA1sE/iBA,EA0sE+iB,sIA1sE/iBA,EA0sE+iB,0D;AA1sE/iBA,IAAAA,EA0sE+qB,4C;AA1sE/qBA,IAAAA,EA0sEm1B,a;AA1sEn1BA,IAAAA,EA0sEm1B,wD;AA1sEn1BA,IAAAA,EA0sE24B,6C;;;;;;AA1sE34BA,IAAAA,EA0sEkX,2B;AA1sElXA,IAAAA,EA0sEyb,gF;AA1sEzbA,IAAAA,EA0sEu7B,wB;;;;mBA1sEv7BA,E;AAAAA,IAAAA,EA0sE6c,a;AA1sE7cA,IAAAA,EA0sE6c,wE;;;;;;;;;;;;gBA1sE7cA,E;;AAAAA,IAAAA,EA00Emc,4B;AA10EncA,IAAAA,EA00E8uB;AAAA,0BA10E9uBA,EA00E8uB;AAAA;AAAA,qBA10E9uBA,EA00E8uB;AAAA,aAAU,mCAAV;AAAA;AAAA,0BA10E9uBA,EA00E8uB;AAAA;AAAA,qBA10E9uBA,EA00E8uB;AAAA,aAAgD,mCAAhD;AAAA,M;AA10E9uBA,IAAAA,EA00E0zB,e;;;;;mBA10E1zBA,E;AAAAA,IAAAA,EA00EqjB,uBA10ErjBA,EA00EqjB,mE;AA10ErjBA,IAAAA,EA00EymB,wI;;;;;;AA10EzmBA,IAAAA,EA00EkY,2B;AA10ElYA,IAAAA,EA00Emc,2E;AA10EncA,IAAAA,EA00Eo0B,wB;;;;mBA10Ep0BA,E;AAAAA,IAAAA,EA00Ewf,a;AA10ExfA,IAAAA,EA00Ewf,uE;;;;;;gBA10ExfA,E;;AAAAA,IAAAA,EA4oF2nC,4B;AA5oF3nCA,IAAAA,EA4oFoiE;AA5oFpiEA,MAAAA,EA4oFoiE;AAAA,yBA5oFpiEA,EA4oFoiE;AAAA,qBA5oFpiEA,EA4oFoiE;AAAA,aAAU,2DAAV;AAAA;AA5oFpiEA,MAAAA,EA4oFoiE;AAAA,yBA5oFpiEA,EA4oFoiE;AAAA,qBA5oFpiEA,EA4oFoiE;AAAA,aAAiE,8DAAjE;AAAA,M;AA5oFpiEA,IAAAA,EA4oF2nC,e;;;;uBA5oF3nCA,E;mBAAAA,E;AAAAA,IAAAA,EA4oF0qC,oM;AA5oF1qCA,IAAAA,EA4oFu7D,+E;AA5oFv7DA,IAAAA,EA4oF8yC,6JA5oF9yCA,EA4oF8yC,+MA5oF9yCA,EA4oF8yC,2jB;AA5oF9yCA,IAAAA,EA4oFuvD,wF;;;;;;AA5oFvvDA,IAAAA,EA4oF2hC,2B;AA5oF3hCA,IAAAA,EA4oF2nC,+F;AA5oF3nCA,IAAAA,EA4oF4pE,wB;;;;;AA5oF5pEA,IAAAA,EA4oFioC,a;AA5oFjoCA,IAAAA,EA4oFioC,uG;;;;;;iBA5oFjoCA,E;;AAAAA,IAAAA,EA4oF8c,2B;AA5oF9cA,IAAAA,EA4oFmgB,0B;AA5oFngBA,IAAAA,EA4oFksB;AA5oFlsBA,MAAAA,EA4oFksB;AAAA,sBA5oFlsBA,EA4oFksB;AAAA,aAAU,0BAAkB,MAAlB,SAAV;AAAA;AA5oFlsBA,MAAAA,EA4oFksB;AAAA,sBA5oFlsBA,EA4oFksB;AAAA,aAAwD,0BAAkB,MAAlB,SAAxD;AAAA,M;AA5oFlsBA,IAAAA,EA4oFsyB,uB;AA5oFtyBA,IAAAA,EA4oF+gC,e;AA5oF/gCA,IAAAA,EA4oF2hC,iG;AA5oF3hCA,IAAAA,EA4oFqrE,0B;AA5oFrrEA,IAAAA,EA4oF+3E;AA5oF/3EA,MAAAA,EA4oF+3E;AAAA,sBA5oF/3EA,EA4oF+3E;AAAA,aAAU,0BAAkB,OAAlB,SAAV;AAAA;AA5oF/3EA,MAAAA,EA4oF+3E;AAAA,sBA5oF/3EA,EA4oF+3E;AAAA,aAAyD,0BAAkB,OAAlB,SAAzD;AAAA,M;AA5oF/3EA,IAAAA,EA4oFq+E,uB;AA5oFr+EA,IAAAA,EA4oF0tF,e;AA5oF1tFA,IAAAA,EA4oFkuF,wB;;;;mBA5oFluFA,E;AAAAA,IAAAA,EA4oF+mB,a;AA5oF/mBA,IAAAA,EA4oF+mB,yH;AA5oF/mBA,IAAAA,EA4oFiiB,6H;AA5oFjiBA,IAAAA,EA4oF2yB,a;AA5oF3yBA,IAAAA,EA4oF2yB,0L;AA5oF3yBA,IAAAA,EA4oF28B,mH;AA5oF38BA,IAAAA,EA4oF8jC,a;AA5oF9jCA,IAAAA,EA4oF8jC,yE;AA5oF9jCA,IAAAA,EA4oFkyE,a;AA5oFlyEA,IAAAA,EA4oFkyE,0I;AA5oFlyEA,IAAAA,EA4oFotE,6H;AA5oFptEA,IAAAA,EA4oF0+E,a;AA5oF1+EA,IAAAA,EA4oF0+E,4M;AA5oF1+EA,IAAAA,EA4oFspF,mH;;;;;;gBA5oFtpFA,E;;AAAAA,IAAAA,EA26H4uC,4B;AA36H5uCA,IAAAA,EA26Hs6D;AA36Ht6DA,MAAAA,EA26Hs6D;AAAA,yBA36Ht6DA,EA26Hs6D;AAAA,qBA36Ht6DA,EA26Hs6D;AAAA,aAAU,2DAAV;AAAA;AA36Ht6DA,MAAAA,EA26Hs6D;AAAA,yBA36Ht6DA,EA26Hs6D;AAAA,qBA36Ht6DA,EA26Hs6D;AAAA,aAAiE,8DAAjE;AAAA,M;AA36Ht6DA,IAAAA,EA26H4uC,e;;;;uBA36H5uCA,E;mBAAAA,E;AAAAA,IAAAA,EA26H2xC,oM;AA36H3xCA,IAAAA,EA26Ho1D,wD;AA36Hp1DA,IAAAA,EA26H+5C,6JA36H/5CA,EA26H+5C,+MA36H/5CA,EA26H+5C,0K;AA36H/5CA,IAAAA,EA26HkvD,2D;;;;;;AA36HlvDA,IAAAA,EA26H4oC,2B;AA36H5oCA,IAAAA,EA26H4uC,8F;AA36H5uCA,IAAAA,EA26H8hE,wB;;;;;AA36H9hEA,IAAAA,EA26HkvC,a;AA36HlvCA,IAAAA,EA26HkvC,uG;;;;;;iBA36HlvCA,E;;AAAAA,IAAAA,EA26H8V,4B;AA36H9VA,IAAAA,EA26HukB,0B;AA36HvkBA,IAAAA,EA26HwwB;AA36HxwBA,MAAAA,EA26HwwB;AAAA,sBA36HxwBA,EA26HwwB;AAAA,aAAU,0BAAkB,MAAlB,SAAV;AAAA;AA36HxwBA,MAAAA,EA26HwwB;AAAA,sBA36HxwBA,EA26HwwB;AAAA,aAAwD,0BAAkB,MAAlB,SAAxD;AAAA,M;AA36HxwBA,IAAAA,EA26H02B,uB;AA36H12BA,IAAAA,EA26HqlC,e;AA36HrlCA,IAAAA,EA26H+lC,4B;AA36H/lCA,IAAAA,EA26H4oC,gG;AA36H5oCA,IAAAA,EA26HijE,e;AA36HjjEA,IAAAA,EA26H6jE,0B;AA36H7jEA,IAAAA,EA26HywE;AA36HzwEA,MAAAA,EA26HywE;AAAA,sBA36HzwEA,EA26HywE;AAAA,aAAU,0BAAkB,OAAlB,SAAV;AAAA;AA36HzwEA,MAAAA,EA26HywE;AAAA,sBA36HzwEA,EA26HywE;AAAA,aAAyD,0BAAkB,OAAlB,SAAzD;AAAA,M;AA36HzwEA,IAAAA,EA26H62E,uB;AA36H72EA,IAAAA,EA26HmmF,e;AA36HnmFA,IAAAA,EA26H2mF,e;;;;mBA36H3mFA,E;AAAAA,IAAAA,EA26HigB,2H;AA36HjgBA,IAAAA,EA26H6a,qI;AA36H7aA,IAAAA,EA26HurB,a;AA36HvrBA,IAAAA,EA26HurB,yH;AA36HvrBA,IAAAA,EA26HmmB,qI;AA36HnmBA,IAAAA,EA26H+2B,a;AA36H/2BA,IAAAA,EA26H+2B,0L;AA36H/2BA,IAAAA,EA26H2gC,2H;AA36H3gCA,IAAAA,EA26H+qC,a;AA36H/qCA,IAAAA,EA26H+qC,yE;AA36H/qCA,IAAAA,EA26H8qE,a;AA36H9qEA,IAAAA,EA26H8qE,0I;AA36H9qEA,IAAAA,EA26H0lE,qI;AA36H1lEA,IAAAA,EA26Hk3E,a;AA36Hl3EA,IAAAA,EA26Hk3E,4M;AA36Hl3EA,IAAAA,EA26HyhF,2H;;;;;;;;AA36HzhFA,IAAAA,EA8rJ49B,gB;;;;;;gBA9rJ59BA,E;;AAAAA,IAAAA,EA8rJitC,2B;AA9rJjtCA,IAAAA,EA8rJw7C;AA9rJx7CA,MAAAA,EA8rJw7C;AAAA,qBA9rJx7CA,EA8rJw7C;AAAA,aAAU,yBAAkB,MAAlB,6BAAV;AAAA;AA9rJx7CA,MAAAA,EA8rJw7C;AAAA,qBA9rJx7CA,EA8rJw7C;AAAA,aAAqE,yBAAkB,MAAlB,gCAArE;AAAA,M;AA9rJx7CA,IAAAA,EA8rJyjD,wB;AA9rJzjDA,IAAAA,EA8rJszD,e;;;;mBA9rJtzDA,E;AAAAA,IAAAA,EA8rJk2C,qF;AA9rJl2CA,IAAAA,EA8rJoxC,6H;AA9rJpxCA,IAAAA,EA8rJ8jD,a;AA9rJ9jDA,IAAAA,EA8rJ8jD,4K;AA9rJ9jDA,IAAAA,EA8rJkvD,mH;;;;;;AA9rJlvDA,IAAAA,EA8rJk0D,sB;;;;;;AA9rJl0DA,IAAAA,EA8rJmsF,+B;;;;mBA9rJnsFA,E;AAAAA,IAAAA,EA8rJg0F,8JA9rJh0FA,EA8rJg0F,gB;;;;;;iBA9rJh0FA,E;;AAAAA,IAAAA,EA8rJm8F,2B;AA9rJn8FA,IAAAA,EA8rJ2qG;AA9rJ3qGA,MAAAA,EA8rJ2qG;AAAA,sBA9rJ3qGA,EA8rJ2qG;AAAA,aAAU,0BAAkB,OAAlB,8BAAV;AAAA;AA9rJ3qGA,MAAAA,EA8rJ2qG;AAAA,sBA9rJ3qGA,EA8rJ2qG;AAAA,aAAsE,0BAAkB,OAAlB,iCAAtE;AAAA,M;AA9rJ3qGA,IAAAA,EA8rJ8yG,wB;AA9rJ9yGA,IAAAA,EA8rJ2iH,e;;;;mBA9rJ3iHA,E;AAAAA,IAAAA,EA8rJqlG,qF;AA9rJrlGA,IAAAA,EA8rJugG,6H;AA9rJvgGA,IAAAA,EA8rJmzG,a;AA9rJnzGA,IAAAA,EA8rJmzG,4K;AA9rJnzGA,IAAAA,EA8rJu+G,mH;;;;;;;;;;;;;;;;;;;;iBA9rJv+GA,E;;AAAAA,IAAAA,EA8rJygC,+B;AA9rJzgCA,IAAAA,EA8rJitC,qE;AA9rJjtCA,IAAAA,EA8rJk0D,2F;AA9rJl0DA,IAAAA,EA8rJq4D,4B;AA9rJr4DA,IAAAA,EA8rJ6jF;AA9rJ7jFA,MAAAA,EA8rJ6jF;AAAA,sBA9rJ7jFA,EA8rJ6jF;AAAA,aAAU,6BAAV;AAAA;AA9rJ7jFA,MAAAA,EA8rJ6jF;AAAA,sBA9rJ7jFA,EA8rJ6jF;AAAA,aAA0D,0BAA1D;AAAA;AA9rJ7jFA,MAAAA,EA8rJ6jF;AAAA,sBA9rJ7jFA,EA8rJ6jF;AAAA,aAAwG,0BAAxG;AAAA,M;AA9rJ7jFA,IAAAA,EA8rJq4D,e;AA9rJr4DA,IAAAA,EA8rJmsF,uF;AA9rJnsFA,IAAAA,EA8rJm8F,qE;AA9rJn8FA,IAAAA,EA8rJujH,6B;AA9rJvjHA,IAAAA,EA8rJglH,iC;AA9rJhlHA,IAAAA,EA8rJ6vH;AA9rJ7vHA,MAAAA,EA8rJ6vH;AAAA,sBA9rJ7vHA,EA8rJ6vH;AAAA,aAAa,0BAAb;AAAA,M;AA9rJ7vHA,IAAAA,EA8rJ+xH,e;AA9rJ/xHA,IAAAA,EA8rJ+yH,e;AA9rJ/yHA,IAAAA,EA8rJ2zH,e;;;;mBA9rJ3zHA,E;;gBAAAA,E;;AAAAA,IAAAA,EA8rJymC,0BA9rJzmCA,EA8rJymC,iG;AA9rJzmCA,IAAAA,EA8rJwuC,a;AA9rJxuCA,IAAAA,EA8rJwuC,4F;AA9rJxuCA,IAAAA,EA8rJi1D,a;AA9rJj1DA,IAAAA,EA8rJi1D,oC;AA9rJj1DA,IAAAA,EA8rJy6D,a;AA9rJz6DA,IAAAA,EA8rJy6D,kG;AA9rJz6DA,IAAAA,EA8rJk7E,gI;AA9rJl7EA,IAAAA,EA8rJ8+D,6BA9rJ9+DA,EA8rJ8+D,gNA9rJ9+DA,EA8rJ8+D,uO;AA9rJ9+DA,IAAAA,EA8rJgvE,+D;AA9rJhvEA,IAAAA,EA8rJgtF,a;AA9rJhtFA,IAAAA,EA8rJgtF,4D;AA9rJhtFA,IAAAA,EA8rJ29F,a;AA9rJ39FA,IAAAA,EA8rJ29F,4F;AA9rJ39FA,IAAAA,EA8rJylH,a;AA9rJzlHA,IAAAA,EA8rJylH,mI;;;;;;;;;;;;;;;;iBA9rJzlHA,E;;AAAAA,IAAAA,EA+pKmvB,4B;AA/pKnvBA,IAAAA,EA+pKw7C;AA/pKx7CA,MAAAA,EA+pKw7C;AAAA,wBA/pKx7CA,EA+pKw7C;AAAA,sBA/pKx7CA,EA+pKw7C;AAAA,aAAU,0CAAV;AAAA;AA/pKx7CA,MAAAA,EA+pKw7C;AAAA,wBA/pKx7CA,EA+pKw7C;AAAA,sBA/pKx7CA,EA+pKw7C;AAAA,aAAsD,4CAAtD;AAAA,M;AA/pKx7CA,IAAAA,EA+pKmvB,e;;;;sBA/pKnvBA,E;mBAAAA,E;AAAAA,IAAAA,EA+pKkyC,8L;AA/pKlyCA,IAAAA,EA+pKmyB,wJA/pKnyBA,EA+pKmyB,0MA/pKnyBA,EA+pKmyB,4W;AA/pKnyBA,IAAAA,EA+pKwmC,sF;;;;;;AA/pKxmCA,IAAAA,EA+pKgqB,2B;AA/pKhqBA,IAAAA,EA+pKmvB,kH;AA/pKnvBA,IAAAA,EA+pK2hD,wB;;;;sBA/pK3hDA,E;AAAAA,IAAAA,EA+pKyvB,a;AA/pKzvBA,IAAAA,EA+pKyvB,oG;;;;;;iBA/pKzvBA,E;;AAAAA,IAAAA,EA+pKyxD,0B;AA/pKzxDA,IAAAA,EA+pKuvE;AA/pKvvEA,MAAAA,EA+pKuvE;AAAA,wBA/pKvvEA,EA+pKuvE;AAAA,sBA/pKvvEA,EA+pKuvE;AAAA,aAAU,0CAAV;AAAA;AA/pKvvEA,MAAAA,EA+pKuvE;AAAA,wBA/pKvvEA,EA+pKuvE;AAAA,sBA/pKvvEA,EA+pKuvE;AAAA,aAAsD,4CAAtD;AAAA,M;AA/pKvvEA,IAAAA,EA+pKi1E,e;;;;sBA/pKj1EA,E;oBAAAA,E;AAAAA,IAAAA,EA+pKw4D,sK;AA/pKx4DA,IAAAA,EA+pKq3D,8CA/pKr3DA,EA+pKq3D,iX;AA/pKr3DA,IAAAA,EA+pKoiE,sF;;;;;;AA/pKpiEA,IAAAA,EA+pKyxD,6G;;;;sBA/pKzxDA,E;AAAAA,IAAAA,EA+pK6xD,oG;;;;;;AA/pK7xDA,IAAAA,EA+pKylB,2B;AA/pKzlBA,IAAAA,EA+pKgqB,oH;AA/pKhqBA,IAAAA,EA+pK2vD,yHA/pK3vDA,EA+pK2vD,wB;AA/pK3vDA,IAAAA,EA+pKm3E,wB;;;;gBA/pKn3EA,E;;mBAAAA,E;AAAAA,IAAAA,EA+pK+qB,a;AA/pK/qBA,IAAAA,EA+pK+qB,gL;;;;;;AA/pK/qBA,IAAAA,EA+pKmhB,2B;AA/pKnhBA,IAAAA,EA+pKylB,qG;AA/pKzlBA,IAAAA,EA+pKs4E,wB;;;;;AA/pKt4EA,IAAAA,EA+pK2nB,a;AA/pK3nBA,IAAAA,EA+pK2nB,iC;;;;AAj2KjuB,MAAMmC,SAAS,GAAG,OAAlB;AACA;AACA;AACA;;AACA,MAAMC,UAAU,GAAG,OAAnB;AACA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,QAAhB;AACA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG,QAAjB;AACA;AACA;AACA;;AACA,MAAMC,eAAe,GAAG,YAAxB;AACA;AACA;AACA;;AACA,MAAMC,gBAAgB,GAAG,YAAzB;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,WAAvB;AACA;AACA;AACA;;AACA,MAAMC,eAAe,GAAG,WAAxB;AACA;AACA;AACA;;AACA,MAAMC,YAAY,GAAG,SAArB;AACA;AACA;AACA;;AACA,MAAMC,aAAa,GAAG,SAAtB;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,WAAvB;AACA;AACA;AACA;;AACA,MAAMC,eAAe,GAAG,WAAxB;AACA;AACA;AACA;;AACA,MAAMC,SAAS,GAAG,EAAlB;AACA;AACA;AACA;;AACA,MAAMC,UAAU,GAAG,OAAnB;AACA;AACA;AACA;;AACA,MAAMC,eAAe,GAAG,OAAxB;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,MAAvB;AACA;AACA;AACA;;AACA,MAAMC,uBAAuB,GAAG,CAAhC;AACA;AACA;AACA;;AACA,MAAMC,IAAI,GAAG,CAAb;AACA;AACA;AACA;;AACA,MAAMC,IAAI,GAAG,CAAC,CAAd;AACA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,CAAhB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,mBAAN,CAA0B;AACtBC,EAAAA,WAAW,GAAG,CAAG;AACjB;AACJ;AACA;AACA;AACA;AACA;;;AACIC,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,KAAZ,EAAmB;AACpC,QAAI,CAACA,KAAL,EAAY;AACR,aAAOL,OAAP;AACH;;AACD,QAAIK,KAAK,YAAYC,aAArB,EAAoC;AAChC,aAAO,KAAKC,6BAAL,CAAmCH,SAAnC,EAA8CC,KAA9C,CAAP;AACH,KAFD,MAGK,IAAIA,KAAK,YAAYG,UAArB,EAAiC;AAClC,aAAO,KAAKC,0BAAL,CAAgCL,SAAhC,EAA2CC,KAA3C,CAAP;AACH;;AACD,WAAOL,OAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,gBAAgB,CAACL,KAAD,EAAQ;AACpB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOL,OAAP;AACH;;AACD,QAAIK,KAAK,YAAYC,aAArB,EAAoC;AAChC,aAAO,KAAKK,wBAAL,CAA8BN,KAA9B,CAAP;AACH,KAFD,MAGK,IAAIA,KAAK,YAAYG,UAArB,EAAiC;AAClC,aAAO,KAAKI,qBAAL,CAA2BP,KAA3B,CAAP;AACH;;AACD,WAAOL,OAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIW,EAAAA,wBAAwB,CAACN,KAAD,EAAQ;AAC5B,UAAMQ,GAAG,GAAGR,KAAK,CAACS,IAAlB;;AACA,QAAID,GAAG,KAAKnB,UAAR,IAAsBmB,GAAG,KAAK/B,UAAlC,EAA8C;AAC1C,aAAOgB,IAAP;AACH;;AACD,WAAOE,OAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIY,EAAAA,qBAAqB,CAACP,KAAD,EAAQ;AACzB,UAAMU,QAAQ,GAAGV,KAAK,CAACW,MAAvB;;AACA,QAAID,QAAQ,KAAKlB,uBAAjB,EAA0C;AACtC,aAAOC,IAAP;AACH;;AACD,WAAOE,OAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIO,EAAAA,6BAA6B,CAACH,SAAD,EAAYC,KAAZ,EAAmB;AAC5C,UAAMQ,GAAG,GAAGR,KAAK,CAACS,IAAlB;;AACA,QAAID,GAAG,KAAKnB,UAAR,IAAsBmB,GAAG,KAAK/B,UAAlC,EAA8C;AAC1C,aAAOsB,SAAS,KAAKT,eAAd,GAAgCG,IAAhC,GAAuCC,IAA9C;AACH;;AACD,WAAOC,OAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIS,EAAAA,0BAA0B,CAACL,SAAD,EAAYC,KAAZ,EAAmB;AACzC,UAAMU,QAAQ,GAAGV,KAAK,CAACW,MAAvB;;AACA,QAAID,QAAQ,KAAKlB,uBAAjB,EAA0C;AACtC,aAAOO,SAAS,KAAKT,eAAd,GAAgCG,IAAhC,GAAuCC,IAA9C;AACH;;AACD,WAAOC,OAAP;AACH;;AAtFqB;;AAwF1BC,mBAAmB,CAACgB,IAApB;AAAA,mBAAgHhB,mBAAhH;AAAA;;AACAA,mBAAmB,CAACiB,IAApB,kBADsGxE,EACtG;AAAA,QAAoGuD,mBAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AAAA,qDAFsGvD,EAEtG,mBAA2FuD,mBAA3F,EAA4H,CAAC;AACjHkB,IAAAA,IAAI,EAAExE,SAD2G;AAEjHyE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE,eADX;AAECC,MAAAA,QAAQ,EAAG,EAFZ;AAGCC,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E;AAH1C,KAAD;AAF2G,GAAD,CAA5H,EAO4B,YAAY;AAAE,WAAO,EAAP;AAAY,GAPtD;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;;AACA,MAAMC,KAAN,CAAY;AACRvB,EAAAA,WAAW,CAACwB,EAAD,EAAKC,KAAL,EAAYC,KAAZ,EAAmB;AAC1B,SAAKF,EAAL,GAAUA,EAAV;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,KAAL,GAAaA,KAAb;AACH;;AALO;AAOZ;AACA;AACA;AACA;;;AACA,MAAMC,UAAN,CAAiB;AACb3B,EAAAA,WAAW,CAAC4B,SAAD,EAAYC,MAAZ,EAAoBC,MAApB,EAA4B;AACnC,SAAKF,SAAL,GAAiBA,SAAjB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,MAAL,GAAcA,MAAd;AACH;;AALY;AAOjB;AACA;AACA;;;AACA,MAAMC,eAAN,SAA8BJ,UAA9B,CAAyC;AACrC3B,EAAAA,WAAW,CAAC4B,SAAD,EAAYC,MAAZ,EAAoBC,MAApB,EAA4B;AACnC,UAAMF,SAAN,EAAiBC,MAAjB,EAAyBC,MAAzB;AACH;;AAHoC;AAMzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,IAAIE,MAAJ;;AACA,CAAC,UAAUA,MAAV,EAAkB;AACfA,EAAAA,MAAM,CAACA,MAAM,CAAC,QAAD,CAAN,GAAmB,CAApB,CAAN,GAA+B,QAA/B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAAnB,CAAN,GAA8B,OAA9B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,UAAD,CAAN,GAAqB,CAAtB,CAAN,GAAiC,UAAjC;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,OAAD,CAAN,GAAkB,CAAnB,CAAN,GAA8B,OAA9B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,MAAD,CAAN,GAAiB,CAAlB,CAAN,GAA6B,MAA7B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,UAAD,CAAN,GAAqB,CAAtB,CAAN,GAAiC,UAAjC;AACH,CAPD,EAOGA,MAAM,KAAKA,MAAM,GAAG,EAAd,CAPT;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,aAAzB,EAAwC;AACpC,MAAI,CAACD,KAAL,EAAY;AACR,UAAM,IAAIE,KAAJ,CAAU,oCAAV,CAAN;AACH;;AACD,MAAI,CAACD,aAAL,EAAoB;AAChB,UAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH;;AACD,MAAI,CAACF,KAAK,CAACV,EAAP,IAAaU,KAAK,CAACV,EAAN,KAAa,CAA9B,EAAiC;AAC7B;AACA,UAAM,IAAIY,KAAJ,CAAW,mCAAX,CAAN;AACH;;AACD,MAAIF,KAAK,CAACV,EAAN,GAAW,CAAf,EAAkB;AACd,UAAM,IAAIY,KAAJ,CAAW,yBAAX,CAAN;AACH;;AACD,SAAOD,aAAa,CAACE,SAAd,CAAyBC,GAAD,IAASA,GAAG,CAACd,EAAJ,KAAWU,KAAK,CAACV,EAAlD,CAAP;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,IAAIe,mBAAJ;;AACA,CAAC,UAAUA,mBAAV,EAA+B;AAC5BA,EAAAA,mBAAmB,CAACA,mBAAmB,CAAC,eAAD,CAAnB,GAAuC,CAAxC,CAAnB,GAAgE,eAAhE;AACAA,EAAAA,mBAAmB,CAACA,mBAAmB,CAAC,gBAAD,CAAnB,GAAwC,CAAzC,CAAnB,GAAiE,gBAAjE;AACAA,EAAAA,mBAAmB,CAACA,mBAAmB,CAAC,eAAD,CAAnB,GAAuC,CAAxC,CAAnB,GAAgE,eAAhE;AACH,CAJD,EAIGA,mBAAmB,KAAKA,mBAAmB,GAAG,EAA3B,CAJtB;AAMA;AACA;AACA;;;AACA,MAAMC,+BAA+B,GAAG;AACpCC,EAAAA,mBAAmB,EAAE,sCADe;AAEpCC,EAAAA,eAAe,EAAE,EAFmB;AAGpCC,EAAAA,4BAA4B,EAAE,uBAHM;AAIpCC,EAAAA,wBAAwB,EAAE,EAJU;AAKpCC,EAAAA,4BAA4B,EAAE,uBALM;AAMpCC,EAAAA,wBAAwB,EAAE,EANU;AAOpCC,EAAAA,uBAAuB,EAAE,kDAPW;AAQpCC,EAAAA,mBAAmB,EAAE,kDARe;AASpCC,EAAAA,sBAAsB,EAAE,8BATY;AAUpCC,EAAAA,kBAAkB,EAAE,EAVgB;AAWpCC,EAAAA,sBAAsB,EAAE,gBAXY;AAYpCC,EAAAA,kBAAkB,EAAE,gBAZgB;AAapCC,EAAAA,sBAAsB,EAAE,YAbY;AAcpCC,EAAAA,kBAAkB,EAAE,YAdgB;AAepCC,EAAAA,sBAAsB,EAAE,uBAfY;AAgBpCC,EAAAA,kBAAkB,EAAE,EAhBgB;AAiBpCC,EAAAA,YAAY,EAAE,0BAjBsB;AAkBpCC,EAAAA,0BAA0B,EAAE,gBAlBQ;AAmBpCC,EAAAA,sBAAsB,EAAE,EAnBY;AAoBpCC,EAAAA,0BAA0B,EAAE,0BApBQ;AAqBpCC,EAAAA,sBAAsB,EAAE,0BArBY;AAsBpCC,EAAAA,0BAA0B,EAAE,sBAtBQ;AAuBpCC,EAAAA,sBAAsB,EAAE,sBAvBY;AAwBpCC,EAAAA,0BAA0B,EAAE,8BAxBQ;AAyBpCC,EAAAA,sBAAsB,EAAE,EAzBY;AA0BpCC,EAAAA,0BAA0B,EAAE,gBA1BQ;AA2BpCC,EAAAA,sBAAsB,EAAE,gBA3BY;AA4BpCC,EAAAA,0BAA0B,EAAE,YA5BQ;AA6BpCC,EAAAA,sBAAsB,EAAE,YA7BY;AA8BpCC,EAAAA,kCAAkC,EAAE,gBA9BA;AA+BpCC,EAAAA,8BAA8B,EAAE,EA/BI;AAgCpCC,EAAAA,kCAAkC,EAAE,0BAhCA;AAiCpCC,EAAAA,8BAA8B,EAAE,0BAjCI;AAkCpCC,EAAAA,kCAAkC,EAAE,sBAlCA;AAmCpCC,EAAAA,8BAA8B,EAAE;AAnCI,CAAxC;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,IAAIC,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxB;AACA;AACAA,EAAAA,eAAe,CAACA,eAAe,CAAC,SAAD,CAAf,GAA6B,CAA9B,CAAf,GAAkD,SAAlD;AACAA,EAAAA,eAAe,CAACA,eAAe,CAAC,QAAD,CAAf,GAA4B,CAA7B,CAAf,GAAiD,QAAjD;AACAA,EAAAA,eAAe,CAACA,eAAe,CAAC,UAAD,CAAf,GAA8B,CAA/B,CAAf,GAAmD,UAAnD;AACAA,EAAAA,eAAe,CAACA,eAAe,CAAC,MAAD,CAAf,GAA0B,CAA3B,CAAf,GAA+C,MAA/C;AACAA,EAAAA,eAAe,CAACA,eAAe,CAAC,QAAD,CAAf,GAA4B,CAA7B,CAAf,GAAiD,QAAjD;AACH,CARD,EAQGA,eAAe,KAAKA,eAAe,GAAG,EAAvB,CARlB;AASA;AACA;AACA;;;AACA,IAAIC,UAAJ;;AACA,CAAC,UAAUA,UAAV,EAAsB;AACnB;AACA;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,QAAD,CAAV,GAAuB,CAAxB,CAAV,GAAuC,QAAvC;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,QAAD,CAAV,GAAuB,CAAxB,CAAV,GAAuC,QAAvC;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,UAAD,CAAV,GAAyB,CAA1B,CAAV,GAAyC,UAAzC;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,OAAD,CAAV,GAAsB,CAAvB,CAAV,GAAsC,OAAtC;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,QAAD,CAAV,GAAuB,CAAxB,CAAV,GAAuC,QAAvC;AACAA,EAAAA,UAAU,CAACA,UAAU,CAAC,YAAD,CAAV,GAA2B,CAA5B,CAAV,GAA2C,YAA3C;AACH,CATD,EASGA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CATb;AAUA;AACA;AACA;;;AACA,MAAMC,sBAAsB,GAAG,CAC3BD,UAAU,CAACE,UADgB,EAE3BF,UAAU,CAACG,MAFgB,EAG3BH,UAAU,CAACI,MAHgB,EAI3BJ,UAAU,CAACK,QAJgB,EAK3BL,UAAU,CAACM,KALgB,EAM3BN,UAAU,CAACO,MANgB,CAA/B;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,MAAMC,UAAN,CAAiB;AACbrF,EAAAA,WAAW,CAACsF,IAAD,EAAOC,WAAP,EAAoBC,OAApB,EAA6B;AACpC,SAAKF,IAAL,GAAYA,IAAZ;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACH;;AALY;AAOjB;AACA;AACA;;;AACA,MAAMC,UAAN,CAAiB;AACbzF,EAAAA,WAAW,CAACsF,IAAD,EAAOC,WAAP,EAAoB;AAC3B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACH;;AAJY;AAMjB;AACA;AACA;;;AACA,IAAIG,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7B;AACA;AACAA,EAAAA,oBAAoB,CAACA,oBAAoB,CAAC,KAAD,CAApB,GAA8B,CAA/B,CAApB,GAAwD,KAAxD;AACAA,EAAAA,oBAAoB,CAACA,oBAAoB,CAAC,QAAD,CAApB,GAAiC,CAAlC,CAApB,GAA2D,QAA3D;AACAA,EAAAA,oBAAoB,CAACA,oBAAoB,CAAC,MAAD,CAApB,GAA+B,CAAhC,CAApB,GAAyD,MAAzD;AACAA,EAAAA,oBAAoB,CAACA,oBAAoB,CAAC,QAAD,CAApB,GAAiC,CAAlC,CAApB,GAA2D,QAA3D,CAN6B,CAMwC;AACxE,CAPD,EAOGA,oBAAoB,KAAKA,oBAAoB,GAAG,EAA5B,CAPvB;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,IAAIC,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpBA,EAAAA,WAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAvB,CAAX,GAAuC,MAAvC;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,MAAD,CAAX,GAAsB,CAAvB,CAAX,GAAuC,MAAvC;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,eAAD,CAAX,GAA+B,CAAhC,CAAX,GAAgD,eAAhD;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACAA,EAAAA,WAAW,CAACA,WAAW,CAAC,mBAAD,CAAX,GAAmC,CAApC,CAAX,GAAoD,mBAApD;AACH,CARD,EAQGA,WAAW,KAAKA,WAAW,GAAG,EAAnB,CARd;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,oBAAoB,GAAG;AAAEC,EAAAA,MAAM,EAAE,MAAV;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CAA7B;AACA,MAAMC,cAAc,GAAG,IAAIV,UAAJ,CAAeO,oBAAf,EAAqC;AAAEI,EAAAA,MAAM,EAAE,CAAC,CAAX;AAAcC,EAAAA,IAAI,EAAE;AAApB,CAArC,EAAkE,YAAlE,CAAvB;AACA,MAAMC,oBAAoB,GAAG;AACzBC,EAAAA,QAAQ,EAAET,oBAAoB,CAACU,GADN;AAEzBC,EAAAA,MAAM,EAAEN,cAFiB;AAGzBO,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,KAAK,EAAE,KAAT;AAAgBC,IAAAA,oBAAoB,EAAE;AAAtC;AAHe,CAA7B;AAKA,MAAMC,eAAe,GAAG;AAAEC,EAAAA,MAAM,EAAE,IAAV;AAAgBzF,EAAAA,IAAI,EAAE0E,WAAW,CAACgB;AAAlC,CAAxB;AACA,MAAMC,yBAAyB,GAAG;AAC9BC,EAAAA,OAAO,EAAE,mBADqB;AAE9BC,EAAAA,SAAS,EAAE,OAFmB;AAG9BC,EAAAA,SAAS,EAAE,KAHmB;AAI9BC,EAAAA,YAAY,EAAE,KAJgB;AAK9BC,EAAAA,UAAU,EAAE,KALkB;AAM9BC,EAAAA,WAAW,EAAE;AANiB,CAAlC;AAQA,MAAMC,mBAAmB,GAAG;AACxBhB,EAAAA,QAAQ,EAAE5D,mBAAmB,CAAC6E,cADN;AAExBC,EAAAA,SAAS,EAAE,QAFa;AAGxBC,EAAAA,eAAe,EAAE,GAHO;AAIxBC,EAAAA,qBAAqB,EAAE,KAJC;AAKxBC,EAAAA,KAAK,EAAEZ;AALiB,CAA5B;AAOA,MAAMa,4BAA4B,GAAG;AACjCtB,EAAAA,QAAQ,EAAE5D,mBAAmB,CAACmF,aADG;AAEjCL,EAAAA,SAAS,EAAE,QAFsB;AAGjCC,EAAAA,eAAe,EAAE,GAHgB;AAIjCC,EAAAA,qBAAqB,EAAE,KAJU;AAKjCC,EAAAA,KAAK,EAAEZ;AAL0B,CAArC;AAOA,MAAMe,4BAA4B,GAAG;AACjCC,EAAAA,eAAe,EAAE,IADgB;AAEjCC,EAAAA,aAAa,EAAEpB,eAFkB;AAGjCqB,EAAAA,WAAW,EAAEX,mBAHoB;AAIjCY,EAAAA,YAAY,EAAE,KAJmB;AAKjCC,EAAAA,WAAW,EAAE;AALoB,CAArC;AAOA,MAAMC,6BAA6B,GAAG;AAClCH,EAAAA,WAAW,EAAEL,4BADqB;AAElCO,EAAAA,WAAW,EAAE;AAFqB,CAAtC;AAIA,MAAME,+BAA+B,GAAG;AACpCC,EAAAA,QAAQ,EAAE,MAD0B;AAEpCC,EAAAA,SAAS,EAAE,OAFyB;AAGpCC,EAAAA,UAAU,EAAE,IAHwB;AAIpCC,EAAAA,SAAS,EAAE,OAJyB;AAKpCC,EAAAA,cAAc,EAAE,IALoB;AAMpCC,EAAAA,kBAAkB,EAAE;AANgB,CAAxC;AAQA,MAAMC,6BAA6B,GAAG;AAClCC,EAAAA,QAAQ,EAAE,IADwB;AAElCC,EAAAA,QAAQ,EAAE,IAFwB;AAGlCC,EAAAA,YAAY,EAAE;AAHoB,CAAtC;AAKA,MAAMC,4BAA4B,GAAG;AAAEC,EAAAA,MAAM,EAAE,GAAV;AAAeC,EAAAA,KAAK,EAAE,GAAtB;AAA2BC,EAAAA,MAAM,EAAE,GAAnC;AAAwCC,EAAAA,KAAK,EAAE,GAA/C;AAAoDC,EAAAA,MAAM,EAAE;AAA5D,CAArC;AACA,MAAMC,gCAAgC,GAAG;AACrCC,EAAAA,OAAO,EAAE,IAD4B;AAErCC,EAAAA,MAAM,EAAE,CAF6B;AAGrCC,EAAAA,MAAM,EAAE,IAH6B;AAIrCC,EAAAA,SAAS,EAAE,IAJ0B;AAKrCzD,EAAAA,KAAK,EAAE,MAAM,CAAN,GAAU,GALoB;AAMrCsC,EAAAA,SAAS,EAAE,OAN0B;AAOrCoB,EAAAA,WAAW,EAAEX;AAPwB,CAAzC;AASA,MAAMY,+BAA+B,GAAG;AACpCC,EAAAA,SAAS,EAAE,CAAC,QAAD,EAAW,QAAX,CADyB;AAEpCC,EAAAA,oBAAoB,EAAE;AAFc,CAAxC;AAIA,MAAMC,oBAAoB,GAAG;AACzBC,EAAAA,QAAQ,EAAE,KADe;AAEzBC,EAAAA,UAAU,EAAE;AAAEpB,IAAAA,QAAQ,EAAE,KAAZ;AAAmBC,IAAAA,QAAQ,EAAE,IAA7B;AAAmCC,IAAAA,YAAY,EAAE;AAAjD,GAFa;AAGzBmB,EAAAA,YAAY,EAAE;AAAEC,IAAAA,IAAI,EAAE,IAAR;AAAc1E,IAAAA,IAAI,EAAE;AAAEQ,MAAAA,KAAK,EAAE,OAAT;AAAkBD,MAAAA,MAAM,EAAE;AAA1B;AAApB;AAHW,CAA7B;AAKA,MAAMoE,sBAAsB,GAAG;AAC3Bb,EAAAA,OAAO,EAAE,IADkB;AAE3BC,EAAAA,MAAM,EAAE,CAFmB;AAG3BC,EAAAA,MAAM,EAAE,IAHmB;AAI3BC,EAAAA,SAAS,EAAE,IAJgB;AAK3BjE,EAAAA,IAAI,EAAEM;AALqB,CAA/B;AAOA,MAAMsE,cAAc,GAAGC,MAAM,CAACC,MAAP,CAAc;AACjCC,EAAAA,WAAW,EAAET,oBADoB;AAEjCU,EAAAA,mBAAmB,EAAE9H,+BAFY;AAGjC+H,EAAAA,aAAa,EAAEN,sBAHkB;AAIjCO,EAAAA,aAAa,EAAE;AAAEpB,IAAAA,OAAO,EAAE,IAAX;AAAiBjD,IAAAA,QAAQ,EAAEvB,eAAe,CAAC6F;AAA3C,GAJkB;AAKjCC,EAAAA,UAAU,EAAE;AAAEtB,IAAAA,OAAO,EAAE;AAAX,GALqB;AAMjCuB,EAAAA,kBAAkB,EAAEzE,oBANa;AAOjC0E,EAAAA,kBAAkB,EAAEjD,4BAPa;AAQjCkD,EAAAA,cAAc,EAAEC,SARiB;AASjCC,EAAAA,cAAc,EAAE7C,+BATiB;AAUjC8C,EAAAA,mBAAmB,EAAE/C,6BAVY;AAWjCgD,EAAAA,sBAAsB,EAAE9B,gCAXS;AAYjC+B,EAAAA,kBAAkB,EAAEzC,6BAZa;AAajC0C,EAAAA,kBAAkB,EAAE;AAAE/B,IAAAA,OAAO,EAAE;AAAX,GAba;AAcjCgC,EAAAA,qBAAqB,EAAE,IAdU;AAejCC,EAAAA,kBAAkB,EAAE,IAfa;AAgBjCC,EAAAA,qBAAqB,EAAE7B;AAhBU,CAAd,CAAvB;AAkBA;AACA;AACA;;AACA,MAAM8B,aAAN,CAAoB;AAChBvL,EAAAA,WAAW,GAAG;AACV,SAAKwL,SAAL,GAAiB,IAAIC,GAAJ,EAAjB;AACH;;AACDC,EAAAA,SAAS,CAAClK,EAAD,EAAK;AACV,SAAKmK,eAAL,CAAqBnK,EAArB;AACA,WAAO,KAAKgK,SAAL,CAAeI,GAAf,CAAmBpK,EAAnB,CAAP;AACH;;AACDqK,EAAAA,SAAS,CAACrK,EAAD,EAAKsK,GAAL,EAAU;AACf,SAAKH,eAAL,CAAqBnK,EAArB;;AACA,QAAI,CAACsK,GAAL,EAAU;AACN;AACH;;AACD,QAAI,CAAC5B,cAAD,IACA,CAACA,cAAc,CAACG,WADhB,IAEA,CAACH,cAAc,CAACG,WAAf,CAA2BN,YAF5B,IAGA,CAACG,cAAc,CAACK,aAHhB,IAIA,CAACL,cAAc,CAACK,aAAf,CAA6BjF,IAJ9B,IAKA,CAAC4E,cAAc,CAACK,aAAf,CAA6BlB,MAL9B,IAMA,CAACa,cAAc,CAACS,kBANhB,IAOA,CAACT,cAAc,CAACU,kBAPhB,IAQA,CAACV,cAAc,CAACU,kBARhB,IASA,CAACV,cAAc,CAACU,kBAAf,CAAkC9C,WATnC,IAUA,CAACoC,cAAc,CAACc,mBAVhB,IAWA,CAACd,cAAc,CAACc,mBAAf,CAAmClD,WAXpC,IAYA,CAACoC,cAAc,CAACe,sBAZhB,IAaA,CAACf,cAAc,CAACe,sBAAf,CAAsCzB,WAbvC,IAcA,CAACL,gCAAgC,CAACE,MAdtC,EAc8C;AAC1C,YAAM,IAAIjH,KAAJ,CAAU,sEAAV,CAAN;AACH;;AACD,UAAM2J,SAAS,GAAG5B,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB,KAAKR,SAAL,CAAeI,GAAf,CAAmBpK,EAAnB,CAAlB,CAAlB;;AACA,QAAIsK,GAAG,CAACzB,WAAR,EAAqB;AACjB,UAAIP,UAAJ;AACA,UAAIC,YAAJ;AACA,UAAIzE,IAAJ;;AACA,UAAIwG,GAAG,CAACzB,WAAJ,CAAgBP,UAApB,EAAgC;AAC5BA,QAAAA,UAAU,GAAGK,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACG,WAAf,CAA2BP,UAA7C,EAAyDgC,GAAG,CAACzB,WAAJ,CAAgBP,UAAzE,CAAb;AACH,OAFD,MAGK;AACDA,QAAAA,UAAU,GAAGI,cAAc,CAACG,WAAf,CAA2BP,UAAxC;AACH;;AACD,UAAIgC,GAAG,CAACzB,WAAJ,CAAgBN,YAApB,EAAkC;AAC9B,YAAI+B,GAAG,CAACzB,WAAJ,CAAgBN,YAAhB,CAA6BzE,IAAjC,EAAuC;AACnCA,UAAAA,IAAI,GAAG6E,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACG,WAAf,CAA2BN,YAA3B,CAAwCzE,IAA1D,EAAgEwG,GAAG,CAACzB,WAAJ,CAAgBN,YAAhB,CAA6BzE,IAA7F,CAAP;AACH,SAFD,MAGK;AACDA,UAAAA,IAAI,GAAG4E,cAAc,CAACG,WAAf,CAA2BN,YAA3B,CAAwCzE,IAA/C;AACH;;AACDyE,QAAAA,YAAY,GAAGI,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACG,WAAf,CAA2BN,YAA7C,EAA2D+B,GAAG,CAACzB,WAAJ,CAAgBN,YAA3E,CAAf;AACH,OARD,MASK;AACDA,QAAAA,YAAY,GAAGG,cAAc,CAACG,WAAf,CAA2BN,YAA1C;AACAzE,QAAAA,IAAI,GAAG4E,cAAc,CAACG,WAAf,CAA2BN,YAA3B,CAAwCzE,IAA/C;AACH;;AACD,YAAM2G,cAAc,GAAG9B,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACG,WAAjC,EAA8CyB,GAAG,CAACzB,WAAlD,CAAvB;AACA4B,MAAAA,cAAc,CAACnC,UAAf,GAA4BA,UAA5B;AACAmC,MAAAA,cAAc,CAAClC,YAAf,GAA8BA,YAA9B;AACAkC,MAAAA,cAAc,CAAClC,YAAf,CAA4BzE,IAA5B,GAAmCA,IAAnC;AACAyG,MAAAA,SAAS,CAAC1B,WAAV,GAAwB4B,cAAxB;AACH;;AACD,QAAIH,GAAG,CAACxB,mBAAR,EAA6B;AACzByB,MAAAA,SAAS,CAACzB,mBAAV,GAAgCH,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACI,mBAAjC,EAAsDwB,GAAG,CAACxB,mBAA1D,CAAhC;AACH;;AACD,QAAIwB,GAAG,CAACvB,aAAR,EAAuB;AACnB,UAAIjF,IAAJ;AACA,UAAI4G,GAAJ;;AACA,UAAIJ,GAAG,CAACvB,aAAJ,CAAkBjF,IAAtB,EAA4B;AACxBA,QAAAA,IAAI,GAAG6E,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACK,aAAf,CAA6BjF,IAA/C,EAAqDwG,GAAG,CAACvB,aAAJ,CAAkBjF,IAAvE,CAAP;AACH,OAFD,MAGK;AACDA,QAAAA,IAAI,GAAG4E,cAAc,CAACK,aAAf,CAA6BjF,IAApC;AACH;;AACD,UAAIwG,GAAG,CAACvB,aAAJ,CAAkBlB,MAAtB,EAA8B;AAC1B,YAAIyC,GAAG,CAACvB,aAAJ,CAAkBlB,MAAlB,IAA4B,CAAhC,EAAmC;AAC/B;AACA6C,UAAAA,GAAG,GAAGhC,cAAc,CAACK,aAAf,CAA6BlB,MAAnC;AACH,SAHD,MAIK;AACD6C,UAAAA,GAAG,GAAGJ,GAAG,CAACvB,aAAJ,CAAkBlB,MAAxB;AACH;AACJ,OARD,MASK;AACD6C,QAAAA,GAAG,GAAGhC,cAAc,CAACK,aAAf,CAA6BlB,MAAnC;AACH;;AACD,YAAM8C,gBAAgB,GAAGhC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACK,aAAjC,EAAgDuB,GAAG,CAACvB,aAApD,CAAzB;AACA4B,MAAAA,gBAAgB,CAAC7G,IAAjB,GAAwBA,IAAxB;AACA6G,MAAAA,gBAAgB,CAAC9C,MAAjB,GAA0B6C,GAA1B;AACAH,MAAAA,SAAS,CAACxB,aAAV,GAA0B4B,gBAA1B;AACH;;AACD,QAAIL,GAAG,CAACtB,aAAR,EAAuB;AACnBuB,MAAAA,SAAS,CAACvB,aAAV,GAA0BL,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACM,aAAjC,EAAgDsB,GAAG,CAACtB,aAApD,CAA1B;AACH;;AACD,QAAIsB,GAAG,CAACpB,UAAR,EAAoB;AAChBqB,MAAAA,SAAS,CAACrB,UAAV,GAAuBP,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACQ,UAAjC,EAA6CoB,GAAG,CAACpB,UAAjD,CAAvB;AACH;;AACD,QAAIoB,GAAG,CAACnB,kBAAR,EAA4B;AACxB,UAAIrE,QAAJ;AACA,UAAID,MAAJ;;AACA,UAAIyF,GAAG,CAACnB,kBAAJ,CAAuBrE,QAA3B,EAAqC;AACjCA,QAAAA,QAAQ,GAAG6D,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACS,kBAAf,CAAkCrE,QAApD,EAA8DwF,GAAG,CAACnB,kBAAJ,CAAuBrE,QAArF,CAAX;AACH,OAFD,MAGK;AACDA,QAAAA,QAAQ,GAAG4D,cAAc,CAACS,kBAAf,CAAkCrE,QAA7C;AACH;;AACD,UAAIwF,GAAG,CAACnB,kBAAJ,CAAuBtE,MAA3B,EAAmC;AAC/B;AACAA,QAAAA,MAAM,GAAGyF,GAAG,CAACnB,kBAAJ,CAAuBtE,MAAhC;AACH,OAHD,MAIK;AACDA,QAAAA,MAAM,GAAG6D,cAAc,CAACS,kBAAf,CAAkCtE,MAA3C;AACH;;AACD,YAAM+F,qBAAqB,GAAGjC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACS,kBAAjC,EAAqDmB,GAAG,CAACnB,kBAAzD,CAA9B;AACAyB,MAAAA,qBAAqB,CAAC/F,MAAtB,GAA+BA,MAA/B;AACA+F,MAAAA,qBAAqB,CAAC9F,QAAtB,GAAiCA,QAAjC;AACAyF,MAAAA,SAAS,CAACpB,kBAAV,GAA+B0B,sBAAsB,CAACD,qBAAD,CAArD;AACH;;AACD,QAAIN,GAAG,CAAClB,kBAAR,EAA4B;AACxB,UAAI0B,OAAJ;AACA,UAAIxE,WAAJ;AACA,UAAIyE,gBAAJ;;AACA,UAAIT,GAAG,CAAClB,kBAAJ,CAAuB/C,aAA3B,EAA0C;AACtCyE,QAAAA,OAAO,GAAGnC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACU,kBAAf,CAAkC/C,aAApD,EAAmEiE,GAAG,CAAClB,kBAAJ,CAAuB/C,aAA1F,CAAV;AACH,OAFD,MAGK;AACDyE,QAAAA,OAAO,GAAGpC,cAAc,CAACU,kBAAf,CAAkC/C,aAA5C;AACH;;AACD,UAAIiE,GAAG,CAAClB,kBAAJ,CAAuB9C,WAA3B,EAAwC;AACpCA,QAAAA,WAAW,GAAGqC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACU,kBAAf,CAAkC9C,WAApD,EAAiEgE,GAAG,CAAClB,kBAAJ,CAAuB9C,WAAxF,CAAd;;AACA,YAAIgE,GAAG,CAAClB,kBAAJ,CAAuB9C,WAAvB,CAAmCN,KAAvC,EAA8C;AAC1C+E,UAAAA,gBAAgB,GAAGpC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACU,kBAAf,CAAkC9C,WAAlC,CAA8CN,KAAhE,EAAuEsE,GAAG,CAAClB,kBAAJ,CAAuB9C,WAAvB,CAAmCN,KAA1G,CAAnB;AACH,SAFD,MAGK;AACD+E,UAAAA,gBAAgB,GAAGrC,cAAc,CAACU,kBAAf,CAAkC9C,WAAlC,CAA8CN,KAAjE;AACH;AACJ,OARD,MASK;AACDM,QAAAA,WAAW,GAAGoC,cAAc,CAACU,kBAAf,CAAkC9C,WAAhD;AACAyE,QAAAA,gBAAgB,GAAGrC,cAAc,CAACU,kBAAf,CAAkC9C,WAAlC,CAA8CN,KAAjE;AACH;;AACD,YAAMgF,qBAAqB,GAAGrC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACU,kBAAjC,EAAqDkB,GAAG,CAAClB,kBAAzD,CAA9B;AACA4B,MAAAA,qBAAqB,CAAC3E,aAAtB,GAAsCyE,OAAtC;AACAE,MAAAA,qBAAqB,CAAC1E,WAAtB,GAAoCA,WAApC;AACA0E,MAAAA,qBAAqB,CAAC1E,WAAtB,CAAkCN,KAAlC,GAA0C+E,gBAA1C;AACAR,MAAAA,SAAS,CAACnB,kBAAV,GAA+B4B,qBAA/B;AACH;;AACD,QAAIV,GAAG,CAACjB,cAAR,EAAwB;AACpBkB,MAAAA,SAAS,CAAClB,cAAV,GAA2BV,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACW,cAAjC,EAAiDiB,GAAG,CAACjB,cAArD,CAA3B;AACH,KA3Ic,CA4If;;;AACA,QAAIiB,GAAG,CAACf,cAAR,EAAwB;AACpBgB,MAAAA,SAAS,CAAChB,cAAV,GAA2BZ,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACa,cAAjC,EAAiDe,GAAG,CAACf,cAArD,CAA3B;AACH;;AACD,QAAIe,GAAG,CAACd,mBAAR,EAA6B;AACzB,UAAIlD,WAAJ;AACA,UAAIyE,gBAAJ;;AACA,UAAIT,GAAG,CAACd,mBAAJ,CAAwBlD,WAA5B,EAAyC;AACrCA,QAAAA,WAAW,GAAGqC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACc,mBAAf,CAAmClD,WAArD,EAAkEgE,GAAG,CAACd,mBAAJ,CAAwBlD,WAA1F,CAAd;;AACA,YAAIgE,GAAG,CAACd,mBAAJ,CAAwBlD,WAAxB,CAAoCN,KAAxC,EAA+C;AAC3C+E,UAAAA,gBAAgB,GAAGpC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACc,mBAAf,CAAmClD,WAAnC,CAA+CN,KAAjE,EAAwEsE,GAAG,CAACd,mBAAJ,CAAwBlD,WAAxB,CAAoCN,KAA5G,CAAnB;AACH,SAFD,MAGK;AACD+E,UAAAA,gBAAgB,GAAGrC,cAAc,CAACc,mBAAf,CAAmClD,WAAnC,CAA+CN,KAAlE;AACH;AACJ,OARD,MASK;AACDM,QAAAA,WAAW,GAAGoC,cAAc,CAACc,mBAAf,CAAmClD,WAAjD;AACAyE,QAAAA,gBAAgB,GAAGrC,cAAc,CAACc,mBAAf,CAAmClD,WAAnC,CAA+CN,KAAlE;AACH;;AACD,YAAMiF,sBAAsB,GAAGtC,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACc,mBAAjC,EAAsDc,GAAG,CAACd,mBAA1D,CAA/B;AACAyB,MAAAA,sBAAsB,CAAC3E,WAAvB,GAAqCA,WAArC;AACA2E,MAAAA,sBAAsB,CAAC3E,WAAvB,CAAmCN,KAAnC,GAA2C+E,gBAA3C;AACAR,MAAAA,SAAS,CAACf,mBAAV,GAAgCyB,sBAAhC;AACH;;AACD,QAAIX,GAAG,CAACZ,kBAAR,EAA4B;AACxB;AACA,UAAIY,GAAG,CAACZ,kBAAJ,CAAuBvC,QAAvB,IAAmC,CAAvC,EAA0C;AACtC,cAAM,IAAIvG,KAAJ,CAAW,2CAAX,CAAN;AACH;;AACD2J,MAAAA,SAAS,CAACb,kBAAV,GAA+Bf,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACgB,kBAAjC,EAAqDY,GAAG,CAACZ,kBAAzD,CAA/B;AACH;;AACD,QAAIY,GAAG,CAACb,sBAAR,EAAgC;AAC5B;AACA,UAAIiB,GAAJ;AACA,UAAI1C,WAAJ;;AACA,UAAI,CAACsC,GAAG,CAACb,sBAAJ,CAA2B5B,MAA5B,IAAsCyC,GAAG,CAACb,sBAAJ,CAA2B5B,MAA3B,IAAqC,CAA/E,EAAkF;AAC9E6C,QAAAA,GAAG,GAAG/C,gCAAgC,CAACE,MAAvC;AACH,OAFD,MAGK;AACD6C,QAAAA,GAAG,GAAGJ,GAAG,CAACb,sBAAJ,CAA2B5B,MAAjC;AACH;;AACD,UAAIyC,GAAG,CAACb,sBAAJ,CAA2BzB,WAA/B,EAA4C;AACxCA,QAAAA,WAAW,GAAGW,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACe,sBAAf,CAAsCzB,WAAxD,EAAqEsC,GAAG,CAACb,sBAAJ,CAA2BzB,WAAhG,CAAd;AACH,OAFD,MAGK;AACDA,QAAAA,WAAW,GAAGU,cAAc,CAACe,sBAAf,CAAsCzB,WAApD;AACH;;AACDuC,MAAAA,SAAS,CAACd,sBAAV,GAAmCd,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACe,sBAAjC,EAAyDa,GAAG,CAACb,sBAA7D,CAAnC;AACAc,MAAAA,SAAS,CAACd,sBAAV,CAAiC5B,MAAjC,GAA0C6C,GAA1C;AACAH,MAAAA,SAAS,CAACd,sBAAV,CAAiCzB,WAAjC,GAA+CA,WAA/C,CAlB4B,CAmB5B;AACA;AACA;;AACAuC,MAAAA,SAAS,CAACd,sBAAV,CAAiCnF,KAAjC,GAAyC,MAAMiG,SAAS,CAACd,sBAAV,CAAiC5B,MAAvC,GAAgD,GAAzF;AACH;;AACD,QAAIyC,GAAG,CAACX,kBAAR,EAA4B;AACxBY,MAAAA,SAAS,CAACZ,kBAAV,GAA+BhB,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACiB,kBAAjC,EAAqDW,GAAG,CAACX,kBAAzD,CAA/B;AACH;;AACD,QAAIW,GAAG,CAACV,qBAAJ,KAA8BN,SAAlC,EAA6C;AACzCiB,MAAAA,SAAS,CAACX,qBAAV,GAAkClB,cAAc,CAACkB,qBAAjD;AACH,KAFD,MAGK;AACDW,MAAAA,SAAS,CAACX,qBAAV,GAAkCU,GAAG,CAACV,qBAAtC;AACH;;AACD,QAAIU,GAAG,CAACT,kBAAJ,KAA2BP,SAA/B,EAA0C;AACtCiB,MAAAA,SAAS,CAACV,kBAAV,GAA+BnB,cAAc,CAACmB,kBAA9C;AACH,KAFD,MAGK;AACDU,MAAAA,SAAS,CAACV,kBAAV,GAA+BS,GAAG,CAACT,kBAAnC;AACH;;AACD,QAAIS,GAAG,CAACR,qBAAR,EAA+B;AAC3BS,MAAAA,SAAS,CAACT,qBAAV,GAAkCnB,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkBvC,+BAAlB,EAAmDqC,GAAG,CAACR,qBAAvD,CAAlC;AACH;;AACD,SAAKE,SAAL,CAAekB,GAAf,CAAmBlL,EAAnB,EAAuBuK,SAAvB;AACH;;AACDJ,EAAAA,eAAe,CAACnK,EAAD,EAAK;AAChB,QAAI,CAAC,KAAKgK,SAAL,CAAemB,GAAf,CAAmBnL,EAAnB,CAAL,EAA6B;AACzB,WAAKgK,SAAL,CAAekB,GAAf,CAAmBlL,EAAnB,EAAuB0I,cAAvB;AACH;AACJ;;AApOe;;AAsOpBqB,aAAa,CAACxK,IAAd;AAAA,mBAA0GwK,aAA1G;AAAA;;AACAA,aAAa,CAACqB,KAAd,kBA5tBsGpQ,EA4tBtG;AAAA,SAA8G+O,aAA9G;AAAA,WAA8GA,aAA9G;AAAA,cAAyI;AAAzI;;AACA;AAAA,qDA7tBsG/O,EA6tBtG,mBAA2F+O,aAA3F,EAAsH,CAAC;AAC3GtK,IAAAA,IAAI,EAAEtE,UADqG;AAE3GuE,IAAAA,IAAI,EAAE,CAAC;AAAE2L,MAAAA,UAAU,EAAE;AAAd,KAAD;AAFqG,GAAD,CAAtH;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASR,sBAAT,CAAgC1B,kBAAhC,EAAoD;AAChD,QAAMmC,oBAAoB,GAAG3C,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9B,cAAc,CAACS,kBAAjC,EAAqDA,kBAArD,CAA7B;;AACA,MAAImC,oBAAoB,CAACzG,MAArB,YAAuChB,UAA3C,EAAuD;AACnD,QAAIyH,oBAAoB,CAAC3G,QAArB,KAAkCT,oBAAoB,CAACU,GAAvD,IAA8D0G,oBAAoB,CAAC3G,QAArB,KAAkCT,oBAAoB,CAACqH,MAAzH,EAAiI;AAC7H,YAAM,IAAI3K,KAAJ,CAAU,mDAAV,CAAN;AACH;;AACD,QAAI,CAAC0K,oBAAoB,CAACzG,MAAtB,IAAgC,CAACyG,oBAAoB,CAACzG,MAArB,CAA4Bd,WAAjE,EAA8E;AAC1E,YAAM,IAAInD,KAAJ,CAAU,2CAAV,CAAN;AACH;AACJ;;AACD,MAAI0K,oBAAoB,CAACzG,MAArB,YAAuCZ,UAA3C,EAAuD;AACnD,QAAIqH,oBAAoB,CAAC3G,QAArB,KAAkCT,oBAAoB,CAACsH,IAA3D,EAAiE;AAC7D,YAAM,IAAI5K,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACD,QAAI,CAAC0K,oBAAoB,CAACzG,MAAtB,IAAgC,CAACyG,oBAAoB,CAACzG,MAArB,CAA4Bd,WAAjE,EAA8E;AAC1E,YAAM,IAAInD,KAAJ,CAAU,2CAAV,CAAN;AACH,KANkD,CAOnD;;;AACA0K,IAAAA,oBAAoB,CAACzG,MAArB,CAA4Bd,WAA5B,CAAwCU,IAAxC,GAA+C,IAA/C;AACH;;AACD,SAAO6G,oBAAP;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMG,WAAW,GAAG,IAAIrQ,cAAJ,CAAmB,aAAnB,CAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMsQ,QAAQ,GAAG;AACbC,EAAAA,GAAG,EAAErO,QADQ;AAEbsO,EAAAA,UAAU,EAAElO,eAFC;AAGbmO,EAAAA,WAAW,EAAErO,gBAHA;AAIbsO,EAAAA,QAAQ,EAAElO,aAJG;AAKbmO,EAAAA,UAAU,EAAEjO;AALC,CAAjB;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,MAAMkO,uBAAN,CAA8B;AAC1BxN,EAAAA,WAAW,GAAG;AACV;AACR;AACA;AACA;AACQ,SAAKyN,eAAL,GAAuB9H,WAAW,CAACgB,QAAnC;AACA;AACR;AACA;AACA;;AACQ,SAAK+G,WAAL,GAAmB/H,WAAW,CAACgI,IAA/B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,eAAL,GAAuBjI,WAAW,CAACkI,QAAnC;AACA;AACR;AACA;AACA;;AACQ,SAAKC,WAAL,GAAmBnI,WAAW,CAACoI,IAA/B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,mBAAL,GAA2BrI,WAAW,CAACsI,aAAvC;AACA;AACR;AACA;AACA;;AACQ,SAAKC,cAAL,GAAsBvI,WAAW,CAACwI,OAAlC;AACA;AACR;AACA;AACA;;AACQ,SAAKC,uBAAL,GAA+BzI,WAAW,CAAC0I,iBAA3C;AACH;;AArCyB;;AAuC9Bb,uBAAuB,CAACzM,IAAxB;AAAA,mBAAoHyM,uBAApH;AAAA;;AACAA,uBAAuB,CAACxM,IAAxB,kBAx3BsGxE,EAw3BtG;AAAA,QAAwGgR,uBAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAx3BsGhR,MAAAA,EAw3B4K,4BAAlR;AAx3BsGA,MAAAA,EAw3BqT,8BAA3Z;AAx3BsGA,MAAAA,EAw3B4W,wFAAld;AAx3BsGA,MAAAA,EAw3BwpB,wFAA9vB;AAx3BsGA,MAAAA,EAw3BgxB,wFAAt3B;AAx3BsGA,MAAAA,EAw3Bg5B,wFAAt/B;AAx3BsGA,MAAAA,EAw3BwgC,wFAA9mC;AAx3BsGA,MAAAA,EAw3Bm2C,wFAAz8C;AAx3BsGA,MAAAA,EAw3B4/C,wFAAlmD;AAx3BsGA,MAAAA,EAw3BqtD,wBAA3zD;AAx3BsGA,MAAAA,EAw3BsuD,eAA50D;AAAA;;AAAA;AAx3BsGA,MAAAA,EAw3B0P,0GAAhW;AAx3BsGA,MAAAA,EAw3BiL,oHAAvR;AAx3BsGA,MAAAA,EAw3BmU,aAAza;AAx3BsGA,MAAAA,EAw3BmU,kFAAza;AAx3BsGA,MAAAA,EAw3B2X,aAAje;AAx3BsGA,MAAAA,EAw3B2X,gDAAje;AAx3BsGA,MAAAA,EAw3BuqB,aAA7wB;AAx3BsGA,MAAAA,EAw3BuqB,4CAA7wB;AAx3BsGA,MAAAA,EAw3B+xB,aAAr4B;AAx3BsGA,MAAAA,EAw3B+xB,gDAAr4B;AAx3BsGA,MAAAA,EAw3B+5B,aAArgC;AAx3BsGA,MAAAA,EAw3B+5B,4CAArgC;AAx3BsGA,MAAAA,EAw3BuhC,aAA7nC;AAx3BsGA,MAAAA,EAw3BuhC,oDAA7nC;AAx3BsGA,MAAAA,EAw3Bk3C,aAAx9C;AAx3BsGA,MAAAA,EAw3Bk3C,+CAAx9C;AAx3BsGA,MAAAA,EAw3B2gD,aAAjnD;AAx3BsGA,MAAAA,EAw3B2gD,wDAAjnD;AAAA;AAAA;AAAA,eAAkzRiB,EAAE,CAAC6Q,QAArzR,EAAu3R7Q,EAAE,CAAC8Q,YAA13R;AAAA;AAAA;AAAA;;AACA;AAAA,qDAz3BsG/R,EAy3BtG,mBAA2FgR,uBAA3F,EAAgI,CAAC;AACrHvM,IAAAA,IAAI,EAAExE,SAD+G;AAErHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,oBAAZ;AAAkCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAA3E;AAAmFF,MAAAA,QAAQ,EAAE,okDAA7F;AAAmqDoN,MAAAA,MAAM,EAAE,CAAC,m+DAAD,EAAs+D,grCAAt+D,EAAwpG,uiBAAxpG,EAAisH,gfAAjsH,EAAmrI,wqCAAnrI,EAA61K,utBAA71K,EAAsjM,q4BAAtjM;AAA3qD,KAAD;AAF+G,GAAD,CAAhI,QAG4B;AAAE3G,IAAAA,aAAa,EAAE,CAAC;AAC9B5G,MAAAA,IAAI,EAAEpE;AADwB,KAAD,CAAjB;AAEZyN,IAAAA,mBAAmB,EAAE,CAAC;AACtBrJ,MAAAA,IAAI,EAAEpE;AADgB,KAAD;AAFT,GAH5B;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAM4R,2BAAN,CAAkC;AAC9BzO,EAAAA,WAAW,GAAG;AACV,SAAK0O,kBAAL,GAA0B,IAAI5R,YAAJ,EAA1B;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACI6R,EAAAA,SAAS,CAACC,CAAD,EAAI;AACT,QAAI,CAAC,KAAKC,MAAV,EAAkB;AACd;AACH;;AACD,SAAKH,kBAAL,CAAwBI,IAAxB,CAA6BF,CAAC,CAAChO,IAA/B;AACH;;AAf6B;;AAiBlC6N,2BAA2B,CAAC1N,IAA5B;AAAA,mBAAwH0N,2BAAxH;AAAA;;AACAA,2BAA2B,CAACM,IAA5B,kBA36BsGvS,EA26BtG;AAAA,QAA4GiS,2BAA5G;AAAA;AAAA;AAAA;AA36BsGjS,MAAAA,EA26BtG;AAAA,eAA4G,qBAA5G;AAAA,gBA36BsGA,EA26BtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AAAA,qDA56BsGA,EA46BtG,mBAA2FiS,2BAA3F,EAAoI,CAAC;AACzHxN,IAAAA,IAAI,EAAElE,SADmH;AAEzHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAFmH,GAAD,CAApI,QAK4B;AAAE0N,IAAAA,MAAM,EAAE,CAAC;AACvB5N,MAAAA,IAAI,EAAEpE;AADiB,KAAD,CAAV;AAEZ6R,IAAAA,kBAAkB,EAAE,CAAC;AACrBzN,MAAAA,IAAI,EAAEjE;AADe,KAAD,CAFR;AAIZ2R,IAAAA,SAAS,EAAE,CAAC;AACZ1N,MAAAA,IAAI,EAAEhE,YADM;AAEZiE,MAAAA,IAAI,EAAE,CAAC,gBAAD,EAAmB,CAAC,QAAD,CAAnB;AAFM,KAAD;AAJC,GAL5B;AAAA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM8N,sBAAN,CAA6B;AACzBhP,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACA,SAAKC,eAAL,GAAuB,IAAIrS,YAAJ,EAAvB;AACH;;AACDsS,EAAAA,OAAO,GAAG;AACN,QAAI,CAAC,KAAKC,WAAV,EAAuB;AACnB,WAAKF,eAAL,CAAqBL,IAArB,CAA0B,KAA1B;AACA;AACH;;AACD,SAAKG,QAAL,CAAcK,YAAd,CAA2B,KAAKJ,EAAL,CAAQK,aAAnC,EAAkD,KAAlD,EAAyD,KAAKF,WAAL,CAAiBG,QAAjB,EAAzD;AACA,SAAKL,eAAL,CAAqBL,IAArB,CAA0B,IAA1B;AACH;;AAbwB;;AAe7BE,sBAAsB,CAACjO,IAAvB;AAAA,mBAAmHiO,sBAAnH,EAn+BsGxS,EAm+BtG,mBAA2JA,EAAE,CAACiT,SAA9J,GAn+BsGjT,EAm+BtG,mBAAoLA,EAAE,CAACkT,UAAvL;AAAA;;AACAV,sBAAsB,CAACD,IAAvB,kBAp+BsGvS,EAo+BtG;AAAA,QAAuGwS,sBAAvG;AAAA;AAAA;AAAA;AAp+BsGxS,MAAAA,EAo+BtG;AAAA,eAAuG,aAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AAAA,qDAr+BsGA,EAq+BtG,mBAA2FwS,sBAA3F,EAA+H,CAAC;AACpH/N,IAAAA,IAAI,EAAElE,SAD8G;AAEpHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAF8G,GAAD,CAA/H,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAEL,IAAAA,WAAW,EAAE,CAAC;AACvHpO,MAAAA,IAAI,EAAEpE;AADiH,KAAD,CAAf;AAEvGsS,IAAAA,eAAe,EAAE,CAAC;AAClBlO,MAAAA,IAAI,EAAEjE;AADY,KAAD,CAFsF;AAIvGoS,IAAAA,OAAO,EAAE,CAAC;AACVnO,MAAAA,IAAI,EAAEhE,YADI;AAEViE,MAAAA,IAAI,EAAE,CAAC,OAAD;AAFI,KAAD;AAJ8F,GALvH;AAAA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMyO,aAAN,CAAoB;AAChB3P,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,CAAC,KAAKE,UAAV,EAAsB;AAClB;AACH,KAHQ,CAIT;;;AACA,QAAI,KAAKA,UAAL,CAAgBjK,KAApB,EAA2B;AACvB,WAAKmJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,OAA9C,EAAuD,KAAKQ,UAAL,CAAgBjK,KAAvE;AACH;;AACD,QAAI,KAAKiK,UAAL,CAAgBlK,MAApB,EAA4B;AACxB,WAAKoJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,QAA9C,EAAwD,KAAKQ,UAAL,CAAgBlK,MAAxE;AACH;AACJ;;AAnCe;;AAqCpB8J,aAAa,CAAC5O,IAAd;AAAA,mBAA0G4O,aAA1G,EAljCsGnT,EAkjCtG,mBAAyIA,EAAE,CAACiT,SAA5I,GAljCsGjT,EAkjCtG,mBAAkKA,EAAE,CAACkT,UAArK;AAAA;;AACAC,aAAa,CAACZ,IAAd,kBAnjCsGvS,EAmjCtG;AAAA,QAA8FmT,aAA9F;AAAA;AAAA;AAAA;AAAA;AAAA,aAnjCsGnT,EAmjCtG;AAAA;;AACA;AAAA,qDApjCsGA,EAojCtG,mBAA2FmT,aAA3F,EAAsH,CAAC;AAC3G1O,IAAAA,IAAI,EAAElE,SADqG;AAE3GmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAFqG,GAAD,CAAtH,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAEK,IAAAA,UAAU,EAAE,CAAC;AACtH9O,MAAAA,IAAI,EAAEpE;AADgH,KAAD;AAAd,GALvH;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMoT,oBAAN,CAA2B;AACvBjQ,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,CAAC,KAAK/H,WAAV,EAAuB;AACnB;AACH;;AACD,QAAI,KAAKA,WAAL,CAAiBN,KAArB,EAA4B;AACxB,WAAKyH,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,YAA9C,EAA4D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBX,OAAnF;AACA,WAAKoI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,OAA9C,EAAuD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBV,SAA9E;;AACA,UAAI,KAAKgB,WAAL,CAAiBN,KAAjB,CAAuB1B,KAA3B,EAAkC;AAC9B,aAAKmJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,OAA9C,EAAuD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB1B,KAA9E;AACH;;AACD,UAAI,KAAKgC,WAAL,CAAiBN,KAAjB,CAAuB3B,MAA3B,EAAmC;AAC/B,aAAKoJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,QAA9C,EAAwD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB3B,MAA/E;AACH;;AACD,UAAI,KAAKiC,WAAL,CAAiBN,KAAjB,CAAuB0I,QAA3B,EAAqC;AACjC,aAAKjB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,UAA9C,EAA0D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB0I,QAAjF;AACH;;AACD,UAAI,KAAKpI,WAAL,CAAiBN,KAAjB,CAAuB2I,GAA3B,EAAgC;AAC5B,aAAKlB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,KAA9C,EAAqD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB2I,GAA5E;AACH;;AACD,UAAI,KAAKrI,WAAL,CAAiBN,KAAjB,CAAuB4I,MAA3B,EAAmC;AAC/B,aAAKnB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,QAA9C,EAAwD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB4I,MAA/E;AACH;;AACD,UAAI,KAAKtI,WAAL,CAAiBN,KAAjB,CAAuB6I,IAA3B,EAAiC;AAC7B,aAAKpB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,MAA9C,EAAsD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB6I,IAA7E;AACH;;AACD,UAAI,KAAKvI,WAAL,CAAiBN,KAAjB,CAAuB8I,KAA3B,EAAkC;AAC9B,aAAKrB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,OAA9C,EAAuD,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuB8I,KAA9E;AACH;;AACD,WAAKrB,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,YAA9C,EAA4D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBT,SAAvB,GAAmC,KAAKe,WAAL,CAAiBN,KAAjB,CAAuBT,SAA1D,GAAsE,KAAlI;AACA,WAAKkI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,eAA9C,EAA+D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBR,YAAvB,GAAsC,KAAKc,WAAL,CAAiBN,KAAjB,CAAuBR,YAA7D,GAA4E,KAA3I;AACA,WAAKiI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,aAA9C,EAA6D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBP,UAAvB,GAAoC,KAAKa,WAAL,CAAiBN,KAAjB,CAAuBP,UAA3D,GAAwE,KAArI;AACA,WAAKgI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,cAA9C,EAA8D,KAAKzH,WAAL,CAAiBN,KAAjB,CAAuBN,WAAvB,GAAqC,KAAKY,WAAL,CAAiBN,KAAjB,CAAuBN,WAA5D,GAA0E,KAAxI;AACH;AACJ;;AAzDsB;;AA2D3B+I,oBAAoB,CAAClP,IAArB;AAAA,mBAAiHkP,oBAAjH,EAlpCsGzT,EAkpCtG,mBAAuJA,EAAE,CAACiT,SAA1J,GAlpCsGjT,EAkpCtG,mBAAgLA,EAAE,CAACkT,UAAnL;AAAA;;AACAO,oBAAoB,CAAClB,IAArB,kBAnpCsGvS,EAmpCtG;AAAA,QAAqGyT,oBAArG;AAAA;AAAA;AAAA;AAAA;AAAA,aAnpCsGzT,EAmpCtG;AAAA;;AACA;AAAA,qDAppCsGA,EAopCtG,mBAA2FyT,oBAA3F,EAA6H,CAAC;AAClHhP,IAAAA,IAAI,EAAElE,SAD4G;AAElHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAF4G,GAAD,CAA7H,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAE5H,IAAAA,WAAW,EAAE,CAAC;AACvH7G,MAAAA,IAAI,EAAEpE;AADiH,KAAD;AAAf,GALvH;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM0T,qBAAN,SAAoCxQ,mBAApC,CAAwD;AACpD;AACA;AACAC,EAAAA,WAAW,CAACwQ,UAAD,EAAaC,MAAb,EAAqBC,GAArB,EAA0BC,aAA1B,EAAyC;AAChD;AACA,SAAKH,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;;AACQ,SAAKC,SAAL,GAAiB,IAAI9T,YAAJ,EAAjB;AACA;AACR;AACA;;AACQ,SAAK+T,WAAL,GAAmB,IAAI/T,YAAJ,EAAnB;AACA;AACR;AACA;;AACQ,SAAKgU,YAAL,GAAoB,IAAIhU,YAAJ,EAApB;AACA;AACR;AACA;;AACQ,SAAKiU,MAAL,GAAc,IAAI7S,OAAJ,EAAd;AACA;AACR;AACA;;AACQ,SAAK8S,KAAL,GAAa,IAAI9S,OAAJ,EAAb;AACA;AACR;AACA;AACA;;AACQ,SAAK+S,YAAL,GAAoBjP,MAAM,CAACkP,MAA3B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,WAAL,GAAmBnP,MAAM,CAACoP,KAA1B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,cAAL,GAAsBrP,MAAM,CAACsP,QAA7B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,YAAL,GAAoB,KAApB;AACA;AACR;AACA;AACA;;AACQ,SAAKC,WAAL,GAAmB,KAAnB;AACA;AACR;AACA;AACA;;AACQ,SAAKlF,OAAL,GAAe,IAAf;AACA;AACR;AACA;;AACQ,SAAKmF,YAAL,GAAoB;AAChBC,MAAAA,IAAI,EAAE,WADU;AAEhBC,MAAAA,KAAK,EAAE,YAFS;AAGhBC,MAAAA,EAAE,EAAE,SAHY;AAIhBC,MAAAA,IAAI,EAAE;AAJU,KAApB;AAMH;AACD;AACJ;AACA;;;AACIC,EAAAA,YAAY,GAAG;AACX;AACA,QAAI,CAAC,KAAKzH,WAAN,IAAqB,CAAC,KAAKA,WAAL,CAAiBP,UAA3C,EAAuD;AACnD;AACH;;AACD,QAAI,CAAC,KAAKO,WAAL,CAAiBP,UAAjB,CAA4BlB,YAAjC,EAA+C;AAC3C;AACH;;AACD,SAAKmJ,YAAL;AACH;AACD;AACJ;AACA;;;AACIC,EAAAA,YAAY,GAAG;AACX;AACA,QAAI,CAAC,KAAK3H,WAAN,IAAqB,CAAC,KAAKA,WAAL,CAAiBP,UAA3C,EAAuD;AACnD;AACH;;AACD,QAAI,CAAC,KAAKO,WAAL,CAAiBP,UAAjB,CAA4BlB,YAA7B,IAA6C,CAAC,KAAKyB,WAAL,CAAiBP,UAAjB,CAA4BpB,QAA9E,EAAwF;AACpF;AACH;;AACD,SAAKuJ,YAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIrC,EAAAA,QAAQ,GAAG;AACP,UAAMsC,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAC1H,aAA7B,EAA4C;AACxC,YAAM,IAAIpI,KAAJ,CAAU,sEAAV,CAAN;AACH;;AACD,SAAKiI,WAAL,GAAmB6H,SAAS,CAAC7H,WAA7B;AACA,SAAKC,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;AACA,SAAKM,kBAAL,GAA0BsH,SAAS,CAACtH,kBAApC;AACA,SAAKC,cAAL,GAAsBqH,SAAS,CAACrH,cAAhC;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIiF,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,UAAMD,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,UAAMgQ,MAAM,GAAGD,OAAO,CAACC,MAAvB;AACA,UAAMC,YAAY,GAAGF,OAAO,CAACE,YAA7B;;AACA,QAAIA,YAAY,IAAIA,YAAY,CAACC,aAAb,KAA+BD,YAAY,CAACE,YAAhE,EAA8E;AAC1E,WAAKC,aAAL;AACH,KAFD,MAGK,IAAIJ,MAAM,IAAIA,MAAM,CAACE,aAAP,KAAyBF,MAAM,CAACG,YAA9C,EAA4D;AAC7D,WAAKC,aAAL;AACH;;AACD,UAAMnI,WAAW,GAAG8H,OAAO,CAAC9H,WAA5B;;AACA,QAAIA,WAAW,IAAIA,WAAW,CAACiI,aAAZ,KAA8BjI,WAAW,CAACkI,YAA7D,EAA2E;AACvE,WAAKlI,WAAL,GAAmB6H,SAAS,CAAC7H,WAA7B;AACH;AACJ;AACD;AACJ;AACA;;;AACIoI,EAAAA,kBAAkB,GAAG;AACjB;AACA;AACA,QAAI/U,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,WAAKC,MAAL,CAAYiC,iBAAZ,CAA8B,MAAM;AAChC,aAAK3B,MAAL,CACK4B,IADL,CACUvU,GAAG,CAAC,MAAM,KAAKiM,WAAL,IAAoB,KAAKA,WAAL,CAAiBP,UAArC,IAAmD,KAAKO,WAAL,CAAiBP,UAAjB,CAA4BpB,QAA/E,IAA2F,KAAK2B,WAAL,CAAiBP,UAAjB,CAA4BnB,QAA9H,CADb,EAEA;AACAtK,QAAAA,MAAM,CAAEsK,QAAD,IAAcA,QAAQ,GAAG,CAA1B,CAHN,EAGoCrK,SAAS,CAACqK,QAAQ,IAAIxK,KAAK,CAACwK,QAAD,CAAL,CAAgBgK,IAAhB,CAAqBpU,SAAS,CAAC,KAAKyS,KAAN,CAA9B,CAAb,CAH7C,EAIK4B,SAJL,CAIe,MAAM,KAAKnC,MAAL,CAAYoC,GAAZ,CAAgB,MAAM;AACvC,cAAI,CAAC,KAAKrB,WAAV,EAAuB;AACnB,iBAAKsB,SAAL,CAAe9Q,MAAM,CAAC+Q,QAAtB;AACH;;AACD,eAAKrC,GAAL,CAASsC,YAAT;AACH,SALoB,CAJrB;AAUA,aAAKjC,MAAL,CAAYkC,IAAZ;AACH,OAZD;AAaH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,UAAU,CAACtS,IAAD,EAAO;AACb,UAAMuS,GAAG,GAAG,KAAKtI,cAAL,IAAuB,KAAKA,cAAL,CAAoBsI,GAA3C,GAAiD,KAAKtI,cAAL,CAAoBsI,GAArE,GAA2EjG,QAAQ,CAACC,GAAhG;AACA,UAAMmD,KAAK,GAAG,KAAKzF,cAAL,IAAuB,KAAKA,cAAL,CAAoByF,KAA3C,GAAmD,KAAKzF,cAAL,CAAoByF,KAAvE,GAA+EpD,QAAQ,CAACG,WAAtG;AACA,UAAMgD,IAAI,GAAG,KAAKxF,cAAL,IAAuB,KAAKA,cAAL,CAAoBwF,IAA3C,GAAkD,KAAKxF,cAAL,CAAoBwF,IAAtE,GAA6EnD,QAAQ,CAACE,UAAnG;;AACA,YAAQxM,IAAR;AACI,WAAKuS,GAAL;AACI,aAAKrC,YAAL,CAAkBhC,IAAlB,CAAuB,IAAI/M,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BQ,MAAM,CAACsP,QAApC,EAA8C,IAA9C,CAAvB;AACA;;AACJ,WAAKhB,KAAL;AACI,aAAKwC,SAAL,CAAe9Q,MAAM,CAACsP,QAAtB;AACA;;AACJ,WAAKjB,IAAL;AACI,aAAK+C,SAAL,CAAepR,MAAM,CAACsP,QAAtB;AACA;AATR;AAWH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACI+B,EAAAA,uBAAuB,CAACnR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AAC/C,QAAI,CAAC,KAAKzH,kBAAN,IAA4B,CAAC,KAAKA,kBAAL,CAAwB9C,WAAzD,EAAsE;AAClE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,UAAMkR,uBAAuB,GAAG,CAACpR,KAAK,CAACT,KAAP,IAAgB,CAACS,KAAK,CAACT,KAAN,CAAYqG,WAA7B,IAA4C5F,KAAK,CAACT,KAAN,CAAYqG,WAAZ,KAA4B,EAAxG;;AACA,YAAQ,KAAK8C,kBAAL,CAAwB9C,WAAxB,CAAoC3B,QAA5C;AACI,WAAK5D,mBAAmB,CAACgR,aAAzB;AACI,eAAOD,uBAAuB,GAAG,EAAH,GAAQpR,KAAK,CAACT,KAAN,CAAYqG,WAAZ,GAA0B,EAAhE;;AACJ,WAAKvF,mBAAmB,CAACmF,aAAzB;AACI,eAAO,EAAP;;AACJ;AACI;AACA,eAAO,KAAK8L,oBAAL,CAA0BtR,KAA1B,EAAiCoR,uBAAjC,CAAP;AAPR;AASH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIG,EAAAA,wBAAwB,CAACvR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AAChD,QAAI,CAACnQ,KAAL,EAAY;AACR,aAAO,EAAP;AACH;;AACD,WAAOA,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYqG,WAA3B,GAAyC5F,KAAK,CAACT,KAAN,CAAYqG,WAArD,GAAoE,SAAQ7F,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAAR,GAA+B,CAAE,EAApH;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIsB,EAAAA,iBAAiB,CAACxR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AACzC,QAAI,CAAC,KAAKzH,kBAAN,IAA4B,CAAC,KAAKA,kBAAL,CAAwB9C,WAAzD,EAAsE;AAClE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,UAAMkR,uBAAuB,GAAG,CAACpR,KAAK,CAACT,KAAP,IAAgB,CAACS,KAAK,CAACT,KAAN,CAAYqG,WAA7B,IAA4C5F,KAAK,CAACT,KAAN,CAAYqG,WAAZ,KAA4B,EAAxG;AACA,UAAMA,WAAW,GAAG,KAAK0L,oBAAL,CAA0BtR,KAA1B,EAAiCoR,uBAAjC,CAApB;AACA,WAAOxL,WAAP;AACH;AACD;AACJ;AACA;AACA;;;AACI6L,EAAAA,mBAAmB,GAAG;AAClB,QAAI,CAAC,KAAKtJ,WAAV,EAAuB;AACnB,YAAM,IAAIjI,KAAJ,CAAU,sDAAV,CAAN;AACH;;AACD,UAAMwR,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;;AACA,QAAIwB,YAAY,KAAK,CAAjB,IAAsB,KAAKvJ,WAAL,CAAiBR,QAA3C,EAAqD;AACjD;AACA;AACA;AACA,aAAO,KAAKuI,MAAL,CAAY,KAAKA,MAAL,CAAYpM,MAAZ,GAAqB,CAAjC,CAAP;AACH;;AACD,SAAK6N,gBAAL,CAAsBD,YAAtB;AACA,WAAO,KAAKxB,MAAL,CAAY0B,IAAI,CAACC,GAAL,CAASH,YAAY,GAAG,CAAxB,EAA2B,CAA3B,CAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;;;AACII,EAAAA,oBAAoB,GAAG;AACnB,QAAI,CAAC,KAAK3J,WAAV,EAAuB;AACnB,YAAM,IAAIjI,KAAJ,CAAU,sDAAV,CAAN;AACH;;AACD,UAAMwR,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;;AACA,QAAIwB,YAAY,KAAK,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAAtC,IAA2C,KAAKqE,WAAL,CAAiBR,QAAhE,EAA0E;AACtE;AACA;AACA;AACA,aAAO,KAAKuI,MAAL,CAAY,CAAZ,CAAP;AACH;;AACD,SAAKyB,gBAAL,CAAsBD,YAAtB;AACA,WAAO,KAAKxB,MAAL,CAAY0B,IAAI,CAACG,GAAL,CAASL,YAAY,GAAG,CAAxB,EAA2B,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAAhD,CAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIkO,EAAAA,YAAY,CAAC/T,KAAD,EAAQ0B,MAAM,GAAGG,MAAM,CAACkP,MAAxB,EAAgC;AACxC,QAAI,CAAC,KAAKtG,kBAAV,EAA8B;AAC1B,YAAM,IAAIxI,KAAJ,CAAU,6DAAV,CAAN;AACH,KAHuC,CAIxC;AACA;;;AACA,QAAIP,MAAM,KAAKG,MAAM,CAACoP,KAAlB,IAA2B,CAAC,KAAKxG,kBAAL,CAAwBhD,eAAxD,EAAyE;AACrE;AACA;AACH;;AACD,UAAM9F,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKkT,SAAL,CAAejR,MAAf;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIsS,EAAAA,iBAAiB,CAACjU,SAAD,EAAYC,KAAZ,EAAmB0B,MAAM,GAAGG,MAAM,CAACkP,MAAnC,EAA2CkD,OAAO,GAAG,KAArD,EAA4D;AACzE,QAAIA,OAAJ,EAAa;AACT;AACH;;AACD,UAAMtS,MAAM,GAAG,MAAM7B,qBAAN,CAA4BC,SAA5B,EAAuCC,KAAvC,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKkT,SAAL,CAAejR,MAAf;AACH,KAFD,MAGK,IAAIC,MAAM,KAAKjC,IAAf,EAAqB;AACtB,WAAKuT,SAAL,CAAevR,MAAf;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIuR,EAAAA,SAAS,CAACvR,MAAM,GAAGG,MAAM,CAACkP,MAAjB,EAAyB;AAC9B;AACA,QAAI,KAAKmD,gBAAL,CAAsB,CAAtB,CAAJ,EAA8B;AAC1B;AACH;;AACD,UAAMjB,SAAS,GAAG,KAAKkB,YAAL,EAAlB;AACA,SAAKhI,OAAL,GAAe,CAAC8G,SAAS,CAACmB,gBAA1B;AACA,SAAK1D,WAAL,CAAiB/B,IAAjB,CAAsB,IAAI/M,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqCI,QAAQ,CAACmR,SAAD,EAAY,KAAKhB,MAAjB,CAA7C,CAAtB;AACA,SAAKrB,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIH,EAAAA,SAAS,CAACjR,MAAM,GAAGG,MAAM,CAACkP,MAAjB,EAAyB;AAC9B;AACA,QAAI,KAAKmD,gBAAL,CAAsB,KAAKjC,MAAL,CAAYpM,MAAZ,GAAqB,CAA3C,CAAJ,EAAmD;AAC/C;AACH;;AACD,UAAM8M,SAAS,GAAG,KAAK0B,YAAL,EAAlB;AACA,SAAKlI,OAAL,GAAe,CAACwG,SAAS,CAACyB,gBAA1B;AACA,SAAK1D,WAAL,CAAiB/B,IAAjB,CAAsB,IAAI/M,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqCI,QAAQ,CAAC6Q,SAAD,EAAY,KAAKV,MAAjB,CAA7C,CAAtB;AACA,SAAKrB,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIwB,EAAAA,WAAW,CAACtU,KAAD,EAAQ;AACf,UAAMuU,aAAa,GAAG;AAClBC,MAAAA,MAAM,EAAE,IADU;AAElBC,MAAAA,KAAK,EAAE3S,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAFG;AAGlB5Q,MAAAA,EAAE,EAAE,KAAK6Q,YAAL,CAAkB7Q;AAHJ,KAAtB;AAKA,SAAKoP,SAAL,CAAe9B,IAAf,CAAoB4F,aAApB;AACA,SAAKpI,OAAL,GAAe,KAAf;AACH;AACD;AACJ;AACA;AACA;;;AACIuI,EAAAA,KAAK,CAAChT,MAAM,GAAG,KAAK4P,YAAL,CAAkBE,KAA5B,EAAmC;AACpC,QAAI,CAAC,KAAK/G,kBAAV,EAA8B;AAC1B,YAAM,IAAIxI,KAAJ,CAAU,6DAAV,CAAN;AACH;;AACD,YAAQP,MAAR;AACI,WAAK,KAAK4P,YAAL,CAAkBE,KAAvB;AACI,YAAI,KAAK/G,kBAAL,CAAwB5C,WAA5B,EAAyC;AACrC,eAAKoL,SAAL,CAAepR,MAAM,CAAC8S,KAAtB;AACH,SAFD,MAGK;AACD,eAAKhC,SAAL,CAAe9Q,MAAM,CAAC8S,KAAtB;AACH;;AACD;;AACJ,WAAK,KAAKrD,YAAL,CAAkBC,IAAvB;AACI,YAAI,KAAK9G,kBAAL,CAAwB5C,WAA5B,EAAyC;AACrC,eAAK8K,SAAL,CAAe9Q,MAAM,CAAC8S,KAAtB;AACH,SAFD,MAGK;AACD,eAAK1B,SAAL,CAAepR,MAAM,CAAC8S,KAAtB;AACH;;AACD;AACJ;AACA;AACA;AACA;AApBJ;AAsBH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,gBAAgB,CAAC7S,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AACxC,WAAOpQ,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAAf;AACH;AACD;AACJ;AACA;;;AACIH,EAAAA,YAAY,GAAG;AACX,SAAKlB,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;;;AACIlB,EAAAA,YAAY,GAAG;AACX,SAAKf,KAAL,CAAWiC,IAAX;AACH;AACD;AACJ;AACA;AACA;;;AACI+B,EAAAA,WAAW,GAAG;AACV,SAAKjD,YAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI8B,EAAAA,gBAAgB,CAACD,YAAD,EAAe;AAC3B,QAAI,KAAKxB,MAAL,CAAYpM,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,WAAKuL,YAAL,GAAoB,IAApB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAKd,GAAL,CAASsC,YAAT;AACA;AACH;;AACD,QAAI,CAAC,KAAK3I,WAAN,IAAqB,KAAKA,WAAL,CAAiBR,QAAjB,KAA8B,IAAvD,EAA6D;AACzD;AACA,WAAK0H,YAAL,GAAoB,KAApB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACA,WAAKd,GAAL,CAASsC,YAAT;AACH,KALD,MAMK;AACD;AACA,cAAQY,YAAR;AACI,aAAK,CAAL;AACI,eAAKrC,YAAL,GAAoB,IAApB;AACA,eAAKC,WAAL,GAAmB,KAAnB;AACA,eAAKd,GAAL,CAASsC,YAAT;AACA;;AACJ,aAAK,KAAKZ,MAAL,CAAYpM,MAAZ,GAAqB,CAA1B;AACI,eAAKuL,YAAL,GAAoB,KAApB;AACA,eAAKC,WAAL,GAAmB,IAAnB;AACA,eAAKd,GAAL,CAASsC,YAAT;AACA;;AACJ;AACI,eAAKzB,YAAL,GAAoB,KAApB;AACA,eAAKC,WAAL,GAAmB,KAAnB;AACA,eAAKd,GAAL,CAASsC,YAAT;AACA;AAfR;AAiBH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIqB,EAAAA,gBAAgB,CAACY,aAAD,EAAgB;AAC5B,WAAO,CAAC,CAAC,KAAK5K,WAAP,IAAsB,KAAKA,WAAL,CAAiBR,QAAjB,KAA8B,KAApD,IAA6D5H,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,KAA6C6C,aAAjH;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIT,EAAAA,YAAY,GAAG;AACX,UAAMZ,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;AACA,QAAI8C,QAAQ,GAAG,CAAf;;AACA,QAAItB,YAAY,IAAI,CAAhB,IAAqBA,YAAY,GAAG,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5DkP,MAAAA,QAAQ,GAAGtB,YAAY,GAAG,CAA1B;AACH,KAFD,MAGK;AACDsB,MAAAA,QAAQ,GAAG,CAAX,CADC,CACa;AACjB;;AACD,WAAO,KAAK9C,MAAL,CAAY8C,QAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIZ,EAAAA,YAAY,GAAG;AACX,UAAMV,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;AACA,QAAI8C,QAAQ,GAAG,CAAf;;AACA,QAAItB,YAAY,GAAG,CAAf,IAAoBA,YAAY,IAAI,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5DkP,MAAAA,QAAQ,GAAGtB,YAAY,GAAG,CAA1B;AACH,KAFD,MAGK;AACDsB,MAAAA,QAAQ,GAAG,KAAK9C,MAAL,CAAYpM,MAAZ,GAAqB,CAAhC,CADC,CACkC;AACtC;;AACD,WAAO,KAAKoM,MAAL,CAAY8C,QAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI1B,EAAAA,oBAAoB,CAACtR,KAAD,EAAQoR,uBAAR,EAAiC;AACjD,QAAI,CAAC,KAAK1I,kBAAN,IAA4B,CAAC,KAAKA,kBAAL,CAAwB9C,WAAzD,EAAsE;AAClE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH,KAHgD,CAIjD;;;AACA,QAAI,KAAKwI,kBAAL,CAAwB9C,WAAxB,CAAoCqN,qBAApC,IAA6D,KAAKvK,kBAAL,CAAwB9C,WAAxB,CAAoCqN,qBAApC,KAA8D,EAA/H,EAAmI;AAC/H,aAAO,KAAKvK,kBAAL,CAAwB9C,WAAxB,CAAoCqN,qBAA3C;AACH;;AACD,UAAMvB,YAAY,GAAG3R,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAA7B,CARiD,CASjD;AACA;;AACA,UAAMgD,eAAe,GAAG,KAAKxK,kBAAL,CAAwB9C,WAAxB,CAAoCT,SAApC,GAAgD,KAAKuD,kBAAL,CAAwB9C,WAAxB,CAAoCT,SAApF,GAAgG,EAAxH;AACA,UAAMgO,YAAY,GAAG,KAAKzK,kBAAL,CAAwB9C,WAAxB,CAAoCR,eAApC,GAAsD,KAAKsD,kBAAL,CAAwB9C,WAAxB,CAAoCR,eAA1F,GAA4G,EAAjI;AACA,UAAMgO,iBAAiB,GAAG1B,YAAY,GAAG,CAAf,GAAmByB,YAAnB,GAAkC,KAAKjD,MAAL,CAAYpM,MAAxE;;AACA,QAAIsN,uBAAJ,EAA6B;AACzB,aAAO8B,eAAe,GAAGE,iBAAzB;AACH;;AACD,UAAMC,kBAAkB,GAAGrT,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYqG,WAA3B,GAAyC5F,KAAK,CAACT,KAAN,CAAYqG,WAArD,GAAmE,EAA9F;AACA,UAAM0N,cAAc,GAAG,KAAK5K,kBAAL,CAAwB9C,WAAxB,CAAoCP,qBAApC,GAA4DgO,kBAAnF;AACA,WAAOH,eAAe,GAAGE,iBAAlB,GAAsCE,cAA7C;AACH;AACD;AACJ;AACA;;;AACIhD,EAAAA,aAAa,GAAG;AACZ,QAAI;AACA,UAAI,KAAK3D,MAAT,EAAiB;AACb,cAAM+F,KAAK,GAAG3S,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAtB;AACA,aAAKyB,gBAAL,CAAsBe,KAAtB;AACH;AACJ,KALD,CAMA,OAAOa,GAAP,EAAY;AACRC,MAAAA,OAAO,CAACC,KAAR,CAAc,qDAAd;AACA,YAAMF,GAAN;AACH;AACJ;;AAnhBmD;;AAqhBxDlF,qBAAqB,CAACxP,IAAtB;AAAA,mBAAkHwP,qBAAlH,EA5sDsG/T,EA4sDtG,mBAAyJU,WAAzJ,GA5sDsGV,EA4sDtG,mBAAiLA,EAAE,CAACoZ,MAApL,GA5sDsGpZ,EA4sDtG,mBAAuMA,EAAE,CAACqZ,iBAA1M,GA5sDsGrZ,EA4sDtG,mBAAwO+O,aAAxO;AAAA;;AACAgF,qBAAqB,CAACvP,IAAtB,kBA7sDsGxE,EA6sDtG;AAAA,QAAsG+T,qBAAtG;AAAA;AAAA;AAAA;AA7sDsG/T,MAAAA,EA6sDtG;AAAA,eAAsG,kBAAtG;AAAA;AAAA,eAAsG,kBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA7sDsGA,EA6sDtG,6BA7sDsGA,EA6sDtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA7sDsGA,MAAAA,EA6sD0Y,6BAAhf;AA7sDsGA,MAAAA,EA6sD+d;AAAA,eAAuB,sBAAvB;AAAA,QAArkB;AA7sDsGA,MAAAA,EA6sDqpB,4BAA3vB;AA7sDsGA,MAAAA,EA6sD6rB,0BAAnyB;AA7sDsGA,MAAAA,EA6sDu4B;AAAA,eAAU,sBAAkB,MAAlB,SAAV;AAAA;AAAA,eAAwD,sBAAkB,MAAlB,SAAxD;AAAA,QAA7+B;AA7sDsGA,MAAAA,EA6sD2+B,uBAAjlC;AA7sDsGA,MAAAA,EA6sD8rC,eAApyC;AA7sDsGA,MAAAA,EA6sD0sC,sFAAhzC;AA7sDsGA,MAAAA,EA6sDynF,eAA/tF;AA7sDsGA,MAAAA,EA6sDuoF,+BAA7uF;AA7sDsGA,MAAAA,EA6sDqtF,4BAA3zF;AA7sDsGA,MAAAA,EA6sDwyG;AAAA,eAAS,uBAAT;AAAA;AAAA,eAAmD,yCAAnD;AAAA;AAAA,eAAiG,4CAAjG;AAAA;AAAA,eAAgK,sBAAhK;AAAA;AAAA,eAA8M,sBAA9M;AAAA,QAA94G;AA7sDsGA,MAAAA,EA6sDqtF,eAA3zF;AA7sDsGA,MAAAA,EA6sDkhH,kFAAxnH;AA7sDsGA,MAAAA,EA6sD0xH,eAAh4H;AA7sDsGA,MAAAA,EA6sDyyH,4BAA/4H;AA7sDsGA,MAAAA,EA6sDk1H,sFAAx7H;AA7sDsGA,MAAAA,EA6sDwxK,wFAA93K;AA7sDsGA,MAAAA,EA6sDkjL,2BAAxpL;AA7sDsGA,MAAAA,EA6sD4vL;AAAA,eAAU,sBAAkB,OAAlB,SAAV;AAAA;AAAA,eAAyD,sBAAkB,OAAlB,SAAzD;AAAA,QAAl2L;AA7sDsGA,MAAAA,EA6sDk2L,wBAAx8L;AA7sDsGA,MAAAA,EA6sDojM,eAA1pM;AA7sDsGA,MAAAA,EA6sD4jM,eAAlqM;AA7sDsGA,MAAAA,EA6sDokM,eAA1qM;AAAA;;AAAA;AA7sDsGA,MAAAA,EA6sD2c,+HAAjjB;AA7sDsGA,MAAAA,EA6sDkhB,mHAAxnB;AA7sDsGA,MAAAA,EA6sDgsB,aAAtyB;AA7sDsGA,MAAAA,EA6sDgsB,8EAAtyB;AA7sDsGA,MAAAA,EA6sD00B,kDAAh7B;AA7sDsGA,MAAAA,EA6sDgwB,mHAAt2B;AA7sDsGA,MAAAA,EA6sDg/B,aAAtlC;AA7sDsGA,MAAAA,EA6sDg/B,mGAAtlC;AA7sDsGA,MAAAA,EA6sD0mC,iIAAhtC;AA7sDsGA,MAAAA,EA6sDytC,aAA/zC;AA7sDsGA,MAAAA,EA6sDytC,qIAA/zC;AA7sDsGA,MAAAA,EA6sDqqF,aAA3wF;AA7sDsGA,MAAAA,EA6sDqqF,kDAA3wF;AA7sDsGA,MAAAA,EA6sD6pG,aAAnwG;AA7sDsGA,MAAAA,EA6sD6pG,uHAAnwG;AA7sDsGA,MAAAA,EA6sDoxF,iKA7sDpxFA,EA6sDoxF,wNAA13F;AA7sDsGA,MAAAA,EA6sD29F,4DAAjkG;AA7sDsGA,MAAAA,EA6sD+hH,aAAroH;AA7sDsGA,MAAAA,EA6sD+hH,yDAAroH;AA7sDsGA,MAAAA,EA6sDi2H,aAAv8H;AA7sDsGA,MAAAA,EA6sDi2H,qIAAv8H;AA7sDsGA,MAAAA,EA6sDuyK,aAA74K;AA7sDsGA,MAAAA,EA6sDuyK,+KAA74K;AA7sDsGA,MAAAA,EA6sDqjL,aAA3pL;AA7sDsGA,MAAAA,EA6sDqjL,+EAA3pL;AA7sDsGA,MAAAA,EA6sDgsL,iDAAtyL;AA7sDsGA,MAAAA,EA6sDsnL,mHAA5tL;AA7sDsGA,MAAAA,EA6sDu2L,aAA78L;AA7sDsGA,MAAAA,EA6sDu2L,mGAA78L;AA7sDsGA,MAAAA,EA6sDi+L,gIAAvkM;AAAA;AAAA;AAAA,eAA4nWiS,2BAA5nW,EAA4vWhR,EAAE,CAACqY,IAA/vW,EAA60W9G,sBAA70W,EAA4gXvR,EAAE,CAACsY,OAA/gX,EAAq8WpG,aAAr8W,EAAulXM,oBAAvlX,EAAy/VzC,uBAAz/V;AAAA;AAAA;AAAA;;AACA;AAAA,qDA9sDsGhR,EA8sDtG,mBAA2F+T,qBAA3F,EAA8H,CAAC;AACnHtP,IAAAA,IAAI,EAAExE,SAD6G;AAEnHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,kBAAZ;AAAgCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAAzE;AAAiFF,MAAAA,QAAQ,EAAE,qsLAA3F;AAAkyLoN,MAAAA,MAAM,EAAE,CAAC,+8DAAD,EAAk9D,qpEAAl9D,EAAymI,0rBAAzmI;AAA1yL,KAAD;AAF6G,GAAD,CAA9H,EAG4B,YAAY;AAChC,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAE6J,SAAR;AAAmBkL,MAAAA,UAAU,EAAE,CAAC;AACxB/U,QAAAA,IAAI,EAAE9D,MADkB;AAExB+D,QAAAA,IAAI,EAAE,CAAChE,WAAD;AAFkB,OAAD;AAA/B,KAAD,EAGW;AAAE+D,MAAAA,IAAI,EAAEzE,EAAE,CAACoZ;AAAX,KAHX,EAGgC;AAAE3U,MAAAA,IAAI,EAAEzE,EAAE,CAACqZ;AAAX,KAHhC,EAGgE;AAAE5U,MAAAA,IAAI,EAAEsK;AAAR,KAHhE,CAAP;AAIH,GARL,EAQuB;AACf;AACA/J,IAAAA,EAAE,EAAE,CAAC;AACGP,MAAAA,IAAI,EAAEpE;AADT,KAAD,CAFW;AAKf;AACAwV,IAAAA,YAAY,EAAE,CAAC;AACPpR,MAAAA,IAAI,EAAEpE;AADC,KAAD,CANC;AASf;AACAuV,IAAAA,MAAM,EAAE,CAAC;AACDnR,MAAAA,IAAI,EAAEpE;AADL,KAAD,CAVO;AAaf;AACAgS,IAAAA,MAAM,EAAE,CAAC;AACD5N,MAAAA,IAAI,EAAEpE;AADL,KAAD,CAdO;AAgBP+T,IAAAA,SAAS,EAAE,CAAC;AACZ3P,MAAAA,IAAI,EAAEjE;AADM,KAAD,CAhBJ;AAkBP6T,IAAAA,WAAW,EAAE,CAAC;AACd5P,MAAAA,IAAI,EAAEjE;AADQ,KAAD,CAlBN;AAoBP8T,IAAAA,YAAY,EAAE,CAAC;AACf7P,MAAAA,IAAI,EAAEjE;AADS,KAAD,CApBP;AAsBP8U,IAAAA,YAAY,EAAE,CAAC;AACf7Q,MAAAA,IAAI,EAAEhE,YADS;AAEfiE,MAAAA,IAAI,EAAE,CAAC,YAAD;AAFS,KAAD,CAtBP;AAyBP8Q,IAAAA,YAAY,EAAE,CAAC;AACf/Q,MAAAA,IAAI,EAAEhE,YADS;AAEfiE,MAAAA,IAAI,EAAE,CAAC,YAAD;AAFS,KAAD;AAzBP,GARvB;AAAA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM+U,eAAN,CAAsB;AAClB;AACAjW,EAAAA,WAAW,CAACwQ,UAAD,EAAa;AACpB,SAAKA,UAAL,GAAkBA,UAAlB;AACH;;AACD0F,EAAAA,IAAI,CAACC,MAAD,EAAS;AACT,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC;AACA,UAAIH,MAAM,CAAC7K,qBAAP,IAAgC,CAAC6K,MAAM,CAAC7K,qBAAP,CAA6B3B,oBAAlE,EAAwF;AACpF;AACA,YAAIjM,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,iBAAO,WAAP,EACI;AADJ,WAEK+F,IAFL,CAEWC,MAAD,IAAY;AAClB;AACA,iBAAKC,iBAAL,GAAyBD,MAAM,CAACE,OAAhC;AACAL,YAAAA,OAAO;AACP;AACH,WAPD,EAQKM,KARL,CAQWlB,GAAG,IAAI;AACda,YAAAA,MAAM,CAACb,GAAD,CAAN;AACA;AACH,WAXD;AAYH,SAbD,MAcK;AACDY,UAAAA,OAAO;AACP;AACH;AACJ,OApBD,MAqBK;AACDA,QAAAA,OAAO;AACP;AACH;AACJ,KA3BM,CAAP;AA4BH;AACD;AACJ;AACA;AACA;AACI;;;AACAO,EAAAA,GAAG,CAACC,MAAD,EAASV,MAAT,EAAiB;AAChB;AACA,QAAIA,MAAM,CAAC7K,qBAAP,IAAgC,CAAC6K,MAAM,CAAC7K,qBAAP,CAA6B3B,oBAAlE,EAAwF;AACpF;AACA,UAAIjM,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,aAAKiG,iBAAL,CAAuBK,IAAvB,CAA4BX,MAAM,CAAC7K,qBAAP,CAA6B5B,SAAzD,EAAoE,CAACvJ,KAAD,EAAQ4W,KAAR,KAAkB;AAClF,cAAI5W,KAAK,CAAC6W,cAAV,EAA0B;AACtB7W,YAAAA,KAAK,CAAC6W,cAAN;AACH,WAFD,MAGK;AACD;AACA7W,YAAAA,KAAK,CAAC8W,WAAN,GAAoB,KAApB;AACH;;AACDJ,UAAAA,MAAM,CAAC1W,KAAD,EAAQ4W,KAAR,CAAN;AACH,SATD;AAUH;AACJ;AACJ;AACD;AACJ;AACA;AACA;;;AACIG,EAAAA,KAAK,CAACf,MAAD,EAAS;AACV;AACA,QAAIA,MAAM,CAAC7K,qBAAP,IAAgC,CAAC6K,MAAM,CAAC7K,qBAAP,CAA6B3B,oBAAlE,EAAwF;AACpF;AACA,UAAIjM,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,aAAKiG,iBAAL,CAAuBS,KAAvB;AACH;AACJ;AACJ;;AAtEiB;;AAwEtBjB,eAAe,CAAClV,IAAhB;AAAA,mBAA4GkV,eAA5G,EAv1DsGzZ,EAu1DtG,UAA6IU,WAA7I;AAAA;;AACA+Y,eAAe,CAACrJ,KAAhB,kBAx1DsGpQ,EAw1DtG;AAAA,SAAgHyZ,eAAhH;AAAA,WAAgHA,eAAhH;AAAA,cAA6I;AAA7I;;AACA;AAAA,qDAz1DsGzZ,EAy1DtG,mBAA2FyZ,eAA3F,EAAwH,CAAC;AAC7GhV,IAAAA,IAAI,EAAEtE,UADuG;AAE7GuE,IAAAA,IAAI,EAAE,CAAC;AAAE2L,MAAAA,UAAU,EAAE;AAAd,KAAD;AAFuG,GAAD,CAAxH,EAG4B,YAAY;AAChC,WAAO,CAAC;AAAE5L,MAAAA,IAAI,EAAE6J,SAAR;AAAmBkL,MAAAA,UAAU,EAAE,CAAC;AACxB/U,QAAAA,IAAI,EAAE9D,MADkB;AAExB+D,QAAAA,IAAI,EAAE,CAAChE,WAAD;AAFkB,OAAD;AAA/B,KAAD,CAAP;AAIH,GARL;AAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMia,kBAAN,CAAyB;AACrBnX,EAAAA,WAAW,GAAG;AACV,SAAKoX,GAAL,GAAW,IAAI3L,GAAJ,EAAX;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI4L,EAAAA,WAAW,CAACzV,SAAD,EAAY;AACnB,QAAIA,SAAS,KAAKkJ,SAAd,IAA2B,CAACwM,MAAM,CAACC,SAAP,CAAiB3V,SAAjB,CAA5B,IAA2DA,SAAS,GAAG,CAA3E,EAA8E;AAC1E,YAAM,IAAIQ,KAAJ,CAAU,kGAAV,CAAN;AACH;;AACD,QAAI,KAAKgV,GAAL,CAASxL,GAAT,CAAahK,SAAb,CAAJ,EAA6B;AACzB,YAAM,IAAIQ,KAAJ,CAAW,iCAAgCR,SAAU,+EAArD,CAAN;AACH;;AACD,SAAKwV,GAAL,CAAS1K,GAAT,CAAa9K,SAAb,EAAwBA,SAAxB;AACA,WAAO,IAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI4V,EAAAA,MAAM,CAAC5V,SAAD,EAAY;AACd,QAAIA,SAAS,KAAKkJ,SAAd,IAA2B,CAACwM,MAAM,CAACC,SAAP,CAAiB3V,SAAjB,CAA5B,IAA2DA,SAAS,GAAG,CAA3E,EAA8E;AAC1E,YAAM,IAAIQ,KAAJ,CAAU,kGAAV,CAAN;AACH;;AACD,SAAKgV,GAAL,CAASK,MAAT,CAAgB7V,SAAhB;AACA,WAAO,IAAP;AACH;;AAlCoB;;AAoCzBuV,kBAAkB,CAACpW,IAAnB;AAAA,mBAA+GoW,kBAA/G;AAAA;;AACAA,kBAAkB,CAACvK,KAAnB,kBAl6DsGpQ,EAk6DtG;AAAA,SAAmH2a,kBAAnH;AAAA,WAAmHA,kBAAnH;AAAA,cAAmJ;AAAnJ;;AACA;AAAA,qDAn6DsG3a,EAm6DtG,mBAA2F2a,kBAA3F,EAA2H,CAAC;AAChHlW,IAAAA,IAAI,EAAEtE,UAD0G;AAEhHuE,IAAAA,IAAI,EAAE,CAAC;AAAE2L,MAAAA,UAAU,EAAE;AAAd,KAAD;AAF0G,GAAD,CAA3H;AAAA;AAKA;AACA;AACA;;;AACA,MAAM6K,eAAe,GAAG;AAAE7R,EAAAA,MAAM,EAAE,MAAV;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CAAxB;AACA;AACA;AACA;;AACA,MAAM6R,oBAAoB,GAAG;AACzBC,EAAAA,SAAS,EAAE,aADc;AAEzBtS,EAAAA,IAAI,EAAEoS,eAFmB;AAGzBzW,EAAAA,IAAI,EAAE4D,UAAU,CAACM,KAHQ;AAIzB0S,EAAAA,KAAK,EAAE,gCAJkB;AAKzBC,EAAAA,SAAS,EAAE;AALc,CAA7B;AAOA;AACA;AACA;;AACA,MAAMC,uBAAuB,GAAG;AAC5BH,EAAAA,SAAS,EAAE,gBADiB;AAE5BtS,EAAAA,IAAI,EAAEoS,eAFsB;AAG5BzW,EAAAA,IAAI,EAAE4D,UAAU,CAACK,QAHW;AAI5B2S,EAAAA,KAAK,EAAE,4BAJqB;AAK5BC,EAAAA,SAAS,EAAE;AALiB,CAAhC;AAOA;AACA;AACA;;AACA,MAAME,qBAAqB,GAAG;AAC1BJ,EAAAA,SAAS,EAAE,eADe;AAE1BtS,EAAAA,IAAI,EAAEoS,eAFoB;AAG1BzW,EAAAA,IAAI,EAAE4D,UAAU,CAACI,MAHS;AAI1B4S,EAAAA,KAAK,EAAE,4BAJmB;AAK1BC,EAAAA,SAAS,EAAE;AALe,CAA9B,C,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,MAAMG,qBAAqB,GAAG;AAC1BL,EAAAA,SAAS,EAAE,cADe;AAE1BtS,EAAAA,IAAI,EAAEoS,eAFoB;AAG1BzW,EAAAA,IAAI,EAAE4D,UAAU,CAACG,MAHS;AAI1B6S,EAAAA,KAAK,EAAE,0BAJmB;AAK1BC,EAAAA,SAAS,EAAE;AALe,CAA9B;AAOA;AACA;AACA;;AACA,MAAMI,0BAA0B,GAAG;AAC/BN,EAAAA,SAAS,EAAE,kBADoB;AAE/BtS,EAAAA,IAAI,EAAEoS,eAFyB;AAG/BzW,EAAAA,IAAI,EAAE4D,UAAU,CAACE,UAHc;AAI/B8S,EAAAA,KAAK,EAAE,uBAJwB;AAK/BC,EAAAA,SAAS,EAAE;AALoB,CAAnC;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA,MAAMK,qBAAN,SAAoCpY,mBAApC,CAAwD;AACpDC,EAAAA,WAAW,CAAC2Q,aAAD,EAAgB;AACvB;AACA,SAAKA,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;;AACQ,SAAKyH,OAAL,GAAe,IAAItb,YAAJ,EAAf;AACA;AACR;AACA;;AACQ,SAAK2a,MAAL,GAAc,IAAI3a,YAAJ,EAAd;AACA;AACR;AACA;;AACQ,SAAKub,QAAL,GAAgB,IAAIvb,YAAJ,EAAhB;AACA;AACR;AACA;;AACQ,SAAKwb,QAAL,GAAgB,IAAIxb,YAAJ,EAAhB;AACA;AACR;AACA;;AACQ,SAAKyb,WAAL,GAAmB,IAAIzb,YAAJ,EAAnB;AACA;AACR;AACA;;AACQ,SAAK0b,UAAL,GAAkB,IAAI1b,YAAJ,EAAlB;AACA;AACR;AACA;;AACQ,SAAK2b,UAAL,GAAkB,IAAI3b,YAAJ,EAAlB;AACA;AACR;AACA;;AACQ,SAAK4b,qBAAL,GAA6B,CAACf,oBAAD,CAA7B;AACA;AACR;AACA;;AACQ,SAAKgB,oBAAL,GAA4B,CAACZ,uBAAD,EAA0B,GAAG,KAAKW,qBAAlC,CAA5B;AACA;AACR;AACA;;AACQ,SAAKE,sBAAL,GAA8B,CAACZ,qBAAD,EAAwB,GAAG,KAAKW,oBAAhC,CAA9B;AACA;AACR;AACA;;AACQ,SAAKE,kBAAL,GAA0B,CACtBX,0BADsB,EAEtBD,qBAFsB,EAGtB,GAAG,KAAKW,sBAHc,CAA1B;AAKH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIhJ,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKpO,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAC1H,aAA7B,EAA4C;AACxC,YAAM,IAAIpI,KAAJ,CAAU,sEAAV,CAAN;AACH;;AACD,SAAKoI,aAAL,GAAqB0H,SAAS,CAAC1H,aAA/B;;AACA,YAAQ,KAAKA,aAAL,CAAmBrE,QAA3B;AACI,WAAKvB,eAAe,CAACkU,MAArB;AACI,aAAKC,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKL,oBAAvB,CAAf;AACA;;AACJ,WAAK/T,eAAe,CAACqU,QAArB;AACI,aAAKF,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKJ,sBAAvB,CAAf;AACA;;AACJ,WAAKhU,eAAe,CAACsU,IAArB;AACI,aAAKH,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKH,kBAAvB,CAAf;AACA;;AACJ,WAAKjU,eAAe,CAACQ,MAArB;AACI,aAAK2T,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKG,qBAAL,CAA2B,KAAK3O,aAAL,CAAmBuO,OAA9C,CAAlB,CAAf;AACA;;AACJ,WAAKnU,eAAe,CAAC6F,OAArB;AACA;AACI,aAAKsO,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKN,qBAAvB,CAAf;AACA;AAhBR;AAkBH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIU,EAAAA,OAAO,CAACtY,MAAD,EAASX,KAAT,EAAgB0B,MAAM,GAAGG,MAAM,CAACoP,KAAhC,EAAuC;AAC1C,QAAI,KAAK5P,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,QAAI,CAACjC,KAAL,EAAY;AACR;AACH;;AACD,UAAMkZ,UAAU,GAAG;AACfvY,MAAAA,MADe;AAEf;AACA;AACAoB,MAAAA,KAAK,EAAE,IAJQ;AAKfL,MAAAA,MALe;AAMfD,MAAAA,SAAS,EAAE,KAAKJ;AAND,KAAnB;;AAQA,YAAQV,MAAM,CAACG,IAAf;AACI,WAAK4D,UAAU,CAACG,MAAhB;AACI,aAAKsU,yBAAL,CAA+B,KAAK7B,MAApC,EAA4CtX,KAA5C,EAAmDkZ,UAAnD;AACA;;AACJ,WAAKxU,UAAU,CAACI,MAAhB;AACI,YAAI,CAAC,KAAKoN,YAAN,IAAsB,CAAC,KAAKA,YAAL,CAAkB5Q,KAAzC,IAAkD,CAAC,KAAK4Q,YAAL,CAAkB5Q,KAAlB,CAAwB8X,MAA/E,EAAuF;AACnF;AACH;;AACD,aAAKD,yBAAL,CAA+B,KAAKjB,QAApC,EAA8ClY,KAA9C,EAAqDkZ,UAArD;AACA;;AACJ,WAAKxU,UAAU,CAACK,QAAhB;AACI,aAAKoU,yBAAL,CAA+B,KAAKhB,QAApC,EAA8CnY,KAA9C,EAAqDkZ,UAArD;AACA;;AACJ,WAAKxU,UAAU,CAACM,KAAhB;AACI,aAAKmU,yBAAL,CAA+B,KAAKf,WAApC,EAAiDpY,KAAjD,EAAwDkZ,UAAxD;AACA;;AACJ,WAAKxU,UAAU,CAACO,MAAhB;AACI,aAAKkU,yBAAL,CAA+B,KAAKb,UAApC,EAAgDtY,KAAhD,EAAuDkZ,UAAvD;AACA;;AACJ,WAAKxU,UAAU,CAACE,UAAhB;AACI,aAAKuU,yBAAL,CAA+B,KAAKd,UAApC,EAAgDrY,KAAhD,EAAuDkZ,UAAvD;AACA;;AACJ;AACI,cAAM,IAAIjX,KAAJ,CAAW,yCAAX,CAAN;AAvBR;AAyBH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIoX,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,GAAGA,IAAI,CAACjY,EAAR,GAAasJ,SAAxB;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIwO,EAAAA,yBAAyB,CAACI,OAAD,EAAUvZ,KAAV,EAAiBkZ,UAAjB,EAA6B;AAClD,QAAI,CAACK,OAAL,EAAc;AACV,YAAM,IAAItX,KAAJ,CAAW,oEAAX,CAAN;AACH;;AACD,UAAMN,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB8Z,MAAAA,OAAO,CAAC5K,IAAR,CAAauK,UAAb;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIL,EAAAA,YAAY,CAACD,OAAD,EAAU;AAClB,WAAOA,OAAO,CAAC3a,GAAR,CAAY,CAACkE,GAAD,EAAMqX,CAAN,KAAYxP,MAAM,CAAC6B,MAAP,CAAc1J,GAAd,EAAmB;AAAEd,MAAAA,EAAE,EAAEuX,OAAO,CAAC/S,MAAR,GAAiB,CAAjB,GAAqB2T;AAA3B,KAAnB,CAAxB,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIR,EAAAA,qBAAqB,CAACJ,OAAO,GAAG,EAAX,EAAe;AAChCA,IAAAA,OAAO,CAACa,OAAR,CAAiBtX,GAAD,IAAS;AACrB,YAAMuX,iBAAiB,GAAG/U,sBAAsB,CAACzC,SAAvB,CAAkCpB,IAAD,IAAUA,IAAI,KAAKqB,GAAG,CAACrB,IAAxD,CAA1B;;AACA,UAAI4Y,iBAAiB,KAAK,CAAC,CAA3B,EAA8B;AAC1B,cAAM,IAAIzX,KAAJ,CAAW,4DAAX,CAAN;AACH;AACJ,KALD;AAMA,WAAO2W,OAAP;AACH;;AAzLmD;;AA2LxDZ,qBAAqB,CAACpX,IAAtB;AAAA,mBAAkHoX,qBAAlH,EAzsEsG3b,EAysEtG,mBAAyJ+O,aAAzJ;AAAA;;AACA4M,qBAAqB,CAACnX,IAAtB,kBA1sEsGxE,EA0sEtG;AAAA,QAAsG2b,qBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA1sEsG3b,EA0sEtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA1sEsGA,MAAAA,EA0sEwU,+BAA9a;AA1sEsGA,MAAAA,EA0sEkX,sFAAxd;AA1sEsGA,MAAAA,EA0sEw8B,eAA9iC;AAAA;;AAAA;AA1sEsGA,MAAAA,EA0sEiY,aAAve;AA1sEsGA,MAAAA,EA0sEiY,yGAAve;AAAA;AAAA;AAAA,eAAwrdiB,EAAE,CAACqY,IAA3rd,EAAywdrY,EAAE,CAACqc,OAA5wd,EAAm3dnK,aAAn3d,EAA07dlS,EAAE,CAACsc,OAA77d;AAAA;AAAA;AAAA;;AACA;AAAA,qDA3sEsGvd,EA2sEtG,mBAA2F2b,qBAA3F,EAA8H,CAAC;AACnHlX,IAAAA,IAAI,EAAExE,SAD6G;AAEnHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,kBAAZ;AAAgCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAAzE;AAAiFF,MAAAA,QAAQ,EAAE,6oBAA3F;AAA0uBoN,MAAAA,MAAM,EAAE,CAAC,2lbAAD;AAAlvB,KAAD;AAF6G,GAAD,CAA9H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAEsK;AAAR,KAAD,CAAP;AAAmC,GAH7E,EAG+F;AAAE/J,IAAAA,EAAE,EAAE,CAAC;AACtFP,MAAAA,IAAI,EAAEpE;AADgF,KAAD,CAAN;AAE/EwV,IAAAA,YAAY,EAAE,CAAC;AACfpR,MAAAA,IAAI,EAAEpE;AADS,KAAD,CAFiE;AAI/Eub,IAAAA,OAAO,EAAE,CAAC;AACVnX,MAAAA,IAAI,EAAEjE;AADI,KAAD,CAJsE;AAM/Eya,IAAAA,MAAM,EAAE,CAAC;AACTxW,MAAAA,IAAI,EAAEjE;AADG,KAAD,CANuE;AAQ/Eqb,IAAAA,QAAQ,EAAE,CAAC;AACXpX,MAAAA,IAAI,EAAEjE;AADK,KAAD,CARqE;AAU/Esb,IAAAA,QAAQ,EAAE,CAAC;AACXrX,MAAAA,IAAI,EAAEjE;AADK,KAAD,CAVqE;AAY/Eub,IAAAA,WAAW,EAAE,CAAC;AACdtX,MAAAA,IAAI,EAAEjE;AADQ,KAAD,CAZkE;AAc/Ewb,IAAAA,UAAU,EAAE,CAAC;AACbvX,MAAAA,IAAI,EAAEjE;AADO,KAAD,CAdmE;AAgB/Eyb,IAAAA,UAAU,EAAE,CAAC;AACbxX,MAAAA,IAAI,EAAEjE;AADO,KAAD;AAhBmE,GAH/F;AAAA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMgd,aAAN,SAA4Bja,mBAA5B,CAAgD;AAC5CC,EAAAA,WAAW,CAAC2Q,aAAD,EAAgB;AACvB;AACA,SAAKA,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;AACA;;AACQ,SAAKsJ,QAAL,GAAgB,IAAInd,YAAJ,EAAhB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI8S,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKpO,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKkI,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;AACA,SAAK4P,UAAL,GAAkB/P,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB,KAAKtB,UAAvB,CAAlB;AACH;AACD;AACJ;AACA;AACA;;;AACIoF,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,UAAMgI,iBAAiB,GAAGhI,OAAO,CAACzH,UAAlC;;AACA,QAAIyP,iBAAiB,IAAIA,iBAAiB,CAAC5H,YAAlB,KAAmC4H,iBAAiB,CAAC7H,aAA9E,EAA6F;AACzF,WAAK4H,UAAL,GAAkBC,iBAAiB,CAAC5H,YAApC;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACI6H,EAAAA,QAAQ,CAACxF,KAAD,EAAQ;AACZ,QAAI,CAAC,KAAKvC,YAAN,IAAsB,CAAC,KAAKD,MAA5B,IAAsC,KAAKA,MAAL,CAAYpM,MAAZ,KAAuB,CAAjE,EAAoE;AAChE,aAAO,KAAP;AACH;;AACD,QAAIqU,UAAJ;;AACA,QAAI;AACAA,MAAAA,UAAU,GAAGpY,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAArB;AACH,KAFD,CAGA,OAAOqD,GAAP,EAAY;AACRC,MAAAA,OAAO,CAACC,KAAR,CAAe,sDAAf,EAAsEF,GAAtE;AACA,aAAO,KAAP;AACH;;AACD,WAAOb,KAAK,KAAKyF,UAAjB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,UAAU,CAAC1F,KAAD,EAAQzU,KAAR,EAAe;AACrB,UAAM2B,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKqa,QAAL,CAAcnL,IAAd,CAAmB8F,KAAnB;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACI4E,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,CAACjY,EAAZ;AACH;;AA3E2C;;AA6EhDwY,aAAa,CAACjZ,IAAd;AAAA,mBAA0GiZ,aAA1G,EAz0EsGxd,EAy0EtG,mBAAyI+O,aAAzI;AAAA;;AACAyO,aAAa,CAAChZ,IAAd,kBA10EsGxE,EA00EtG;AAAA,QAA8Fwd,aAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA10EsGxd,EA00EtG,6BA10EsGA,EA00EtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA10EsGA,MAAAA,EA00EoO,4BAA1U;AA10EsGA,MAAAA,EA00EkY,8EAAxe;AA10EsGA,MAAAA,EA00Eq1B,eAA37B;AAAA;;AAAA;AA10EsGA,MAAAA,EA00E0U,yGAAhb;AA10EsGA,MAAAA,EA00EkQ,mHAAxW;AA10EsGA,MAAAA,EA00EiZ,aAAvf;AA10EsGA,MAAAA,EA00EiZ,gGAAvf;AAAA;AAAA;AAAA,eAAw9CiB,EAAE,CAACqY,IAA39C,EAAyiDrY,EAAE,CAACqc,OAA5iD,EAAmpDrc,EAAE,CAACsY,OAAtpD;AAAA;AAAA;AAAA;;AACA;AAAA,qDA30EsGvZ,EA20EtG,mBAA2Fwd,aAA3F,EAAsH,CAAC;AAC3G/Y,IAAAA,IAAI,EAAExE,SADqG;AAE3GyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,SAAZ;AAAuBE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAAhE;AAAwEF,MAAAA,QAAQ,EAAE,2nBAAlF;AAA+sBoN,MAAAA,MAAM,EAAE,CAAC,ifAAD;AAAvtB,KAAD;AAFqG,GAAD,CAAtH,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAEsK;AAAR,KAAD,CAAP;AAAmC,GAH7E,EAG+F;AAAE/J,IAAAA,EAAE,EAAE,CAAC;AACtFP,MAAAA,IAAI,EAAEpE;AADgF,KAAD,CAAN;AAE/EwV,IAAAA,YAAY,EAAE,CAAC;AACfpR,MAAAA,IAAI,EAAEpE;AADS,KAAD,CAFiE;AAI/EuV,IAAAA,MAAM,EAAE,CAAC;AACTnR,MAAAA,IAAI,EAAEpE;AADG,KAAD,CAJuE;AAM/E6N,IAAAA,UAAU,EAAE,CAAC;AACbzJ,MAAAA,IAAI,EAAEpE;AADO,KAAD,CANmE;AAQ/Eod,IAAAA,QAAQ,EAAE,CAAC;AACXhZ,MAAAA,IAAI,EAAEjE;AADK,KAAD;AARqE,GAH/F;AAAA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMud,iBAAN,SAAgCxa,mBAAhC,CAAoD;AAChDC,EAAAA,WAAW,CAAC2Q,aAAD,EAAgB;AACvB;AACA,SAAKA,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;;AACQ,SAAK6J,YAAL,GAAoB,IAAI1d,YAAJ,EAApB;AACA;AACR;AACA;AACA;;AACQ,SAAKqU,WAAL,GAAmBnP,MAAM,CAACoP,KAA1B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,cAAL,GAAsBrP,MAAM,CAACsP,QAA7B;AACA;AACR;AACA;AACA;;AACQ,SAAKmJ,QAAL,GAAgB,EAAhB;AACA,SAAKC,kBAAL,GAA0B9U,oBAA1B;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIgK,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKpO,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKkI,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;AACA,SAAKD,WAAL,GAAmB6H,SAAS,CAAC7H,WAA7B;AACA,SAAKE,aAAL,GAAqB2H,SAAS,CAAC3H,aAA/B;;AACA,QAAI,CAAC,KAAK8H,YAAN,IAAsB,CAAC,KAAKD,MAAhC,EAAwC;AACpC,YAAM,IAAIhQ,KAAJ,CAAU,kEAAV,CAAN;AACH;;AACD,SAAKuY,YAAL,CAAkB,KAAKtI,YAAvB,EAAqC,KAAKD,MAA1C;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIgI,EAAAA,QAAQ,CAACQ,OAAD,EAAU;AACd,QAAI,CAACA,OAAD,IAAY,CAAC,KAAKvI,YAAtB,EAAoC;AAChC,aAAO,KAAP;AACH;;AACD,WAAOuI,OAAO,CAACpZ,EAAR,KAAe,KAAK6Q,YAAL,CAAkB7Q,EAAxC;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIsO,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,UAAMC,MAAM,GAAGD,OAAO,CAACC,MAAvB;AACA,UAAMC,YAAY,GAAGF,OAAO,CAACE,YAA7B;AACA,QAAIwI,IAAJ;AACA,QAAIC,OAAJ;;AACA,QAAIzI,YAAJ,EAAkB;AACdwI,MAAAA,IAAI,GAAGxI,YAAY,CAACC,aAApB;AACAwI,MAAAA,OAAO,GAAGzI,YAAY,CAACE,YAAvB;AACH,KAHD,MAIK;AACDuI,MAAAA,OAAO,GAAG,KAAKzI,YAAf;AACH;;AACD,QAAIyI,OAAO,IAAI1I,MAAX,IAAqBA,MAAM,CAACE,aAA5B,IAA6CF,MAAM,CAACG,YAAxD,EAAsE;AAClE;AACA;AACA;AACA,WAAKoI,YAAL,CAAkBG,OAAlB,EAA2B1I,MAAM,CAACG,YAAlC;AACH;;AACD,QAAIsI,IAAI,IAAIC,OAAR,IAAmBD,IAAI,CAACrZ,EAAL,KAAYsZ,OAAO,CAACtZ,EAA3C,EAA+C;AAC3C,WAAKuZ,cAAL,CAAoBF,IAApB,EAA0BC,OAA1B;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI5G,EAAAA,YAAY,CAAC0G,OAAD,EAAUza,KAAV,EAAiB0B,MAAM,GAAGG,MAAM,CAACkP,MAAjC,EAAyC;AACjD,QAAI,CAAC,KAAK1P,EAAN,IAAY,CAAC,KAAK4Q,MAAtB,EAA8B;AAC1B,YAAM,IAAIhQ,KAAJ,CAAU,wDAAV,CAAN;AACH;;AACD,QAAI,CAAC,KAAKmI,aAAN,IAAuB,CAAC,KAAKA,aAAL,CAAmBhB,SAA/C,EAA0D;AACtD;AACH;;AACD,UAAMzH,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAX,IAAmBkC,MAAM,KAAKjC,IAAlC,EAAwC;AACpC,WAAK2a,YAAL,CAAkB1L,IAAlB,CAAuB,IAAI/M,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqCI,QAAQ,CAAC2Y,OAAD,EAAU,KAAKxI,MAAf,CAA7C,CAAvB;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI+B,EAAAA,iBAAiB,CAACjU,SAAD,EAAYC,KAAZ,EAAmB0B,MAAM,GAAGG,MAAM,CAACkP,MAAnC,EAA2C;AACxD,UAAMpP,MAAM,GAAG,MAAM7B,qBAAN,CAA4BC,SAA5B,EAAuCC,KAAvC,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKqT,IAAL;AACH,KAFD,MAGK,IAAInR,MAAM,KAAKjC,IAAf,EAAqB;AACtB,WAAKmb,QAAL;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIxB,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,CAACjY,EAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACImZ,EAAAA,YAAY,CAACtI,YAAD,EAAeD,MAAf,EAAuB;AAC/B,QAAIwC,KAAJ;;AACA,QAAI;AACAA,MAAAA,KAAK,GAAG3S,QAAQ,CAACoQ,YAAD,EAAeD,MAAf,CAAhB;AACH,KAFD,CAGA,OAAOqD,GAAP,EAAY;AACR,YAAMA,GAAN;AACH;;AACD,YAAQb,KAAR;AACI,WAAK,CAAL;AACI;AACA,aAAKqG,2BAAL;AACA;;AACJ,WAAK7I,MAAM,CAACpM,MAAP,GAAgB,CAArB;AACI;AACA,aAAKkV,qBAAL;AACA;;AACJ;AACI;AACA,aAAKC,kBAAL;AACA;AAZR;;AAcA,SAAKV,QAAL,GAAgBrI,MAAM,CAAC/T,MAAP,CAAc,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAAtD,CAAhB;AACH;AACD;AACJ;AACA;;;AACIL,EAAAA,2BAA2B,GAAG;AAC1B,QAAI,CAAC,KAAK1Q,aAAN,IAAuB,CAAC,KAAK6H,MAAjC,EAAyC;AACrC,YAAM,IAAIhQ,KAAJ,CAAU,mEAAV,CAAN;AACH;;AACD,SAAKiZ,KAAL,GAAa,CAAb;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAK1J,aAAL,CAAmBlB,MAA5B,EAAoC,KAAK+I,MAAL,CAAYpM,MAAhD,CAAX;AACH;AACD;AACJ;AACA;;;AACIkV,EAAAA,qBAAqB,GAAG;AACpB,QAAI,CAAC,KAAK3Q,aAAN,IAAuB,CAAC,KAAK6H,MAAjC,EAAyC;AACrC,YAAM,IAAIhQ,KAAJ,CAAU,mEAAV,CAAN;AACH;;AACD,SAAKiZ,KAAL,GAAa,KAAKjJ,MAAL,CAAYpM,MAAZ,GAAqB,CAArB,IAA0B,KAAKuE,aAAL,CAAmBlB,MAAnB,GAA4B,CAAtD,CAAb;AACA,SAAKiS,GAAL,GAAW,KAAKlJ,MAAL,CAAYpM,MAAvB;AACH;AACD;AACJ;AACA;;;AACImV,EAAAA,kBAAkB,GAAG;AACjB,QAAI,CAAC,KAAK5Q,aAAN,IAAuB,CAAC,KAAK6H,MAA7B,IAAuC,CAAC,KAAKC,YAAjD,EAA+D;AAC3D,YAAM,IAAIjQ,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,SAAKiZ,KAAL,GAAapZ,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,GAA2C0B,IAAI,CAACyH,KAAL,CAAW,KAAKhR,aAAL,CAAmBlB,MAAnB,GAA4B,CAAvC,CAAxD;AACA,SAAKiS,GAAL,GAAWrZ,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,GAA2C0B,IAAI,CAACyH,KAAL,CAAW,KAAKhR,aAAL,CAAmBlB,MAAnB,GAA4B,CAAvC,CAA3C,GAAuF,CAAlG;AACH;AACD;AACJ;AACA;;;AACI4J,EAAAA,IAAI,GAAG;AACH,QAAI,CAAC,KAAKb,MAAV,EAAkB;AACd,YAAM,IAAIhQ,KAAJ,CAAU,iDAAV,CAAN;AACH,KAHE,CAIH;;;AACA,QAAI,KAAKiS,gBAAL,CAAsB,KAAKjC,MAAL,CAAYpM,MAAZ,GAAqB,CAA3C,CAAJ,EAAmD;AAC/C;AACH;;AACD,QAAI,KAAKsV,GAAL,KAAa,KAAKlJ,MAAL,CAAYpM,MAA7B,EAAqC;AACjC;AACH;;AACD,SAAKqV,KAAL;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAKqH,GAAL,GAAW,CAApB,EAAuB,KAAKlJ,MAAL,CAAYpM,MAAnC,CAAX;AACA,SAAKyU,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACH;AACD;AACJ;AACA;;;AACIN,EAAAA,QAAQ,GAAG;AACP,QAAI,CAAC,KAAK5I,MAAV,EAAkB;AACd,YAAM,IAAIhQ,KAAJ,CAAU,iDAAV,CAAN;AACH,KAHM,CAIP;;;AACA,QAAI,KAAKiS,gBAAL,CAAsB,CAAtB,CAAJ,EAA8B;AAC1B;AACH;;AACD,QAAI,KAAKgH,KAAL,KAAe,CAAnB,EAAsB;AAClB;AACH;;AACD,SAAKA,KAAL,GAAavH,IAAI,CAACC,GAAL,CAAS,KAAKsH,KAAL,GAAa,CAAtB,EAAyB,CAAzB,CAAb;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAKqH,GAAL,GAAW,CAApB,EAAuB,KAAKlJ,MAAL,CAAYpM,MAAnC,CAAX;AACA,SAAKyU,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIjH,EAAAA,gBAAgB,CAACY,aAAD,EAAgB;AAC5B,QAAI,CAAC,KAAK7C,MAAN,IAAgB,CAAC,KAAKC,YAA1B,EAAwC;AACpC,YAAM,IAAIjQ,KAAJ,CAAU,kEAAV,CAAN;AACH;;AACD,WAAO,CAAC,CAAC,KAAKiI,WAAP,IAAsB,KAAKA,WAAL,CAAiBR,QAAjB,KAA8B,KAApD,IAA6D5H,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,KAA6C6C,aAAjH;AACH;AACD;AACJ;AACA;;;AACI8F,EAAAA,cAAc,CAACF,IAAD,EAAOC,OAAP,EAAgB;AAC1B,QAAI,CAAC,KAAK1I,MAAV,EAAkB;AACd,YAAM,IAAIhQ,KAAJ,CAAU,iDAAV,CAAN;AACH,KAHyB,CAI1B;AACA;AACA;;;AACA,QAAIoZ,SAAJ;AACA,QAAI5H,YAAJ;;AACA,QAAI;AACA4H,MAAAA,SAAS,GAAGvZ,QAAQ,CAAC4Y,IAAD,EAAO,KAAKzI,MAAZ,CAApB;AACAwB,MAAAA,YAAY,GAAG3R,QAAQ,CAAC6Y,OAAD,EAAU,KAAK1I,MAAf,CAAvB;AACH,KAHD,CAIA,OAAOqD,GAAP,EAAY;AACRC,MAAAA,OAAO,CAACC,KAAR,CAAc,2DAAd;AACA,YAAMF,GAAN;AACH;;AACD,QAAI+F,SAAS,KAAK,KAAKpJ,MAAL,CAAYpM,MAAZ,GAAqB,CAAnC,IAAwC4N,YAAY,KAAK,CAA7D,EAAgE;AAC5D;AACA,WAAKqH,2BAAL;AACA,WAAKR,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACA;AACH,KAtByB,CAuB1B;;;AACA,QAAIE,SAAS,KAAK,CAAd,IAAmB5H,YAAY,KAAK,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5D;AACA,WAAKkV,qBAAL;AACA,WAAKT,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACA;AACH,KA7ByB,CA8B1B;;;AACA,QAAIE,SAAS,GAAG5H,YAAhB,EAA8B;AAC1B,WAAKoH,QAAL;AACH,KAFD,MAGK,IAAIQ,SAAS,GAAG5H,YAAhB,EAA8B;AAC/B,WAAKX,IAAL;AACH;AACJ;;AArR+C;;AAuRpDsH,iBAAiB,CAACxZ,IAAlB;AAAA,mBAA8GwZ,iBAA9G,EA3oFsG/d,EA2oFtG,mBAAiJ+O,aAAjJ;AAAA;;AACAgP,iBAAiB,CAACvZ,IAAlB,kBA5oFsGxE,EA4oFtG;AAAA,QAAkG+d,iBAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA5oFsG/d,EA4oFtG,6BA5oFsGA,EA4oFtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA5oFsGA,MAAAA,EA4oF8N,4BAApU;AA5oFsGA,MAAAA,EA4oF8c,mFAApjB;AA5oFsGA,MAAAA,EA4oFqvF,eAA31F;AAAA;;AAAA;AA5oFsGA,MAAAA,EA4oFsQ,kGAA5W;AA5oFsGA,MAAAA,EA4oFgZ,6GAAtf;AA5oFsGA,MAAAA,EA4oFoU,uHAA1a;AA5oFsGA,MAAAA,EA4oF6d,aAAnkB;AA5oFsGA,MAAAA,EA4oF6d,iFAAnkB;AAAA;AAAA;AAAA,eAAunOiB,EAAE,CAACqY,IAA1nO,EAAwsOrY,EAAE,CAACqc,OAA3sO,EAAkzO9K,sBAAlzO,EAA06OW,aAA16O;AAAA;AAAA;AAAA;;AACA;AAAA,qDA7oFsGnT,EA6oFtG,mBAA2F+d,iBAA3F,EAA0H,CAAC;AAC/GtZ,IAAAA,IAAI,EAAExE,SADyG;AAE/GyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,aAAZ;AAA2BE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAApE;AAA4EF,MAAAA,QAAQ,EAAE,iiFAAtF;AAAynFoN,MAAAA,MAAM,EAAE,CAAC,ugEAAD,EAA0gE,uuEAA1gE;AAAjoF,KAAD;AAFyG,GAAD,CAA1H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAEsK;AAAR,KAAD,CAAP;AAAmC,GAH7E,EAG+F;AAAE/J,IAAAA,EAAE,EAAE,CAAC;AACtFP,MAAAA,IAAI,EAAEpE;AADgF,KAAD,CAAN;AAE/EwV,IAAAA,YAAY,EAAE,CAAC;AACfpR,MAAAA,IAAI,EAAEpE;AADS,KAAD,CAFiE;AAI/EuV,IAAAA,MAAM,EAAE,CAAC;AACTnR,MAAAA,IAAI,EAAEpE;AADG,KAAD,CAJuE;AAM/E2d,IAAAA,YAAY,EAAE,CAAC;AACfvZ,MAAAA,IAAI,EAAEjE;AADS,KAAD;AANiE,GAH/F;AAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMye,qBAAN,CAA4B;AACxBzb,EAAAA,WAAW,GAAG;AACV;AACR;AACA;AACQ,SAAK0b,YAAL,GAAoB,IAAI5e,YAAJ,EAApB;AACH;AACD;AACJ;AACA;AACA;;;AACI6e,EAAAA,OAAO,CAACxb,KAAD,EAAQ;AACXA,IAAAA,KAAK,CAACyb,eAAN,GADW,CAEX;;AACA,UAAMC,MAAM,GAAG1b,KAAK,CAAC0b,MAArB;;AACA,QAAI,CAAC,KAAKC,kBAAN,IAA4B,CAACD,MAAjC,EAAyC;AACrC;AACH;;AACD,QAAIE,QAAQ,GAAG,KAAf;AACA,QAAIC,QAAQ,GAAG,KAAf;;AACA,QAAI,OAAOH,MAAM,CAACjE,SAAd,KAA4B,QAAhC,EAA0C;AACtC;AACA;AACAmE,MAAAA,QAAQ,GAAG,IAAX;AACH,KAJD,MAKK;AACD;AACAA,MAAAA,QAAQ,GAAGF,MAAM,CAACjE,SAAP,IAAoBiE,MAAM,CAACjE,SAAP,CAAiBqE,QAAjB,CAA0B,QAA1B,CAA/B;AACAD,MAAAA,QAAQ,GAAGH,MAAM,CAACjE,SAAP,CAAiBqE,QAAjB,CAA0B,QAA1B,CAAX;AACH,KAlBU,CAmBX;AACA;;AACA;AACR;AACA;AACA;AACA;AACA;AACA;;;AACQ,QAAI,CAACF,QAAD,IAAaC,QAAjB,EAA2B;AACvB;AACA,WAAKN,YAAL,CAAkB5M,IAAlB,CAAuB,IAAvB;AACH;AACJ;;AA3CuB;;AA6C5B2M,qBAAqB,CAAC1a,IAAtB;AAAA,mBAAkH0a,qBAAlH;AAAA;;AACAA,qBAAqB,CAAC1M,IAAtB,kBApuFsGvS,EAouFtG;AAAA,QAAsGif,qBAAtG;AAAA;AAAA;AAAA;AApuFsGjf,MAAAA,EAouFtG;AAAA,eAAsG,mBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AAAA,qDAruFsGA,EAquFtG,mBAA2Fif,qBAA3F,EAA8H,CAAC;AACnHxa,IAAAA,IAAI,EAAElE,SAD6G;AAEnHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAF6G,GAAD,CAA9H,QAK4B;AAAE2a,IAAAA,kBAAkB,EAAE,CAAC;AACnC7a,MAAAA,IAAI,EAAEpE;AAD6B,KAAD,CAAtB;AAEZ6e,IAAAA,YAAY,EAAE,CAAC;AACfza,MAAAA,IAAI,EAAEjE;AADS,KAAD,CAFF;AAIZ2e,IAAAA,OAAO,EAAE,CAAC;AACV1a,MAAAA,IAAI,EAAEhE,YADI;AAEViE,MAAAA,IAAI,EAAE,CAAC,OAAD,EAAU,CAAC,QAAD,CAAV;AAFI,KAAD;AAJG,GAL5B;AAAA;;AAcA,MAAMgb,qBAAN,CAA4B;AACxBlc,EAAAA,WAAW,CAACmc,aAAD,EAAgBC,mBAAhB,EAAqCC,eAArC,EACX;AACA7L,EAAAA,UAFW,EAEC8L,iBAFD,EAEoBC,kBAFpB,EAEwC5L,aAFxC,EAEuD6L,SAFvD,EAEkE;AACzE,SAAKL,aAAL,GAAqBA,aAArB;AACA,SAAKC,mBAAL,GAA2BA,mBAA3B;AACA,SAAKC,eAAL,GAAuBA,eAAvB;AACA,SAAK7L,UAAL,GAAkBA,UAAlB;AACA,SAAK8L,iBAAL,GAAyBA,iBAAzB;AACA,SAAKC,kBAAL,GAA0BA,kBAA1B;AACA,SAAK5L,aAAL,GAAqBA,aAArB;AACA,SAAK6L,SAAL,GAAiBA,SAAjB;AACA;AACR;AACA;AACA;;AACQ,SAAKnR,kBAAL,GAA0B,IAA1B;AACA;AACR;AACA;AACA;;AACQ,SAAKf,mBAAL,GAA2B9H,+BAA3B;AACA;AACR;AACA;;AACQ,SAAKia,WAAL,GAAmB,KAAnB;AACA,SAAKjb,EAAL,GAAU,KAAK2a,aAAL,CAAmB3a,EAA7B;AACA,SAAK4Q,MAAL,GAAc,KAAK+J,aAAL,CAAmB/J,MAAjC;AACA,SAAKC,YAAL,GAAoB,KAAK8J,aAAL,CAAmB9J,YAAvC;AACA,SAAKH,SAAL,GAAiB,KAAKiK,aAAL,CAAmBjK,SAApC;AACA,SAAKvB,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC,KAAK0Q,SAA3C;AACA,SAAKwK,wBAAL,GAAgC,KAAKN,mBAAL,CAAyBO,aAAzB,CAAuC/J,SAAvC,CAAkDR,MAAD,IAAY;AACzF,WAAKA,MAAL,GAAcA,MAAM,CAAChU,GAAP,CAAY8D,KAAD,IAAW;AAChC,cAAM0a,QAAQ,GAAGzS,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkB9J,KAAlB,EAAyB;AAAEqS,UAAAA,gBAAgB,EAAE;AAApB,SAAzB,CAAjB;AACA,eAAOqI,QAAP;AACH,OAHa,CAAd;AAIA,WAAKC,UAAL;AACA,WAAKzK,MAAL,CAAYwH,OAAZ,CAAqB1X,KAAD,IAAW;AAC3B,YAAIA,KAAK,CAACV,EAAN,KAAa,KAAK6Q,YAAL,CAAkB7Q,EAAnC,EAAuC;AACnC,eAAK6Q,YAAL,GAAoBnQ,KAApB;AACH;AACJ,OAJD;AAKA,WAAKoa,iBAAL,CAAuBtJ,YAAvB;AACH,KAZ+B,CAAhC;AAaH;AACD;AACJ;AACA;AACA;AACA;;;AACI8J,EAAAA,UAAU,CAAClO,CAAD,EAAI;AACV,SAAKkC,YAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIlB,EAAAA,QAAQ,GAAG;AACP,SAAK2M,kBAAL,CAAwBlF,WAAxB,CAAoC,KAAK7V,EAAzC,EADO,CAEP;;AACA,QAAK,CAAC,KAAKA,EAAN,IAAY,KAAKA,EAAL,KAAY,CAAzB,IAA+B,KAAKA,EAAL,GAAU,CAA7C,EAAgD;AAC5C,YAAM,IAAIY,KAAJ,CAAW,uEAAD,GACX,0FADC,CAAN;AAEH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAACxH,UAA7B,EAAyC;AACrC,YAAM,IAAItI,KAAJ,CAAU,mEAAV,CAAN;AACH;;AACD,SAAKsI,UAAL,GAAkBwH,SAAS,CAACxH,UAA5B;AACA,SAAKqS,uBAAL;AACAC,IAAAA,UAAU,CAAC,MAAM;AACb,WAAKH,UAAL;AACH,KAFS,EAEP,CAFO,CAAV;AAGH;AACD;AACJ;AACA;AACA;;;AACII,EAAAA,YAAY,CAAC9c,KAAD,EAAQ;AAChB,UAAM+c,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C;AACA,SAAKd,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACD;AACJ;AACA;AACA;;;AACII,EAAAA,YAAY,CAACnd,KAAD,EAAQ;AAChB,UAAM+c,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C,EAFgB,CAGhB;;AACA,UAAMK,GAAG,GAAGC,QAAZ,CAJgB,CAKhB;;AACA,UAAMC,KAAK,GAAGD,QAAQ,CAACE,eAAvB;AACA,UAAMC,kBAAkB,GAAG,CAACJ,GAAG,CAACK,iBAAL,IAA0B,CAACL,GAAG,CAACM,uBAA1D,CAPgB,CAQhB;AACA;AACA;AACA;;AACA,QAAIF,kBAAJ,EAAwB;AACpB,UAAIF,KAAK,CAACK,iBAAV,EAA6B;AACzBL,QAAAA,KAAK,CAACK,iBAAN,GACKvH,IADL,CACU,MAAM,CACf,CAFD,EAGKI,KAHL,CAGW,MAAM;AACbjB,UAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd;AACH,SALD;AAMH,OAPD,MAQK,IAAI8H,KAAK,CAACM,uBAAV,EAAmC;AACpC;AACAN,QAAAA,KAAK,CAACM,uBAAN;AACH;AACJ,KAbD,MAcK;AACD,UAAIR,GAAG,CAACS,cAAR,EAAwB;AACpBT,QAAAA,GAAG,CAACS,cAAJ,GACKzH,IADL,CACU,MAAM,CACf,CAFD,EAGKI,KAHL,CAGW,MAAM;AACbjB,UAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd;AACH,SALD;AAMH,OAPD,MAQK,IAAI4H,GAAG,CAACU,oBAAR,EAA8B;AAC/B;AACAV,QAAAA,GAAG,CAACU,oBAAJ;AACH;AACJ;;AACD,SAAK7B,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACD;AACJ;AACA;AACA;;;AACIgB,EAAAA,QAAQ,CAAC/d,KAAD,EAAQ;AACZ,UAAM+c,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C;;AACA,QAAI,KAAK9K,MAAL,CAAYpM,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,WAAK8K,YAAL;AACH;;AACD,QAAI,CAAC,KAAKqN,qBAAV,EAAiC;AAC7B,YAAM,IAAI/b,KAAJ,CAAU,uCAAV,CAAN;AACH;;AACD,UAAMgc,kBAAkB,GAAG,KAAKD,qBAAL,CAA2BpJ,gBAA3B,CAA4C5U,KAAK,CAAC+B,KAAlD,CAA3B;;AACA,QAAIkc,kBAAkB,KAAK,KAAKhM,MAAL,CAAYpM,MAAZ,GAAqB,CAAhD,EAAmD;AAC/C;AACA,WAAKmY,qBAAL,CAA2B/K,SAA3B;AACH,KAHD,MAIK;AACD,WAAK+K,qBAAL,CAA2BrL,SAA3B;AACH;;AACD,SAAKsJ,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACD;AACJ;AACA;AACA;;;AACImB,EAAAA,UAAU,CAACle,KAAD,EAAQ;AACd,UAAM+c,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C,EAFc,CAGd;;AACA,QAAIxf,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,UAAI0M,WAAW,CAAChb,KAAZ,IAAqBgb,WAAW,CAAChb,KAAZ,CAAkBT,KAAlB,CAAwB8X,MAAjD,EAAyD;AACrD;AACA,YAAI2D,WAAW,CAACpc,MAAZ,IAAsBoc,WAAW,CAACpc,MAAZ,CAAmBwd,cAA7C,EAA6D;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAMC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYvB,WAAW,CAAChb,KAAZ,CAAkBT,KAAlB,CAAwB8X,MAApC,EAA4C,sBAA5C,CAAlB,CAPyD,CAQzD;;AACA,cAAIgF,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAACG,MAAV,GAAmB,IAAnB,CADW,CACc;AACzB;;AACA,iBAAKtC,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACJ,SAdD,MAeK;AACD,eAAKyB,kBAAL,CAAwBzB,WAAW,CAAChb,KAAZ,CAAkBT,KAAlB,CAAwB8X,MAAhD,EADC,CAED;;AACA,eAAK6C,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACJ;AACJ;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIyB,EAAAA,kBAAkB,CAACC,OAAD,EAAU;AACxBJ,IAAAA,MAAM,CAACK,QAAP,CAAgBC,IAAhB,GAAuBF,OAAvB;AACH;AACD;AACJ;AACA;AACA;;;AACIG,EAAAA,UAAU,CAAC5e,KAAD,EAAQ;AACd,UAAM+c,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C;AACA,SAAK8B,aAAL;AACA,SAAK5C,mBAAL,CAAyBiB,mBAAzB,CAA6CH,WAA7C;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI+B,EAAAA,oBAAoB,CAAC9e,KAAD,EAAQ0B,MAAM,GAAGG,MAAM,CAACkP,MAAxB,EAAgC;AAChD,UAAMgM,WAAW,GAAG,KAAKC,oBAAL,CAA0Bhd,KAA1B,CAApB;AACA,SAAKic,mBAAL,CAAyBgB,oBAAzB,CAA8CF,WAA9C;AACA,SAAKpM,YAAL,CAAkBjP,MAAlB,EAA0B,KAA1B;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIqd,EAAAA,cAAc,CAAC/e,KAAD,EAAQ0B,MAAM,GAAGG,MAAM,CAACkP,MAAxB,EAAgC;AAC1C;AACA,UAAMiO,WAAW,GAAG;AAChBre,MAAAA,MAAM,EAAE;AACJG,QAAAA,IAAI,EAAE4D,UAAU,CAACM;AADb,OADQ;AAIhBjD,MAAAA,KAAK,EAAE,IAJS;AAKhBL,MAAAA,MAAM,EAAE1B,KAAK,CAAC0B,MALE;AAMhBD,MAAAA,SAAS,EAAEzB,KAAK,CAACyB;AAND,KAApB;AAQA,SAAKwa,mBAAL,CAAyBgB,oBAAzB,CAA8C+B,WAA9C;AACA,SAAKrO,YAAL,CAAkBjP,MAAlB,EAA0B,KAA1B;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIiP,EAAAA,YAAY,CAACjP,MAAM,GAAGG,MAAM,CAACkP,MAAjB,EAAyBwK,YAAY,GAAG,KAAxC,EAA+C;AACvD,UAAMxJ,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKga,mBAAL,CAAyBgD,SAAzB,CAAmC,IAAIrd,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqC,IAArC,CAAnC;AACA,SAAKwa,eAAL,CAAqBnF,KAArB,CAA2BhF,SAA3B;AACA,SAAKkK,mBAAL,CAAyBiD,KAAzB,CAA+B,KAAK7d,EAApC,EAAwCka,YAAxC;AACH;AACD;AACJ;AACA;AACA;;;AACI4D,EAAAA,oBAAoB,CAACnf,KAAD,EAAQ;AACxB,UAAM+U,QAAQ,GAAG/U,KAAK,CAAC2B,MAAvB;;AACA,QAAIoT,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,IAAI,KAAK9C,MAAL,CAAYpM,MAA5C,EAAoD;AAChD;AACH;;AACD,SAAKqM,YAAL,GAAoB,KAAKD,MAAL,CAAY8C,QAAZ,CAApB,CALwB,CAMxB;;AACA,SAAKkH,mBAAL,CAAyBmD,QAAzB,CAAkC,IAAIxd,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BrB,KAAK,CAAC0B,MAAnC,EAA2CqT,QAAQ,GAAG,CAAtD,CAAlC,EAPwB,CAQxB;;AACA,SAAKsK,iBAAL,CAAuBrf,KAAK,CAAC0B,MAA7B,EAAqCqT,QAArC;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIuK,EAAAA,cAAc,CAACtf,KAAD,EAAQ;AAClB,QAAIA,KAAK,IAAI,KAAKkL,kBAAlB,EAAsC;AAClC,WAAKyF,YAAL,CAAkB9O,MAAM,CAACoP,KAAzB,EAAgC,IAAhC;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIqD,EAAAA,WAAW,CAACtU,KAAD,EAAQ;AACf;AACA,SAAKiS,MAAL,GAAc,KAAKA,MAAL,CAAYhU,GAAZ,CAAiBgd,GAAD,IAAS;AACnC,UAAIA,GAAG,IAAIA,GAAG,CAAC5Z,EAAJ,KAAWrB,KAAK,CAACqB,EAA5B,EAAgC;AAC5B,eAAO2I,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkBoP,GAAlB,EAAuB;AAAE7G,UAAAA,gBAAgB,EAAEpU,KAAK,CAACwU;AAA1B,SAAvB,CAAP;AACH;;AACD,aAAOyG,GAAP;AACH,KALa,CAAd;AAMH;AACD;AACJ;AACA;AACA;;;AACIsE,EAAAA,UAAU,CAAC9K,KAAD,EAAQ;AACd,SAAKvC,YAAL,GAAoB,KAAKD,MAAL,CAAYwC,KAAZ,CAApB;AACH;AACD;AACJ;AACA;AACA;;;AACI+K,EAAAA,cAAc,CAACxf,KAAD,EAAQ;AAClB,SAAKmf,oBAAL,CAA0Bnf,KAA1B;AACH;AACD;AACJ;AACA;AACA;;;AACI6U,EAAAA,WAAW,GAAG;AACV,QAAI,KAAKqH,eAAT,EAA0B;AACtB,YAAMnK,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,UAAI,KAAKA,EAAL,IAAW0Q,SAAf,EAA0B;AACtB,aAAKmK,eAAL,CAAqBnF,KAArB,CAA2BhF,SAA3B;AACH;AACJ;;AACD,QAAI,KAAKwK,wBAAT,EAAmC;AAC/B,WAAKA,wBAAL,CAA8BkD,WAA9B;AACH;;AACD,SAAKrD,kBAAL,CAAwB/E,MAAxB,CAA+B,KAAKhW,EAApC;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIub,EAAAA,uBAAuB,GAAG;AACtB,QAAI,KAAKvb,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKia,eAAL,CAAqBnG,IAArB,CAA0BhE,SAA1B,EAAqCqE,IAArC,CAA0C,MAAM;AAC5C,WAAK8F,eAAL,CAAqBzF,GAArB,CAAyB,CAACzW,KAAD,EAAQ4W,KAAR,KAAkB;AACvC,YAAI5W,KAAK,CAAC6W,cAAV,EAA0B;AACtB7W,UAAAA,KAAK,CAAC6W,cAAN;AACH,SAFD,MAGK;AACD;AACA7W,UAAAA,KAAK,CAAC8W,WAAN,GAAoB,KAApB;AACH;;AACD,aAAK+H,aAAL;AACH,OATD,EASG9M,SATH;AAUH,KAXD;AAYH;AACD;AACJ;AACA;AACA;;;AACI8M,EAAAA,aAAa,GAAG;AACZ,QAAI,KAAKxd,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,UAAMwI,kBAAkB,GAAGsH,SAAS,CAACtH,kBAArC;;AACA,QAAIA,kBAAkB,IAAI,CAACA,kBAAkB,CAAC7C,YAA9C,EAA4D;AACxD;AACH;;AACD,SAAK8X,wBAAL;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIC,EAAAA,YAAY,CAACC,UAAD,EAAaC,WAAW,GAAG,EAA3B,EAA+B;AACvC,UAAMC,SAAS,GAAG,IAAlB;AACA,UAAMC,cAAc,GAAGC,IAAI,CAACJ,UAAD,CAA3B;AACA,UAAMK,WAAW,GAAGF,cAAc,CAACla,MAAnC;AACA,UAAMqa,WAAW,GAAGvM,IAAI,CAACwM,IAAL,CAAUF,WAAW,GAAGH,SAAxB,CAApB;AACA,UAAMM,UAAU,GAAG,IAAIC,KAAJ,CAAUH,WAAV,CAAnB;;AACA,SAAK,IAAII,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAGJ,WAAtC,EAAmD,EAAEI,UAArD,EAAiE;AAC7D,YAAMC,KAAK,GAAGD,UAAU,GAAGR,SAA3B;AACA,YAAM3E,GAAG,GAAGxH,IAAI,CAACG,GAAL,CAASyM,KAAK,GAAGT,SAAjB,EAA4BG,WAA5B,CAAZ;AACA,YAAMO,KAAK,GAAG,IAAIH,KAAJ,CAAUlF,GAAG,GAAGoF,KAAhB,CAAd;;AACA,WAAK,IAAIE,MAAM,GAAGF,KAAb,EAAoB/G,CAAC,GAAG,CAA7B,EAAgCiH,MAAM,GAAGtF,GAAzC,EAA8C,EAAE3B,CAAF,EAAK,EAAEiH,MAArD,EAA6D;AACzDD,QAAAA,KAAK,CAAChH,CAAD,CAAL,GAAWuG,cAAc,CAACU,MAAD,CAAd,CAAuBC,UAAvB,CAAkC,CAAlC,CAAX;AACH;;AACDN,MAAAA,UAAU,CAACE,UAAD,CAAV,GAAyB,IAAIK,UAAJ,CAAeH,KAAf,CAAzB;AACH;;AACD,WAAO,IAAII,IAAJ,CAASR,UAAT,EAAqB;AAAEtf,MAAAA,IAAI,EAAE+e;AAAR,KAArB,CAAP;AACH;AACD;AACJ;AACA;AACA;;;AACIH,EAAAA,wBAAwB,GAAG;AACvB,UAAMmB,IAAI,GAAGxD,QAAQ,CAACyD,aAAT,CAAuB,GAAvB,CAAb;AACA,QAAIC,QAAQ,GAAG,KAAf;AACA,QAAI9F,GAAJ,CAHuB,CAIvB;;AACA,QAAI,OAAO,KAAK/I,YAAL,CAAkB5Q,KAAlB,CAAwB2Z,GAA/B,KAAuC,QAA3C,EAAqD;AACjDA,MAAAA,GAAG,GAAG,KAAK/I,YAAL,CAAkB5Q,KAAlB,CAAwB2Z,GAA9B;AACH,KAFD,MAGK;AACD;AACAA,MAAAA,GAAG,GAAG,KAAKoB,SAAL,CAAe2E,QAAf,CAAwB/jB,eAAe,CAACgkB,YAAxC,EAAsD,KAAK/O,YAAL,CAAkB5Q,KAAlB,CAAwB2Z,GAA9E,CAAN;AACH;;AACD,QAAIA,GAAG,CAACa,QAAJ,CAAa,aAAb,KAA+Bb,GAAG,CAACa,QAAJ,CAAa,UAAb,CAAnC,EAA6D;AACzD,YAAMoF,SAAS,GAAGjG,GAAG,CAACkG,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,EAA+BC,KAA/B,CAAqC,UAArC,EAAiD,CAAjD,CAAlB;AACA,YAAMC,UAAU,GAAGpG,GAAG,CAACmG,KAAJ,CAAU,UAAV,EAAsB,CAAtB,CAAnB;AACA,YAAME,IAAI,GAAG,KAAK3B,YAAL,CAAkB0B,UAAlB,EAA8B,WAAWH,SAAzC,CAAb;AACAL,MAAAA,IAAI,CAAClC,IAAL,GAAY4C,GAAG,CAACC,eAAJ,CAAoBF,IAApB,CAAZ;AACAP,MAAAA,QAAQ,GAAG,IAAX;AACAF,MAAAA,IAAI,CAAC1R,YAAL,CAAkB,UAAlB,EAA8B,KAAKsS,WAAL,CAAiB,KAAKvP,YAAtB,EAAoC6O,QAApC,EAA8CG,SAA9C,CAA9B;AACH,KAPD,MAQK;AACDL,MAAAA,IAAI,CAAClC,IAAL,GAAY1D,GAAZ;AACA4F,MAAAA,IAAI,CAAC1R,YAAL,CAAkB,UAAlB,EAA8B,KAAKsS,WAAL,CAAiB,KAAKvP,YAAtB,EAAoC6O,QAApC,CAA9B;AACH;;AACD1D,IAAAA,QAAQ,CAACqE,IAAT,CAAcC,WAAd,CAA0Bd,IAA1B;AACAA,IAAAA,IAAI,CAACe,KAAL;AACAvE,IAAAA,QAAQ,CAACqE,IAAT,CAAcG,WAAd,CAA0BhB,IAA1B;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI7D,EAAAA,oBAAoB,CAAChd,KAAD,EAAQ;AACxB,WAAOgK,MAAM,CAAC6B,MAAP,CAAc7L,KAAd,EAAqB;AAAE+B,MAAAA,KAAK,EAAE,KAAKmQ;AAAd,KAArB,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIuP,EAAAA,WAAW,CAAC1f,KAAD,EAAQgf,QAAQ,GAAG,KAAnB,EAA0Be,eAAe,GAAG,EAA5C,EAAgD;AACvD,QAAI,CAAC/f,KAAK,CAACT,KAAN,CAAYygB,gBAAb,IAAiChgB,KAAK,CAACT,KAAN,CAAYygB,gBAAZ,CAA6Blc,MAA7B,KAAwC,CAA7E,EAAgF;AAC5E,UAAIkb,QAAJ,EAAc;AACV,eAAQ,SAAQhf,KAAK,CAACV,EAAG,IAAGygB,eAAe,KAAK,EAApB,GAAyBA,eAAzB,GAA2C,KAAM,EAA7E;AACH,OAFD,MAGK;AACD,eAAO/f,KAAK,CAACT,KAAN,CAAY2Z,GAAZ,CAAgBkG,OAAhB,CAAwB,WAAxB,EAAqC,EAArC,CAAP;AACH;AACJ,KAPD,MAQK;AACD,aAAOpf,KAAK,CAACT,KAAN,CAAYygB,gBAAnB;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIrF,EAAAA,UAAU,GAAG;AACT,SAAKT,mBAAL,CAAyB+F,WAAzB,CAAqC,IAAIpgB,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BQ,MAAM,CAACogB,IAApC,EAA0C,IAA1C,CAArC;AACA,UAAMxO,YAAY,GAAG,KAAKxB,MAAL,CAAYiQ,OAAZ,CAAoB,KAAKhQ,YAAzB,CAArB,CAFS,CAGT;;AACA,SAAK+J,mBAAL,CAAyBmD,QAAzB,CAAkC,IAAIxd,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BQ,MAAM,CAACogB,IAApC,EAA0CxO,YAAY,GAAG,CAAzD,CAAlC,EAJS,CAKT;;AACA,SAAK4L,iBAAL,CAAuBxd,MAAM,CAACkP,MAA9B,EAAsC0C,YAAtC;AACA,SAAK6I,WAAL,GAAmB,KAAKrK,MAAL,CAAYpM,MAAZ,GAAqB,CAAxC;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIwZ,EAAAA,iBAAiB,CAAC3d,MAAD,EAASygB,YAAT,EAAuB;AACpC;AACA,YAAQA,YAAR;AACI,WAAK,CAAL;AACI,aAAKlG,mBAAL,CAAyBmG,cAAzB,CAAwC,IAAIxgB,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqC,IAArC,CAAxC;AACA;;AACJ,WAAK,KAAKuQ,MAAL,CAAYpM,MAAZ,GAAqB,CAA1B;AACI,aAAKoW,mBAAL,CAAyBoG,aAAzB,CAAuC,IAAIzgB,eAAJ,CAAoB,KAAKP,EAAzB,EAA6BK,MAA7B,EAAqC,IAArC,CAAvC;AACA;AANR;AAQH;;AAneuB;;AAqe5Bqa,qBAAqB,CAACnb,IAAtB;AAAA,mBAAkHmb,qBAAlH,EAxtGsG1f,EAwtGtG,mBAAyJyQ,WAAzJ,GAxtGsGzQ,EAwtGtG,mBAAiLimB,mBAAjL,GAxtGsGjmB,EAwtGtG,mBAAiNyZ,eAAjN,GAxtGsGzZ,EAwtGtG,mBAA6OU,WAA7O,GAxtGsGV,EAwtGtG,mBAAqQA,EAAE,CAACqZ,iBAAxQ,GAxtGsGrZ,EAwtGtG,mBAAsS2a,kBAAtS,GAxtGsG3a,EAwtGtG,mBAAqU+O,aAArU,GAxtGsG/O,EAwtGtG,mBAA+VoB,EAAE,CAAC8kB,YAAlW;AAAA;;AACAxG,qBAAqB,CAAClb,IAAtB,kBAztGsGxE,EAytGtG;AAAA,QAAsG0f,qBAAtG;AAAA;AAAA;AAAA;AAztGsG1f,MAAAA,EAytGtG,aAA4S+T,qBAA5S;AAAA;;AAAA;AAAA;;AAztGsG/T,MAAAA,EAytGtG,qBAztGsGA,EAytGtG;AAAA;AAAA;AAAA;AAAA;AAztGsGA,MAAAA,EAytGtG;AAAA,eAAsG,sBAAtG;AAAA,gBAztGsGA,EAytGtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAztGsGA,MAAAA,EAytG0R,4BAAhY;AAztGsGA,MAAAA,EAytG+gB;AAAA,eAAiB,0BAAjB;AAAA,QAArnB;AAztGsGA,MAAAA,EAytG+jB,4BAArqB;AAztGsGA,MAAAA,EAytGwmB,4BAA9sB;AAztGsGA,MAAAA,EAytGspB,yCAA5vB;AAztGsGA,MAAAA,EAytGswB;AAAA,eAAW,oBAAX;AAAA;AAAA,eAAoE,sBAApE;AAAA;AAAA,eAA+H,sBAA/H;AAAA;AAAA,eAA6L,gCAA7L;AAAA;AAAA,eAAoQ,wBAApQ;AAAA;AAAA,eAAmU,wBAAnU;AAAA,QAA52B;AAztGsGA,MAAAA,EAytGgmC,eAAtsC;AAztGsGA,MAAAA,EAytG6nC,yCAAnuC;AAztGsGA,MAAAA,EAytGq0C;AAAA,eAAc,uBAAd;AAAA;AAAA,eAA6E,gCAA7E;AAAA;AAAA,eAAsJ,0BAAtJ;AAAA,QAA36C;AAztGsGA,MAAAA,EAytGo/C,eAA1lD;AAztGsGA,MAAAA,EAytGihD,yBAAvnD;AAztGsGA,MAAAA,EAytGgiD,gCAAtoD;AAztGsGA,MAAAA,EAytG6sD;AAAA,eAAa,sBAAb;AAAA,QAAnzD;AAztGsGA,MAAAA,EAytG+uD,eAAr1D;AAztGsGA,MAAAA,EAytGqwD,oCAA32D;AAztGsGA,MAAAA,EAytGo5D;AAAA,eAAiB,0BAAjB;AAAA,QAA1/D;AAztGsGA,MAAAA,EAytG87D,eAApiE;AAztGsGA,MAAAA,EAytGo9D,eAA1jE;AAztGsGA,MAAAA,EAytGg+D,eAAtkE;AAztGsGA,MAAAA,EAytG0+D,eAAhlE;AAztGsGA,MAAAA,EAytGk/D,eAAxlE;AAAA;;AAAA;AAztGsGA,MAAAA,EAytG+Y,oHAArf;AAztGsGA,MAAAA,EAytGkU,gFAAxa;AAztGsGA,MAAAA,EAytGwqB,aAA9wB;AAztGsGA,MAAAA,EAytGwqB,2DAA9wB;AAztGsGA,MAAAA,EAytG+oC,aAArvC;AAztGsGA,MAAAA,EAytG+oC,iGAArvC;AAztGsGA,MAAAA,EAytGyiD,aAA/oD;AAztGsGA,MAAAA,EAytGyiD,+GAA/oD;AAztGsGA,MAAAA,EAytGkxD,aAAx3D;AAztGsGA,MAAAA,EAytGkxD,iFAAx3D;AAAA;AAAA;AAAA,eAAu8Fif,qBAAv8F,EAAq1EtD,qBAAr1E,EAAuhF5H,qBAAvhF,EAAisFyJ,aAAjsF,EAA8zFO,iBAA9zF;AAAA;AAAA;AAAA;;AACA;AAAA,qDA1tGsG/d,EA0tGtG,mBAA2F0f,qBAA3F,EAA8H,CAAC;AACnHjb,IAAAA,IAAI,EAAExE,SAD6G;AAEnHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,kBAAZ;AAAgCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAAzE;AAAiFF,MAAAA,QAAQ,EAAE,kuDAA3F;AAA+zDoN,MAAAA,MAAM,EAAE,CAAC,iNAAD;AAAv0D,KAAD;AAF6G,GAAD,CAA9H,EAG4B,YAAY;AAChC,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAE6J,SAAR;AAAmBkL,MAAAA,UAAU,EAAE,CAAC;AACxB/U,QAAAA,IAAI,EAAE9D,MADkB;AAExB+D,QAAAA,IAAI,EAAE,CAAC+L,WAAD;AAFkB,OAAD;AAA/B,KAAD,EAGW;AAAEhM,MAAAA,IAAI,EAAEwhB;AAAR,KAHX,EAG0C;AAAExhB,MAAAA,IAAI,EAAEgV;AAAR,KAH1C,EAGqE;AAAEhV,MAAAA,IAAI,EAAEkJ,MAAR;AAAgB6L,MAAAA,UAAU,EAAE,CAAC;AACzF/U,QAAAA,IAAI,EAAE9D,MADmF;AAEzF+D,QAAAA,IAAI,EAAE,CAAChE,WAAD;AAFmF,OAAD;AAA5B,KAHrE,EAMW;AAAE+D,MAAAA,IAAI,EAAEzE,EAAE,CAACqZ;AAAX,KANX,EAM2C;AAAE5U,MAAAA,IAAI,EAAEkW;AAAR,KAN3C,EAMyE;AAAElW,MAAAA,IAAI,EAAEsK;AAAR,KANzE,EAMkG;AAAEtK,MAAAA,IAAI,EAAErD,EAAE,CAAC8kB;AAAX,KANlG,CAAP;AAOH,GAXL,EAWuB;AAAEvE,IAAAA,qBAAqB,EAAE,CAAC;AACjCld,MAAAA,IAAI,EAAE5D,SAD2B;AAEjC6D,MAAAA,IAAI,EAAE,CAACqP,qBAAD,EAAwB;AAAEoS,QAAAA,MAAM,EAAE;AAAV,OAAxB;AAF2B,KAAD,CAAzB;AAGP7F,IAAAA,UAAU,EAAE,CAAC;AACb7b,MAAAA,IAAI,EAAEhE,YADO;AAEbiE,MAAAA,IAAI,EAAE,CAAC,iBAAD,EAAoB,CAAC,QAAD,CAApB;AAFO,KAAD;AAHL,GAXvB;AAAA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;;AACA,MAAM0hB,eAAN,CAAsB;AAClB5iB,EAAAA,WAAW,CAAC6iB,UAAD,EAAa;AACpB,SAAKA,UAAL,GAAkBA,UAAlB;AACA,SAAKxD,KAAL,GAAa,IAAInhB,OAAJ,EAAb;AACA,SAAK4kB,MAAL,GAAc,KAAKzD,KAAL,CAAW0D,YAAX,EAAd;AACA,SAAK/Y,IAAL,GAAY,IAAI9L,OAAJ,EAAZ;AACA,SAAK8kB,KAAL,GAAa,KAAKhZ,IAAL,CAAU+Y,YAAV,EAAb;AACA,SAAKE,UAAL,GAAkB,IAAI/kB,OAAJ,EAAlB;AACA,SAAKglB,WAAL,GAAmB,KAAKD,UAAL,CAAgBF,YAAhB,EAAnB;AACA,SAAKI,SAAL,GAAiB,IAAIjlB,OAAJ,EAAjB;AACA,SAAKklB,UAAL,GAAkB,KAAKD,SAAL,CAAeJ,YAAf,EAAlB;AACA,SAAKM,OAAL,GAAe,IAAInlB,OAAJ,EAAf;AACA,SAAKolB,QAAL,GAAgB,KAAKD,OAAL,CAAaN,YAAb,EAAhB;AACA,SAAKQ,gBAAL,GAAwB,IAAIrlB,OAAJ,EAAxB;AACA,SAAKslB,iBAAL,GAAyB,KAAKD,gBAAL,CAAsBR,YAAtB,EAAzB;AACA,SAAKU,eAAL,GAAuB,IAAIvlB,OAAJ,EAAvB;AACA,SAAKwlB,gBAAL,GAAwB,KAAKD,eAAL,CAAqBV,YAArB,EAAxB;AACH;AACD;AACJ;AACA;;;AACIY,EAAAA,UAAU,GAAG;AACT,SAAKd,UAAL,CAAgBe,OAAhB;AACH;AACD;AACJ;AACA;AACA;;;AACIxE,EAAAA,SAAS,CAACjf,KAAD,EAAQ;AACb,SAAKkf,KAAL,CAAWpM,IAAX,CAAgB9S,KAAhB;AACH;AACD;AACJ;AACA;AACA;;;AACIof,EAAAA,QAAQ,CAACpf,KAAD,EAAQ;AACZ,SAAK6J,IAAL,CAAUiJ,IAAV,CAAe9S,KAAf;AACH;AACD;AACJ;AACA;AACA;;;AACIoiB,EAAAA,cAAc,CAACpiB,KAAD,EAAQ;AAClB,SAAK8iB,UAAL,CAAgBhQ,IAAhB,CAAqB9S,KAArB;AACH;AACD;AACJ;AACA;AACA;;;AACIqiB,EAAAA,aAAa,CAACriB,KAAD,EAAQ;AACjB,SAAKgjB,SAAL,CAAelQ,IAAf,CAAoB9S,KAApB;AACH;AACD;AACJ;AACA;AACA;;;AACIgiB,EAAAA,WAAW,CAAChiB,KAAD,EAAQ;AACf,SAAKkjB,OAAL,CAAapQ,IAAb,CAAkB9S,KAAlB;AACH;AACD;AACJ;AACA;AACA;;;AACIid,EAAAA,oBAAoB,CAACjd,KAAD,EAAQ;AACxB,SAAKojB,gBAAL,CAAsBtQ,IAAtB,CAA2B9S,KAA3B;AACH;AACD;AACJ;AACA;AACA;;;AACIkd,EAAAA,mBAAmB,CAACld,KAAD,EAAQ;AACvB,SAAKsjB,eAAL,CAAqBxQ,IAArB,CAA0B9S,KAA1B;AACH;;AAxEiB;;AA2EtB,MAAM0jB,qBAAqB,GAAG;AAC1BC,EAAAA,WAAW,EAAE,IADa;AAE1BC,EAAAA,aAAa,EAAE,2BAFW;AAG1BC,EAAAA,UAAU,EAAE;AAHc,CAA9B;;AAKA,MAAMvB,mBAAN,CAA0B;AACtBziB,EAAAA,WAAW,CAACikB,QAAD,EAAWC,OAAX,EAAoBvT,aAApB,EAAmC;AAC1C,SAAKsT,QAAL,GAAgBA,QAAhB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKvT,aAAL,GAAqBA,aAArB;AACA,SAAKwT,YAAL,GAAoB,IAAIjmB,OAAJ,EAApB;AACA,SAAKye,aAAL,GAAqB,KAAKwH,YAAL,CAAkBpB,YAAlB,EAArB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACItE,EAAAA,IAAI,CAACtI,MAAD,EAAS;AACT;AACA,UAAM0M,UAAU,GAAG,KAAKuB,aAAL,EAAnB,CAFS,CAGT;;AACA,SAAKC,SAAL,GAAiB,IAAIzB,eAAJ,CAAoBC,UAApB,CAAjB,CAJS,CAKT;;AACA,UAAMyB,gBAAgB,GAAG,KAAKC,qBAAL,CAA2B1B,UAA3B,EAAuC1M,MAAvC,EAA+C,KAAKkO,SAApD,CAAzB;AACAxB,IAAAA,UAAU,CAAC2B,aAAX,GAA2B5R,SAA3B,CAAqC,MAAM;AACvC,UAAI,KAAKyR,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAeV,UAAf;AACH;AACJ,KAJD;AAKA,WAAO,KAAKU,SAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIhF,EAAAA,KAAK,CAAC7d,EAAD,EAAKka,YAAL,EAAmB;AACpB,UAAMxJ,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6BlK,EAA7B,CAAlB;;AACA,QAAIka,YAAJ,EAAkB;AACd,UAAI,KAAK2I,SAAL,IAAkBnS,SAAlB,IAA+BA,SAAS,CAAC7G,kBAA7C,EAAiE;AAC7D,aAAKgZ,SAAL,CAAeV,UAAf;AACH;AACJ,KAJD,MAKK;AACD,UAAI,KAAKU,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAeV,UAAf;AACH;AACJ;AACJ;AACD;AACJ;AACA;AACA;;;AACIc,EAAAA,iBAAiB,CAACrS,MAAD,EAAS;AACtB,SAAK+R,YAAL,CAAkBlR,IAAlB,CAAuBb,MAAvB;AACH;AACD;AACJ;AACA;AACA;;;AACIgN,EAAAA,SAAS,CAACjf,KAAD,EAAQ;AACb,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAejF,SAAf,CAAyBjf,KAAzB;AACH;AACD;AACJ;AACA;AACA;;;AACIof,EAAAA,QAAQ,CAACpf,KAAD,EAAQ;AACZ,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAe9E,QAAf,CAAwBpf,KAAxB;AACH;AACD;AACJ;AACA;AACA;;;AACIoiB,EAAAA,cAAc,CAACpiB,KAAD,EAAQ;AAClB,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAe9B,cAAf,CAA8BpiB,KAA9B;AACH;AACD;AACJ;AACA;AACA;;;AACIqiB,EAAAA,aAAa,CAACriB,KAAD,EAAQ;AACjB,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAe7B,aAAf,CAA6BriB,KAA7B;AACH;AACD;AACJ;AACA;AACA;;;AACIgiB,EAAAA,WAAW,CAAChiB,KAAD,EAAQ;AACf,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAelC,WAAf,CAA2BhiB,KAA3B;AACH;AACD;AACJ;AACA;AACA;;;AACIid,EAAAA,oBAAoB,CAACjd,KAAD,EAAQ;AACxB,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAejH,oBAAf,CAAoCjd,KAApC;AACH;AACD;AACJ;AACA;AACA;;;AACIkd,EAAAA,mBAAmB,CAACld,KAAD,EAAQ;AACvB,QAAI,CAAC,KAAKkkB,SAAV,EAAqB;AACjB;AACH;;AACD,SAAKA,SAAL,CAAehH,mBAAf,CAAmCld,KAAnC;AACH;AACD;AACJ;AACA;AACA;;;AACIikB,EAAAA,aAAa,GAAG;AACZ,UAAMM,aAAa,GAAG,KAAKC,gBAAL,EAAtB;AACA,WAAO,KAAKT,OAAL,CAAaU,MAAb,CAAoBF,aAApB,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIH,EAAAA,qBAAqB,CAAC1B,UAAD,EAAa1M,MAAb,EAAqBkO,SAArB,EAAgC;AACjD,UAAMJ,QAAQ,GAAG3mB,QAAQ,CAACsnB,MAAT,CAAgB;AAC7BC,MAAAA,MAAM,EAAE,KAAKZ,QADgB;AAE7Ba,MAAAA,SAAS,EAAE,CACP;AAAEC,QAAAA,OAAO,EAAEnC,eAAX;AAA4BoC,QAAAA,QAAQ,EAAEX;AAAtC,OADO,EAEP;AAAEU,QAAAA,OAAO,EAAE9X,WAAX;AAAwB+X,QAAAA,QAAQ,EAAE7O;AAAlC,OAFO;AAFkB,KAAhB,CAAjB;AAOA,UAAM8O,eAAe,GAAG,IAAIzmB,eAAJ,CAAoB0d,qBAApB,EAA2C,IAA3C,EAAiD+H,QAAjD,CAAxB;AACA,UAAMiB,YAAY,GAAGrC,UAAU,CAACsC,MAAX,CAAkBF,eAAlB,CAArB;AACA,WAAOC,YAAY,CAACE,QAApB;AACH;AACD;AACJ;AACA;AACA;;;AACIT,EAAAA,gBAAgB,GAAG;AACf,UAAMU,gBAAgB,GAAG,KAAKnB,OAAL,CAAahU,QAAb,GAAwBoV,MAAxB,GAAiCC,kBAAjC,GAAsDC,gBAAtD,EAAzB;AACA,UAAMd,aAAa,GAAG,IAAI1mB,aAAJ,CAAkB;AACpC8lB,MAAAA,WAAW,EAAED,qBAAqB,CAACC,WADC;AAEpCC,MAAAA,aAAa,EAAEF,qBAAqB,CAACE,aAFD;AAGpCC,MAAAA,UAAU,EAAEH,qBAAqB,CAACG,UAHE;AAIpCyB,MAAAA,cAAc,EAAE,KAAKvB,OAAL,CAAawB,gBAAb,CAA8BC,KAA9B,EAJoB;AAKpCN,MAAAA;AALoC,KAAlB,CAAtB;AAOA,WAAOX,aAAP;AACH;;AAnKqB;;AAqK1BjC,mBAAmB,CAAC1hB,IAApB;AAAA,mBAAgH0hB,mBAAhH,EA7/GsGjmB,EA6/GtG,UAAqJA,EAAE,CAACc,QAAxJ,GA7/GsGd,EA6/GtG,UAA6KuB,EAAE,CAAC6nB,OAAhL,GA7/GsGppB,EA6/GtG,UAAoM+O,aAApM;AAAA;;AACAkX,mBAAmB,CAAC7V,KAApB,kBA9/GsGpQ,EA8/GtG;AAAA,SAAoHimB,mBAApH;AAAA,WAAoHA,mBAApH;AAAA,cAAqJ;AAArJ;;AACA;AAAA,qDA//GsGjmB,EA+/GtG,mBAA2FimB,mBAA3F,EAA4H,CAAC;AACjHxhB,IAAAA,IAAI,EAAEtE,UAD2G;AAEjHuE,IAAAA,IAAI,EAAE,CAAC;AAAE2L,MAAAA,UAAU,EAAE;AAAd,KAAD;AAF2G,GAAD,CAA5H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAE5L,MAAAA,IAAI,EAAEzE,EAAE,CAACc;AAAX,KAAD,EAAwB;AAAE2D,MAAAA,IAAI,EAAElD,EAAE,CAAC6nB;AAAX,KAAxB,EAA8C;AAAE3kB,MAAAA,IAAI,EAAEsK;AAAR,KAA9C,CAAP;AAAgF,GAH1H;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMsa,kBAAkB,GAAG,OAA3B;AACA;AACA;AACA;;AACA,MAAMC,yBAAN,SAAwC/lB,mBAAxC,CAA4D;AACxDC,EAAAA,WAAW,CAAC0Q,GAAD,EAAMqV,kBAAN,EACX;AACAvJ,EAAAA,SAFW,EAEA7L,aAFA,EAEe;AACtB;AACA,SAAKD,GAAL,GAAWA,GAAX;AACA,SAAKqV,kBAAL,GAA0BA,kBAA1B;AACA,SAAKvJ,SAAL,GAAiBA,SAAjB;AACA,SAAK7L,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;;AACQ,SAAKqV,YAAL,GAAoB,MAApB;AACA;AACR;AACA;;AACQ,SAAKlO,SAAL,GAAkB,mBAAlB;AACA;AACR;AACA;;AACQ,SAAK0C,YAAL,GAAoB,IAAI1d,YAAJ,EAApB;AACA;AACR;AACA;AACA;;AACQ,SAAKqU,WAAL,GAAmBnP,MAAM,CAACoP,KAA1B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,cAAL,GAAsBrP,MAAM,CAACsP,QAA7B;AACA;AACR;AACA;AACA;;AACQ,SAAKmJ,QAAL,GAAgB,EAAhB;AACA;AACR;AACA;;AACQ,SAAKwL,gBAAL,GAAwBJ,kBAAxB,CApCsB,CAqCtB;;AACA,SAAKK,sBAAL,GAA8BH,kBAAkB,CAC3CI,OADyB,CACjB,CAACznB,WAAW,CAAC0nB,MAAb,EAAqB1nB,WAAW,CAAC2nB,KAAjC,EAAwC3nB,WAAW,CAAC4nB,MAApD,EAA4D5nB,WAAW,CAAC6nB,KAAxE,EAA+E7nB,WAAW,CAAC8nB,MAA3F,CADiB,EAEzB5T,SAFyB,CAEd9Q,MAAD,IAAY;AACvB,UAAI,CAAC,KAAKyI,aAAN,IAAuB,CAAC,KAAKA,aAAL,CAAmBf,WAA/C,EAA4D;AACxD;AACH;;AACD,UAAI1H,MAAM,CAAC0H,WAAP,CAAmB9K,WAAW,CAAC0nB,MAA/B,CAAJ,EAA4C;AACxC,aAAKK,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BV,MAAjD;AACH,OAFD,MAGK,IAAIhH,MAAM,CAAC0H,WAAP,CAAmB9K,WAAW,CAAC2nB,KAA/B,CAAJ,EAA2C;AAC5C,aAAKI,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BT,KAAjD;AACH,OAFI,MAGA,IAAIjH,MAAM,CAAC0H,WAAP,CAAmB9K,WAAW,CAAC4nB,MAA/B,CAAJ,EAA4C;AAC7C,aAAKG,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BR,MAAjD;AACH,OAFI,MAGA,IAAIlH,MAAM,CAAC0H,WAAP,CAAmB9K,WAAW,CAAC6nB,KAA/B,CAAJ,EAA2C;AAC5C,aAAKE,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BP,KAAjD;AACH,OAFI,MAGA,IAAInH,MAAM,CAAC0H,WAAP,CAAmB9K,WAAW,CAAC8nB,MAA/B,CAAJ,EAA4C;AAC7C,aAAKC,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BN,MAAjD;AACH;AACJ,KArB6B,CAA9B;AAsBH;AACD;AACJ;AACA;AACA;;;AACIud,EAAAA,YAAY,CAACC,sBAAD,EAAyB;AACjC,QAAI,KAAKnc,aAAL,IAAsB,KAAKA,aAAL,CAAmBnC,SAA7C,EAAwD;AACpD,YAAMue,SAAS,GAAG,CAAC,KAAKpc,aAAL,CAAmBnC,SAAnB,CAA6BkZ,OAA7B,CAAqC,OAArC,EAA8C,EAA9C,EAAkDA,OAAlD,CAA0D,MAA1D,EAAkE,EAAlE,CAAnB;AACA,WAAK2E,gBAAL,GAAwBnS,IAAI,CAACG,GAAL,CAASyS,sBAAT,EAAiCC,SAAjC,IAA8C,IAAtE;AACH,KAHD,MAIK;AACD,YAAMA,SAAS,GAAG,CAACd,kBAAkB,CAACvE,OAAnB,CAA2B,OAA3B,EAAoC,EAApC,EAAwCA,OAAxC,CAAgD,MAAhD,EAAwD,EAAxD,CAAnB;AACA,WAAK2E,gBAAL,GAAwBnS,IAAI,CAACG,GAAL,CAASyS,sBAAT,EAAiCC,SAAjC,IAA8C,IAAtE;AACH;;AACD,SAAKjW,GAAL,CAASsC,YAAT;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIpD,EAAAA,QAAQ,GAAG;AACP,UAAMsC,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAK2I,cAAL,GAAsBmH,SAAS,CAACnH,cAAhC;AACA,SAAKR,aAAL,GAAqB2H,SAAS,CAACjH,sBAA/B;AACA,SAAKX,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;;AACA,QAAI,CAAC,KAAKC,aAAN,IAAuB,CAAC,KAAKA,aAAL,CAAmBnC,SAA3C,IAAwD,CAAC,KAAKmC,aAAL,CAAmBf,WAAhF,EAA6F;AACzF,YAAM,IAAIpH,KAAJ,CAAU,wDAAV,CAAN;AACH,KAVM,CAWP;;;AACA,QAAI,KAAK2I,cAAL,IAAuB,KAAKA,cAAL,CAAoB5C,QAApB,KAAiC,MAA5D,EAAoE;AAChE,WAAK6d,YAAL,GAAoB,KAAKjb,cAAL,CAAoB5C,QAAxC;AACH;;AACD,SAAK8d,gBAAL,GAAwB,KAAK1b,aAAL,CAAmBnC,SAA3C,CAfO,CAgBP;;AACA,SAAKuS,YAAL,CAAkB,KAAKtI,YAAvB,EAAqC,KAAKD,MAA1C,EAjBO,CAkBP;AACA;AACA;;AACA,UAAMwU,cAAc,GAAG,KAAKb,kBAAL,CAAwBc,SAAxB,CAAkCnoB,WAAW,CAAC0nB,MAA9C,CAAvB;AACA,UAAMU,aAAa,GAAG,KAAKf,kBAAL,CAAwBc,SAAxB,CAAkCnoB,WAAW,CAAC2nB,KAA9C,CAAtB;AACA,UAAMU,cAAc,GAAG,KAAKhB,kBAAL,CAAwBc,SAAxB,CAAkCnoB,WAAW,CAAC4nB,MAA9C,CAAvB;AACA,UAAMU,aAAa,GAAG,KAAKjB,kBAAL,CAAwBc,SAAxB,CAAkCnoB,WAAW,CAAC6nB,KAA9C,CAAtB;AACA,UAAMU,cAAc,GAAG,KAAKlB,kBAAL,CAAwBc,SAAxB,CAAkCnoB,WAAW,CAAC8nB,MAA9C,CAAvB;;AACA,QAAII,cAAJ,EAAoB;AAChB,WAAKH,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BV,MAAjD;AACH,KAFD,MAGK,IAAIge,aAAJ,EAAmB;AACpB,WAAKL,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BT,KAAjD;AACH,KAFI,MAGA,IAAIge,cAAJ,EAAoB;AACrB,WAAKN,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BR,MAAjD;AACH,KAFI,MAGA,IAAIge,aAAJ,EAAmB;AACpB,WAAKP,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BP,KAAjD;AACH,KAFI,MAGA,IAAIge,cAAJ,EAAoB;AACrB,WAAKR,YAAL,CAAkB,KAAKlc,aAAL,CAAmBf,WAAnB,CAA+BN,MAAjD;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIkR,EAAAA,QAAQ,CAACQ,OAAD,EAAU;AACd,QAAI,CAACA,OAAD,IAAY,CAAC,KAAKvI,YAAtB,EAAoC;AAChC,aAAO,KAAP;AACH;;AACD,WAAOuI,OAAO,CAACpZ,EAAR,KAAe,KAAK6Q,YAAL,CAAkB7Q,EAAxC;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIsO,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,UAAM+U,YAAY,GAAG/U,OAAO,CAACE,YAA7B;;AACA,QAAI,CAAC6U,YAAL,EAAmB;AACf;AACH;;AACD,UAAMrM,IAAI,GAAGqM,YAAY,CAAC5U,aAA1B;AACA,UAAMwI,OAAO,GAAGoM,YAAY,CAAC3U,YAA7B;;AACA,QAAIuI,OAAO,IAAI3I,OAAO,CAACC,MAAnB,IAA6BD,OAAO,CAACC,MAAR,CAAeE,aAA5C,IAA6DH,OAAO,CAACC,MAAR,CAAeG,YAAhF,EAA8F;AAC1F;AACA;AACA;AACA,WAAKoI,YAAL,CAAkBG,OAAlB,EAA2B3I,OAAO,CAACC,MAAR,CAAeG,YAA1C;AACH;;AACD,QAAIsI,IAAI,IAAIC,OAAR,IAAmBD,IAAI,CAACrZ,EAAL,KAAYsZ,OAAO,CAACtZ,EAA3C,EAA+C;AAC3C;AACA;AACA;AACA,UAAIga,SAAJ;AACA,UAAI5H,YAAJ;;AACA,UAAI;AACA4H,QAAAA,SAAS,GAAGvZ,QAAQ,CAAC4Y,IAAD,EAAO,KAAKzI,MAAZ,CAApB;AACAwB,QAAAA,YAAY,GAAG3R,QAAQ,CAAC6Y,OAAD,EAAU,KAAK1I,MAAf,CAAvB;AACH,OAHD,CAIA,OAAOqD,GAAP,EAAY;AACRC,QAAAA,OAAO,CAACC,KAAR,CAAc,2DAAd;AACA,cAAMF,GAAN;AACH,OAb0C,CAc3C;;;AACA,YAAM0R,IAAI,GAAGrT,IAAI,CAACyH,KAAL,CAAW,CAAC,KAAKD,GAAL,GAAW,KAAKD,KAAjB,IAA0B,CAArC,IAA0C,KAAKA,KAA5D;;AACA,UAAIG,SAAS,KAAK,KAAKpJ,MAAL,CAAYpM,MAAZ,GAAqB,CAAnC,IAAwC4N,YAAY,KAAK,CAA7D,EAAgE;AAC5D;AACA,aAAKqH,2BAAL;AACA,aAAKR,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACA;AACH,OArB0C,CAsB3C;;;AACA,UAAIE,SAAS,KAAK,CAAd,IAAmB5H,YAAY,KAAK,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5D;AACA,aAAKkV,qBAAL;AACA,aAAKT,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACA;AACH;;AACD,UAAI,KAAK/Q,aAAL,IAAsB,KAAKA,aAAL,CAAmBlB,MAAnB,GAA4B,CAA5B,KAAkC,CAA5D,EAA+D;AAC3D,YAAI8d,IAAI,GAAGvT,YAAX,EAAyB;AACrB,eAAKoH,QAAL;AACH,SAFD,MAGK;AACD,eAAK/H,IAAL;AACH;AACJ,OAPD,MAQK;AACD,YAAIkU,IAAI,GAAGvT,YAAX,EAAyB;AACrB,eAAKoH,QAAL;AACH;;AACD,YAAImM,IAAI,GAAGvT,YAAX,EAAyB;AACrB,eAAKX,IAAL;AACH;AACJ;AACJ;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIiB,EAAAA,YAAY,CAAC0G,OAAD,EAAUza,KAAV,EAAiB0B,MAAM,GAAGG,MAAM,CAACkP,MAAjC,EAAyC;AACjD,QAAI,CAAC,KAAK3G,aAAN,IAAuB,CAAC,KAAKA,aAAL,CAAmBhB,SAA/C,EAA0D;AACtD;AACH;;AACD,UAAM6d,iBAAiB,GAAG,KAAKhV,MAAL,CAAYiQ,OAAZ,CAAoBzH,OAApB,CAA1B;AACA,UAAM9Y,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAK4a,YAAL,CAAkB1L,IAAlB,CAAuB;AAAEjN,QAAAA,MAAF;AAAUC,QAAAA,MAAM,EAAEslB;AAAlB,OAAvB;AACH,KAFD,MAGK,IAAItlB,MAAM,KAAKjC,IAAf,EAAqB;AACtB,WAAK2a,YAAL,CAAkB1L,IAAlB,CAAuB;AAAEjN,QAAAA,MAAF;AAAUC,QAAAA,MAAM,EAAEslB;AAAlB,OAAvB;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIjT,EAAAA,iBAAiB,CAACjU,SAAD,EAAYC,KAAZ,EAAmB;AAChC,UAAM2B,MAAM,GAAG,MAAM7B,qBAAN,CAA4BC,SAA5B,EAAuCC,KAAvC,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKqT,IAAL;AACH,KAFD,MAGK,IAAInR,MAAM,KAAKjC,IAAf,EAAqB;AACtB,WAAKmb,QAAL;AACH;AACJ;AACD;AACJ;AACA;AACA;;;AACIqM,EAAAA,YAAY,CAACzM,OAAD,EAAU;AAClB,QAAI,CAACA,OAAO,CAAClZ,KAAb,EAAoB;AAChB,aAAOkZ,OAAO,CAACnZ,KAAR,CAAcqW,SAAd,IAA2B,EAAlC;AACH;;AACD,WAAO8C,OAAO,CAAClZ,KAAR,CAAcoW,SAAd,IAA2B8C,OAAO,CAACnZ,KAAR,CAAcqW,SAAzC,IAAsD,EAA7D;AACH;AACD;AACJ;AACA;AACA;;;AACIwP,EAAAA,QAAQ,CAAC1M,OAAD,EAAU;AACd,QAAI,CAACA,OAAO,CAAClZ,KAAb,EAAoB;AAChB,aAAOkZ,OAAO,CAACnZ,KAAR,CAAcoW,KAAd,IAAuB,EAA9B;AACH;;AACD,WAAO+C,OAAO,CAAClZ,KAAR,CAAcmW,KAAd,IAAuB+C,OAAO,CAACnZ,KAAR,CAAcoW,KAArC,IAA8C,EAArD;AACH;AACD;AACJ;AACA;AACA;;;AACI0P,EAAAA,MAAM,CAAC3M,OAAD,EAAU;AACZ,QAAI,CAACA,OAAO,CAAClZ,KAAb,EAAoB;AAChB,aAAOkZ,OAAO,CAACnZ,KAAR,CAAc+lB,GAAd,IAAqB,EAA5B;AACH;;AACD,WAAO5M,OAAO,CAAClZ,KAAR,CAAc8lB,GAAd,IAAqB5M,OAAO,CAACnZ,KAAR,CAAc+lB,GAAnC,IAA0C,EAAjD;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIhO,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,CAACjY,EAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACIimB,EAAAA,kBAAkB,CAACC,WAAD,EAAcC,mBAAd,EAAmC;AACjD;AACA,QAAIC,EAAE,GAAG,SAASF,WAAT,GAAuB,GAAhC;;AACA,QAAI,CAAC,CAACC,mBAAN,EAA2B;AACvB;AACAC,MAAAA,EAAE,IAAI,OAAO,MAAP,GAAgBD,mBAAhB,GAAsC,GAA5C;AACH;;AACD,WAAO,KAAKnL,SAAL,CAAeqL,wBAAf,CAAwCD,EAAxC,CAAP;AACH;AACD;AACJ;AACA;AACA;;;AACI5S,EAAAA,WAAW,GAAG;AACV,QAAI,KAAKkR,sBAAT,EAAiC;AAC7B,WAAKA,sBAAL,CAA4BtG,WAA5B;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIjF,EAAAA,YAAY,CAACtI,YAAD,EAAeD,MAAf,EAAuB;AAC/B,QAAIwC,KAAJ;;AACA,QAAI;AACAA,MAAAA,KAAK,GAAG3S,QAAQ,CAACoQ,YAAD,EAAeD,MAAf,CAAhB;AACH,KAFD,CAGA,OAAOqD,GAAP,EAAY;AACR,YAAMA,GAAN;AACH;;AACD,YAAQb,KAAR;AACI,WAAK,CAAL;AACI;AACA,aAAKqG,2BAAL;AACA;;AACJ,WAAK7I,MAAM,CAACpM,MAAP,GAAgB,CAArB;AACI;AACA,aAAKkV,qBAAL;AACA;AACJ;AACA;AACA;AACA;AACA;AAbJ;;AAeA,SAAKT,QAAL,GAAgBrI,MAAM,CAAC/T,MAAP,CAAc,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAAtD,CAAhB;AACH;AACD;AACJ;AACA;;;AACIL,EAAAA,2BAA2B,GAAG;AAC1B,QAAI,CAAC,KAAK1Q,aAAN,IAAuB,KAAKA,aAAL,CAAmBlB,MAAnB,KAA8ByB,SAAzD,EAAoE;AAChE,YAAM,IAAI1I,KAAJ,CAAU,mEAAV,CAAN;AACH;;AACD,SAAKiZ,KAAL,GAAa,CAAb;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAK1J,aAAL,CAAmBlB,MAA5B,EAAoC,KAAK+I,MAAL,CAAYpM,MAAhD,CAAX;AACH;AACD;AACJ;AACA;;;AACIkV,EAAAA,qBAAqB,GAAG;AACpB,QAAI,CAAC,KAAK3Q,aAAN,IAAuB,KAAKA,aAAL,CAAmBlB,MAAnB,KAA8ByB,SAAzD,EAAoE;AAChE,YAAM,IAAI1I,KAAJ,CAAU,mEAAV,CAAN;AACH;;AACD,SAAKiZ,KAAL,GAAa,KAAKjJ,MAAL,CAAYpM,MAAZ,GAAqB,CAArB,IAA0B,KAAKuE,aAAL,CAAmBlB,MAAnB,GAA4B,CAAtD,CAAb;AACA,SAAKiS,GAAL,GAAW,KAAKlJ,MAAL,CAAYpM,MAAvB;AACH;AACD;AACJ;AACA;;;AACIiN,EAAAA,IAAI,GAAG;AACH;AACA,QAAI,KAAKoB,gBAAL,CAAsB,KAAKjC,MAAL,CAAYpM,MAAZ,GAAqB,CAA3C,CAAJ,EAAmD;AAC/C;AACH;;AACD,QAAI,KAAKsV,GAAL,KAAa,KAAKlJ,MAAL,CAAYpM,MAA7B,EAAqC;AACjC;AACH;;AACD,SAAKqV,KAAL;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAKqH,GAAL,GAAW,CAApB,EAAuB,KAAKlJ,MAAL,CAAYpM,MAAnC,CAAX;AACA,SAAKyU,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACH;AACD;AACJ;AACA;;;AACIN,EAAAA,QAAQ,GAAG;AACP;AACA,QAAI,KAAK3G,gBAAL,CAAsB,CAAtB,CAAJ,EAA8B;AAC1B;AACH;;AACD,QAAI,KAAKgH,KAAL,KAAe,CAAnB,EAAsB;AAClB;AACH;;AACD,SAAKA,KAAL,GAAavH,IAAI,CAACC,GAAL,CAAS,KAAKsH,KAAL,GAAa,CAAtB,EAAyB,CAAzB,CAAb;AACA,SAAKC,GAAL,GAAWxH,IAAI,CAACG,GAAL,CAAS,KAAKqH,GAAL,GAAW,CAApB,EAAuB,KAAKlJ,MAAL,CAAYpM,MAAnC,CAAX;AACA,SAAKyU,QAAL,GAAgB,KAAKrI,MAAL,CAAY/T,MAAZ,CAAmB,CAAC+c,GAAD,EAAMzB,CAAN,KAAYA,CAAC,IAAI,KAAK0B,KAAV,IAAmB1B,CAAC,GAAG,KAAK2B,GAA3D,CAAhB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIjH,EAAAA,gBAAgB,CAACY,aAAD,EAAgB;AAC5B,WAAOhT,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,KAA6C6C,aAApD;AACH;;AAtYuD;;AAwY5D6Q,yBAAyB,CAAC/kB,IAA1B;AAAA,mBAAsH+kB,yBAAtH,EA16HsGtpB,EA06HtG,mBAAiKA,EAAE,CAACqZ,iBAApK,GA16HsGrZ,EA06HtG,mBAAkMiC,IAAI,CAACqpB,kBAAvM,GA16HsGtrB,EA06HtG,mBAAsOoB,EAAE,CAAC8kB,YAAzO,GA16HsGlmB,EA06HtG,mBAAkQ+O,aAAlQ;AAAA;;AACAua,yBAAyB,CAAC9kB,IAA1B,kBA36HsGxE,EA26HtG;AAAA,QAA0GspB,yBAA1G;AAAA;AAAA;AAAA;AAAA;AA36HsGtpB,MAAAA,EA26HtG;AA36HsGA,MAAAA,EA26HtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA36HsGA,EA26HtG,6BA36HsGA,EA26HtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA36HsGA,MAAAA,EA26H8V,yEAApc;AAAA;;AAAA;AA36HsGA,MAAAA,EA26HoW,iFAA1c;AAAA;AAAA;AAAA,eAA2jMiB,EAAE,CAACqY,IAA9jM,EAA4oMrY,EAAE,CAACqc,OAA/oM,EAAsvM9K,sBAAtvM,EAA82MW,aAA92M;AAAA;AAAA;AAAA;;AACA;AAAA,qDA56HsGnT,EA46HtG,mBAA2FspB,yBAA3F,EAAkI,CAAC;AACvH7kB,IAAAA,IAAI,EAAExE,SADiH;AAEvHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,sBAAZ;AAAoCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAA7E;AAAqFF,MAAAA,QAAQ,EAAE,uxEAA/F;AAAw3EoN,MAAAA,MAAM,EAAE,CAAC,qlCAAD,EAAwlC,uuEAAxlC;AAAh4E,KAAD;AAFiH,GAAD,CAAlI,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAEzE,EAAE,CAACqZ;AAAX,KAAD,EAAiC;AAAE5U,MAAAA,IAAI,EAAExC,IAAI,CAACqpB;AAAb,KAAjC,EAAoE;AAAE7mB,MAAAA,IAAI,EAAErD,EAAE,CAAC8kB;AAAX,KAApE,EAA+F;AAAEzhB,MAAAA,IAAI,EAAEsK;AAAR,KAA/F,CAAP;AAAiI,GAH3K,EAG6L;AAAEya,IAAAA,YAAY,EAAE,CAAC;AAC9L/kB,MAAAA,IAAI,EAAE1D,WADwL;AAE9L2D,MAAAA,IAAI,EAAE,CAAC,iBAAD;AAFwL,KAAD,CAAhB;AAG7K4W,IAAAA,SAAS,EAAE,CAAC;AACZ7W,MAAAA,IAAI,EAAE1D,WADM;AAEZ2D,MAAAA,IAAI,EAAE,CAAC,iBAAD;AAFM,KAAD,CAHkK;AAOrL;AACAM,IAAAA,EAAE,EAAE,CAAC;AACGP,MAAAA,IAAI,EAAEpE;AADT,KAAD,CARiL;AAWrL;AACAwV,IAAAA,YAAY,EAAE,CAAC;AACPpR,MAAAA,IAAI,EAAEpE;AADC,KAAD,CAZuK;AAerL;AACAuV,IAAAA,MAAM,EAAE,CAAC;AACDnR,MAAAA,IAAI,EAAEpE;AADL,KAAD,CAhB6K;AAkB7K2d,IAAAA,YAAY,EAAE,CAAC;AACfvZ,MAAAA,IAAI,EAAEjE;AADS,KAAD;AAlB+J,GAH7L;AAAA;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM+qB,gBAAN,CAAuB;AACnB/nB,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,CAAC,KAAKmY,aAAV,EAAyB;AACrB;AACH;;AACD,QAAI,KAAKA,aAAL,CAAmB7f,QAAvB,EAAiC;AAC7B,WAAK8G,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,WAA9C,EAA2D,KAAKyY,aAAL,CAAmB7f,QAA9E;AACH;;AACD,QAAI,KAAK6f,aAAL,CAAmB5f,SAAvB,EAAkC;AAC9B,WAAK6G,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,YAA9C,EAA4D,KAAKyY,aAAL,CAAmB5f,SAA/E;AACH;AACJ;;AAlCkB;;AAoCvB2f,gBAAgB,CAAChnB,IAAjB;AAAA,mBAA6GgnB,gBAA7G,EAngIsGvrB,EAmgItG,mBAA+IA,EAAE,CAACiT,SAAlJ,GAngIsGjT,EAmgItG,mBAAwKA,EAAE,CAACkT,UAA3K;AAAA;;AACAqY,gBAAgB,CAAChZ,IAAjB,kBApgIsGvS,EAogItG;AAAA,QAAiGurB,gBAAjG;AAAA;AAAA;AAAA;AAAA;AAAA,aApgIsGvrB,EAogItG;AAAA;;AACA;AAAA,qDArgIsGA,EAqgItG,mBAA2FurB,gBAA3F,EAAyH,CAAC;AAC9G9mB,IAAAA,IAAI,EAAElE,SADwG;AAE9GmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAFwG,GAAD,CAAzH,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAEsY,IAAAA,aAAa,EAAE,CAAC;AACzH/mB,MAAAA,IAAI,EAAEpE;AADmH,KAAD;AAAjB,GALvH;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMorB,iBAAN,SAAgCloB,mBAAhC,CAAoD;AAChDC,EAAAA,WAAW,EACX;AACAwQ,EAAAA,UAFW,EAECC,MAFD,EAES2L,mBAFT,EAE8BzL,aAF9B,EAE6CD,GAF7C,EAEkD;AACzD;AACA,SAAKF,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAK2L,mBAAL,GAA2BA,mBAA3B;AACA,SAAKzL,aAAL,GAAqBA,aAArB;AACA,SAAKD,GAAL,GAAWA,GAAX;AACA;AACR;AACA;;AACQ,SAAKoH,SAAL,GAAkB,UAAlB;AACA;AACR;AACA;AACA;;AACQ,SAAK1F,MAAL,GAAc,EAAd;AACA;AACR;AACA;;AACQ,SAAK8V,UAAL,GAAkB,IAAIprB,YAAJ,EAAlB;AACA;AACR;AACA;;AACQ,SAAK+T,WAAL,GAAmB,IAAI/T,YAAJ,EAAnB;AACA;AACR;AACA;;AACQ,SAAKmmB,UAAL,GAAkB,IAAInmB,YAAJ,EAAlB;AACA;AACR;AACA;;AACQ,SAAKqmB,SAAL,GAAiB,IAAIrmB,YAAJ,EAAjB;AACA;AACR;AACA;AACA;;AACQ,SAAKqU,WAAL,GAAmBnP,MAAM,CAACoP,KAA1B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,cAAL,GAAsBrP,MAAM,CAACsP,QAA7B;AACA;AACR;AACA;AACA;;AACQ,SAAKC,YAAL,GAAoB,KAApB;AACA;AACR;AACA;AACA;;AACQ,SAAKC,WAAL,GAAmB,KAAnB;AACA;AACR;AACA;;AACQ,SAAKT,MAAL,GAAc,IAAI7S,OAAJ,EAAd;AACA;AACR;AACA;;AACQ,SAAK8S,KAAL,GAAa,IAAI9S,OAAJ,EAAb;AACA;AACR;AACA;;AACQ,SAAKuT,YAAL,GAAoB;AAChBC,MAAAA,IAAI,EAAE,WADU;AAEhBC,MAAAA,KAAK,EAAE,YAFS;AAGhBC,MAAAA,EAAE,EAAE,SAHY;AAIhBC,MAAAA,IAAI,EAAE;AAJU,KAApB;AAMH;AACD;AACJ;AACA;;;AACIC,EAAAA,YAAY,GAAG;AACX,QAAI,KAAKtQ,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC8P,SAAS,CAAChH,kBAAX,IAAiC,CAACgH,SAAS,CAAChH,kBAAV,CAA6BtC,YAAnE,EAAiF;AAC7E;AACH;;AACD,SAAKmJ,YAAL;AACH;AACD;AACJ;AACA;;;AACIC,EAAAA,YAAY,GAAG;AACX,QAAI,KAAKxQ,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC8P,SAAS,CAAChH,kBAAX,IAAiC,CAACgH,SAAS,CAAChH,kBAAV,CAA6BtC,YAA/D,IAA+E,CAACsJ,SAAS,CAAChH,kBAAV,CAA6BxC,QAAjH,EAA2H;AACvH;AACH;;AACD,SAAKuJ,YAAL;AACH;AACD;AACJ;AACA;;;AACIkW,EAAAA,aAAa,GAAG;AACZ,QAAI,KAAK3mB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC8P,SAAS,CAACnH,cAAX,IAA6B,CAACmH,SAAS,CAACnH,cAAV,CAAyBxC,cAA3D,EAA2E;AACvE;AACH;;AACD,SAAK6K,SAAL;AACH;AACD;AACJ;AACA;;;AACIgV,EAAAA,eAAe,GAAG;AACd,QAAI,KAAK5mB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC8P,SAAS,CAACnH,cAAX,IAA6B,CAACmH,SAAS,CAACnH,cAAV,CAAyBxC,cAA3D,EAA2E;AACvE;AACH;;AACD,SAAKuK,SAAL;AACH;;AACDlD,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKpO,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,QAAI,CAAC,KAAKgQ,MAAN,IAAgB,KAAKA,MAAL,CAAYpM,MAAZ,KAAuB,CAA3C,EAA8C;AAC1C,YAAM,IAAI5D,KAAJ,CAAU,oFAAV,CAAN;AACH;;AACD,SAAKuO,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC,KAAK2U,MAA3C;AACA,UAAMjE,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKiQ,YAAL,GAAoB,KAAKD,MAAL,CAAY,CAAZ,CAApB;AACA,SAAKjH,kBAAL,GAA0B+G,SAAS,CAAC/G,kBAApC;AACA,SAAKb,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;AACA,SAAKc,qBAAL,GAA6B8G,SAAS,CAAC9G,qBAAvC;AACA,SAAKL,cAAL,GAAsBmH,SAAS,CAACnH,cAAhC;AACA,SAAKC,mBAAL,GAA2BkH,SAAS,CAAClH,mBAArC;AACA,SAAKqd,iBAAL;AACH;;AACDvY,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,QAAImW,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCC,EAApC,EAAwCC,EAAxC,EAA4CC,EAA5C,EAAgDC,EAAhD;;AACA,QAAI,KAAKznB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH,KAJgB,CAKjB;;;AACA,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,UAAM8mB,YAAY,GAAG/W,OAAO,CAACgE,MAA7B,CAViB,CAWjB;;AACA,QAAI+S,YAAY,IACZ,CAACA,YAAY,CAACC,WADd,KAEC,CAAC,CAACb,EAAE,GAAGY,YAAY,CAAC5W,aAAb,CAA2BnH,kBAAjC,MAAyD,IAAzD,IAAiEmd,EAAE,KAAK,KAAK,CAA7E,GAAiF,KAAK,CAAtF,GAA0FA,EAAE,CAAClf,OAA9F,OAA4G,CAACmf,EAAE,GAAGW,YAAY,CAAC3W,YAAb,CAA0BpH,kBAAhC,MAAwD,IAAxD,IAAgEod,EAAE,KAAK,KAAK,CAA5E,GAAgF,KAAK,CAArF,GAAyFA,EAAE,CAACnf,OAAxM,KAAqN,CAAC8f,YAAY,CAAC5W,aAAb,CAA2BnH,kBAA5B,IAAkD,CAAC+d,YAAY,CAAC3W,YAAb,CAA0BpH,kBAFnS,CAAJ,EAE6T;AACzT,WAAKwF,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC;AAClC2J,QAAAA,kBAAkB,EAAE,CAACqd,EAAE,GAAGU,YAAY,CAAC3W,YAAnB,MAAqC,IAArC,IAA6CiW,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAACrd;AAD3D,OAAtC;AAGA,WAAKA,kBAAL,GAA0B,CAACsd,EAAE,GAAGS,YAAY,CAAC3W,YAAnB,MAAqC,IAArC,IAA6CkW,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAACtd,kBAAnG;AACA,WAAKuF,GAAL,CAASsC,YAAT;AACH,KApBgB,CAqBjB;;;AACA,QAAIkW,YAAY,IACZ,CAACA,YAAY,CAACC,WADd,KAEC,CAAC,CAACT,EAAE,GAAGQ,YAAY,CAAC5W,aAAb,CAA2BvH,cAAjC,MAAqD,IAArD,IAA6D2d,EAAE,KAAK,KAAK,CAAzE,GAA6E,KAAK,CAAlF,GAAsFA,EAAE,CAACrgB,UAA1F,OAA2G,CAACsgB,EAAE,GAAGO,YAAY,CAAC3W,YAAb,CAA0BxH,cAAhC,MAAoD,IAApD,IAA4D4d,EAAE,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,EAAE,CAACtgB,UAAnM,KAAmN,CAAC6gB,YAAY,CAAC5W,aAAb,CAA2BvH,cAA5B,IAA8C,CAACme,YAAY,CAAC3W,YAAb,CAA0BxH,cAF7R,CAAJ,EAEmT;AAC/S,WAAK4F,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC;AAClCuJ,QAAAA,cAAc,EAAE,CAAC6d,EAAE,GAAGM,YAAY,CAAC3W,YAAnB,MAAqC,IAArC,IAA6CqW,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAAC7d;AADvD,OAAtC;AAGA,WAAKA,cAAL,GAAsB,CAAC8d,EAAE,GAAGK,YAAY,CAAC3W,YAAnB,MAAqC,IAArC,IAA6CsW,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAAC9d,cAA/F;AACA,WAAK2F,GAAL,CAASsC,YAAT;AACH,KA9BgB,CA+BjB;;;AACA,QAAIkW,YAAY,IACZ,CAACA,YAAY,CAACC,WADd,KAEC,CAAC,CAACL,EAAE,GAAGI,YAAY,CAAC5W,aAAb,CAA2BpH,kBAAjC,MAAyD,IAAzD,IAAiE4d,EAAE,KAAK,KAAK,CAA7E,GAAiF,KAAK,CAAtF,GAA0FA,EAAE,CAACpgB,QAA9F,OAA6G,CAACqgB,EAAE,GAAGG,YAAY,CAAC3W,YAAb,CAA0BrH,kBAAhC,MAAwD,IAAxD,IAAgE6d,EAAE,KAAK,KAAK,CAA5E,GAAgF,KAAK,CAArF,GAAyFA,EAAE,CAACrgB,QAAzM,KAAuN,CAACwgB,YAAY,CAAC5W,aAAb,CAA2BpH,kBAA5B,IAAkD,CAACge,YAAY,CAAC3W,YAAb,CAA0BrH,kBAFrS,CAAJ,EAE+T;AAC3T,WAAKyF,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC;AAClC0J,QAAAA,kBAAkB,EAAE,CAAC8d,EAAE,GAAGE,YAAY,CAAC3W,YAAnB,MAAqC,IAArC,IAA6CyW,EAAE,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,EAAE,CAAC9d;AAD3D,OAAtC,EAD2T,CAI3T;AACA;AACA;;AACA,UAAI,CAAC,CAAC+d,EAAE,GAAGC,YAAY,CAAC3W,YAAb,CAA0BrH,kBAAhC,MAAwD,IAAxD,IAAgE+d,EAAE,KAAK,KAAK,CAA5E,GAAgF,KAAK,CAArF,GAAyFA,EAAE,CAACvgB,QAA7F,KAA0G,CAACwgB,YAAY,CAACC,WAA5H,EAAyI;AACrI,aAAKpY,MAAL,CAAYkC,IAAZ;AACH,OAFD,MAGK;AACD,aAAKlB,YAAL;AACH;;AACD,WAAKrB,GAAL,CAASsC,YAAT;AACH;AACJ;;AACDP,EAAAA,kBAAkB,GAAG;AACjB;AACA;AACA,QAAI/U,iBAAiB,CAAC,KAAK8S,UAAN,CAArB,EAAwC;AACpC,UAAI,KAAKhP,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,cAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,YAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,UAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAChH,kBAA7B,EAAiD;AAC7C,cAAM,IAAI9I,KAAJ,CAAU,2EAAV,CAAN;AACH;;AACD,WAAKqO,MAAL,CAAYiC,iBAAZ,CAA8B,MAAM;AAChC,aAAK3B,MAAL,CACK4B,IADL,CACUvU,GAAG,CAAC,MAAM;AAAE,cAAIkqB,EAAJ;;AAAQ,iBAAO,CAACA,EAAE,GAAGpW,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,SAAS,CAAChH,kBAAtE,MAA8F,IAA9F,IAAsGod,EAAE,KAAK,KAAK,CAAlH,GAAsH,KAAK,CAA3H,GAA+HA,EAAE,CAAC3f,QAAzI;AAAoJ,SAArK,CADb,EAEA;AACAtK,QAAAA,MAAM,CAAEsK,QAAD,IAAcA,QAAQ,GAAG,CAA1B,CAHN,EAGoCrK,SAAS,CAACqK,QAAQ,IAAIxK,KAAK,CAACwK,QAAD,CAAL,CAAgBgK,IAAhB,CAAqBpU,SAAS,CAAC,KAAKyS,KAAN,CAA9B,CAAb,CAH7C,EAIK4B,SAJL,CAIe,MAAM,KAAKnC,MAAL,CAAYoC,GAAZ,CAAgB,MAAM;AACvC,cAAIyV,EAAJ;;AACA,cAAI,CAACA,EAAE,GAAGpW,SAAS,CAAChH,kBAAhB,MAAwC,IAAxC,IAAgDod,EAAE,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,EAAE,CAAC5f,QAAhF,EAA0F;AACtF,iBAAKoK,SAAL;AACH;;AACD,eAAKpC,GAAL,CAASsC,YAAT;AACH,SANoB,CAJrB;AAWA,aAAKjC,MAAL,CAAYkC,IAAZ;AACH,OAbD;AAcH;AACJ;AACD;AACJ;AACA;AACA;;;AACIyM,EAAAA,UAAU,CAAC9K,KAAD,EAAQ;AACd,SAAKwU,kBAAL,CAAwB,KAAKhX,MAAL,CAAYwC,KAAZ,CAAxB,EAA4C5S,MAAM,CAACkP,MAAnD;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIiD,EAAAA,iBAAiB,CAACjU,SAAD,EAAYC,KAAZ,EAAmB0B,MAAM,GAAGG,MAAM,CAACkP,MAAnC,EAA2C;AACxD,UAAMpP,MAAM,GAAG,MAAM7B,qBAAN,CAA4BC,SAA5B,EAAuCC,KAAvC,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKkT,SAAL,CAAejR,MAAf;AACH,KAFD,MAGK,IAAIC,MAAM,KAAKjC,IAAf,EAAqB;AACtB,WAAKuT,SAAL,CAAevR,MAAf;AACH;AACJ;AACD;AACJ;AACA;AACA;;;AACIwnB,EAAAA,mBAAmB,GAAG;AAClB,QAAI,KAAK7nB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAACnH,cAAzB,IAA2C,CAAC,KAAKsH,YAArD,EAAmE;AAC/D,YAAM,IAAIjQ,KAAJ,CAAU,qFAAV,CAAN;AACH;;AACD,QAAI,CAAC8P,SAAS,CAACnH,cAAV,CAAyBvC,kBAA9B,EAAkD;AAC9C;AACH;;AACD,UAAMoM,KAAK,GAAG3S,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAtB;AACA,SAAK8V,UAAL,CAAgBpZ,IAAhB,CAAqB8F,KAArB;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIvB,EAAAA,uBAAuB,CAACnR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AAC/C,QAAI,KAAK7Q,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,UAAMknB,0BAA0B,GAAGpX,SAAS,CAAClH,mBAA7C;;AACA,QAAI,CAACse,0BAAD,IAA+B,CAACA,0BAA0B,CAACxhB,WAA/D,EAA4E;AACxE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,QAAI,CAACF,KAAL,EAAY;AACR,YAAM,IAAIE,KAAJ,CAAU,gDAAV,CAAN;AACH;;AACD,UAAMkR,uBAAuB,GAAG,CAACpR,KAAD,IAAU,CAACA,KAAK,CAACT,KAAjB,IAA0B,CAACS,KAAK,CAACT,KAAN,CAAYqG,WAAvC,IAAsD5F,KAAK,CAACT,KAAN,CAAYqG,WAAZ,KAA4B,EAAlH;;AACA,YAAQwhB,0BAA0B,CAACxhB,WAA3B,CAAuC3B,QAA/C;AACI,WAAK5D,mBAAmB,CAACgR,aAAzB;AACI,eAAOD,uBAAuB,GAAG,EAAH,GAAQpR,KAAK,CAACT,KAAN,CAAYqG,WAAZ,GAA0B,EAAhE;;AACJ,WAAKvF,mBAAmB,CAACmF,aAAzB;AACI,eAAO,EAAP;;AACJ;AACI;AACA,eAAO,KAAK8L,oBAAL,CAA0BtR,KAA1B,EAAiCoR,uBAAjC,CAAP;AAPR;AASH;AACD;AACJ;AACA;AACA;;;AACIuB,EAAAA,KAAK,CAAChT,MAAM,GAAG,KAAK4P,YAAL,CAAkBE,KAA5B,EAAmC;AACpC,QAAI,KAAKnQ,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAClH,mBAA7B,EAAkD;AAC9C,YAAM,IAAI5I,KAAJ,CAAU,4EAAV,CAAN;AACH;;AACD,UAAMknB,0BAA0B,GAAGpX,SAAS,CAAClH,mBAA7C;;AACA,YAAQnJ,MAAR;AACI,WAAK,KAAK4P,YAAL,CAAkBE,KAAvB;AACI,YAAI2X,0BAA0B,CAACthB,WAA/B,EAA4C;AACxC,eAAKoL,SAAL,CAAepR,MAAM,CAAC8S,KAAtB;AACH,SAFD,MAGK;AACD,eAAKhC,SAAL,CAAe9Q,MAAM,CAAC8S,KAAtB;AACH;;AACD;;AACJ,WAAK,KAAKrD,YAAL,CAAkBC,IAAvB;AACI,YAAI4X,0BAA0B,CAACthB,WAA/B,EAA4C;AACxC,eAAK8K,SAAL,CAAe9Q,MAAM,CAAC8S,KAAtB;AACH,SAFD,MAGK;AACD,eAAK1B,SAAL,CAAepR,MAAM,CAAC8S,KAAtB;AACH;;AACD;AACJ;AACA;AACA;AACA;AApBJ;AAsBH;AACD;AACJ;AACA;AACA;AACA;;;AACI1B,EAAAA,SAAS,CAACvR,MAAM,GAAGG,MAAM,CAACkP,MAAjB,EAAyB;AAC9B;AACA,QAAI,KAAKmD,gBAAL,CAAsB,CAAtB,CAAJ,EAA8B;AAC1B;AACH;;AACD,SAAK+U,kBAAL,CAAwB,KAAK9U,YAAL,EAAxB,EAA6CzS,MAA7C;AACA,SAAKwmB,iBAAL;AACA,SAAKtX,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIH,EAAAA,SAAS,CAACjR,MAAM,GAAGG,MAAM,CAACkP,MAAjB,EAAyB;AAC9B;AACA,QAAI,KAAKmD,gBAAL,CAAsB,KAAKjC,MAAL,CAAYpM,MAAZ,GAAqB,CAA3C,CAAJ,EAAmD;AAC/C;AACH;;AACD,SAAKojB,kBAAL,CAAwB,KAAK5U,YAAL,EAAxB,EAA6C3S,MAA7C;AACA,SAAKwmB,iBAAL;AACA,SAAKtX,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIuG,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,CAACjY,EAAZ;AACH;AACD;AACJ;AACA;AACA;;;AACIme,EAAAA,cAAc,CAACxf,KAAD,EAAQ;AAClB,UAAMopB,UAAU,GAAG,KAAKnX,MAAL,CAAYjS,KAAK,CAAC2B,MAAlB,CAAnB;;AACA,QAAI,CAAC,CAACynB,UAAN,EAAkB;AACd,WAAKlB,iBAAL;AACA,WAAKe,kBAAL,CAAwBG,UAAxB,EAAoCppB,KAAK,CAAC0B,MAA1C;AACH;AACJ;AACD;AACJ;AACA;;;AACIoQ,EAAAA,YAAY,GAAG;AACX,SAAKlB,MAAL,CAAYkC,IAAZ;AACH;AACD;AACJ;AACA;;;AACIlB,EAAAA,YAAY,GAAG;AACX,SAAKf,KAAL,CAAWiC,IAAX;AACH,GAnZ+C,CAoZhD;;AACA;AACJ;AACA;AACA;AACA;AACA;;;AACIQ,EAAAA,wBAAwB,CAACvR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AAChD,QAAI,CAACnQ,KAAL,EAAY;AACR,aAAO,EAAP;AACH;;AACD,WAAOA,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYqG,WAA3B,GAAyC5F,KAAK,CAACT,KAAN,CAAYqG,WAArD,GAAoE,SAAQ7F,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAAR,GAA+B,CAAE,EAApH;AACH,GAha+C,CAiahD;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIsB,EAAAA,iBAAiB,CAACxR,KAAK,GAAG,KAAKmQ,YAAd,EAA4B;AACzC,QAAI,KAAK7Q,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAClH,mBAA7B,EAAkD;AAC9C,YAAM,IAAI5I,KAAJ,CAAU,4EAAV,CAAN;AACH;;AACD,UAAMknB,0BAA0B,GAAGpX,SAAS,CAAClH,mBAA7C;;AACA,QAAI,CAACse,0BAAD,IAA+B,CAACA,0BAA0B,CAACxhB,WAA/D,EAA4E;AACxE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,UAAMkR,uBAAuB,GAAG,CAACpR,KAAD,IAAU,CAACA,KAAK,CAACT,KAAjB,IAA0B,CAACS,KAAK,CAACT,KAAN,CAAYqG,WAAvC,IAAsD5F,KAAK,CAACT,KAAN,CAAYqG,WAAZ,KAA4B,EAAlH;AACA,UAAMA,WAAW,GAAG,KAAK0L,oBAAL,CAA0BtR,KAA1B,EAAiCoR,uBAAjC,CAApB;AACA,WAAOxL,WAAP;AACH;AACD;AACJ;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACJ;AACA;AACA;;;AACIkN,EAAAA,WAAW,GAAG;AACV,SAAKjD,YAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIqX,EAAAA,kBAAkB,CAAClnB,KAAD,EAAQL,MAAR,EAAgB;AAC9B,QAAI,KAAKL,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,SAAKiQ,YAAL,GAAoBnQ,KAApB;AACA,UAAM0S,KAAK,GAAG3S,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAAtB,CAL8B,CAM9B;;AACA,SAAKoN,iBAAL,CAAuB3d,MAAvB,EAA+B+S,KAA/B,EAP8B,CAQ9B;;AACA,SAAK/D,WAAL,CAAiB/B,IAAjB,CAAsB,IAAInN,UAAJ,CAAe,KAAKH,EAApB,EAAwBK,MAAxB,EAAgC+S,KAAK,GAAG,CAAxC,CAAtB;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIJ,EAAAA,YAAY,GAAG;AACX,QAAI,CAAC,KAAKnC,YAAV,EAAwB;AACpB,YAAM,IAAIjQ,KAAJ,CAAU,uDAAV,CAAN;AACH;;AACD,UAAMwR,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;AACA,QAAI8C,QAAQ,GAAG,CAAf;;AACA,QAAItB,YAAY,IAAI,CAAhB,IAAqBA,YAAY,GAAG,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5DkP,MAAAA,QAAQ,GAAGtB,YAAY,GAAG,CAA1B;AACH,KAFD,MAGK;AACDsB,MAAAA,QAAQ,GAAG,CAAX,CADC,CACa;AACjB;;AACD,WAAO,KAAK9C,MAAL,CAAY8C,QAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIZ,EAAAA,YAAY,GAAG;AACX,QAAI,CAAC,KAAKjC,YAAV,EAAwB;AACpB,YAAM,IAAIjQ,KAAJ,CAAU,uDAAV,CAAN;AACH;;AACD,UAAMwR,YAAY,GAAG3R,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAA7B;AACA,QAAI8C,QAAQ,GAAG,CAAf;;AACA,QAAItB,YAAY,GAAG,CAAf,IAAoBA,YAAY,IAAI,KAAKxB,MAAL,CAAYpM,MAAZ,GAAqB,CAA7D,EAAgE;AAC5DkP,MAAAA,QAAQ,GAAGtB,YAAY,GAAG,CAA1B;AACH,KAFD,MAGK;AACDsB,MAAAA,QAAQ,GAAG,KAAK9C,MAAL,CAAYpM,MAAZ,GAAqB,CAAhC,CADC,CACkC;AACtC;;AACD,WAAO,KAAKoM,MAAL,CAAY8C,QAAZ,CAAP;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;;;AACI1B,EAAAA,oBAAoB,CAACtR,KAAD,EAAQoR,uBAAR,EAAiC;AACjD,QAAI,KAAK9R,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAD,IAAc,CAACA,SAAS,CAAClH,mBAA7B,EAAkD;AAC9C,YAAM,IAAI5I,KAAJ,CAAU,4EAAV,CAAN;AACH;;AACD,UAAMknB,0BAA0B,GAAGpX,SAAS,CAAClH,mBAA7C;;AACA,QAAI,CAACse,0BAAD,IAA+B,CAACA,0BAA0B,CAACxhB,WAA/D,EAA4E;AACxE,YAAM,IAAI1F,KAAJ,CAAU,iFAAV,CAAN;AACH;;AACD,QAAI,CAACF,KAAL,EAAY;AACR,YAAM,IAAIE,KAAJ,CAAU,gDAAV,CAAN;AACH,KAdgD,CAejD;;;AACA,QAAIknB,0BAA0B,CAACxhB,WAA3B,CAAuCqN,qBAAvC,IAAgEmU,0BAA0B,CAACxhB,WAA3B,CAAuCqN,qBAAvC,KAAiE,EAArI,EAAyI;AACrI,aAAOmU,0BAA0B,CAACxhB,WAA3B,CAAuCqN,qBAA9C;AACH;;AACD,UAAMvB,YAAY,GAAG3R,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAA7B,CAnBiD,CAoBjD;AACA;;AACA,UAAMgD,eAAe,GAAGkU,0BAA0B,CAACxhB,WAA3B,CAAuCT,SAAvC,GAAmDiiB,0BAA0B,CAACxhB,WAA3B,CAAuCT,SAA1F,GAAsG,EAA9H;AACA,UAAMgO,YAAY,GAAGiU,0BAA0B,CAACxhB,WAA3B,CAAuCR,eAAvC,GAAyDgiB,0BAA0B,CAACxhB,WAA3B,CAAuCR,eAAhG,GAAkH,EAAvI;AACA,UAAMgO,iBAAiB,GAAG1B,YAAY,GAAG,CAAf,GAAmByB,YAAnB,GAAkC,KAAKjD,MAAL,CAAYpM,MAAxE;;AACA,QAAIsN,uBAAJ,EAA6B;AACzB,aAAO8B,eAAe,GAAGE,iBAAzB;AACH;;AACD,UAAMC,kBAAkB,GAAGrT,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYqG,WAA3B,GAAyC5F,KAAK,CAACT,KAAN,CAAYqG,WAArD,GAAmE,EAA9F;AACA,UAAM0N,cAAc,GAAG8T,0BAA0B,CAACxhB,WAA3B,CAAuCP,qBAAvC,GAA+DgO,kBAAtF;AACA,WAAOH,eAAe,GAAGE,iBAAlB,GAAsCE,cAA7C;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI3B,EAAAA,gBAAgB,CAACD,YAAD,EAAe;AAC3B,QAAI,KAAKxB,MAAL,CAAYpM,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,WAAKuL,YAAL,GAAoB,IAApB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA;AACH;;AACD,YAAQoC,YAAR;AACI,WAAK,CAAL;AACI;AACA,aAAKrC,YAAL,GAAoB,IAApB;AACA,aAAKC,WAAL,GAAmB,KAAnB;AACA;;AACJ,WAAK,KAAKY,MAAL,CAAYpM,MAAZ,GAAqB,CAA1B;AACI;AACA,aAAKuL,YAAL,GAAoB,KAApB;AACA,aAAKC,WAAL,GAAmB,IAAnB;AACA;;AACJ;AACI,aAAKD,YAAL,GAAoB,KAApB;AACA,aAAKC,WAAL,GAAmB,KAAnB;AACA;AAdR;AAgBH;AACD;AACJ;AACA;AACA;AACA;;;AACI6W,EAAAA,iBAAiB,GAAG;AAChB,QAAI,KAAK7mB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC,KAAKiQ,YAAV,EAAwB;AACpB,YAAM,IAAIjQ,KAAJ,CAAU,uDAAV,CAAN;AACH;;AACD,QAAIwS,KAAJ;;AACA,QAAI;AACAA,MAAAA,KAAK,GAAG3S,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAhB;AACH,KAFD,CAGA,OAAOqD,GAAP,EAAY;AACRC,MAAAA,OAAO,CAACC,KAAR,CAAc,qDAAd;AACA,YAAMF,GAAN;AACH;;AACD,QAAIvD,SAAS,CAAC9G,qBAAV,KAAoC,IAAxC,EAA8C;AAC1C;AACA,WAAKmG,YAAL,GAAoB,KAApB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACH,KAJD,MAKK;AACD,WAAKqC,gBAAL,CAAsBe,KAAtB;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACI4K,EAAAA,iBAAiB,CAAC3d,MAAD,EAASygB,YAAT,EAAuB;AACpC,QAAI,KAAK9gB,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C;AACH,KAHmC,CAIpC;;;AACA,YAAQwX,YAAR;AACI,WAAK,CAAL;AACI,aAAKW,UAAL,CAAgBnU,IAAhB,CAAqB,IAAInN,UAAJ,CAAe,KAAKH,EAApB,EAAwBK,MAAxB,EAAgC,IAAhC,CAArB;AACA;;AACJ,WAAK,KAAKuQ,MAAL,CAAYpM,MAAZ,GAAqB,CAA1B;AACI,aAAKmd,SAAL,CAAerU,IAAf,CAAoB,IAAInN,UAAJ,CAAe,KAAKH,EAApB,EAAwBK,MAAxB,EAAgC,IAAhC,CAApB;AACA;AANR;AAQH;AACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACIwS,EAAAA,gBAAgB,CAACY,aAAD,EAAgB;AAC5B,QAAI,KAAKzT,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,QAAI,CAAC,KAAKiQ,YAAV,EAAwB;AACpB,YAAM,IAAIjQ,KAAJ,CAAU,uDAAV,CAAN;AACH;;AACD,WAAO,CAAC8P,SAAS,CAAC9G,qBAAX,IAAoCnJ,QAAQ,CAAC,KAAKoQ,YAAN,EAAoB,KAAKD,MAAzB,CAAR,KAA6C6C,aAAxF;AACH;;AAnpB+C;;AAqpBpDgT,iBAAiB,CAAClnB,IAAlB;AAAA,mBAA8GknB,iBAA9G,EA7rJsGzrB,EA6rJtG,mBAAiJU,WAAjJ,GA7rJsGV,EA6rJtG,mBAAyKA,EAAE,CAACoZ,MAA5K,GA7rJsGpZ,EA6rJtG,mBAA+LimB,mBAA/L,GA7rJsGjmB,EA6rJtG,mBAA+N+O,aAA/N,GA7rJsG/O,EA6rJtG,mBAAyPA,EAAE,CAACqZ,iBAA5P;AAAA;;AACAoS,iBAAiB,CAACjnB,IAAlB,kBA9rJsGxE,EA8rJtG;AAAA,QAAkGyrB,iBAAlG;AAAA;AAAA;AAAA;AAAA;AA9rJsGzrB,MAAAA,EA8rJtG;AAAA,eAAkG,kBAAlG;AAAA;AAAA,eAAkG,kBAAlG;AAAA;AAAA,eAAkG,mBAAlG;AAAA;AAAA,eAAkG,qBAAlG;AAAA;AAAA;;AAAA;AA9rJsGA,MAAAA,EA8rJtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA9rJsGA,EA8rJtG,oBAAyiB,CAAC+O,aAAD,CAAziB,GA9rJsG/O,EA8rJtG,6BA9rJsGA,EA8rJtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA9rJsGA,MAAAA,EA8rJtG;AA9rJsGA,MAAAA,EA8rJyhB,6BAA/nB;AA9rJsGA,MAAAA,EA8rJs8B,uFA9rJt8BA,EA8rJs8B,wBAA5iC;AA9rJsGA,MAAAA,EA8rJygC,uEAA/mC;AA9rJsGA,MAAAA,EA8rJw0H,eAA96H;AA9rJsGA,MAAAA,EA8rJm1H,6CAAz7H;AA9rJsGA,MAAAA,EA8rJ8+H;AAAA,eAAiB,0BAAjB;AAAA,QAAplI;AA9rJsGA,MAAAA,EA8rJwhI,eAA9nI;AAAA;;AAAA;AA9rJsGA,MAAAA,EA8rJ6oB,+HA9rJ7oBA,EA8rJ6oB,0FAAnvB;AA9rJsGA,MAAAA,EA8rJgkB,uHAAtqB;AA9rJsGA,MAAAA,EA8rJ2iC,aAAjpC;AA9rJsGA,MAAAA,EA8rJ2iC,+DAAjpC;AA9rJsGA,MAAAA,EA8rJy2H,aAA/8H;AA9rJsGA,MAAAA,EA8rJy2H,iFAA/8H;AAAA;AAAA;AAAA,eAA0wPurB,gBAA1wP,EAA01PtqB,EAAE,CAACqY,IAA71P,EAAgnPgQ,yBAAhnP,EAA26PnW,aAA36P,EAAk/PlS,EAAE,CAAC+rB,gBAAr/P,EAA0mQxa,sBAA1mQ,EAAm/OgL,aAAn/O,EAAkuQ/J,oBAAluQ;AAAA;AAAA;AAAA;;AACA;AAAA,qDA/rJsGzT,EA+rJtG,mBAA2FyrB,iBAA3F,EAA0H,CAAC;AAC/GhnB,IAAAA,IAAI,EAAExE,SADyG;AAE/GyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,aAAZ;AAA2BE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAApE;AAA4EwjB,MAAAA,SAAS,EAAE,CAACvZ,aAAD,CAAvF;AAAwGnK,MAAAA,QAAQ,EAAE,0hHAAlH;AAA8oHoN,MAAAA,MAAM,EAAE,CAAC,iqCAAD,EAAoqC,qpEAApqC;AAAtpH,KAAD;AAFyG,GAAD,CAA1H,EAG4B,YAAY;AAChC,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAE6J,SAAR;AAAmBkL,MAAAA,UAAU,EAAE,CAAC;AACxB/U,QAAAA,IAAI,EAAE9D,MADkB;AAExB+D,QAAAA,IAAI,EAAE,CAAChE,WAAD;AAFkB,OAAD;AAA/B,KAAD,EAGW;AAAE+D,MAAAA,IAAI,EAAEzE,EAAE,CAACoZ;AAAX,KAHX,EAGgC;AAAE3U,MAAAA,IAAI,EAAEwhB;AAAR,KAHhC,EAG+D;AAAExhB,MAAAA,IAAI,EAAEsK;AAAR,KAH/D,EAGwF;AAAEtK,MAAAA,IAAI,EAAEzE,EAAE,CAACqZ;AAAX,KAHxF,CAAP;AAIH,GARL,EAQuB;AAAEiC,IAAAA,SAAS,EAAE,CAAC;AACrB7W,MAAAA,IAAI,EAAE1D,WADe;AAErB2D,MAAAA,IAAI,EAAE,CAAC,iBAAD;AAFe,KAAD,CAAb;AAGPM,IAAAA,EAAE,EAAE,CAAC;AACLP,MAAAA,IAAI,EAAEpE;AADD,KAAD,CAHG;AAKPuV,IAAAA,MAAM,EAAE,CAAC;AACTnR,MAAAA,IAAI,EAAEpE;AADG,KAAD,CALD;AAOPsZ,IAAAA,MAAM,EAAE,CAAC;AACTlV,MAAAA,IAAI,EAAEpE;AADG,KAAD,CAPD;AASPqrB,IAAAA,UAAU,EAAE,CAAC;AACbjnB,MAAAA,IAAI,EAAEjE;AADO,KAAD,CATL;AAWP6T,IAAAA,WAAW,EAAE,CAAC;AACd5P,MAAAA,IAAI,EAAEjE;AADQ,KAAD,CAXN;AAaPimB,IAAAA,UAAU,EAAE,CAAC;AACbhiB,MAAAA,IAAI,EAAEjE;AADO,KAAD,CAbL;AAePmmB,IAAAA,SAAS,EAAE,CAAC;AACZliB,MAAAA,IAAI,EAAEjE;AADM,KAAD,CAfJ;AAiBP8U,IAAAA,YAAY,EAAE,CAAC;AACf7Q,MAAAA,IAAI,EAAEhE,YADS;AAEfiE,MAAAA,IAAI,EAAE,CAAC,YAAD;AAFS,KAAD,CAjBP;AAoBP8Q,IAAAA,YAAY,EAAE,CAAC;AACf/Q,MAAAA,IAAI,EAAEhE,YADS;AAEfiE,MAAAA,IAAI,EAAE,CAAC,YAAD;AAFS,KAAD,CApBP;AAuBPinB,IAAAA,aAAa,EAAE,CAAC;AAChBlnB,MAAAA,IAAI,EAAEhE,YADU;AAEhBiE,MAAAA,IAAI,EAAE,CAAC,mBAAD;AAFU,KAAD,CAvBR;AA0BPknB,IAAAA,eAAe,EAAE,CAAC;AAClBnnB,MAAAA,IAAI,EAAEhE,YADY;AAElBiE,MAAAA,IAAI,EAAE,CAAC,oBAAD;AAFY,KAAD;AA1BV,GARvB;AAAA;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMuoB,aAAN,CAAoB;AAChBzpB,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT;AACA,QAAI,CAAC,KAAK5J,IAAV,EAAgB;AACZ;AACH;;AACD,SAAKgJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,OAA9C,EAAuD,KAAKzJ,KAA5D;AACA,SAAKmJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,WAA9C,EAA2D,KAAKtJ,IAAL,GAAY,MAAZ,GAAqB,QAAhF;AACH;;AA/Be;;AAiCpBwjB,aAAa,CAAC1oB,IAAd;AAAA,mBAA0G0oB,aAA1G,EAjyJsGjtB,EAiyJtG,mBAAyIA,EAAE,CAACiT,SAA5I,GAjyJsGjT,EAiyJtG,mBAAkKA,EAAE,CAACkT,UAArK;AAAA;;AACA+Z,aAAa,CAAC1a,IAAd,kBAlyJsGvS,EAkyJtG;AAAA,QAA8FitB,aAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAlyJsGjtB,EAkyJtG;AAAA;;AACA;AAAA,qDAnyJsGA,EAmyJtG,mBAA2FitB,aAA3F,EAAsH,CAAC;AAC3GxoB,IAAAA,IAAI,EAAElE,SADqG;AAE3GmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAFqG,GAAD,CAAtH,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAEzJ,IAAAA,IAAI,EAAE,CAAC;AAChHhF,MAAAA,IAAI,EAAEpE;AAD0G,KAAD,CAAR;AAEvGiJ,IAAAA,KAAK,EAAE,CAAC;AACR7E,MAAAA,IAAI,EAAEpE;AADE,KAAD;AAFgG,GALvH;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM6sB,kBAAN,CAAyB;AACrB1pB,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,CAAC,KAAK3P,SAAN,IAAmB,CAAC,KAAKsF,OAA7B,EAAsC;AAClC;AACH;;AACD,SAAKyJ,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,gBAA9C,EAAgE,KAAKrP,SAArE;AACA,SAAK+O,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,iBAA9C,EAAiE,KAAK/J,OAAtE;AACH;;AA9BoB;;AAgCzBkkB,kBAAkB,CAAC3oB,IAAnB;AAAA,mBAA+G2oB,kBAA/G,EAx2JsGltB,EAw2JtG,mBAAmJA,EAAE,CAACiT,SAAtJ,GAx2JsGjT,EAw2JtG,mBAA4KA,EAAE,CAACkT,UAA/K;AAAA;;AACAga,kBAAkB,CAAC3a,IAAnB,kBAz2JsGvS,EAy2JtG;AAAA,QAAmGktB,kBAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAz2JsGltB,EAy2JtG;AAAA;;AACA;AAAA,qDA12JsGA,EA02JtG,mBAA2FktB,kBAA3F,EAA2H,CAAC;AAChHzoB,IAAAA,IAAI,EAAElE,SAD0G;AAEhHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAF0G,GAAD,CAA3H,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAExP,IAAAA,SAAS,EAAE,CAAC;AACrHe,MAAAA,IAAI,EAAEpE;AAD+G,KAAD,CAAb;AAEvG2I,IAAAA,OAAO,EAAE,CAAC;AACVvE,MAAAA,IAAI,EAAEpE;AADI,KAAD;AAF8F,GALvH;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM8sB,oBAAN,CAA2B;AACvB3pB,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,CAAC,KAAK3N,KAAN,IAAgB,CAAC,KAAKA,KAAL,CAAWR,KAAZ,IAAqB,CAAC,KAAKQ,KAAL,CAAWT,KAArD,EAA6D;AACzD;AACH;;AACD,UAAMmoB,OAAO,GAAG,KAAK1nB,KAAL,CAAWR,KAAX,IAAoB,KAAKQ,KAAL,CAAWR,KAAX,CAAiB0Z,GAArC,GAA2C,KAAKlZ,KAAL,CAAWR,KAAX,CAAiB0Z,GAA5D,GAAkE,KAAKlZ,KAAL,CAAWT,KAAX,CAAiB2Z,GAAnG;AACA,QAAIwM,EAAE,GAAI,QAAOgC,OAAQ,MAAK,KAAKpiB,KAAM,EAAzC;AACA,UAAMqiB,eAAe,GAAG,KAAK3nB,KAAL,CAAWR,KAAX,IAAoB,KAAKQ,KAAL,CAAWR,KAAX,CAAiB2N,WAArC,GAAmD,KAAKnN,KAAL,CAAWR,KAAX,CAAiB2N,WAApE,GAAkF,KAAKnN,KAAL,CAAWT,KAAX,CAAiB4N,WAA3H;;AACA,QAAI,CAAC,CAACwa,eAAN,EAAuB;AACnBjC,MAAAA,EAAE,IAAK,UAASiC,eAAgB,MAAK,KAAKriB,KAAM,EAAhD;AACH;;AACD,SAAKyH,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,YAA9C,EAA4DqY,EAA5D;AACH;;AAnCsB;;AAqC3B+B,oBAAoB,CAAC5oB,IAArB;AAAA,mBAAiH4oB,oBAAjH,EAp7JsGntB,EAo7JtG,mBAAuJA,EAAE,CAACiT,SAA1J,GAp7JsGjT,EAo7JtG,mBAAgLA,EAAE,CAACkT,UAAnL;AAAA;;AACAia,oBAAoB,CAAC5a,IAArB,kBAr7JsGvS,EAq7JtG;AAAA,QAAqGmtB,oBAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAr7JsGntB,EAq7JtG;AAAA;;AACA;AAAA,qDAt7JsGA,EAs7JtG,mBAA2FmtB,oBAA3F,EAA6H,CAAC;AAClH1oB,IAAAA,IAAI,EAAElE,SAD4G;AAElHmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAF4G,GAAD,CAA7H,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAExN,IAAAA,KAAK,EAAE,CAAC;AACjHjB,MAAAA,IAAI,EAAEpE;AAD2G,KAAD,CAAT;AAEvG2K,IAAAA,KAAK,EAAE,CAAC;AACRvG,MAAAA,IAAI,EAAEpE;AADE,KAAD;AAFgG,GALvH;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMitB,qBAAN,SAAoC/pB,mBAApC,CAAwD;AACpDC,EAAAA,WAAW,CAAC2Q,aAAD,EAAgB;AACvB;AACA,SAAKA,aAAL,GAAqBA,aAArB;AACA;AACR;AACA;;AACQ,SAAKyB,MAAL,GAAc,EAAd;AACA;AACR;AACA;;AACQ,SAAK8V,UAAL,GAAkB,IAAIprB,YAAJ,EAAlB;AACA;AACR;AACA;AACA;;AACQ,SAAKitB,SAAL,GAAiB,EAAjB;AACA;AACR;AACA;AACA;AACA;;AACQ,SAAKC,SAAL,GAAiB,KAAjB;AACA;AACR;AACA;AACA;;AACQ,SAAKC,UAAL,GAAkB,EAAlB;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIra,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKpO,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,SAAKuO,aAAL,CAAmB9E,SAAnB,CAA6B,KAAKrK,EAAlC,EAAsC,KAAK2U,MAA3C;AACA,UAAMjE,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,SAAKkI,mBAAL,GAA2B4H,SAAS,CAAC5H,mBAArC;AACA,SAAKK,kBAAL,GAA0BuH,SAAS,CAACvH,kBAApC;AACA,SAAKuf,aAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIpa,EAAAA,WAAW,CAACqC,OAAD,EAAU;AACjB,QAAI,KAAK3Q,EAAL,KAAY,IAAZ,IAAoB,KAAKA,EAAL,KAAYsJ,SAApC,EAA+C;AAC3C,YAAM,IAAI1I,KAAJ,CAAU,6CAAV,CAAN;AACH;;AACD,UAAM8P,SAAS,GAAG,KAAKvB,aAAL,CAAmBjF,SAAnB,CAA6B,KAAKlK,EAAlC,CAAlB;;AACA,QAAI,CAAC0Q,SAAL,EAAgB;AACZ,YAAM,IAAI9P,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,UAAM+nB,YAAY,GAAGhY,OAAO,CAACC,MAA7B;AACA,UAAM8W,YAAY,GAAG/W,OAAO,CAACxH,kBAA7B,CATiB,CAUjB;AACA;;AACA,QAAIue,YAAY,IACZ,CAACA,YAAY,CAACC,WADd,KAECD,YAAY,CAAC5W,aAAb,KAA+B4W,YAAY,CAAC3W,YAA5C,IAA6D,CAAC2W,YAAY,CAAC5W,aAAd,IAA+B,CAAC4W,YAAY,CAAC3W,YAF3G,CAAJ,EAE+H;AAC3H,WAAK5H,kBAAL,GAA0BuH,SAAS,CAACvH,kBAApC,CAD2H,CAE3H;AACH;;AACD,QAAIwf,YAAY,IAAI,CAACA,YAAY,CAAChB,WAA9B,IAA6CgB,YAAY,CAAC7X,aAAb,KAA+B6X,YAAY,CAAC5X,YAA7F,EAA2G;AACvG,WAAK2X,aAAL;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;;;AACIE,EAAAA,uBAAuB,CAAChP,GAAD,EAAM;AACzB,UAAMxG,KAAK,GAAG,KAAKxC,MAAL,CAAY/P,SAAZ,CAAuBC,GAAD,IAASA,GAAG,IAAI8Y,GAAP,IAAc9Y,GAAG,CAACd,EAAJ,KAAW4Z,GAAG,CAAC5Z,EAA5D,CAAd;AACA,SAAK6oB,gBAAL,CAAsBzV,KAAtB;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIT,EAAAA,iBAAiB,CAAChU,KAAD,EAAQib,GAAR,EAAa;AAC1B,UAAMtZ,MAAM,GAAG,MAAMtB,gBAAN,CAAuBL,KAAvB,CAAf;;AACA,QAAI2B,MAAM,KAAKlC,IAAf,EAAqB;AACjB,WAAKwqB,uBAAL,CAA6BhP,GAA7B;AACH;AACJ;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIkP,EAAAA,6BAA6B,CAACpoB,KAAD,EAAQ;AACjC,QAAI,CAACA,KAAL,EAAY;AACR,aAAO,EAAP;AACH;;AACD,WAAOA,KAAK,CAACR,KAAN,IAAeQ,KAAK,CAACR,KAAN,CAAYoG,WAA3B,GAAyC5F,KAAK,CAACR,KAAN,CAAYoG,WAArD,GAAoE,SAAQ7F,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAAR,GAA+B,CAAE,EAApH;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACImY,EAAAA,eAAe,CAACroB,KAAD,EAAQ;AACnB,QAAI4F,WAAW,GAAG,EAAlB;;AACA,QAAI5F,KAAK,CAACR,KAAN,IAAeQ,KAAK,CAACR,KAAN,CAAYoG,WAA/B,EAA4C;AACxCA,MAAAA,WAAW,GAAG5F,KAAK,CAACR,KAAN,CAAYoG,WAA1B;AACH,KAFD,MAGK,IAAI5F,KAAK,CAACT,KAAN,IAAeS,KAAK,CAACT,KAAN,CAAYqG,WAA/B,EAA4C;AAC7CA,MAAAA,WAAW,GAAG5F,KAAK,CAACT,KAAN,CAAYqG,WAA1B;AACH;;AACD,UAAM8L,YAAY,GAAG3R,QAAQ,CAACC,KAAD,EAAQ,KAAKkQ,MAAb,CAA7B;AACA,UAAMgD,eAAe,GAAG,YAAYxB,YAAY,GAAG,CAA3B,IAAgC,GAAhC,GAAsC,KAAKxB,MAAL,CAAYpM,MAA1E;AACA,QAAIuP,kBAAkB,GAAGzN,WAAW,GAAGA,WAAH,GAAiB,EAArD;;AACA,QAAIyN,kBAAkB,KAAK,EAA3B,EAA+B;AAC3BA,MAAAA,kBAAkB,GAAG,QAAQA,kBAA7B;AACH;;AACD,WAAOH,eAAe,GAAGG,kBAAzB;AACH;AACD;AACJ;AACA;AACA;AACA;AACA;;;AACIiE,EAAAA,SAAS,CAAC5E,KAAD,EAAQ6E,IAAR,EAAc;AACnB,WAAOA,IAAI,CAACjY,EAAZ;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACI6oB,EAAAA,gBAAgB,CAACzV,KAAD,EAAQ;AACpB,SAAKsT,UAAL,CAAgBpZ,IAAhB,CAAqB8F,KAArB;AACH;AACD;AACJ;AACA;AACA;;;AACIsV,EAAAA,aAAa,GAAG;AACZ,QAAI,CAAC,KAAKvf,kBAAV,EAA8B;AAC1B,YAAM,IAAIvI,KAAJ,CAAU,6DAAV,CAAN;AACH,KAHW,CAIZ;;;AACA,SAAK2nB,SAAL,GAAiB,EAAjB;;AACA,QAAI,KAAKpf,kBAAL,CAAwBtE,MAAxB,YAA0ChB,UAA9C,EAA0D;AACtD,YAAMgB,MAAM,GAAG,KAAKsE,kBAAL,CAAwBtE,MAAvC;AACA,YAAMmkB,GAAG,GAAG,KAAKpY,MAAL,CAAY/T,MAAZ,CAAmB,CAACiE,GAAD,EAAMqX,CAAN,KAAYA,CAAC,GAAGtT,MAAM,CAACd,WAAP,CAAmBS,MAAvB,IAAiCK,MAAM,CAACd,WAAP,CAAmBS,MAAnB,KAA8B,CAAC,CAA/F,CAAZ;AACA,WAAK+jB,SAAL,GAAiB,CAACS,GAAD,CAAjB;AACA,WAAKllB,IAAL,GAAY,KAAKqF,kBAAL,CAAwBtE,MAAxB,CAA+Bf,IAA3C;;AACA,cAAQ,KAAKqF,kBAAL,CAAwBxE,QAAhC;AACI,aAAKT,oBAAoB,CAACU,GAA1B;AACI,eAAKqkB,cAAL,GAAsB,KAAtB;AACA;;AACJ,aAAK/kB,oBAAoB,CAACqH,MAA1B;AACI,eAAK0d,cAAL,GAAsB,QAAtB;AACA,eAAKT,SAAL,GAAiB3jB,MAAM,CAACd,WAAP,CAAmBU,IAApC;AACA;AAPR;;AASA,WAAKykB,YAAL,GAAoBrkB,MAAM,CAACb,OAA3B;AACH;;AACD,QAAI,KAAKmF,kBAAL,CAAwBtE,MAAxB,YAA0CZ,UAA9C,EAA0D;AACtD,YAAMY,MAAM,GAAG,KAAKsE,kBAAL,CAAwBtE,MAAvC;AACA,YAAMskB,KAAK,GAAG7W,IAAI,CAACwM,IAAL,CAAU,KAAKlO,MAAL,CAAYpM,MAAZ,GAAqBK,MAAM,CAACd,WAAP,CAAmBS,MAAlD,CAAd;AACA,UAAIqV,KAAK,GAAG,CAAZ;AACA,UAAIC,GAAG,GAAGjV,MAAM,CAACd,WAAP,CAAmBS,MAAnB,GAA4B,CAAtC;;AACA,WAAK,IAAI4kB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAApB,EAA2BC,CAAC,EAA5B,EAAgC;AAC5B,cAAMJ,GAAG,GAAG,KAAKpY,MAAL,CAAY/T,MAAZ,CAAmB,CAACiE,GAAD,EAAMqX,CAAN,KAAYA,CAAC,IAAI0B,KAAL,IAAc1B,CAAC,IAAI2B,GAAlD,CAAZ;AACA,aAAKyO,SAAL,CAAec,IAAf,CAAoBL,GAApB;AACAnP,QAAAA,KAAK,GAAGC,GAAG,GAAG,CAAd;AACAA,QAAAA,GAAG,GAAGD,KAAK,GAAGhV,MAAM,CAACd,WAAP,CAAmBS,MAA3B,GAAoC,CAA1C;AACH;;AACD,WAAKV,IAAL,GAAY,KAAKqF,kBAAL,CAAwBtE,MAAxB,CAA+Bf,IAA3C;AACA,YAAMwlB,MAAM,GAAG,CAACzkB,MAAM,CAACf,IAAP,CAAYQ,KAAZ,CAAkBwb,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAhB;AACA,WAAK2I,UAAL,GAAkBa,MAAM,GAAGzkB,MAAM,CAACd,WAAP,CAAmBS,MAA5B,GAAqC8kB,MAAM,GAAG,CAA9C,GAAkD,IAApE;AACA,WAAKd,SAAL,GAAiB3jB,MAAM,CAACd,WAAP,CAAmBU,IAApC;AACA,WAAKwkB,cAAL,GAAsB,KAAtB;AACH;AACJ;;AA7LmD;;AA+LxDX,qBAAqB,CAAC/oB,IAAtB;AAAA,mBAAkH+oB,qBAAlH,EA9pKsGttB,EA8pKtG,mBAAyJ+O,aAAzJ;AAAA;;AACAue,qBAAqB,CAAC9oB,IAAtB,kBA/pKsGxE,EA+pKtG;AAAA,QAAsGstB,qBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA/pKsGttB,EA+pKtG,6BA/pKsGA,EA+pKtG;AAAA;AAAA;AAAA;AAAA;AAAA;AA/pKsGA,MAAAA,EA+pK2N,4BAAjU;AA/pKsGA,MAAAA,EA+pKmhB,sFAAznB;AA/pKsGA,MAAAA,EA+pKy5E,eAA//E;AAAA;;AAAA;AA/pKsGA,MAAAA,EA+pKuQ,6NAA7W;AA/pKsGA,MAAAA,EA+pKqY,yHAA3e;AA/pKsGA,MAAAA,EA+pKqjB,aAA3pB;AA/pKsGA,MAAAA,EA+pKqjB,qCAA3pB;AAAA;AAAA;AAAA,eAAmuFitB,aAAnuF,EAA6yFC,kBAA7yF,EAAw4FjsB,EAAE,CAACqc,OAA34F,EAAk/Frc,EAAE,CAACqY,IAAr/F,EAAmkG9G,sBAAnkG,EAA2rGW,aAA3rG,EAAkwGga,oBAAlwG;AAAA;AAAA;AAAA;;AACA;AAAA,qDAhqKsGntB,EAgqKtG,mBAA2FstB,qBAA3F,EAA8H,CAAC;AACnH7oB,IAAAA,IAAI,EAAExE,SAD6G;AAEnHyE,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA,QAAQ,EAAE,kBAAZ;AAAgCE,MAAAA,eAAe,EAAE3E,uBAAuB,CAAC4E,MAAzE;AAAiFF,MAAAA,QAAQ,EAAE,0sEAA3F;AAAuyEoN,MAAAA,MAAM,EAAE,CAAC,sLAAD;AAA/yE,KAAD;AAF6G,GAAD,CAA9H,EAG4B,YAAY;AAAE,WAAO,CAAC;AAAEvN,MAAAA,IAAI,EAAEsK;AAAR,KAAD,CAAP;AAAmC,GAH7E,EAG+F;AAAE/J,IAAAA,EAAE,EAAE,CAAC;AACtFP,MAAAA,IAAI,EAAEpE;AADgF,KAAD,CAAN;AAE/EuV,IAAAA,MAAM,EAAE,CAAC;AACTnR,MAAAA,IAAI,EAAEpE;AADG,KAAD,CAFuE;AAI/EsZ,IAAAA,MAAM,EAAE,CAAC;AACTlV,MAAAA,IAAI,EAAEpE;AADG,KAAD,CAJuE;AAM/EqrB,IAAAA,UAAU,EAAE,CAAC;AACbjnB,MAAAA,IAAI,EAAEjE;AADO,KAAD;AANmE,GAH/F;AAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAM+tB,UAAU,GAAG,CACfjB,qBADe,EAEf7B,iBAFe,EAGfnC,yBAHe,EAIf3N,qBAJe,EAKf6B,aALe,EAMfO,iBANe,EAOfhK,qBAPe,EAQf/C,uBARe,EASfzN,mBATe,EAUfmc,qBAVe,CAAnB;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,MAAM8O,eAAN,CAAsB;AAClBhrB,EAAAA,WAAW,CAACiP,QAAD,EAAWC,EAAX,EAAe;AACtB,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIU,EAAAA,QAAQ,GAAG;AACP,SAAKC,UAAL;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACIC,EAAAA,WAAW,GAAG;AACV,SAAKD,UAAL;AACH;AACD;AACJ;AACA;;;AACIA,EAAAA,UAAU,GAAG;AACT,QAAI,KAAK5I,UAAT,EAAqB;AACjB,WAAKgI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,aAA9C,EAA6D,KAAKtI,UAAlE;AACH;;AACD,QAAI,KAAKC,WAAT,EAAsB;AAClB,WAAK+H,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,cAA9C,EAA8D,KAAKrI,WAAnE;AACH;;AACD,QAAI,KAAKH,SAAT,EAAoB;AAChB,WAAKkI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,YAA9C,EAA4D,KAAKxI,SAAjE;AACH;;AACD,QAAI,KAAKC,YAAT,EAAuB;AACnB,WAAKiI,QAAL,CAAce,QAAd,CAAuB,KAAKd,EAAL,CAAQK,aAA/B,EAA8C,eAA9C,EAA+D,KAAKvI,YAApE;AACH;AACJ;;AArCiB;;AAuCtBgkB,eAAe,CAACjqB,IAAhB;AAAA,mBAA4GiqB,eAA5G,EArxKsGxuB,EAqxKtG,mBAA6IA,EAAE,CAACiT,SAAhJ,GArxKsGjT,EAqxKtG,mBAAsKA,EAAE,CAACkT,UAAzK;AAAA;;AACAsb,eAAe,CAACjc,IAAhB,kBAtxKsGvS,EAsxKtG;AAAA,QAAgGwuB,eAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAtxKsGxuB,EAsxKtG;AAAA;;AACA;AAAA,qDAvxKsGA,EAuxKtG,mBAA2FwuB,eAA3F,EAAwH,CAAC;AAC7G/pB,IAAAA,IAAI,EAAElE,SADuG;AAE7GmE,IAAAA,IAAI,EAAE,CAAC;AACCC,MAAAA,QAAQ,EAAE;AADX,KAAD;AAFuG,GAAD,CAAxH,EAK4B,YAAY;AAAE,WAAO,CAAC;AAAEF,MAAAA,IAAI,EAAEzE,EAAE,CAACiT;AAAX,KAAD,EAAyB;AAAExO,MAAAA,IAAI,EAAEzE,EAAE,CAACkT;AAAX,KAAzB,CAAP;AAA2D,GALrG,EAKuH;AAAEzI,IAAAA,UAAU,EAAE,CAAC;AACtHhG,MAAAA,IAAI,EAAEpE;AADgH,KAAD,CAAd;AAEvGqK,IAAAA,WAAW,EAAE,CAAC;AACdjG,MAAAA,IAAI,EAAEpE;AADQ,KAAD,CAF0F;AAIvGkK,IAAAA,SAAS,EAAE,CAAC;AACZ9F,MAAAA,IAAI,EAAEpE;AADM,KAAD,CAJ4F;AAMvGmK,IAAAA,YAAY,EAAE,CAAC;AACf/F,MAAAA,IAAI,EAAEpE;AADS,KAAD;AANyF,GALvH;AAAA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;;AACA,MAAMouB,UAAU,GAAG,CACfxP,qBADe,EAEf9L,aAFe,EAGflB,2BAHe,EAIfgb,aAJe,EAKfC,kBALe,EAMfC,oBANe,EAOf1Z,oBAPe,EAQf+a,eARe,EASfjD,gBATe,EAUf/Y,sBAVe,CAAnB;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMkc,qBAAN,SAAoCrtB,mBAApC,CAAwD;AACpD;AACAstB,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,WAAO,IAAIC,MAAJ,CAAWD,OAAX,EAAoB;AACvBE,MAAAA,WAAW,EAAE;AADU,KAApB,CAAP;AAGH;;AANmD;;AAQxDJ,qBAAqB,CAACnqB,IAAtB;AAAA;AAAA;AAAA,wFA92KsGvE,EA82KtG,uBAAkH0uB,qBAAlH,SAAkHA,qBAAlH;AAAA;AAAA;;AACAA,qBAAqB,CAACte,KAAtB,kBA/2KsGpQ,EA+2KtG;AAAA,SAAsH0uB,qBAAtH;AAAA,WAAsHA,qBAAtH;AAAA;;AACA;AAAA,qDAh3KsG1uB,EAg3KtG,mBAA2F0uB,qBAA3F,EAA8H,CAAC;AACnHjqB,IAAAA,IAAI,EAAEtE;AAD6G,GAAD,CAA9H;AAAA;AAGA;AACA;AACA;;;AACA,MAAM4uB,aAAN,CAAoB;;AAEpBA,aAAa,CAACxqB,IAAd;AAAA,mBAA0GwqB,aAA1G;AAAA;;AACAA,aAAa,CAACC,IAAd,kBAz3KsGhvB,EAy3KtG;AAAA,QAA2G+uB;AAA3G;AACAA,aAAa,CAACE,IAAd,kBA13KsGjvB,EA03KtG;AAAA,aAAqI,CAC7H;AACIuoB,IAAAA,OAAO,EAAEjnB,qBADb;AAEI4tB,IAAAA,QAAQ,EAAER;AAFd,GAD6H,CAArI;AAAA,YAKiB,CAACvtB,YAAD,EAAeM,aAAf,CALjB;AAAA;;AAMA;AAAA,qDAh4KsGzB,EAg4KtG,mBAA2F+uB,aAA3F,EAAsH,CAAC;AAC3GtqB,IAAAA,IAAI,EAAEzD,QADqG;AAE3G0D,IAAAA,IAAI,EAAE,CAAC;AACCyqB,MAAAA,OAAO,EAAE,CAAChuB,YAAD,EAAeM,aAAf,CADV;AAEC2tB,MAAAA,YAAY,EAAE,CAACb,UAAD,EAAaE,UAAb,CAFf;AAGCY,MAAAA,OAAO,EAAE,CAAC/B,qBAAD,EAAwB7B,iBAAxB,CAHV;AAICnD,MAAAA,SAAS,EAAE,CACP;AACIC,QAAAA,OAAO,EAAEjnB,qBADb;AAEI4tB,QAAAA,QAAQ,EAAER;AAFd,OADO;AAJZ,KAAD;AAFqG,GAAD,CAAtH;AAAA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAEA,SAASlpB,MAAT,EAAiB6C,UAAjB,EAA6BD,eAA7B,EAA8CqjB,iBAA9C,EAAiE1lB,mBAAjE,EAAsFgpB,aAAtF,EAAqG9lB,UAArG,EAAiHlE,KAAjH,EAAwHI,UAAxH,EAAoII,eAApI,EAAqJS,+BAArJ,EAAsLmV,oBAAtL,EAA4MM,qBAA5M,EAAmOF,uBAAnO,EAA4PC,qBAA5P,EAAmRE,0BAAnR,EAA+SR,eAA/S,EAAgUrS,UAAhU,EAA4UM,WAA5U,EAAyVuW,qBAAzV,EAAgX0G,eAAhX,EAAiYH,mBAAjY,EAAsZqH,qBAAtZ,EAA6apkB,oBAA7a","sourcesContent":["import * as i0 from '@angular/core';\nimport { Component, ChangeDetectionStrategy, Injectable, InjectionToken, Input, EventEmitter, Directive, Output, HostListener, PLATFORM_ID, Inject, SecurityContext, ViewChild, Injector, HostBinding, NgModule } from '@angular/core';\nimport * as i2 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport * as i5 from '@angular/platform-browser';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\nimport * as i1 from '@angular/cdk/overlay';\nimport { OverlayConfig, OverlayModule } from '@angular/cdk/overlay';\nimport { Subject, timer } from 'rxjs';\nimport { map, filter, switchMap, takeUntil } from 'rxjs/operators';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport * as i1$1 from '@angular/cdk/layout';\nimport { Breakpoints } from '@angular/cdk/layout';\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Key of the keyboard's key `enter`\n */\nconst ENTER_KEY = 'Enter';\n/**\n * Code of the keyboard's key `enter`\n */\nconst ENTER_CODE = 'Enter';\n/**\n * Key of the keyboard's key `esc`\n */\nconst ESC_KEY = 'Escape';\n/**\n * Code of the keyboard's key `esc`\n */\nconst ESC_CODE = 'Escape';\n/**\n * Key of the keyboard's key 'right arrow'\n */\nconst RIGHT_ARROW_KEY = 'ArrowRight';\n/**\n * Code of the keyboard's key 'right arrow'\n */\nconst RIGHT_ARROW_CODE = 'ArrowRight';\n/**\n * Key of the keyboard's key 'left arrow'\n */\nconst LEFT_ARROW_KEY = 'ArrowLeft';\n/**\n * Code of the keyboard's key 'left arrow'\n */\nconst LEFT_ARROW_CODE = 'ArrowLeft';\n/**\n * Key of the keyboard's key 'left arrow'\n */\nconst UP_ARROW_KEY = 'ArrowUp';\n/**\n * Code of the keyboard's key 'left arrow'\n */\nconst UP_ARROW_CODE = 'ArrowUp';\n/**\n * Key of the keyboard's key 'left arrow'\n */\nconst DOWN_ARROW_KEY = 'ArrowDown';\n/**\n * Code of the keyboard's key 'left arrow'\n */\nconst DOWN_ARROW_CODE = 'ArrowDown';\n/**\n * Key of the keyboard's key `space`\n */\nconst SPACE_KEY = '';\n/**\n * Code of the keyboard's key `space`\n */\nconst SPACE_CODE = 'Space';\n/**\n * Const to represent the right direction\n */\nconst DIRECTION_RIGHT = 'right';\n/**\n * Const to represent the left direction\n */\nconst DIRECTION_LEFT = 'left';\n/**\n * Keycode of the main mouse button\n */\nconst MOUSE_MAIN_BUTTON_CLICK = 0;\n/**\n * Const NEXT\n */\nconst NEXT = 1;\n/**\n * Const PREV\n */\nconst PREV = -1;\n/**\n * Const NOTHING to represents a situation when it isn't both NEXT and PREV\n */\nconst NOTHING = 0;\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Provides some useful methods to add accessibility features to subclasses.\n * In particular, it exposes a method to handle navigation event with both Keyboard and Mouse\n * and another with also the direction (right or left).\n */\nclass AccessibleComponent {\n    constructor() { }\n    /**\n     * Method to handle navigation events with both Keyboard and Mouse.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent | MouseEvent event payload\n     * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n     */\n    handleNavigationEvent(direction, event) {\n        if (!event) {\n            return NOTHING;\n        }\n        if (event instanceof KeyboardEvent) {\n            return this.handleKeyboardNavigationEvent(direction, event);\n        }\n        else if (event instanceof MouseEvent) {\n            return this.handleMouseNavigationEvent(direction, event);\n        }\n        return NOTHING;\n    }\n    /**\n     * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n     * @param event KeyboardEvent | MouseEvent payload\n     * @returns number 1 for NEXT and 0 for NOTHING\n     */\n    handleImageEvent(event) {\n        if (!event) {\n            return NOTHING;\n        }\n        if (event instanceof KeyboardEvent) {\n            return this.handleImageKeyboardEvent(event);\n        }\n        else if (event instanceof MouseEvent) {\n            return this.handleImageMouseEvent(event);\n        }\n        return NOTHING;\n    }\n    /**\n     * Private method to handle keyboard events over an image.\n     * @param event KeyboardEvent payload\n     * @returns number 1 for NEXT and 0 for NOTHING\n     */\n    handleImageKeyboardEvent(event) {\n        const key = event.code;\n        if (key === SPACE_CODE || key === ENTER_CODE) {\n            return NEXT;\n        }\n        return NOTHING;\n    }\n    /**\n     * Private method to handle mouse events over an image.\n     * @param MouseEvent event payload\n     * @returns number 1 for NEXT and 0 for NOTHING\n     */\n    handleImageMouseEvent(event) {\n        const mouseBtn = event.button;\n        if (mouseBtn === MOUSE_MAIN_BUTTON_CLICK) {\n            return NEXT;\n        }\n        return NOTHING;\n    }\n    /**\n     * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent event payload\n     * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n     */\n    handleKeyboardNavigationEvent(direction, event) {\n        const key = event.code;\n        if (key === SPACE_CODE || key === ENTER_CODE) {\n            return direction === DIRECTION_RIGHT ? NEXT : PREV;\n        }\n        return NOTHING;\n    }\n    /**\n     * Method to handle events over an image, for instance a keypress with the Keyboard or a Mouse click.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param MouseEvent event payload\n     * @returns number -1 for PREV, 1 for NEXT and 0 for NOTHING\n     */\n    handleMouseNavigationEvent(direction, event) {\n        const mouseBtn = event.button;\n        if (mouseBtn === MOUSE_MAIN_BUTTON_CLICK) {\n            return direction === DIRECTION_RIGHT ? NEXT : PREV;\n        }\n        return NOTHING;\n    }\n}\nAccessibleComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: AccessibleComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nAccessibleComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: AccessibleComponent, selector: \"ks-accessible\", ngImport: i0, template: ``, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: AccessibleComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'ks-accessible',\n                    template: ``,\n                    changeDetection: ChangeDetectionStrategy.OnPush\n                }]\n        }], ctorParameters: function () { return []; } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Class `Image` that represents an image with both `modal` and `plain` configurations.\n * Both image `id` and `modal` are mandatory, instead `plain` is optional.\n */\nclass Image {\n    constructor(id, modal, plain) {\n        this.id = id;\n        this.modal = modal;\n        this.plain = plain;\n    }\n}\n/**\n * Class `ImageEvent` that represents the event payload with the result and the triggered action.\n * It also contains the source id of the gallery that emitted this event\n */\nclass ImageEvent {\n    constructor(galleryId, action, result) {\n        this.galleryId = galleryId;\n        this.action = action;\n        this.result = result;\n    }\n}\n/**\n * Class `ImageModalEvent` that represents the event payload with galleryId, result and the triggered action.\n */\nclass ImageModalEvent extends ImageEvent {\n    constructor(galleryId, action, result) {\n        super(galleryId, action, result);\n    }\n}\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Enum `Action` with a list of possible actions, based on the source of the action.\n */\nvar Action;\n(function (Action) {\n    Action[Action[\"NORMAL\"] = 0] = \"NORMAL\";\n    Action[Action[\"CLICK\"] = 1] = \"CLICK\";\n    Action[Action[\"KEYBOARD\"] = 2] = \"KEYBOARD\";\n    Action[Action[\"SWIPE\"] = 3] = \"SWIPE\";\n    Action[Action[\"LOAD\"] = 4] = \"LOAD\";\n    Action[Action[\"AUTOPLAY\"] = 5] = \"AUTOPLAY\";\n})(Action || (Action = {}));\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Utility function to get the index of the input `image` from `arrayOfImages`\n * @param Image image to get the index. The image 'id' must be a number >= 0\n * @param Image[] arrayOfImages to search the image within it\n * @returns number the index of the image. -1 if not found.\n * @throws an Error if either image or arrayOfImages are not valid,\n *  or if the input image doesn't contain an 'id', or the 'id' is < 0\n */\nfunction getIndex(image, arrayOfImages) {\n    if (!image) {\n        throw new Error('image must be a valid Image object');\n    }\n    if (!arrayOfImages) {\n        throw new Error('arrayOfImages must be a valid Image[]');\n    }\n    if (!image.id && image.id !== 0) {\n        // id = 0 is admitted\n        throw new Error(`A numeric Image 'id' is mandatory`);\n    }\n    if (image.id < 0) {\n        throw new Error(`Image 'id' must be >= 0`);\n    }\n    return arrayOfImages.findIndex((val) => val.id === image.id);\n}\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Enum `DescriptionStrategy` with keys and their relative key codes.\n */\nvar DescriptionStrategy;\n(function (DescriptionStrategy) {\n    DescriptionStrategy[DescriptionStrategy[\"ALWAYS_HIDDEN\"] = 1] = \"ALWAYS_HIDDEN\";\n    DescriptionStrategy[DescriptionStrategy[\"ALWAYS_VISIBLE\"] = 2] = \"ALWAYS_VISIBLE\";\n    DescriptionStrategy[DescriptionStrategy[\"HIDE_IF_EMPTY\"] = 3] = \"HIDE_IF_EMPTY\";\n})(DescriptionStrategy || (DescriptionStrategy = {}));\n\n/**\n * Default accessibility configuration.\n */\nconst KS_DEFAULT_ACCESSIBILITY_CONFIG = {\n    backgroundAriaLabel: 'Modal gallery full screen background',\n    backgroundTitle: '',\n    plainGalleryContentAriaLabel: 'Plain gallery content',\n    plainGalleryContentTitle: '',\n    modalGalleryContentAriaLabel: 'Modal gallery content',\n    modalGalleryContentTitle: '',\n    loadingSpinnerAriaLabel: 'The current image is loading. Please be patient.',\n    loadingSpinnerTitle: 'The current image is loading. Please be patient.',\n    mainContainerAriaLabel: 'Current image and navigation',\n    mainContainerTitle: '',\n    mainPrevImageAriaLabel: 'Previous image',\n    mainPrevImageTitle: 'Previous image',\n    mainNextImageAriaLabel: 'Next image',\n    mainNextImageTitle: 'Next image',\n    dotsContainerAriaLabel: 'Image navigation dots',\n    dotsContainerTitle: '',\n    dotAriaLabel: 'Navigate to image number',\n    previewsContainerAriaLabel: 'Image previews',\n    previewsContainerTitle: '',\n    previewScrollPrevAriaLabel: 'Scroll previous previews',\n    previewScrollPrevTitle: 'Scroll previous previews',\n    previewScrollNextAriaLabel: 'Scroll next previews',\n    previewScrollNextTitle: 'Scroll next previews',\n    carouselContainerAriaLabel: 'Current image and navigation',\n    carouselContainerTitle: '',\n    carouselPrevImageAriaLabel: 'Previous image',\n    carouselPrevImageTitle: 'Previous image',\n    carouselNextImageAriaLabel: 'Next image',\n    carouselNextImageTitle: 'Next image',\n    carouselPreviewsContainerAriaLabel: 'Image previews',\n    carouselPreviewsContainerTitle: '',\n    carouselPreviewScrollPrevAriaLabel: 'Scroll previous previews',\n    carouselPreviewScrollPrevTitle: 'Scroll previous previews',\n    carouselPreviewScrollNextAriaLabel: 'Scroll next previews',\n    carouselPreviewScrollNextTitle: 'Scroll next previews'\n};\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Enum `ButtonsStrategy` to configure the logic of a button.\n */\nvar ButtonsStrategy;\n(function (ButtonsStrategy) {\n    // don't use 0 here\n    // the first index is 1 and all of the following members are auto-incremented from that point on\n    ButtonsStrategy[ButtonsStrategy[\"DEFAULT\"] = 1] = \"DEFAULT\";\n    ButtonsStrategy[ButtonsStrategy[\"SIMPLE\"] = 2] = \"SIMPLE\";\n    ButtonsStrategy[ButtonsStrategy[\"ADVANCED\"] = 3] = \"ADVANCED\";\n    ButtonsStrategy[ButtonsStrategy[\"FULL\"] = 4] = \"FULL\";\n    ButtonsStrategy[ButtonsStrategy[\"CUSTOM\"] = 5] = \"CUSTOM\";\n})(ButtonsStrategy || (ButtonsStrategy = {}));\n/**\n * Enum `ButtonType` is the type of a button.\n */\nvar ButtonType;\n(function (ButtonType) {\n    // don't use 0 here\n    // the first index is 1 and all of the following members are auto-incremented from that point on\n    ButtonType[ButtonType[\"DELETE\"] = 1] = \"DELETE\";\n    ButtonType[ButtonType[\"EXTURL\"] = 2] = \"EXTURL\";\n    ButtonType[ButtonType[\"DOWNLOAD\"] = 3] = \"DOWNLOAD\";\n    ButtonType[ButtonType[\"CLOSE\"] = 4] = \"CLOSE\";\n    ButtonType[ButtonType[\"CUSTOM\"] = 5] = \"CUSTOM\";\n    ButtonType[ButtonType[\"FULLSCREEN\"] = 6] = \"FULLSCREEN\";\n})(ButtonType || (ButtonType = {}));\n/**\n * Array of admitted types of buttons.\n */\nconst WHITELIST_BUTTON_TYPES = [\n    ButtonType.FULLSCREEN,\n    ButtonType.DELETE,\n    ButtonType.EXTURL,\n    ButtonType.DOWNLOAD,\n    ButtonType.CLOSE,\n    ButtonType.CUSTOM\n];\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Class `LineLayout` to configure a linear plain gallery.\n */\nclass LineLayout {\n    constructor(size, breakConfig, justify) {\n        this.size = size;\n        this.breakConfig = breakConfig;\n        this.justify = justify;\n    }\n}\n/**\n * Class `GridLayout` to configure a grid plain gallery.\n */\nclass GridLayout {\n    constructor(size, breakConfig) {\n        this.size = size;\n        this.breakConfig = breakConfig;\n    }\n}\n/**\n * Enum `PlainGalleryStrategy` to choose the behaviour of the plain gallery.\n */\nvar PlainGalleryStrategy;\n(function (PlainGalleryStrategy) {\n    // don't use 0 here\n    // the first index is 1 and all of the following members are auto-incremented from that point on\n    PlainGalleryStrategy[PlainGalleryStrategy[\"ROW\"] = 1] = \"ROW\";\n    PlainGalleryStrategy[PlainGalleryStrategy[\"COLUMN\"] = 2] = \"COLUMN\";\n    PlainGalleryStrategy[PlainGalleryStrategy[\"GRID\"] = 3] = \"GRID\";\n    PlainGalleryStrategy[PlainGalleryStrategy[\"CUSTOM\"] = 4] = \"CUSTOM\"; // full custom strategy\n})(PlainGalleryStrategy || (PlainGalleryStrategy = {}));\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Enum `LoadingType` with a list of possible types.\n */\nvar LoadingType;\n(function (LoadingType) {\n    LoadingType[LoadingType[\"STANDARD\"] = 1] = \"STANDARD\";\n    LoadingType[LoadingType[\"CIRCULAR\"] = 2] = \"CIRCULAR\";\n    LoadingType[LoadingType[\"BARS\"] = 3] = \"BARS\";\n    LoadingType[LoadingType[\"DOTS\"] = 4] = \"DOTS\";\n    LoadingType[LoadingType[\"CUBE_FLIPPING\"] = 5] = \"CUBE_FLIPPING\";\n    LoadingType[LoadingType[\"CIRCLES\"] = 6] = \"CIRCLES\";\n    LoadingType[LoadingType[\"EXPLOSING_SQUARES\"] = 7] = \"EXPLOSING_SQUARES\";\n})(LoadingType || (LoadingType = {}));\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\nconst DEFAULT_PREVIEW_SIZE = { height: '50px', width: 'auto' };\nconst DEFAULT_LAYOUT = new LineLayout(DEFAULT_PREVIEW_SIZE, { length: -1, wrap: false }, 'flex-start');\nconst DEFAULT_PLAIN_CONFIG = {\n    strategy: PlainGalleryStrategy.ROW,\n    layout: DEFAULT_LAYOUT,\n    advanced: { aTags: false, additionalBackground: '50% 50%/cover' }\n};\nconst DEFAULT_LOADING = { enable: true, type: LoadingType.STANDARD };\nconst DEFAULT_DESCRIPTION_STYLE = {\n    bgColor: 'rgba(0, 0, 0, .5)',\n    textColor: 'white',\n    marginTop: '0px',\n    marginBottom: '0px',\n    marginLeft: '0px',\n    marginRight: '0px'\n};\nconst DEFAULT_DESCRIPTION = {\n    strategy: DescriptionStrategy.ALWAYS_VISIBLE,\n    imageText: 'Image ',\n    numberSeparator: '/',\n    beforeTextDescription: ' - ',\n    style: DEFAULT_DESCRIPTION_STYLE\n};\nconst DEFAULT_CAROUSEL_DESCRIPTION = {\n    strategy: DescriptionStrategy.ALWAYS_HIDDEN,\n    imageText: 'Image ',\n    numberSeparator: '/',\n    beforeTextDescription: ' - ',\n    style: DEFAULT_DESCRIPTION_STYLE\n};\nconst DEFAULT_CURRENT_IMAGE_CONFIG = {\n    navigateOnClick: true,\n    loadingConfig: DEFAULT_LOADING,\n    description: DEFAULT_DESCRIPTION,\n    downloadable: false,\n    invertSwipe: false\n};\nconst DEFAULT_CAROUSEL_IMAGE_CONFIG = {\n    description: DEFAULT_CAROUSEL_DESCRIPTION,\n    invertSwipe: false\n};\nconst DEFAULT_CURRENT_CAROUSEL_CONFIG = {\n    maxWidth: '100%',\n    maxHeight: '400px',\n    showArrows: true,\n    objectFit: 'cover',\n    keyboardEnable: true,\n    modalGalleryEnable: false\n};\nconst DEFAULT_CURRENT_CAROUSEL_PLAY = {\n    autoPlay: true,\n    interval: 5000,\n    pauseOnHover: true\n};\nconst DEFAULT_CAROUSEL_BREAKPOINTS = { xSmall: 100, small: 100, medium: 150, large: 200, xLarge: 200 };\nconst DEFAULT_CAROUSEL_PREVIEWS_CONFIG = {\n    visible: true,\n    number: 4,\n    arrows: true,\n    clickable: true,\n    width: 100 / 4 + '%',\n    maxHeight: '200px',\n    breakpoints: DEFAULT_CAROUSEL_BREAKPOINTS\n};\nconst DEFAULT_KEYBOARD_SERVICE_CONFIG = {\n    shortcuts: ['ctrl+s', 'meta+s'],\n    disableSsrWorkaround: false\n};\nconst DEFAULT_SLIDE_CONFIG = {\n    infinite: false,\n    playConfig: { autoPlay: false, interval: 5000, pauseOnHover: true },\n    sidePreviews: { show: true, size: { width: '100px', height: 'auto' } }\n};\nconst DEFAULT_PREVIEW_CONFIG = {\n    visible: true,\n    number: 3,\n    arrows: true,\n    clickable: true,\n    size: DEFAULT_PREVIEW_SIZE\n};\nconst DEFAULT_CONFIG = Object.freeze({\n    slideConfig: DEFAULT_SLIDE_CONFIG,\n    accessibilityConfig: KS_DEFAULT_ACCESSIBILITY_CONFIG,\n    previewConfig: DEFAULT_PREVIEW_CONFIG,\n    buttonsConfig: { visible: true, strategy: ButtonsStrategy.DEFAULT },\n    dotsConfig: { visible: true },\n    plainGalleryConfig: DEFAULT_PLAIN_CONFIG,\n    currentImageConfig: DEFAULT_CURRENT_IMAGE_CONFIG,\n    keyboardConfig: undefined,\n    carouselConfig: DEFAULT_CURRENT_CAROUSEL_CONFIG,\n    carouselImageConfig: DEFAULT_CAROUSEL_IMAGE_CONFIG,\n    carouselPreviewsConfig: DEFAULT_CAROUSEL_PREVIEWS_CONFIG,\n    carouselPlayConfig: DEFAULT_CURRENT_CAROUSEL_PLAY,\n    carouselDotsConfig: { visible: true },\n    carouselSlideInfinite: true,\n    enableCloseOutside: true,\n    keyboardServiceConfig: DEFAULT_KEYBOARD_SERVICE_CONFIG\n});\n/**\n * Service to handle library configuration in a unique place\n */\nclass ConfigService {\n    constructor() {\n        this.configMap = new Map();\n    }\n    getConfig(id) {\n        this.initIfNotExists(id);\n        return this.configMap.get(id);\n    }\n    setConfig(id, obj) {\n        this.initIfNotExists(id);\n        if (!obj) {\n            return;\n        }\n        if (!DEFAULT_CONFIG ||\n            !DEFAULT_CONFIG.slideConfig ||\n            !DEFAULT_CONFIG.slideConfig.sidePreviews ||\n            !DEFAULT_CONFIG.previewConfig ||\n            !DEFAULT_CONFIG.previewConfig.size ||\n            !DEFAULT_CONFIG.previewConfig.number ||\n            !DEFAULT_CONFIG.plainGalleryConfig ||\n            !DEFAULT_CONFIG.currentImageConfig ||\n            !DEFAULT_CONFIG.currentImageConfig ||\n            !DEFAULT_CONFIG.currentImageConfig.description ||\n            !DEFAULT_CONFIG.carouselImageConfig ||\n            !DEFAULT_CONFIG.carouselImageConfig.description ||\n            !DEFAULT_CONFIG.carouselPreviewsConfig ||\n            !DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints ||\n            !DEFAULT_CAROUSEL_PREVIEWS_CONFIG.number) {\n            throw new Error('Internal library error - DEFAULT_CONFIG must be fully initialized!!!');\n        }\n        const newConfig = Object.assign({}, this.configMap.get(id));\n        if (obj.slideConfig) {\n            let playConfig;\n            let sidePreviews;\n            let size;\n            if (obj.slideConfig.playConfig) {\n                playConfig = Object.assign({}, DEFAULT_CONFIG.slideConfig.playConfig, obj.slideConfig.playConfig);\n            }\n            else {\n                playConfig = DEFAULT_CONFIG.slideConfig.playConfig;\n            }\n            if (obj.slideConfig.sidePreviews) {\n                if (obj.slideConfig.sidePreviews.size) {\n                    size = Object.assign({}, DEFAULT_CONFIG.slideConfig.sidePreviews.size, obj.slideConfig.sidePreviews.size);\n                }\n                else {\n                    size = DEFAULT_CONFIG.slideConfig.sidePreviews.size;\n                }\n                sidePreviews = Object.assign({}, DEFAULT_CONFIG.slideConfig.sidePreviews, obj.slideConfig.sidePreviews);\n            }\n            else {\n                sidePreviews = DEFAULT_CONFIG.slideConfig.sidePreviews;\n                size = DEFAULT_CONFIG.slideConfig.sidePreviews.size;\n            }\n            const newSlideConfig = Object.assign({}, DEFAULT_CONFIG.slideConfig, obj.slideConfig);\n            newSlideConfig.playConfig = playConfig;\n            newSlideConfig.sidePreviews = sidePreviews;\n            newSlideConfig.sidePreviews.size = size;\n            newConfig.slideConfig = newSlideConfig;\n        }\n        if (obj.accessibilityConfig) {\n            newConfig.accessibilityConfig = Object.assign({}, DEFAULT_CONFIG.accessibilityConfig, obj.accessibilityConfig);\n        }\n        if (obj.previewConfig) {\n            let size;\n            let num;\n            if (obj.previewConfig.size) {\n                size = Object.assign({}, DEFAULT_CONFIG.previewConfig.size, obj.previewConfig.size);\n            }\n            else {\n                size = DEFAULT_CONFIG.previewConfig.size;\n            }\n            if (obj.previewConfig.number) {\n                if (obj.previewConfig.number <= 0) {\n                    // if number is <= 0 reset to default\n                    num = DEFAULT_CONFIG.previewConfig.number;\n                }\n                else {\n                    num = obj.previewConfig.number;\n                }\n            }\n            else {\n                num = DEFAULT_CONFIG.previewConfig.number;\n            }\n            const newPreviewConfig = Object.assign({}, DEFAULT_CONFIG.previewConfig, obj.previewConfig);\n            newPreviewConfig.size = size;\n            newPreviewConfig.number = num;\n            newConfig.previewConfig = newPreviewConfig;\n        }\n        if (obj.buttonsConfig) {\n            newConfig.buttonsConfig = Object.assign({}, DEFAULT_CONFIG.buttonsConfig, obj.buttonsConfig);\n        }\n        if (obj.dotsConfig) {\n            newConfig.dotsConfig = Object.assign({}, DEFAULT_CONFIG.dotsConfig, obj.dotsConfig);\n        }\n        if (obj.plainGalleryConfig) {\n            let advanced;\n            let layout;\n            if (obj.plainGalleryConfig.advanced) {\n                advanced = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig.advanced, obj.plainGalleryConfig.advanced);\n            }\n            else {\n                advanced = DEFAULT_CONFIG.plainGalleryConfig.advanced;\n            }\n            if (obj.plainGalleryConfig.layout) {\n                // it isn't mandatory to use assign, because obj.plainGalleryConfig.layout is an instance of class (LineaLayout, GridLayout)\n                layout = obj.plainGalleryConfig.layout;\n            }\n            else {\n                layout = DEFAULT_CONFIG.plainGalleryConfig.layout;\n            }\n            const newPlainGalleryConfig = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig, obj.plainGalleryConfig);\n            newPlainGalleryConfig.layout = layout;\n            newPlainGalleryConfig.advanced = advanced;\n            newConfig.plainGalleryConfig = initPlainGalleryConfig(newPlainGalleryConfig);\n        }\n        if (obj.currentImageConfig) {\n            let loading;\n            let description;\n            let descriptionStyle;\n            if (obj.currentImageConfig.loadingConfig) {\n                loading = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.loadingConfig, obj.currentImageConfig.loadingConfig);\n            }\n            else {\n                loading = DEFAULT_CONFIG.currentImageConfig.loadingConfig;\n            }\n            if (obj.currentImageConfig.description) {\n                description = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.description, obj.currentImageConfig.description);\n                if (obj.currentImageConfig.description.style) {\n                    descriptionStyle = Object.assign({}, DEFAULT_CONFIG.currentImageConfig.description.style, obj.currentImageConfig.description.style);\n                }\n                else {\n                    descriptionStyle = DEFAULT_CONFIG.currentImageConfig.description.style;\n                }\n            }\n            else {\n                description = DEFAULT_CONFIG.currentImageConfig.description;\n                descriptionStyle = DEFAULT_CONFIG.currentImageConfig.description.style;\n            }\n            const newCurrentImageConfig = Object.assign({}, DEFAULT_CONFIG.currentImageConfig, obj.currentImageConfig);\n            newCurrentImageConfig.loadingConfig = loading;\n            newCurrentImageConfig.description = description;\n            newCurrentImageConfig.description.style = descriptionStyle;\n            newConfig.currentImageConfig = newCurrentImageConfig;\n        }\n        if (obj.keyboardConfig) {\n            newConfig.keyboardConfig = Object.assign({}, DEFAULT_CONFIG.keyboardConfig, obj.keyboardConfig);\n        }\n        // carousel\n        if (obj.carouselConfig) {\n            newConfig.carouselConfig = Object.assign({}, DEFAULT_CONFIG.carouselConfig, obj.carouselConfig);\n        }\n        if (obj.carouselImageConfig) {\n            let description;\n            let descriptionStyle;\n            if (obj.carouselImageConfig.description) {\n                description = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig.description, obj.carouselImageConfig.description);\n                if (obj.carouselImageConfig.description.style) {\n                    descriptionStyle = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig.description.style, obj.carouselImageConfig.description.style);\n                }\n                else {\n                    descriptionStyle = DEFAULT_CONFIG.carouselImageConfig.description.style;\n                }\n            }\n            else {\n                description = DEFAULT_CONFIG.carouselImageConfig.description;\n                descriptionStyle = DEFAULT_CONFIG.carouselImageConfig.description.style;\n            }\n            const newCarouselImageConfig = Object.assign({}, DEFAULT_CONFIG.carouselImageConfig, obj.carouselImageConfig);\n            newCarouselImageConfig.description = description;\n            newCarouselImageConfig.description.style = descriptionStyle;\n            newConfig.carouselImageConfig = newCarouselImageConfig;\n        }\n        if (obj.carouselPlayConfig) {\n            // check values\n            if (obj.carouselPlayConfig.interval <= 0) {\n                throw new Error(`Carousel's interval must be a number >= 0`);\n            }\n            newConfig.carouselPlayConfig = Object.assign({}, DEFAULT_CONFIG.carouselPlayConfig, obj.carouselPlayConfig);\n        }\n        if (obj.carouselPreviewsConfig) {\n            // check values\n            let num;\n            let breakpoints;\n            if (!obj.carouselPreviewsConfig.number || obj.carouselPreviewsConfig.number <= 0) {\n                num = DEFAULT_CAROUSEL_PREVIEWS_CONFIG.number;\n            }\n            else {\n                num = obj.carouselPreviewsConfig.number;\n            }\n            if (obj.carouselPreviewsConfig.breakpoints) {\n                breakpoints = Object.assign({}, DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints, obj.carouselPreviewsConfig.breakpoints);\n            }\n            else {\n                breakpoints = DEFAULT_CONFIG.carouselPreviewsConfig.breakpoints;\n            }\n            newConfig.carouselPreviewsConfig = Object.assign({}, DEFAULT_CONFIG.carouselPreviewsConfig, obj.carouselPreviewsConfig);\n            newConfig.carouselPreviewsConfig.number = num;\n            newConfig.carouselPreviewsConfig.breakpoints = breakpoints;\n            // Init preview image width based on the number of previews in PreviewConfig\n            // Don't move this line above, because I need to be sure that both configPreview.number\n            // and configPreview.size are initialized\n            newConfig.carouselPreviewsConfig.width = 100 / newConfig.carouselPreviewsConfig.number + '%';\n        }\n        if (obj.carouselDotsConfig) {\n            newConfig.carouselDotsConfig = Object.assign({}, DEFAULT_CONFIG.carouselDotsConfig, obj.carouselDotsConfig);\n        }\n        if (obj.carouselSlideInfinite === undefined) {\n            newConfig.carouselSlideInfinite = DEFAULT_CONFIG.carouselSlideInfinite;\n        }\n        else {\n            newConfig.carouselSlideInfinite = obj.carouselSlideInfinite;\n        }\n        if (obj.enableCloseOutside === undefined) {\n            newConfig.enableCloseOutside = DEFAULT_CONFIG.enableCloseOutside;\n        }\n        else {\n            newConfig.enableCloseOutside = obj.enableCloseOutside;\n        }\n        if (obj.keyboardServiceConfig) {\n            newConfig.keyboardServiceConfig = Object.assign({}, DEFAULT_KEYBOARD_SERVICE_CONFIG, obj.keyboardServiceConfig);\n        }\n        this.configMap.set(id, newConfig);\n    }\n    initIfNotExists(id) {\n        if (!this.configMap.has(id)) {\n            this.configMap.set(id, DEFAULT_CONFIG);\n        }\n    }\n}\nConfigService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ConfigService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nConfigService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ConfigService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ConfigService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n/**\n * Function to build and return a `PlainGalleryConfig` object, proving also default values and validating the input object.\n * @param plainGalleryConfig object with the config requested by user\n * @returns PlainGalleryConfig the plain gallery configuration\n * @throws an Error if layout and strategy aren't compatible\n */\nfunction initPlainGalleryConfig(plainGalleryConfig) {\n    const newPlayGalleryConfig = Object.assign({}, DEFAULT_CONFIG.plainGalleryConfig, plainGalleryConfig);\n    if (newPlayGalleryConfig.layout instanceof LineLayout) {\n        if (newPlayGalleryConfig.strategy !== PlainGalleryStrategy.ROW && newPlayGalleryConfig.strategy !== PlainGalleryStrategy.COLUMN) {\n            throw new Error('LineLayout requires either ROW or COLUMN strategy');\n        }\n        if (!newPlayGalleryConfig.layout || !newPlayGalleryConfig.layout.breakConfig) {\n            throw new Error('Both layout and breakConfig must be valid');\n        }\n    }\n    if (newPlayGalleryConfig.layout instanceof GridLayout) {\n        if (newPlayGalleryConfig.strategy !== PlainGalleryStrategy.GRID) {\n            throw new Error('GridLayout requires GRID strategy');\n        }\n        if (!newPlayGalleryConfig.layout || !newPlayGalleryConfig.layout.breakConfig) {\n            throw new Error('Both layout and breakConfig must be valid');\n        }\n        // force wrap for grid layout\n        newPlayGalleryConfig.layout.breakConfig.wrap = true;\n    }\n    return newPlayGalleryConfig;\n}\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\nconst DIALOG_DATA = new InjectionToken('DIALOG_DATA');\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\nconst Keyboard = {\n    ESC: ESC_CODE,\n    LEFT_ARROW: LEFT_ARROW_CODE,\n    RIGHT_ARROW: RIGHT_ARROW_CODE,\n    UP_ARROW: UP_ARROW_CODE,\n    DOWN_ARROW: DOWN_ARROW_CODE\n};\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with the loading spinner\n */\nclass LoadingSpinnerComponent {\n    constructor() {\n        /**\n         * Enum of type `LoadingType` to choose the standard loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingStandard = LoadingType.STANDARD;\n        /**\n         * Enum of type `LoadingType` to choose the bars loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingBars = LoadingType.BARS;\n        /**\n         * Enum of type `LoadingType` to choose the circular loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingCircular = LoadingType.CIRCULAR;\n        /**\n         * Enum of type `LoadingType` to choose the dots loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingDots = LoadingType.DOTS;\n        /**\n         * Enum of type `LoadingType` to choose the cube flipping loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingCubeFlipping = LoadingType.CUBE_FLIPPING;\n        /**\n         * Enum of type `LoadingType` to choose the circles loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingCircles = LoadingType.CIRCLES;\n        /**\n         * Enum of type `LoadingType` to choose the explosing squares loading spinner.\n         * Declared here to be used inside the template.\n         */\n        this.loadingExplosingSquares = LoadingType.EXPLOSING_SQUARES;\n    }\n}\nLoadingSpinnerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: LoadingSpinnerComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nLoadingSpinnerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: LoadingSpinnerComponent, selector: \"ks-loading-spinner\", inputs: { loadingConfig: \"loadingConfig\", accessibilityConfig: \"accessibilityConfig\" }, ngImport: i0, template: \"<div [attr.aria-label]=\\\"accessibilityConfig?.loadingSpinnerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.loadingSpinnerTitle\\\">\\n\\n  <ng-container [ngSwitch]=\\\"loadingConfig?.type\\\">\\n    <ng-container *ngSwitchCase=\\\"loadingStandard\\\">\\n      <div class=\\\"cssload-loader\\\">\\n        <div class=\\\"cssload-inner cssload-one\\\"></div>\\n        <div class=\\\"cssload-inner cssload-two\\\"></div>\\n        <div class=\\\"cssload-inner cssload-three\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingBars\\\">\\n      <div class=\\\"loader-bars\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircular\\\">\\n      <div class=\\\"loader-circular\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingDots\\\">\\n      <div class=\\\"loader-dots\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCubeFlipping\\\">\\n      <div class=\\\"cube-wrapper\\\">\\n        <div class=\\\"cube-folding\\\">\\n          <span class=\\\"leaf1\\\"></span>\\n          <span class=\\\"leaf2\\\"></span>\\n          <span class=\\\"leaf3\\\"></span>\\n          <span class=\\\"leaf4\\\"></span>\\n        </div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircles\\\">\\n      <div id=\\\"preloader\\\">\\n        <div id=\\\"loader\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingExplosingSquares\\\">\\n      <div class=\\\"loader\\\">\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n      </div>\\n    </ng-container>\\n  </ng-container>\\n</div>\\n\", styles: [\".cssload-loader{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;width:64px;height:64px;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;perspective:800px}.cssload-inner{position:absolute;width:100%;height:100%;box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%}.cssload-inner.cssload-one{left:0%;top:0%;animation:cssload-rotate-one .6s linear infinite;-o-animation:cssload-rotate-one .6s linear infinite;-ms-animation:cssload-rotate-one .6s linear infinite;-webkit-animation:cssload-rotate-one .6s linear infinite;-moz-animation:cssload-rotate-one .6s linear infinite;border-bottom:3px solid rgba(255,255,255,.99)}.cssload-inner.cssload-two{right:0%;top:0%;animation:cssload-rotate-two .6s linear infinite;-o-animation:cssload-rotate-two .6s linear infinite;-ms-animation:cssload-rotate-two .6s linear infinite;-webkit-animation:cssload-rotate-two .6s linear infinite;-moz-animation:cssload-rotate-two .6s linear infinite;border-right:3px solid rgb(255,255,255)}.cssload-inner.cssload-three{right:0%;bottom:0%;animation:cssload-rotate-three .6s linear infinite;-o-animation:cssload-rotate-three .6s linear infinite;-ms-animation:cssload-rotate-three .6s linear infinite;-webkit-animation:cssload-rotate-three .6s linear infinite;-moz-animation:cssload-rotate-three .6s linear infinite;border-top:3px solid rgb(255,255,255)}@keyframes cssload-rotate-one{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes cssload-rotate-two{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes cssload-rotate-three{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}\\n\", \".loader-dots{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;font-size:10px;margin:auto;width:1em;height:1em;border-radius:50%;text-indent:-9999em;animation:load4 1.3s infinite linear;transform:translateZ(0)}@keyframes load4{0%,to{box-shadow:0 -3em 0 .2em,2em -2em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em}12.5%{box-shadow:0 -3em,2em -2em 0 .2em,3em 0,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}25%{box-shadow:0 -3em 0 -.5em,2em -2em,3em 0 0 .2em,2em 2em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}37.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0,2em 2em 0 .2em,0 3em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}50%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em,0 3em 0 .2em,-2em 2em,-3em 0 0 -1em,-2em -2em 0 -1em}62.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em,-2em 2em 0 .2em,-3em 0,-2em -2em 0 -1em}75%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0 0 .2em,-2em -2em}87.5%{box-shadow:0 -3em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0,-2em -2em 0 .2em}}\\n\", \".loader-bars,.loader-bars:before,.loader-bars:after{background:#fefcff;animation:load1 1s infinite ease-in-out;width:1em;height:4em}.loader-bars{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;text-indent:-9999em;margin:auto;font-size:11px;transform:translateZ(0);animation-delay:-.16s}.loader-bars:before,.loader-bars:after{position:absolute;top:0;content:\\\"\\\"}.loader-bars:before{left:-1.5em;animation-delay:-.32s}.loader-bars:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}\\n\", \".loader-circular,.loader-circular:after{border-radius:50%;width:10em;height:10em}.loader-circular{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;font-size:10px;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \".cube-folding{width:50px;height:50px;display:inline-block;transform:rotate(45deg);font-size:0}.cube-folding span{position:relative;width:25px;height:25px;transform:scale(1.1);display:inline-block}.cube-folding span:before{content:\\\"\\\";background-color:#fff;position:absolute;left:0;top:0;display:block;width:25px;height:25px;transform-origin:100% 100%;animation:folding 2.5s infinite linear both}.cube-folding .leaf2{transform:rotate(90deg) scale(1.1)}.cube-folding .leaf2:before{animation-delay:.3s;background-color:#f2f2f2}.cube-folding .leaf3{transform:rotate(270deg) scale(1.1)}.cube-folding .leaf3:before{animation-delay:.9s;background-color:#f2f2f2}.cube-folding .leaf4{transform:rotate(180deg) scale(1.1)}.cube-folding .leaf4:before{animation-delay:.6s;background-color:#e6e6e6}@keyframes folding{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.cube-wrapper{position:fixed;left:50%;top:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;text-align:center}@keyframes text{to{top:35px}}@keyframes shadow{to{bottom:-18px;width:100px}}\\n\", \"#preloader{position:fixed;top:0;left:0;width:100%;height:100%}#loader{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-75px 0 0 -75px;border-radius:50%;border:3px solid transparent;border-top-color:#b4b4b4;animation:spin 2s linear infinite}#loader:before{content:\\\"\\\";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#d9d9d9;animation:spin 3s linear infinite}#loader:after{content:\\\"\\\";position:absolute;top:15px;left:15px;right:15px;bottom:15px;border-radius:50%;border:3px solid transparent;border-top-color:#fff;animation:spin 1.5s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \"@keyframes loader{0%,10%,to{width:60px;height:60px}65%{width:150px;height:150px}}@keyframes loaderBlock{0%,30%{transform:rotate(0)}55%{background-color:#b4b4b4}to{transform:rotate(90deg)}}@keyframes loaderBlockInverse{0%,20%{transform:rotate(0)}55%{background-color:#d9d9d9}to{transform:rotate(-90deg)}}.loader{position:absolute;top:50%;left:50%;width:60px;height:60px;transform:translate(-50%,-50%) rotate(45deg) translate(0);animation:loader 1.2s infinite ease-in-out}.loader span{position:absolute;display:block;width:40px;height:40px;background-color:#fff;animation:loaderBlock 1.2s infinite ease-in-out both}.loader span:nth-child(1){top:0;left:0}.loader span:nth-child(2){top:0;right:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(3){bottom:0;left:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(4){bottom:0;right:0}\\n\"], directives: [{ type: i2.NgSwitch, selector: \"[ngSwitch]\", inputs: [\"ngSwitch\"] }, { type: i2.NgSwitchCase, selector: \"[ngSwitchCase]\", inputs: [\"ngSwitchCase\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: LoadingSpinnerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-loading-spinner', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div [attr.aria-label]=\\\"accessibilityConfig?.loadingSpinnerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.loadingSpinnerTitle\\\">\\n\\n  <ng-container [ngSwitch]=\\\"loadingConfig?.type\\\">\\n    <ng-container *ngSwitchCase=\\\"loadingStandard\\\">\\n      <div class=\\\"cssload-loader\\\">\\n        <div class=\\\"cssload-inner cssload-one\\\"></div>\\n        <div class=\\\"cssload-inner cssload-two\\\"></div>\\n        <div class=\\\"cssload-inner cssload-three\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingBars\\\">\\n      <div class=\\\"loader-bars\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircular\\\">\\n      <div class=\\\"loader-circular\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingDots\\\">\\n      <div class=\\\"loader-dots\\\">\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCubeFlipping\\\">\\n      <div class=\\\"cube-wrapper\\\">\\n        <div class=\\\"cube-folding\\\">\\n          <span class=\\\"leaf1\\\"></span>\\n          <span class=\\\"leaf2\\\"></span>\\n          <span class=\\\"leaf3\\\"></span>\\n          <span class=\\\"leaf4\\\"></span>\\n        </div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingCircles\\\">\\n      <div id=\\\"preloader\\\">\\n        <div id=\\\"loader\\\"></div>\\n      </div>\\n    </ng-container>\\n    <ng-container *ngSwitchCase=\\\"loadingExplosingSquares\\\">\\n      <div class=\\\"loader\\\">\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n        <span></span>\\n      </div>\\n    </ng-container>\\n  </ng-container>\\n</div>\\n\", styles: [\".cssload-loader{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;width:64px;height:64px;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;perspective:800px}.cssload-inner{position:absolute;width:100%;height:100%;box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%}.cssload-inner.cssload-one{left:0%;top:0%;animation:cssload-rotate-one .6s linear infinite;-o-animation:cssload-rotate-one .6s linear infinite;-ms-animation:cssload-rotate-one .6s linear infinite;-webkit-animation:cssload-rotate-one .6s linear infinite;-moz-animation:cssload-rotate-one .6s linear infinite;border-bottom:3px solid rgba(255,255,255,.99)}.cssload-inner.cssload-two{right:0%;top:0%;animation:cssload-rotate-two .6s linear infinite;-o-animation:cssload-rotate-two .6s linear infinite;-ms-animation:cssload-rotate-two .6s linear infinite;-webkit-animation:cssload-rotate-two .6s linear infinite;-moz-animation:cssload-rotate-two .6s linear infinite;border-right:3px solid rgb(255,255,255)}.cssload-inner.cssload-three{right:0%;bottom:0%;animation:cssload-rotate-three .6s linear infinite;-o-animation:cssload-rotate-three .6s linear infinite;-ms-animation:cssload-rotate-three .6s linear infinite;-webkit-animation:cssload-rotate-three .6s linear infinite;-moz-animation:cssload-rotate-three .6s linear infinite;border-top:3px solid rgb(255,255,255)}@keyframes cssload-rotate-one{0%{transform:rotateX(35deg) rotateY(-45deg) rotate(0)}to{transform:rotateX(35deg) rotateY(-45deg) rotate(360deg)}}@keyframes cssload-rotate-two{0%{transform:rotateX(50deg) rotateY(10deg) rotate(0)}to{transform:rotateX(50deg) rotateY(10deg) rotate(360deg)}}@keyframes cssload-rotate-three{0%{transform:rotateX(35deg) rotateY(55deg) rotate(0)}to{transform:rotateX(35deg) rotateY(55deg) rotate(360deg)}}\\n\", \".loader-dots{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;font-size:10px;margin:auto;width:1em;height:1em;border-radius:50%;text-indent:-9999em;animation:load4 1.3s infinite linear;transform:translateZ(0)}@keyframes load4{0%,to{box-shadow:0 -3em 0 .2em,2em -2em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em}12.5%{box-shadow:0 -3em,2em -2em 0 .2em,3em 0,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}25%{box-shadow:0 -3em 0 -.5em,2em -2em,3em 0 0 .2em,2em 2em,0 3em 0 -1em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}37.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0,2em 2em 0 .2em,0 3em,-2em 2em 0 -1em,-3em 0 0 -1em,-2em -2em 0 -1em}50%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em,0 3em 0 .2em,-2em 2em,-3em 0 0 -1em,-2em -2em 0 -1em}62.5%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em,-2em 2em 0 .2em,-3em 0,-2em -2em 0 -1em}75%{box-shadow:0 -3em 0 -1em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0 0 .2em,-2em -2em}87.5%{box-shadow:0 -3em,2em -2em 0 -1em,3em 0 0 -1em,2em 2em 0 -1em,0 3em 0 -1em,-2em 2em,-3em 0,-2em -2em 0 .2em}}\\n\", \".loader-bars,.loader-bars:before,.loader-bars:after{background:#fefcff;animation:load1 1s infinite ease-in-out;width:1em;height:4em}.loader-bars{position:absolute;top:0;bottom:0;right:0;left:0;color:#fefcff;text-indent:-9999em;margin:auto;font-size:11px;transform:translateZ(0);animation-delay:-.16s}.loader-bars:before,.loader-bars:after{position:absolute;top:0;content:\\\"\\\"}.loader-bars:before{left:-1.5em;animation-delay:-.32s}.loader-bars:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}\\n\", \".loader-circular,.loader-circular:after{border-radius:50%;width:10em;height:10em}.loader-circular{position:absolute;top:0;bottom:0;right:0;left:0;margin:auto;font-size:10px;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #ffffff;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \".cube-folding{width:50px;height:50px;display:inline-block;transform:rotate(45deg);font-size:0}.cube-folding span{position:relative;width:25px;height:25px;transform:scale(1.1);display:inline-block}.cube-folding span:before{content:\\\"\\\";background-color:#fff;position:absolute;left:0;top:0;display:block;width:25px;height:25px;transform-origin:100% 100%;animation:folding 2.5s infinite linear both}.cube-folding .leaf2{transform:rotate(90deg) scale(1.1)}.cube-folding .leaf2:before{animation-delay:.3s;background-color:#f2f2f2}.cube-folding .leaf3{transform:rotate(270deg) scale(1.1)}.cube-folding .leaf3:before{animation-delay:.9s;background-color:#f2f2f2}.cube-folding .leaf4{transform:rotate(180deg) scale(1.1)}.cube-folding .leaf4:before{animation-delay:.6s;background-color:#e6e6e6}@keyframes folding{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.cube-wrapper{position:fixed;left:50%;top:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;text-align:center}@keyframes text{to{top:35px}}@keyframes shadow{to{bottom:-18px;width:100px}}\\n\", \"#preloader{position:fixed;top:0;left:0;width:100%;height:100%}#loader{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-75px 0 0 -75px;border-radius:50%;border:3px solid transparent;border-top-color:#b4b4b4;animation:spin 2s linear infinite}#loader:before{content:\\\"\\\";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#d9d9d9;animation:spin 3s linear infinite}#loader:after{content:\\\"\\\";position:absolute;top:15px;left:15px;right:15px;bottom:15px;border-radius:50%;border:3px solid transparent;border-top-color:#fff;animation:spin 1.5s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\\n\", \"@keyframes loader{0%,10%,to{width:60px;height:60px}65%{width:150px;height:150px}}@keyframes loaderBlock{0%,30%{transform:rotate(0)}55%{background-color:#b4b4b4}to{transform:rotate(90deg)}}@keyframes loaderBlockInverse{0%,20%{transform:rotate(0)}55%{background-color:#d9d9d9}to{transform:rotate(-90deg)}}.loader{position:absolute;top:50%;left:50%;width:60px;height:60px;transform:translate(-50%,-50%) rotate(45deg) translate(0);animation:loader 1.2s infinite ease-in-out}.loader span{position:absolute;display:block;width:40px;height:40px;background-color:#fff;animation:loaderBlock 1.2s infinite ease-in-out both}.loader span:nth-child(1){top:0;left:0}.loader span:nth-child(2){top:0;right:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(3){bottom:0;left:0;animation:loaderBlockInverse 1.2s infinite ease-in-out both}.loader span:nth-child(4){bottom:0;right:0}\\n\"] }]\n        }], propDecorators: { loadingConfig: [{\n                type: Input\n            }], accessibilityConfig: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\nclass KeyboardNavigationDirective {\n    constructor() {\n        this.keyboardNavigation = new EventEmitter();\n    }\n    /**\n     * Listener to catch keyboard's events and call the right method based on the key.\n     * For instance, pressing esc, this will call `closeGallery(Action.KEYBOARD)` and so on.\n     * If you passed a valid `keyboardConfig` esc, right and left buttons will be customized based on your data.\n     * @param e KeyboardEvent caught by the listener.\n     */\n    onKeyDown(e) {\n        if (!this.isOpen) {\n            return;\n        }\n        this.keyboardNavigation.emit(e.code);\n    }\n}\nKeyboardNavigationDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KeyboardNavigationDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nKeyboardNavigationDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: KeyboardNavigationDirective, selector: \"[ksKeyboardNavigation]\", inputs: { isOpen: \"isOpen\" }, outputs: { keyboardNavigation: \"keyboardNavigation\" }, host: { listeners: { \"window:keydown\": \"onKeyDown($event)\" } }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KeyboardNavigationDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksKeyboardNavigation]'\n                }]\n        }], propDecorators: { isOpen: [{\n                type: Input\n            }], keyboardNavigation: [{\n                type: Output\n            }], onKeyDown: [{\n                type: HostListener,\n                args: ['window:keydown', ['$event']]\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to add fallback image if the original one is not reachable.\n */\nclass FallbackImageDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        this.fallbackApplied = new EventEmitter();\n    }\n    onError() {\n        if (!this.fallbackImg) {\n            this.fallbackApplied.emit(false);\n            return;\n        }\n        this.renderer.setAttribute(this.el.nativeElement, 'src', this.fallbackImg.toString());\n        this.fallbackApplied.emit(true);\n    }\n}\nFallbackImageDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: FallbackImageDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nFallbackImageDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: { fallbackImg: \"fallbackImg\" }, outputs: { fallbackApplied: \"fallbackApplied\" }, host: { listeners: { \"error\": \"onError()\" } }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: FallbackImageDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksFallbackImage]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { fallbackImg: [{\n                type: Input\n            }], fallbackApplied: [{\n                type: Output\n            }], onError: [{\n                type: HostListener,\n                args: ['error']\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to change the size of an element.\n */\nclass SizeDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change both width and height of an element.\n     */\n    applyStyle() {\n        if (!this.sizeConfig) {\n            return;\n        }\n        // apply [style.width]\n        if (this.sizeConfig.width) {\n            this.renderer.setStyle(this.el.nativeElement, 'width', this.sizeConfig.width);\n        }\n        if (this.sizeConfig.height) {\n            this.renderer.setStyle(this.el.nativeElement, 'height', this.sizeConfig.height);\n        }\n    }\n}\nSizeDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: SizeDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nSizeDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: SizeDirective, selector: \"[ksSize]\", inputs: { sizeConfig: \"sizeConfig\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: SizeDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksSize]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { sizeConfig: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to customize the description.\n */\nclass DescriptionDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change description's style.\n     */\n    applyStyle() {\n        if (!this.description) {\n            return;\n        }\n        if (this.description.style) {\n            this.renderer.setStyle(this.el.nativeElement, 'background', this.description.style.bgColor);\n            this.renderer.setStyle(this.el.nativeElement, 'color', this.description.style.textColor);\n            if (this.description.style.width) {\n                this.renderer.setStyle(this.el.nativeElement, 'width', this.description.style.width);\n            }\n            if (this.description.style.height) {\n                this.renderer.setStyle(this.el.nativeElement, 'height', this.description.style.height);\n            }\n            if (this.description.style.position) {\n                this.renderer.setStyle(this.el.nativeElement, 'position', this.description.style.position);\n            }\n            if (this.description.style.top) {\n                this.renderer.setStyle(this.el.nativeElement, 'top', this.description.style.top);\n            }\n            if (this.description.style.bottom) {\n                this.renderer.setStyle(this.el.nativeElement, 'bottom', this.description.style.bottom);\n            }\n            if (this.description.style.left) {\n                this.renderer.setStyle(this.el.nativeElement, 'left', this.description.style.left);\n            }\n            if (this.description.style.right) {\n                this.renderer.setStyle(this.el.nativeElement, 'right', this.description.style.right);\n            }\n            this.renderer.setStyle(this.el.nativeElement, 'margin-top', this.description.style.marginTop ? this.description.style.marginTop : '0px');\n            this.renderer.setStyle(this.el.nativeElement, 'margin-bottom', this.description.style.marginBottom ? this.description.style.marginBottom : '0px');\n            this.renderer.setStyle(this.el.nativeElement, 'margin-left', this.description.style.marginLeft ? this.description.style.marginLeft : '0px');\n            this.renderer.setStyle(this.el.nativeElement, 'margin-right', this.description.style.marginRight ? this.description.style.marginRight : '0px');\n        }\n    }\n}\nDescriptionDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DescriptionDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nDescriptionDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: DescriptionDirective, selector: \"[ksDescription]\", inputs: { description: \"description\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DescriptionDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksDescription]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { description: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with the current image with some additional elements like arrows and side previews.\n */\nclass CurrentImageComponent extends AccessibleComponent {\n    // use public ChangeDetectorRef to be able to call it from spec files to trigger change detection\n    // tslint:disable-next-line:no-any\n    constructor(platformId, ngZone, ref, configService) {\n        super();\n        this.platformId = platformId;\n        this.ngZone = ngZone;\n        this.ref = ref;\n        this.configService = configService;\n        /**\n         * Output to emit an event when images are loaded. The payload contains an `ImageLoadEvent`.\n         */\n        this.loadImage = new EventEmitter();\n        /**\n         * Output to emit any changes of the current image. The payload contains an `ImageModalEvent`.\n         */\n        this.changeImage = new EventEmitter();\n        /**\n         * Output to emit an event when the modal gallery is closed. The payload contains an `ImageModalEvent`.\n         */\n        this.closeGallery = new EventEmitter();\n        /**\n         * Subject to play modal-gallery.\n         */\n        this.start$ = new Subject();\n        /**\n         * Subject to stop modal-gallery.\n         */\n        this.stop$ = new Subject();\n        /**\n         * Enum of type `Action` that represents a normal action.\n         * Declared here to be used inside the template.\n         */\n        this.normalAction = Action.NORMAL;\n        /**\n         * Enum of type `Action` that represents a mouse click on a button.\n         * Declared here to be used inside the template.\n         */\n        this.clickAction = Action.CLICK;\n        /**\n         * Enum of type `Action` that represents a keyboard action.\n         * Declared here to be used inside the template.\n         */\n        this.keyboardAction = Action.KEYBOARD;\n        /**\n         * Boolean that it's true when you are watching the first image (currently visible).\n         * False by default\n         */\n        this.isFirstImage = false;\n        /**\n         * Boolean that it's true when you are watching the last image (currently visible).\n         * False by default\n         */\n        this.isLastImage = false;\n        /**\n         * Boolean that it's true if an image of the modal gallery is still loading.\n         * True by default\n         */\n        this.loading = true;\n        /**\n         * Private object without type to define all swipe actions used by hammerjs.\n         */\n        this.SWIPE_ACTION = {\n            LEFT: 'swipeleft',\n            RIGHT: 'swiperight',\n            UP: 'swipeup',\n            DOWN: 'swipedown'\n        };\n    }\n    /**\n     * Listener to stop the gallery when the mouse pointer is over the current image.\n     */\n    onMouseEnter() {\n        // if carousel feature is disable, don't do anything in any case\n        if (!this.slideConfig || !this.slideConfig.playConfig) {\n            return;\n        }\n        if (!this.slideConfig.playConfig.pauseOnHover) {\n            return;\n        }\n        this.stopCarousel();\n    }\n    /**\n     * Listener to play the gallery when the mouse pointer leave the current image.\n     */\n    onMouseLeave() {\n        // if carousel feature is disable, don't do anything in any case\n        if (!this.slideConfig || !this.slideConfig.playConfig) {\n            return;\n        }\n        if (!this.slideConfig.playConfig.pauseOnHover || !this.slideConfig.playConfig.autoPlay) {\n            return;\n        }\n        this.playCarousel();\n    }\n    /**\n     * Method ´ngOnInit´ to init configuration.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.buttonsConfig) {\n            throw new Error('Internal library error - libConfig and buttonsConfig must be defined');\n        }\n        this.slideConfig = libConfig.slideConfig;\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        this.currentImageConfig = libConfig.currentImageConfig;\n        this.keyboardConfig = libConfig.keyboardConfig;\n    }\n    /**\n     * Method ´ngOnChanges´ to update `loading` status and emit events.\n     * If the gallery is open, then it will also manage boundary arrows and sliding.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges(changes) {\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        const images = changes.images;\n        const currentImage = changes.currentImage;\n        if (currentImage && currentImage.previousValue !== currentImage.currentValue) {\n            this.updateIndexes();\n        }\n        else if (images && images.previousValue !== images.currentValue) {\n            this.updateIndexes();\n        }\n        const slideConfig = changes.slideConfig;\n        if (slideConfig && slideConfig.previousValue !== slideConfig.currentValue) {\n            this.slideConfig = libConfig.slideConfig;\n        }\n    }\n    /**\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     */\n    ngAfterContentInit() {\n        // interval doesn't play well with SSR and protractor,\n        // so we should run it in the browser and outside Angular\n        if (isPlatformBrowser(this.platformId)) {\n            this.ngZone.runOutsideAngular(() => {\n                this.start$\n                    .pipe(map(() => this.slideConfig && this.slideConfig.playConfig && this.slideConfig.playConfig.autoPlay && this.slideConfig.playConfig.interval), \n                // tslint:disable-next-line:no-any\n                filter((interval) => interval > 0), switchMap(interval => timer(interval).pipe(takeUntil(this.stop$))))\n                    .subscribe(() => this.ngZone.run(() => {\n                    if (!this.isLastImage) {\n                        this.nextImage(Action.AUTOPLAY);\n                    }\n                    this.ref.markForCheck();\n                }));\n                this.start$.next();\n            });\n        }\n    }\n    /**\n     * Method to handle keypress based on the `keyboardConfig` input. It gets the code of\n     * the key that triggered the keypress event to navigate between images or to close the modal gallery.\n     * @param code string of the key that triggered the keypress event\n     */\n    onKeyPress(code) {\n        const esc = this.keyboardConfig && this.keyboardConfig.esc ? this.keyboardConfig.esc : Keyboard.ESC;\n        const right = this.keyboardConfig && this.keyboardConfig.right ? this.keyboardConfig.right : Keyboard.RIGHT_ARROW;\n        const left = this.keyboardConfig && this.keyboardConfig.left ? this.keyboardConfig.left : Keyboard.LEFT_ARROW;\n        switch (code) {\n            case esc:\n                this.closeGallery.emit(new ImageModalEvent(this.id, Action.KEYBOARD, true));\n                break;\n            case right:\n                this.nextImage(Action.KEYBOARD);\n                break;\n            case left:\n                this.prevImage(Action.KEYBOARD);\n                break;\n        }\n    }\n    /**\n     * Method to get the image description based on input params.\n     * If you provide a full description this will be the visible description, otherwise,\n     * it will be built using the `Description` object, concatenating its fields.\n     * @param Image image to get its description. If not provided it will be the current image\n     * @returns String description of the image (or the current image if not provided)\n     * @throws an Error if description isn't available\n     */\n    getDescriptionToDisplay(image = this.currentImage) {\n        if (!this.currentImageConfig || !this.currentImageConfig.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        const imageWithoutDescription = !image.modal || !image.modal.description || image.modal.description === '';\n        switch (this.currentImageConfig.description.strategy) {\n            case DescriptionStrategy.HIDE_IF_EMPTY:\n                return imageWithoutDescription ? '' : image.modal.description + '';\n            case DescriptionStrategy.ALWAYS_HIDDEN:\n                return '';\n            default:\n                // ----------- DescriptionStrategy.ALWAYS_VISIBLE -----------------\n                return this.buildTextDescription(image, imageWithoutDescription);\n        }\n    }\n    /**\n     * Method to get `alt attribute`.\n     * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n     * @param Image image to get its alt description. If not provided it will be the current image\n     * @returns String alt description of the image (or the current image if not provided)\n     */\n    getAltDescriptionByImage(image = this.currentImage) {\n        if (!image) {\n            return '';\n        }\n        return image.modal && image.modal.description ? image.modal.description : `Image ${getIndex(image, this.images) + 1}`;\n    }\n    /**\n     * Method to get the title attributes based on descriptions.\n     * This is useful to prevent accessibility issues, because if DescriptionStrategy is ALWAYS_HIDDEN,\n     * it prevents an empty string as title.\n     * @param Image image to get its description. If not provided it will be the current image\n     * @returns String title of the image based on descriptions\n     * @throws an Error if description isn't available\n     */\n    getTitleToDisplay(image = this.currentImage) {\n        if (!this.currentImageConfig || !this.currentImageConfig.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        const imageWithoutDescription = !image.modal || !image.modal.description || image.modal.description === '';\n        const description = this.buildTextDescription(image, imageWithoutDescription);\n        return description;\n    }\n    /**\n     * Method to get the left side preview image.\n     * @returns Image the image to show as size preview on the left\n     */\n    getLeftPreviewImage() {\n        if (!this.slideConfig) {\n            throw new Error('Internal library error - slideConfig must be defined');\n        }\n        const currentIndex = getIndex(this.currentImage, this.images);\n        if (currentIndex === 0 && this.slideConfig.infinite) {\n            // the current image is the first one,\n            // so the previous one is the last image\n            // because infinite is true\n            return this.images[this.images.length - 1];\n        }\n        this.handleBoundaries(currentIndex);\n        return this.images[Math.max(currentIndex - 1, 0)];\n    }\n    /**\n     * Method to get the right side preview image.\n     * @returns Image the image to show as size preview on the right\n     */\n    getRightPreviewImage() {\n        if (!this.slideConfig) {\n            throw new Error('Internal library error - slideConfig must be defined');\n        }\n        const currentIndex = getIndex(this.currentImage, this.images);\n        if (currentIndex === this.images.length - 1 && this.slideConfig.infinite) {\n            // the current image is the last one,\n            // so the next one is the first image\n            // because infinite is true\n            return this.images[0];\n        }\n        this.handleBoundaries(currentIndex);\n        return this.images[Math.min(currentIndex + 1, this.images.length - 1)];\n    }\n    /**\n     * Method called by events from both keyboard and mouse on an image.\n     * This will invoke the nextImage method.\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the event or `Action.NORMAL` if not provided\n     */\n    onImageEvent(event, action = Action.NORMAL) {\n        if (!this.currentImageConfig) {\n            throw new Error('Internal library error - currentImageConfig must be defined');\n        }\n        // check if triggered by a mouse click\n        // If yes, It should block navigation when navigateOnClick is false\n        if (action === Action.CLICK && !this.currentImageConfig.navigateOnClick) {\n            // a user has requested to block navigation via configCurrentImage.navigateOnClick property\n            return;\n        }\n        const result = super.handleImageEvent(event);\n        if (result === NEXT) {\n            this.nextImage(action);\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a navigation arrow.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the event or `Action.NORMAL` if not provided\n     * @param boolean disable to disable navigation\n     */\n    onNavigationEvent(direction, event, action = Action.NORMAL, disable = false) {\n        if (disable) {\n            return;\n        }\n        const result = super.handleNavigationEvent(direction, event);\n        if (result === NEXT) {\n            this.nextImage(action);\n        }\n        else if (result === PREV) {\n            this.prevImage(action);\n        }\n    }\n    /**\n     * Method to go back to the previous image.\n     * @param action Enum of type `Action` that represents the source\n     *  action that moved back to the previous image. `Action.NORMAL` by default.\n     */\n    prevImage(action = Action.NORMAL) {\n        // check if prevImage should be blocked\n        if (this.isPreventSliding(0)) {\n            return;\n        }\n        const prevImage = this.getPrevImage();\n        this.loading = !prevImage.previouslyLoaded;\n        this.changeImage.emit(new ImageModalEvent(this.id, action, getIndex(prevImage, this.images)));\n        this.start$.next();\n    }\n    /**\n     * Method to go back to the previous image.\n     * @param action Enum of type `Action` that represents the source\n     *  action that moved to the next image. `Action.NORMAL` by default.\n     */\n    nextImage(action = Action.NORMAL) {\n        // check if nextImage should be blocked\n        if (this.isPreventSliding(this.images.length - 1)) {\n            return;\n        }\n        const nextImage = this.getNextImage();\n        this.loading = !nextImage.previouslyLoaded;\n        this.changeImage.emit(new ImageModalEvent(this.id, action, getIndex(nextImage, this.images)));\n        this.start$.next();\n    }\n    /**\n     * Method to emit an event as loadImage output to say that the requested image if loaded.\n     * This method is invoked by the javascript's 'load' event on an img tag.\n     * @param Event event that triggered the load\n     */\n    onImageLoad(event) {\n        const loadImageData = {\n            status: true,\n            index: getIndex(this.currentImage, this.images),\n            id: this.currentImage.id\n        };\n        this.loadImage.emit(loadImageData);\n        this.loading = false;\n    }\n    /**\n     * Method used by Hammerjs to support touch gestures (you can also invert the swipe direction with configCurrentImage.invertSwipe).\n     * @param action String that represent the direction of the swipe action. 'swiperight' by default.\n     */\n    swipe(action = this.SWIPE_ACTION.RIGHT) {\n        if (!this.currentImageConfig) {\n            throw new Error('Internal library error - currentImageConfig must be defined');\n        }\n        switch (action) {\n            case this.SWIPE_ACTION.RIGHT:\n                if (this.currentImageConfig.invertSwipe) {\n                    this.prevImage(Action.SWIPE);\n                }\n                else {\n                    this.nextImage(Action.SWIPE);\n                }\n                break;\n            case this.SWIPE_ACTION.LEFT:\n                if (this.currentImageConfig.invertSwipe) {\n                    this.nextImage(Action.SWIPE);\n                }\n                else {\n                    this.prevImage(Action.SWIPE);\n                }\n                break;\n            // case this.SWIPE_ACTION.UP:\n            //   break;\n            // case this.SWIPE_ACTION.DOWN:\n            //   break;\n        }\n    }\n    /**\n     * Method used in `modal-gallery.component` to get the index of an image to delete.\n     * @param Image image to get the index, or the visible image, if not passed\n     * @returns number the index of the image\n     */\n    getIndexToDelete(image = this.currentImage) {\n        return getIndex(image, this.images);\n    }\n    /**\n     * Method to play modal gallery.\n     */\n    playCarousel() {\n        this.start$.next();\n    }\n    /**\n     * Stops modal gallery from cycling through items.\n     */\n    stopCarousel() {\n        this.stop$.next();\n    }\n    /**\n     * Method to cleanup resources. In fact, this will stop the modal gallery.\n     * This is an Angular's lifecycle hook that is called when this component is destroyed.\n     */\n    ngOnDestroy() {\n        this.stopCarousel();\n    }\n    /**\n     * Private method to update both `isFirstImage` and `isLastImage` based on\n     * the index of the current image.\n     * @param number currentIndex is the index of the current image\n     */\n    handleBoundaries(currentIndex) {\n        if (this.images.length === 1) {\n            this.isFirstImage = true;\n            this.isLastImage = true;\n            this.ref.markForCheck();\n            return;\n        }\n        if (!this.slideConfig || this.slideConfig.infinite === true) {\n            // infinite sliding enabled\n            this.isFirstImage = false;\n            this.isLastImage = false;\n            this.ref.markForCheck();\n        }\n        else {\n            // execute this only if infinite sliding is disabled\n            switch (currentIndex) {\n                case 0:\n                    this.isFirstImage = true;\n                    this.isLastImage = false;\n                    this.ref.markForCheck();\n                    break;\n                case this.images.length - 1:\n                    this.isFirstImage = false;\n                    this.isLastImage = true;\n                    this.ref.markForCheck();\n                    break;\n                default:\n                    this.isFirstImage = false;\n                    this.isLastImage = false;\n                    this.ref.markForCheck();\n                    break;\n            }\n        }\n    }\n    /**\n     * Private method to check if next/prev actions should be blocked.\n     * It checks if slideConfig.infinite === false and if the image index is equals to the input parameter.\n     * If yes, it returns true to say that sliding should be blocked, otherwise not.\n     * @param number boundaryIndex that could be either the beginning index (0) or the last index\n     *  of images (this.images.length - 1).\n     * @returns boolean true if slideConfig.infinite === false and the current index is\n     *  either the first or the last one.\n     */\n    isPreventSliding(boundaryIndex) {\n        return !!this.slideConfig && this.slideConfig.infinite === false && getIndex(this.currentImage, this.images) === boundaryIndex;\n    }\n    /**\n     * Private method to get the next index.\n     * This is necessary because at the end, when you call next again, you'll go to the first image.\n     * That happens because all modal images are shown like in a circle.\n     */\n    getNextImage() {\n        const currentIndex = getIndex(this.currentImage, this.images);\n        let newIndex = 0;\n        if (currentIndex >= 0 && currentIndex < this.images.length - 1) {\n            newIndex = currentIndex + 1;\n        }\n        else {\n            newIndex = 0; // start from the first index\n        }\n        return this.images[newIndex];\n    }\n    /**\n     * Private method to get the previous index.\n     * This is necessary because at index 0, when you call prev again, you'll go to the last image.\n     * That happens because all modal images are shown like in a circle.\n     */\n    getPrevImage() {\n        const currentIndex = getIndex(this.currentImage, this.images);\n        let newIndex = 0;\n        if (currentIndex > 0 && currentIndex <= this.images.length - 1) {\n            newIndex = currentIndex - 1;\n        }\n        else {\n            newIndex = this.images.length - 1; // start from the last index\n        }\n        return this.images[newIndex];\n    }\n    /**\n     * Private method to build a text description.\n     * This is used also to create titles.\n     * @param Image image to get its description. If not provided it will be the current image.\n     * @param boolean imageWithoutDescription is a boolean that it's true if the image hasn't a 'modal' description.\n     * @returns String description built concatenating image fields with a specific logic.\n     */\n    buildTextDescription(image, imageWithoutDescription) {\n        if (!this.currentImageConfig || !this.currentImageConfig.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        // If customFullDescription use it, otherwise proceed to build a description\n        if (this.currentImageConfig.description.customFullDescription && this.currentImageConfig.description.customFullDescription !== '') {\n            return this.currentImageConfig.description.customFullDescription;\n        }\n        const currentIndex = getIndex(image, this.images);\n        // If the current image hasn't a description,\n        // prevent to write the ' - ' (or this.description.beforeTextDescription)\n        const prevDescription = this.currentImageConfig.description.imageText ? this.currentImageConfig.description.imageText : '';\n        const midSeparator = this.currentImageConfig.description.numberSeparator ? this.currentImageConfig.description.numberSeparator : '';\n        const middleDescription = currentIndex + 1 + midSeparator + this.images.length;\n        if (imageWithoutDescription) {\n            return prevDescription + middleDescription;\n        }\n        const currImgDescription = image.modal && image.modal.description ? image.modal.description : '';\n        const endDescription = this.currentImageConfig.description.beforeTextDescription + currImgDescription;\n        return prevDescription + middleDescription + endDescription;\n    }\n    /**\n     * Private method to call handleBoundaries when ngOnChanges is called.\n     */\n    updateIndexes() {\n        try {\n            if (this.isOpen) {\n                const index = getIndex(this.currentImage, this.images);\n                this.handleBoundaries(index);\n            }\n        }\n        catch (err) {\n            console.error('Cannot get the current image index in current-image');\n            throw err;\n        }\n    }\n}\nCurrentImageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CurrentImageComponent, deps: [{ token: PLATFORM_ID }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }, { token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nCurrentImageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: CurrentImageComponent, selector: \"ks-current-image\", inputs: { id: \"id\", currentImage: \"currentImage\", images: \"images\", isOpen: \"isOpen\" }, outputs: { loadImage: \"loadImage\", changeImage: \"changeImage\", closeGallery: \"closeGallery\" }, host: { listeners: { \"mouseenter\": \"onMouseEnter()\", \"mouseleave\": \"onMouseLeave()\" } }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<main class=\\\"main-image-container\\\"\\n      ksKeyboardNavigation [isOpen]=\\\"isOpen\\\" (keyboardNavigation)=\\\"onKeyPress($event)\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.mainContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.mainContainerTitle\\\">\\n\\n  <div class=\\\"left-sub-container\\\">\\n    <a class=\\\"nav-left {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isFirstImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{isFirstImage ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isFirstImage ? '' : accessibilityConfig?.mainPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getLeftPreviewImage() as leftPreview\\\">\\n        <img *ngIf=\\\"!isFirstImage; else firstImage\\\"\\n             class=\\\"inside current-image-previous\\\"\\n             [src]=\\\"leftPreview.plain?.img ? leftPreview.plain?.img : leftPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"leftPreview.plain?.fallbackImg ? leftPreview.plain?.fallbackImg : leftPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"leftPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(leftPreview.modal.title || leftPreview.modal.title === '') ? leftPreview.modal.title : getDescriptionToDisplay(leftPreview)\\\"\\n             alt=\\\"{{leftPreview.modal.alt ? leftPreview.modal.alt : getAltDescriptionByImage(leftPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\"/>\\n        <ng-template #firstImage>\\n          <div class=\\\"current-image-previous hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"></div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n  </div>\\n\\n\\n  <figure id=\\\"current-figure\\\" [style.display]=\\\"loading ? 'none' : ''\\\">\\n    <img id=\\\"current-image\\\"\\n         class=\\\"inside\\\"\\n         [ngClass]=\\\"currentImageConfig?.navigateOnClick ? '' : 'unclickable'\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (load)=\\\"onImageLoad($event)\\\"\\n         (click)=\\\"onImageEvent($event, clickAction)\\\" (keyup)=\\\"onImageEvent($event, keyboardAction)\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"inside description\\\"\\n                ksDescription [description]=\\\"currentImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\">\\n    </figcaption>\\n  </figure>\\n\\n  <div class=\\\"right-sub-container\\\">\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getRightPreviewImage() as rightPreview\\\">\\n        <img *ngIf=\\\"!isLastImage; else lastImage\\\"\\n             class=\\\"inside current-image-next\\\"\\n             [src]=\\\"rightPreview.plain?.img ? rightPreview.plain?.img : rightPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"rightPreview.plain?.fallbackImg ? rightPreview.plain?.fallbackImg : rightPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"rightPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(rightPreview.modal.title || rightPreview.modal.title === '') ? rightPreview.modal.title : getDescriptionToDisplay(rightPreview)\\\"\\n             alt=\\\"{{rightPreview.modal.alt ? rightPreview.modal.alt : getAltDescriptionByImage(rightPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\"/>\\n        <ng-template #lastImage>\\n          <div class=\\\"current-image-next hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\">\\n          </div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"loading && currentImageConfig?.loadingConfig?.enable\\\">\\n      <ks-loading-spinner [loadingConfig]=\\\"currentImageConfig?.loadingConfig\\\"\\n                          [accessibilityConfig]=\\\"accessibilityConfig\\\"></ks-loading-spinner>\\n    </ng-container>\\n\\n    <a class=\\\"nav-right {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{isLastImage ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isLastImage ? '' : accessibilityConfig?.mainNextImageTitle\\\"></div>\\n    </a>\\n  </div>\\n</main>\\n\", styles: [\":host{display:flex;flex-direction:column;justify-content:center}.main-image-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-image-container .nav,.main-image-container>.right-sub-container>.nav-right,.main-image-container>.left-sub-container>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s}.main-image-container .nav:hover,.main-image-container>.right-sub-container>.nav-right:hover,.main-image-container>.left-sub-container>.nav-left:hover{transform:scale(1.1)}.main-image-container>.left-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.left-sub-container>.nav-left{margin-right:5px;margin-left:15px}.main-image-container>.left-sub-container>.nav-left.no-pointer{cursor:default!important}.main-image-container>.right-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.right-sub-container>.nav-right{margin-right:15px;margin-left:5px}.main-image-container>.right-sub-container>.nav-right.no-pointer{cursor:default!important}.main-image-container #current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}.main-image-container #current-figure>#current-image{max-width:100%;height:auto;display:block}.main-image-container #current-figure>#current-image.unclickable{cursor:not-allowed}.main-image-container #current-figure figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}.main-image-container #current-figure figcaption .description{font-weight:bold;text-align:center}#current-image{height:auto;max-width:80vw;max-height:60vh;cursor:pointer}@media screen and (min-width: 70vw){#current-image{max-width:70vw}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\", \"@media only screen and (max-width: 1024px),only screen and (max-device-width: 1024px){.current-image-previous{display:none}.current-image-next{display:none}}@media only screen and (min-device-width: 1025px){.current-image-preview,.current-image-next,.current-image-previous{height:auto;cursor:pointer;opacity:.5;animation:fadein-semi-visible05 .8s;filter:alpha(opacity=50)}.current-image-preview:hover,.current-image-next:hover,.current-image-previous:hover{opacity:1;transition-property:opacity;transition:all .5s ease}.current-image-previous{margin-left:10px;margin-right:5px}.current-image-next{margin-right:10px;margin-left:5px}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}\\n\"], components: [{ type: LoadingSpinnerComponent, selector: \"ks-loading-spinner\", inputs: [\"loadingConfig\", \"accessibilityConfig\"] }], directives: [{ type: KeyboardNavigationDirective, selector: \"[ksKeyboardNavigation]\", inputs: [\"isOpen\"], outputs: [\"keyboardNavigation\"] }, { type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: [\"fallbackImg\"], outputs: [\"fallbackApplied\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }, { type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: DescriptionDirective, selector: \"[ksDescription]\", inputs: [\"description\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CurrentImageComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-current-image', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<main class=\\\"main-image-container\\\"\\n      ksKeyboardNavigation [isOpen]=\\\"isOpen\\\" (keyboardNavigation)=\\\"onKeyPress($event)\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.mainContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.mainContainerTitle\\\">\\n\\n  <div class=\\\"left-sub-container\\\">\\n    <a class=\\\"nav-left {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isFirstImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{isFirstImage ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isFirstImage ? '' : accessibilityConfig?.mainPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getLeftPreviewImage() as leftPreview\\\">\\n        <img *ngIf=\\\"!isFirstImage; else firstImage\\\"\\n             class=\\\"inside current-image-previous\\\"\\n             [src]=\\\"leftPreview.plain?.img ? leftPreview.plain?.img : leftPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"leftPreview.plain?.fallbackImg ? leftPreview.plain?.fallbackImg : leftPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"leftPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(leftPreview.modal.title || leftPreview.modal.title === '') ? leftPreview.modal.title : getDescriptionToDisplay(leftPreview)\\\"\\n             alt=\\\"{{leftPreview.modal.alt ? leftPreview.modal.alt : getAltDescriptionByImage(leftPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\"/>\\n        <ng-template #firstImage>\\n          <div class=\\\"current-image-previous hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"></div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n  </div>\\n\\n\\n  <figure id=\\\"current-figure\\\" [style.display]=\\\"loading ? 'none' : ''\\\">\\n    <img id=\\\"current-image\\\"\\n         class=\\\"inside\\\"\\n         [ngClass]=\\\"currentImageConfig?.navigateOnClick ? '' : 'unclickable'\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (load)=\\\"onImageLoad($event)\\\"\\n         (click)=\\\"onImageEvent($event, clickAction)\\\" (keyup)=\\\"onImageEvent($event, keyboardAction)\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"inside description\\\"\\n                ksDescription [description]=\\\"currentImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\">\\n    </figcaption>\\n  </figure>\\n\\n  <div class=\\\"right-sub-container\\\">\\n    <ng-container *ngIf=\\\"slideConfig?.sidePreviews?.show\\\">\\n      <ng-container *ngIf=\\\"getRightPreviewImage() as rightPreview\\\">\\n        <img *ngIf=\\\"!isLastImage; else lastImage\\\"\\n             class=\\\"inside current-image-next\\\"\\n             [src]=\\\"rightPreview.plain?.img ? rightPreview.plain?.img : rightPreview.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"rightPreview.plain?.fallbackImg ? rightPreview.plain?.fallbackImg : rightPreview.modal.fallbackImg\\\"\\n             [hidden]=\\\"loading\\\"\\n             ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\"\\n             [attr.aria-label]=\\\"rightPreview.modal.ariaLabel\\\"\\n             [title]=\\\"(rightPreview.modal.title || rightPreview.modal.title === '') ? rightPreview.modal.title : getDescriptionToDisplay(rightPreview)\\\"\\n             alt=\\\"{{rightPreview.modal.alt ? rightPreview.modal.alt : getAltDescriptionByImage(rightPreview)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\"/>\\n        <ng-template #lastImage>\\n          <div class=\\\"current-image-next hidden\\\"\\n               ksSize [sizeConfig]=\\\"{width: slideConfig?.sidePreviews?.size.width, height: slideConfig?.sidePreviews?.size.height}\\\">\\n          </div>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"loading && currentImageConfig?.loadingConfig?.enable\\\">\\n      <ks-loading-spinner [loadingConfig]=\\\"currentImageConfig?.loadingConfig\\\"\\n                          [accessibilityConfig]=\\\"accessibilityConfig\\\"></ks-loading-spinner>\\n    </ng-container>\\n\\n    <a class=\\\"nav-right {{isFirstImage ? 'no-pointer' : ''}}\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.mainNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{isLastImage ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"isLastImage ? '' : accessibilityConfig?.mainNextImageTitle\\\"></div>\\n    </a>\\n  </div>\\n</main>\\n\", styles: [\":host{display:flex;flex-direction:column;justify-content:center}.main-image-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.main-image-container .nav,.main-image-container>.right-sub-container>.nav-right,.main-image-container>.left-sub-container>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s}.main-image-container .nav:hover,.main-image-container>.right-sub-container>.nav-right:hover,.main-image-container>.left-sub-container>.nav-left:hover{transform:scale(1.1)}.main-image-container>.left-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.left-sub-container>.nav-left{margin-right:5px;margin-left:15px}.main-image-container>.left-sub-container>.nav-left.no-pointer{cursor:default!important}.main-image-container>.right-sub-container{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.main-image-container>.right-sub-container>.nav-right{margin-right:15px;margin-left:5px}.main-image-container>.right-sub-container>.nav-right.no-pointer{cursor:default!important}.main-image-container #current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}.main-image-container #current-figure>#current-image{max-width:100%;height:auto;display:block}.main-image-container #current-figure>#current-image.unclickable{cursor:not-allowed}.main-image-container #current-figure figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}.main-image-container #current-figure figcaption .description{font-weight:bold;text-align:center}#current-image{height:auto;max-width:80vw;max-height:60vh;cursor:pointer}@media screen and (min-width: 70vw){#current-image{max-width:70vw}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\", \"@media only screen and (max-width: 1024px),only screen and (max-device-width: 1024px){.current-image-previous{display:none}.current-image-next{display:none}}@media only screen and (min-device-width: 1025px){.current-image-preview,.current-image-next,.current-image-previous{height:auto;cursor:pointer;opacity:.5;animation:fadein-semi-visible05 .8s;filter:alpha(opacity=50)}.current-image-preview:hover,.current-image-next:hover,.current-image-previous:hover{opacity:1;transition-property:opacity;transition:all .5s ease}.current-image-previous{margin-left:10px;margin-right:5px}.current-image-next{margin-right:10px;margin-left:5px}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}\\n\"] }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: ConfigService }];\n    }, propDecorators: {\n        // @ts-ignore\n        id: [{\n                type: Input\n            }],\n        // @ts-ignore\n        currentImage: [{\n                type: Input\n            }],\n        // @ts-ignore\n        images: [{\n                type: Input\n            }],\n        // @ts-ignore\n        isOpen: [{\n                type: Input\n            }], loadImage: [{\n                type: Output\n            }], changeImage: [{\n                type: Output\n            }], closeGallery: [{\n                type: Output\n            }], onMouseEnter: [{\n                type: HostListener,\n                args: ['mouseenter']\n            }], onMouseLeave: [{\n                type: HostListener,\n                args: ['mouseleave']\n            }]\n    } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Service to intercept ctrl+s (or cmd+s on macOS) using a third-party library, called Mousetrap.\n */\nclass KeyboardService {\n    // tslint:disable-next-line:no-any\n    constructor(platformId) {\n        this.platformId = platformId;\n    }\n    init(config) {\n        return new Promise((resolve, reject) => {\n            // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n            if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n                // To prevent issues with angular-universal on server-side\n                if (isPlatformBrowser(this.platformId)) {\n                    import('mousetrap')\n                        // tslint:disable-next-line:no-any\n                        .then((loaded) => {\n                        // in this case, the .default is required for Typescript Dynamic Imports\n                        this.mousetrapInstance = loaded.default;\n                        resolve();\n                        return;\n                    })\n                        .catch(err => {\n                        reject(err);\n                        return;\n                    });\n                }\n                else {\n                    resolve();\n                    return;\n                }\n            }\n            else {\n                resolve();\n                return;\n            }\n        });\n    }\n    /**\n     * Method to add a lister for ctrl+s/cmd+s keyboard events.\n     * @param (e: KeyboardEvent, combo: string) => any onBind callback function to add shortcuts\n     */\n    // tslint:disable-next-line:no-any\n    add(onBind, config) {\n        // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n        if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n            // To prevent issues with angular-universal on server-side\n            if (isPlatformBrowser(this.platformId)) {\n                this.mousetrapInstance.bind(config.keyboardServiceConfig.shortcuts, (event, combo) => {\n                    if (event.preventDefault) {\n                        event.preventDefault();\n                    }\n                    else {\n                        // internet explorer\n                        event.returnValue = false;\n                    }\n                    onBind(event, combo);\n                });\n            }\n        }\n    }\n    /**\n     * Method to reset all listeners. Please, call this function when needed\n     * to free resources ad prevent leaks.\n     */\n    reset(config) {\n        // temporary workaround to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/142\n        if (config.keyboardServiceConfig && !config.keyboardServiceConfig.disableSsrWorkaround) {\n            // To prevent issues with angular-universal on server-side\n            if (isPlatformBrowser(this.platformId)) {\n                this.mousetrapInstance.reset();\n            }\n        }\n    }\n}\nKeyboardService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KeyboardService, deps: [{ token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\nKeyboardService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KeyboardService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KeyboardService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }];\n    } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Service to check if the provided id is unique\n */\nclass IdValidatorService {\n    constructor() {\n        this.ids = new Map();\n    }\n    /**\n     * Method to check and reserve an id for the current instance of the library.\n     * In this way, no other instances can use the same id.\n     * @param galleryId number or undefined that represents the unique id of the gallery.\n     * @return boolean true if success. false is never returned, instead an exception is thrown\n     * @throws a error with a message if galleryId is neither unique, < 0 or an integer\n     */\n    checkAndAdd(galleryId) {\n        if (galleryId === undefined || !Number.isInteger(galleryId) || galleryId < 0) {\n            throw new Error('You must provide a valid [id]=\"unique integer > 0 here\" to the gallery/carousel in your template');\n        }\n        if (this.ids.get(galleryId)) {\n            throw new Error(`Cannot create gallery with id=${galleryId} because already used in your application. This must be a unique integer >= 0`);\n        }\n        this.ids.set(galleryId, galleryId);\n        return true;\n    }\n    /**\n     * Method to remove a reserved id. In this way you are able to use the id again for another instance of the library.\n     * @param galleryId number or undefined that represents the unique id of the gallery.\n     * @return boolean true if success. false is never returned, instead an exception is thrown*\n     * @throws a error with a message if galleryId is neither integer or < 0\n     * * this should be improved without return true, because it doesn't make sense! :(\n     */\n    remove(galleryId) {\n        if (galleryId === undefined || !Number.isInteger(galleryId) || galleryId < 0) {\n            throw new Error('You must provide a valid [id]=\"unique integer > 0 here\" to the gallery/carousel in your template');\n        }\n        this.ids.delete(galleryId);\n        return true;\n    }\n}\nIdValidatorService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: IdValidatorService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nIdValidatorService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: IdValidatorService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: IdValidatorService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }] });\n\n/**\n * Default button size object\n */\nconst KS_DEFAULT_SIZE = { height: 'auto', width: '30px' };\n/**\n * Default close button object\n */\nconst KS_DEFAULT_BTN_CLOSE = {\n    className: 'close-image',\n    size: KS_DEFAULT_SIZE,\n    type: ButtonType.CLOSE,\n    title: 'Close this modal image gallery',\n    ariaLabel: 'Close this modal image gallery'\n};\n/**\n * Default download button object\n */\nconst KS_DEFAULT_BTN_DOWNLOAD = {\n    className: 'download-image',\n    size: KS_DEFAULT_SIZE,\n    type: ButtonType.DOWNLOAD,\n    title: 'Download the current image',\n    ariaLabel: 'Download the current image'\n};\n/**\n * Default exturl button object\n */\nconst KS_DEFAULT_BTN_EXTURL = {\n    className: 'ext-url-image',\n    size: KS_DEFAULT_SIZE,\n    type: ButtonType.EXTURL,\n    title: 'Navigate the current image',\n    ariaLabel: 'Navigate the current image'\n};\n// /**\n//  * Default refresh button object\n//  */\n// export const KS_DEFAULT_BTN_REFRESH: ButtonConfig = {\n//   className: 'refresh-image',\n//   size: KS_DEFAULT_SIZE,\n//   type: ButtonType.REFRESH,\n//   title: 'Refresh all images',\n//   ariaLabel: 'Refresh all images'\n// };\n/**\n * Default delete button object\n */\nconst KS_DEFAULT_BTN_DELETE = {\n    className: 'delete-image',\n    size: KS_DEFAULT_SIZE,\n    type: ButtonType.DELETE,\n    title: 'Delete the current image',\n    ariaLabel: 'Delete the current image'\n};\n/**\n * Default full-screen button object\n */\nconst KS_DEFAULT_BTN_FULL_SCREEN = {\n    className: 'fullscreen-image',\n    size: KS_DEFAULT_SIZE,\n    type: ButtonType.FULLSCREEN,\n    title: 'Switch to full-screen',\n    ariaLabel: 'Switch to full-screen'\n};\n/**\n * Default rotate button object\n */\n// export const KS_DEFAULT_BTN_ROTATE: ButtonConfig = {\n//   className: 'rotate-image',\n//   size: KS_DEFAULT_SIZE,\n//   type: ButtonType.ROTATE,\n//   title: 'Rotate clockwise of 90 degrees the current image',\n//   ariaLabel: 'Rotate clockwise of 90 degrees the current image'\n// };\n\n/*\n The MIT License (MIT)\n\n Copyright (c) 2017 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with all upper buttons.\n * Also it emits click events as outputs.\n */\nclass UpperButtonsComponent extends AccessibleComponent {\n    constructor(configService) {\n        super();\n        this.configService = configService;\n        /**\n         * Output to emit clicks on refresh button. The payload contains a `ButtonEvent`.\n         */\n        this.refresh = new EventEmitter();\n        /**\n         * Output to emit clicks on delete button. The payload contains a `ButtonEvent`.\n         */\n        this.delete = new EventEmitter();\n        /**\n         * Output to emit clicks on navigate button. The payload contains a `ButtonEvent`.\n         */\n        this.navigate = new EventEmitter();\n        /**\n         * Output to emit clicks on download button. The payload contains a `ButtonEvent`.\n         */\n        this.download = new EventEmitter();\n        /**\n         * Output to emit clicks on close button. The payload contains a `ButtonEvent`.\n         */\n        this.closeButton = new EventEmitter();\n        /**\n         * Output to emit clicks on full-screen button. The payload contains a `ButtonEvent`.\n         */\n        this.fullscreen = new EventEmitter();\n        /**\n         * Output to emit clicks on all custom buttons. The payload contains a `ButtonEvent`.\n         */\n        this.customEmit = new EventEmitter();\n        /**\n         * Default buttons array for standard configuration\n         */\n        this.defaultButtonsDefault = [KS_DEFAULT_BTN_CLOSE];\n        /**\n         * Default buttons array for simple configuration\n         */\n        this.simpleButtonsDefault = [KS_DEFAULT_BTN_DOWNLOAD, ...this.defaultButtonsDefault];\n        /**\n         * Default buttons array for advanced configuration\n         */\n        this.advancedButtonsDefault = [KS_DEFAULT_BTN_EXTURL, ...this.simpleButtonsDefault];\n        /**\n         * Default buttons array for full configuration\n         */\n        this.fullButtonsDefault = [\n            KS_DEFAULT_BTN_FULL_SCREEN,\n            KS_DEFAULT_BTN_DELETE,\n            ...this.advancedButtonsDefault\n        ];\n    }\n    /**\n     * Method ´ngOnInit´ to build `configButtons` applying a default value and also to\n     * init the `buttons` array.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.buttonsConfig) {\n            throw new Error('Internal library error - libConfig and buttonsConfig must be defined');\n        }\n        this.buttonsConfig = libConfig.buttonsConfig;\n        switch (this.buttonsConfig.strategy) {\n            case ButtonsStrategy.SIMPLE:\n                this.buttons = this.addButtonIds(this.simpleButtonsDefault);\n                break;\n            case ButtonsStrategy.ADVANCED:\n                this.buttons = this.addButtonIds(this.advancedButtonsDefault);\n                break;\n            case ButtonsStrategy.FULL:\n                this.buttons = this.addButtonIds(this.fullButtonsDefault);\n                break;\n            case ButtonsStrategy.CUSTOM:\n                this.buttons = this.addButtonIds(this.validateCustomButtons(this.buttonsConfig.buttons));\n                break;\n            case ButtonsStrategy.DEFAULT:\n            default:\n                this.buttons = this.addButtonIds(this.defaultButtonsDefault);\n                break;\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a button.\n     * This will call a private method to trigger an output with the right payload.\n     * @param InternalButtonConfig button that called this method\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the source event or `Action.CLICK` if not specified\n     * @throws an error if the button type is unknown\n     */\n    onEvent(button, event, action = Action.CLICK) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        if (!event) {\n            return;\n        }\n        const dataToEmit = {\n            button,\n            // current image initialized as null\n            // (I'll fill this value inside the parent of this component\n            image: null,\n            action,\n            galleryId: this.id\n        };\n        switch (button.type) {\n            case ButtonType.DELETE:\n                this.triggerOnMouseAndKeyboard(this.delete, event, dataToEmit);\n                break;\n            case ButtonType.EXTURL:\n                if (!this.currentImage || !this.currentImage.modal || !this.currentImage.modal.extUrl) {\n                    return;\n                }\n                this.triggerOnMouseAndKeyboard(this.navigate, event, dataToEmit);\n                break;\n            case ButtonType.DOWNLOAD:\n                this.triggerOnMouseAndKeyboard(this.download, event, dataToEmit);\n                break;\n            case ButtonType.CLOSE:\n                this.triggerOnMouseAndKeyboard(this.closeButton, event, dataToEmit);\n                break;\n            case ButtonType.CUSTOM:\n                this.triggerOnMouseAndKeyboard(this.customEmit, event, dataToEmit);\n                break;\n            case ButtonType.FULLSCREEN:\n                this.triggerOnMouseAndKeyboard(this.fullscreen, event, dataToEmit);\n                break;\n            default:\n                throw new Error(`Unknown button's type into ButtonConfig`);\n        }\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item or undefined if the item is not valid\n     */\n    trackById(index, item) {\n        return item ? item.id : undefined;\n    }\n    /**\n     * Private method to emit an event using the specified output as an `EventEmitter`.\n     * @param EventEmitter<ButtonEvent> emitter is the output to emit the `ButtonEvent`\n     * @param KeyboardEvent | MouseEvent event is the source that triggered this method\n     * @param ButtonEvent dataToEmit payload to emit\n     */\n    triggerOnMouseAndKeyboard(emitter, event, dataToEmit) {\n        if (!emitter) {\n            throw new Error(`UpperButtonsComponent unknown emitter in triggerOnMouseAndKeyboard`);\n        }\n        const result = super.handleImageEvent(event);\n        if (result === NEXT) {\n            emitter.emit(dataToEmit);\n        }\n    }\n    /**\n     * Private method to add ids to the array of buttons.\n     * It adds ids in a reverse way, to be sure that the last button will always have id = 0.\n     * This is really useful in unit testing to be sure that close button always have id = 0, download 1 and so on...\n     * It's totally transparent to the user.\n     * @param ButtonConfig[] buttons config array\n     * @returns ButtonConfig[] the input array with incremental numeric ids\n     */\n    addButtonIds(buttons) {\n        return buttons.map((val, i) => Object.assign(val, { id: buttons.length - 1 - i }));\n    }\n    /**\n     * Private method to validate custom buttons received as input.\n     * @param ButtonConfig[] buttons config array. [] by default.\n     * @returns ButtonConfig[] the same input buttons config array\n     * @throws an error is exists a button with an unknown type\n     */\n    validateCustomButtons(buttons = []) {\n        buttons.forEach((val) => {\n            const indexOfButtonType = WHITELIST_BUTTON_TYPES.findIndex((type) => type === val.type);\n            if (indexOfButtonType === -1) {\n                throw new Error(`Unknown ButtonType. For custom types use ButtonType.CUSTOM`);\n            }\n        });\n        return buttons;\n    }\n}\nUpperButtonsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: UpperButtonsComponent, deps: [{ token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nUpperButtonsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: UpperButtonsComponent, selector: \"ks-upper-buttons\", inputs: { id: \"id\", currentImage: \"currentImage\" }, outputs: { refresh: \"refresh\", delete: \"delete\", navigate: \"navigate\", download: \"download\", closeButton: \"closeButton\", fullscreen: \"fullscreen\", customEmit: \"customEmit\" }, usesInheritance: true, ngImport: i0, template: \"<header class=\\\"buttons-container\\\">\\n\\n  <ng-container *ngIf=\\\"!buttonsConfig || buttonsConfig?.visible\\\">\\n    <a *ngFor=\\\"let btn of buttons; trackBy: trackById; let index = index\\\"\\n       class=\\\"upper-button\\\"\\n       ksSize [sizeConfig]=\\\"{width: btn.size?.width!, height: btn.size?.height!}\\\"\\n       [ngStyle]=\\\"{'font-size': btn.fontSize}\\\"\\n       [attr.aria-label]=\\\"btn.ariaLabel\\\"\\n       [tabIndex]=\\\"0\\\" role=\\\"button\\\"\\n       (click)=\\\"onEvent(btn, $event)\\\" (keyup)=\\\"onEvent(btn, $event)\\\">\\n      <div class=\\\"inside {{btn.className}}\\\" aria-hidden=\\\"true\\\" title=\\\"{{btn.title}}\\\"></div>\\n    </a>\\n  </ng-container>\\n</header>\\n\", styles: [\".buttons-container{display:flex;flex-direction:row;justify-content:flex-end}.buttons-container>.upper-button{align-self:center;margin-right:30px;margin-top:28px;font-size:50px;text-decoration:none;cursor:pointer;animation:animatezoom .6s;color:#fff}@keyframes animatezoom{0%{transform:scale(0)}to{transform:scale(1)}}.base-btn,.copy,.refresh-image,.close-image,.download-image,.ext-url-image,.delete-image,.fullscreen-image,.rotate-image{width:30px;height:30px;background-size:30px;opacity:.8;transition:all .5s}.base-btn:hover,.copy:hover,.refresh-image:hover,.close-image:hover,.download-image:hover,.ext-url-image:hover,.delete-image:hover,.fullscreen-image:hover,.rotate-image:hover{transform:scale(1.2)}.rotate-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0IDY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2NCA2NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMzLDJjNy43NDYsMCwxNS4wMjgsMy4wMTcsMjAuNTA1LDguNDk0YzEwLjEzOCwxMC4xMzcsMTEuMzEsMjYuMzk2LDIuNzQsMzcuODQ5TDUyLDUyLjU4OVY0NGgtMnYxMWwxLDFoMTF2LTJoLTguNTgyICAgIGw0LjI5Mi00LjI5M2wwLjA5Mi0wLjEwNmM5LjIxMS0xMi4yNDcsNy45NzItMjkuNjY3LTIuODgzLTQwLjUyMUM0OS4wNjQsMy4yMjUsNDEuMjgsMCwzMywwVjJ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTcuNzU1LDE1LjY1N0wxMiwxMS40MTFWMjBoMlY5bC0xLTFIMnYyaDguNTgyTDYuMjksMTQuMjkzbC0wLjA5MiwwLjEwNkMtMy4wMTMsMjYuNjQ2LTEuNzczLDQ0LjA2Niw5LjA4MSw1NC45MiAgICBDMTQuOTM2LDYwLjc3NSwyMi43Miw2NCwzMSw2NHYtMmMtNy43NDYsMC0xNS4wMjgtMy4wMTctMjAuNTA1LTguNDk0QzAuMzU3LDQzLjM2OS0wLjgxNCwyNy4xMSw3Ljc1NSwxNS42NTd6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.fullscreen-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTMgNTMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzIDUzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNNTIuOTIzLDAuNjE4Yy0wLjEwMS0wLjI0NC0wLjI5Ni0wLjQzOS0wLjU0MS0wLjU0MUM1Mi4yNiwwLjAyNyw1Mi4xMywwLDUyLDBINDBjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoOS41ODYgICBMMzMuMjkzLDE4LjI5M2MtMC4zOTEsMC4zOTEtMC4zOTEsMS4wMjMsMCwxLjQxNEMzMy40ODgsMTkuOTAyLDMzLjc0NCwyMCwzNCwyMHMwLjUxMi0wLjA5OCwwLjcwNy0wLjI5M0w1MSwzLjQxNFYxMyAgIGMwLDAuNTUyLDAuNDQ4LDEsMSwxczEtMC40NDgsMS0xVjFDNTMsMC44Nyw1Mi45NzMsMC43NCw1Mi45MjMsMC42MTh6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTE4LjI5MywzMy4yOTNMMiw0OS41ODZWNDBjMC0wLjU1Mi0wLjQ0OC0xLTEtMXMtMSwwLjQ0OC0xLDF2MTJjMCwwLjEzLDAuMDI3LDAuMjYsMC4wNzcsMC4zODIgICBjMC4xMDEsMC4yNDQsMC4yOTYsMC40MzksMC41NDEsMC41NDFDMC43NCw1Mi45NzMsMC44Nyw1MywxLDUzaDEyYzAuNTUyLDAsMS0wLjQ0OCwxLTFzLTAuNDQ4LTEtMS0xSDMuNDE0bDE2LjI5My0xNi4yOTMgICBjMC4zOTEtMC4zOTEsMC4zOTEtMS4wMjMsMC0xLjQxNFMxOC42ODQsMzIuOTAyLDE4LjI5MywzMy4yOTN6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTEsMTRjMC41NTIsMCwxLTAuNDQ4LDEtMVYzLjQxNGwxNi4yOTIsMTYuMjkyYzAuMTk1LDAuMTk1LDAuNDUxLDAuMjkzLDAuNzA3LDAuMjkzczAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzICAgYzAuMzkxLTAuMzkxLDAuMzkxLTEuMDIzLDAtMS40MTRMMy40MTQsMkgxM2MwLjU1MiwwLDEtMC40NDgsMS0xcy0wLjQ0OC0xLTEtMUgxQzAuODcsMCwwLjc0LDAuMDI3LDAuNjE4LDAuMDc3ICAgQzAuMzczLDAuMTc5LDAuMTc5LDAuMzczLDAuMDc3LDAuNjE4QzAuMDI3LDAuNzQsMCwwLjg3LDAsMXYxMkMwLDEzLjU1MiwwLjQ0OCwxNCwxLDE0eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik01MiwzOWMtMC41NTIsMC0xLDAuNDQ4LTEsMXY5LjU4NkwzNC43MDcsMzMuMjkyYy0wLjM5MS0wLjM5MS0xLjAyMy0wLjM5MS0xLjQxNCwwcy0wLjM5MSwxLjAyMywwLDEuNDE0TDQ5LjU4Niw1MUg0MCAgIGMtMC41NTIsMC0xLDAuNDQ4LTEsMXMwLjQ0OCwxLDEsMWgxMmMwLjEzLDAsMC4yNi0wLjAyNywwLjM4Mi0wLjA3N2MwLjI0NC0wLjEwMSwwLjQzOS0wLjI5NiwwLjU0MS0wLjU0MSAgIEM1Mi45NzMsNTIuMjYsNTMsNTIuMTMsNTMsNTJWNDBDNTMsMzkuNDQ4LDUyLjU1MiwzOSw1MiwzOXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.delete-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4Ni40IDQ4Ni40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODYuNCA0ODYuNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ0Niw3MEgzNDQuOFY1My41YzAtMjkuNS0yNC01My41LTUzLjUtNTMuNWgtOTYuMmMtMjkuNSwwLTUzLjUsMjQtNTMuNSw1My41VjcwSDQwLjRjLTcuNSwwLTEzLjUsNi0xMy41LDEzLjUgICAgUzMyLjksOTcsNDAuNCw5N2gyNC40djMxNy4yYzAsMzkuOCwzMi40LDcyLjIsNzIuMiw3Mi4yaDIxMi40YzM5LjgsMCw3Mi4yLTMyLjQsNzIuMi03Mi4yVjk3SDQ0NmM3LjUsMCwxMy41LTYsMTMuNS0xMy41ICAgIFM0NTMuNSw3MCw0NDYsNzB6IE0xNjguNiw1My41YzAtMTQuNiwxMS45LTI2LjUsMjYuNS0yNi41aDk2LjJjMTQuNiwwLDI2LjUsMTEuOSwyNi41LDI2LjVWNzBIMTY4LjZWNTMuNXogTTM5NC42LDQxNC4yICAgIGMwLDI0LjktMjAuMyw0NS4yLTQ1LjIsNDUuMkgxMzdjLTI0LjksMC00NS4yLTIwLjMtNDUuMi00NS4yVjk3aDMwMi45djMxNy4ySDM5NC42eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0yNDMuMiw0MTFjNy41LDAsMTMuNS02LDEzLjUtMTMuNVYxNTguOWMwLTcuNS02LTEzLjUtMTMuNS0xMy41cy0xMy41LDYtMTMuNSwxMy41djIzOC41ICAgIEMyMjkuNyw0MDQuOSwyMzUuNyw0MTEsMjQzLjIsNDExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNTUuMSwzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzE0MS42LDM5MC4xLDE0Ny43LDM5Ni4xLDE1NS4xLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0zMzEuMywzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzMxNy44LDM5MC4xLDMyMy44LDM5Ni4xLDMzMS4zLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.ext-url-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPjxnPjxnPjxnPjxwYXRoIGQ9Ik00ODAsMjg4djExMmMwLDQ0LjE4My0zNS44MTcsODAtODAsODBIMTEyYy00NC4xODMsMC04MC0zNS44MTctODAtODBWMTEyYzAtNDQuMTgzLDM1LjgxNy04MCw4MC04MGg5NlYwaC05NiAgICAgQzUwLjE0NCwwLDAsNTAuMTQ0LDAsMTEydjI4OGMwLDYxLjg1Niw1MC4xNDQsMTEyLDExMiwxMTJoMjg4YzYxLjg1NiwwLDExMi01MC4xNDQsMTEyLTExMlYyODhINDgweiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNzYsNDE2aDMyVjI4OGMwLTEyNS43NiwxMDcuNTItMTI4LDExMi0xMjhoMTA1LjQ0bC04NC42NCw4NC42NGwyMi41NiwyMi41NmwxMTItMTEyYzYuMjA0LTYuMjQxLDYuMjA0LTE2LjMxOSwwLTIyLjU2ICAgICBsLTExMi0xMTJsLTIyLjcyLDIyLjcybDg0LjgsODQuNjRIMzIwYy0xLjQ0LDAtMTQ0LDEuNzYtMTQ0LDE2MFY0MTZ6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.download-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3MS4yIDQ3MS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzEuMiA0NzEuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ1Ny43LDIzMC4xNWMtNy41LDAtMTMuNSw2LTEzLjUsMTMuNXYxMjIuOGMwLDMzLjQtMjcuMiw2MC41LTYwLjUsNjAuNUg4Ny41Yy0zMy40LDAtNjAuNS0yNy4yLTYwLjUtNjAuNXYtMTI0LjggICAgYzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MTI0LjhjMCw0OC4zLDM5LjMsODcuNSw4Ny41LDg3LjVoMjk2LjJjNDguMywwLDg3LjUtMzkuMyw4Ny41LTg3LjV2LTEyMi44ICAgIEM0NzEuMiwyMzYuMjUsNDY1LjIsMjMwLjE1LDQ1Ny43LDIzMC4xNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMjI2LjEsMzQ2Ljc1YzIuNiwyLjYsNi4xLDQsOS41LDRzNi45LTEuMyw5LjUtNGw4NS44LTg1LjhjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFjLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC02Mi43LDYyLjggICAgVjMwLjc1YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjczLjlsLTYyLjgtNjIuOGMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xICAgIEwyMjYuMSwzNDYuNzV6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.close-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3NS4yIDQ3NS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzUuMiA0NzUuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQwNS42LDY5LjZDMzYwLjcsMjQuNywzMDEuMSwwLDIzNy42LDBzLTEyMy4xLDI0LjctMTY4LDY5LjZTMCwxNzQuMSwwLDIzNy42czI0LjcsMTIzLjEsNjkuNiwxNjhzMTA0LjUsNjkuNiwxNjgsNjkuNiAgICBzMTIzLjEtMjQuNywxNjgtNjkuNnM2OS42LTEwNC41LDY5LjYtMTY4UzQ1MC41LDExNC41LDQwNS42LDY5LjZ6IE0zODYuNSwzODYuNWMtMzkuOCwzOS44LTkyLjcsNjEuNy0xNDguOSw2MS43ICAgIHMtMTA5LjEtMjEuOS0xNDguOS02MS43Yy04Mi4xLTgyLjEtODIuMS0yMTUuNywwLTI5Ny44QzEyOC41LDQ4LjksMTgxLjQsMjcsMjM3LjYsMjdzMTA5LjEsMjEuOSwxNDguOSw2MS43ICAgIEM0NjguNiwxNzAuOCw0NjguNiwzMDQuNCwzODYuNSwzODYuNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMzQyLjMsMTMyLjljLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC04NS42LDg1LjZMMTUyLDEzMi45Yy01LjMtNS4zLTEzLjgtNS4zLTE5LjEsMGMtNS4zLDUuMy01LjMsMTMuOCwwLDE5LjEgICAgbDg1LjYsODUuNmwtODUuNiw4NS42Yy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWMyLjYsMi42LDYuMSw0LDkuNSw0czYuOS0xLjMsOS41LTRsODUuNi04NS42bDg1LjYsODUuNmMyLjYsMi42LDYuMSw0LDkuNSw0ICAgIGMzLjUsMCw2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xbC04NS40LTg1LjZsODUuNi04NS42QzM0Ny42LDE0Ni43LDM0Ny42LDEzOC4yLDM0Mi4zLDEzMi45eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.refresh-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OS43MTEgNDg5LjcxMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg5LjcxMSA0ODkuNzExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48Zz48cGF0aCBkPSJNMTEyLjE1Niw5Ny4xMTFjNzIuMy02NS40LDE4MC41LTY2LjQsMjUzLjgtNi43bC01OC4xLDIuMmMtNy41LDAuMy0xMy4zLDYuNS0xMywxNGMwLjMsNy4zLDYuMywxMywxMy41LDEzICAgIGMwLjIsMCwwLjMsMCwwLjUsMGw4OS4yLTMuM2M3LjMtMC4zLDEzLTYuMiwxMy0xMy41di0xYzAtMC4yLDAtMC4zLDAtMC41di0wLjFsMCwwbC0zLjMtODguMmMtMC4zLTcuNS02LjYtMTMuMy0xNC0xMyAgICBjLTcuNSwwLjMtMTMuMyw2LjUtMTMsMTRsMi4xLDU1LjNjLTM2LjMtMjkuNy04MS00Ni45LTEyOC44LTQ5LjNjLTU5LjItMy0xMTYuMSwxNy4zLTE2MCw1Ny4xYy02MC40LDU0LjctODYsMTM3LjktNjYuOCwyMTcuMSAgICBjMS41LDYuMiw3LDEwLjMsMTMuMSwxMC4zYzEuMSwwLDIuMS0wLjEsMy4yLTAuNGM3LjItMS44LDExLjctOS4xLDkuOS0xNi4zQzM2LjY1NiwyMTguMjExLDU5LjA1NiwxNDUuMTExLDExMi4xNTYsOTcuMTExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik00NjIuNDU2LDE5NS41MTFjLTEuOC03LjItOS4xLTExLjctMTYuMy05LjljLTcuMiwxLjgtMTEuNyw5LjEtOS45LDE2LjNjMTYuOSw2OS42LTUuNiwxNDIuNy01OC43LDE5MC43ICAgIGMtMzcuMywzMy43LTg0LjEsNTAuMy0xMzAuNyw1MC4zYy00NC41LDAtODguOS0xNS4xLTEyNC43LTQ0LjlsNTguOC01LjNjNy40LTAuNywxMi45LTcuMiwxMi4yLTE0LjdzLTcuMi0xMi45LTE0LjctMTIuMmwtODguOSw4ICAgIGMtNy40LDAuNy0xMi45LDcuMi0xMi4yLDE0LjdsOCw4OC45YzAuNiw3LDYuNSwxMi4zLDEzLjQsMTIuM2MwLjQsMCwwLjgsMCwxLjItMC4xYzcuNC0wLjcsMTIuOS03LjIsMTIuMi0xNC43bC00LjgtNTQuMSAgICBjMzYuMywyOS40LDgwLjgsNDYuNSwxMjguMyw0OC45YzMuOCwwLjIsNy42LDAuMywxMS4zLDAuM2M1NS4xLDAsMTA3LjUtMjAuMiwxNDguNy01Ny40ICAgIEM0NTYuMDU2LDM1Ny45MTEsNDgxLjY1NiwyNzQuODExLDQ2Mi40NTYsMTk1LjUxMXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==)}.copy{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OC4zIDQ4OC4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODguMyA0ODguMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMxNC4yNSw4NS40aC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42djMyNS43YzAsMjEuMywxNy4zLDM4LjYsMzguNiwzOC42aDIyN2MyMS4zLDAsMzguNi0xNy4zLDM4LjYtMzguNlYxMjQgICAgQzM1Mi43NSwxMDIuNywzMzUuNDUsODUuNCwzMTQuMjUsODUuNHogTTMyNS43NSw0NDkuNmMwLDYuNC01LjIsMTEuNi0xMS42LDExLjZoLTIyN2MtNi40LDAtMTEuNi01LjItMTEuNi0xMS42VjEyNCAgICBjMC02LjQsNS4yLTExLjYsMTEuNi0xMS42aDIyN2M2LjQsMCwxMS42LDUuMiwxMS42LDExLjZWNDQ5LjZ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTQwMS4wNSwwaC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42YzAsNy41LDYsMTMuNSwxMy41LDEzLjVzMTMuNS02LDEzLjUtMTMuNWMwLTYuNCw1LjItMTEuNiwxMS42LTExLjZoMjI3ICAgIGM2LjQsMCwxMS42LDUuMiwxMS42LDExLjZ2MzI1LjdjMCw2LjQtNS4yLDExLjYtMTEuNiwxMS42Yy03LjUsMC0xMy41LDYtMTMuNSwxMy41czYsMTMuNSwxMy41LDEzLjVjMjEuMywwLDM4LjYtMTcuMywzOC42LTM4LjYgICAgVjM4LjZDNDM5LjY1LDE3LjMsNDIyLjM1LDAsNDAxLjA1LDB6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}\\n\"], directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }, { type: i2.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: UpperButtonsComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-upper-buttons', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<header class=\\\"buttons-container\\\">\\n\\n  <ng-container *ngIf=\\\"!buttonsConfig || buttonsConfig?.visible\\\">\\n    <a *ngFor=\\\"let btn of buttons; trackBy: trackById; let index = index\\\"\\n       class=\\\"upper-button\\\"\\n       ksSize [sizeConfig]=\\\"{width: btn.size?.width!, height: btn.size?.height!}\\\"\\n       [ngStyle]=\\\"{'font-size': btn.fontSize}\\\"\\n       [attr.aria-label]=\\\"btn.ariaLabel\\\"\\n       [tabIndex]=\\\"0\\\" role=\\\"button\\\"\\n       (click)=\\\"onEvent(btn, $event)\\\" (keyup)=\\\"onEvent(btn, $event)\\\">\\n      <div class=\\\"inside {{btn.className}}\\\" aria-hidden=\\\"true\\\" title=\\\"{{btn.title}}\\\"></div>\\n    </a>\\n  </ng-container>\\n</header>\\n\", styles: [\".buttons-container{display:flex;flex-direction:row;justify-content:flex-end}.buttons-container>.upper-button{align-self:center;margin-right:30px;margin-top:28px;font-size:50px;text-decoration:none;cursor:pointer;animation:animatezoom .6s;color:#fff}@keyframes animatezoom{0%{transform:scale(0)}to{transform:scale(1)}}.base-btn,.copy,.refresh-image,.close-image,.download-image,.ext-url-image,.delete-image,.fullscreen-image,.rotate-image{width:30px;height:30px;background-size:30px;opacity:.8;transition:all .5s}.base-btn:hover,.copy:hover,.refresh-image:hover,.close-image:hover,.download-image:hover,.ext-url-image:hover,.delete-image:hover,.fullscreen-image:hover,.rotate-image:hover{transform:scale(1.2)}.rotate-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDY0IDY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2NCA2NDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMzLDJjNy43NDYsMCwxNS4wMjgsMy4wMTcsMjAuNTA1LDguNDk0YzEwLjEzOCwxMC4xMzcsMTEuMzEsMjYuMzk2LDIuNzQsMzcuODQ5TDUyLDUyLjU4OVY0NGgtMnYxMWwxLDFoMTF2LTJoLTguNTgyICAgIGw0LjI5Mi00LjI5M2wwLjA5Mi0wLjEwNmM5LjIxMS0xMi4yNDcsNy45NzItMjkuNjY3LTIuODgzLTQwLjUyMUM0OS4wNjQsMy4yMjUsNDEuMjgsMCwzMywwVjJ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTcuNzU1LDE1LjY1N0wxMiwxMS40MTFWMjBoMlY5bC0xLTFIMnYyaDguNTgyTDYuMjksMTQuMjkzbC0wLjA5MiwwLjEwNkMtMy4wMTMsMjYuNjQ2LTEuNzczLDQ0LjA2Niw5LjA4MSw1NC45MiAgICBDMTQuOTM2LDYwLjc3NSwyMi43Miw2NCwzMSw2NHYtMmMtNy43NDYsMC0xNS4wMjgtMy4wMTctMjAuNTA1LTguNDk0QzAuMzU3LDQzLjM2OS0wLjgxNCwyNy4xMSw3Ljc1NSwxNS42NTd6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.fullscreen-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTMgNTMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUzIDUzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNNTIuOTIzLDAuNjE4Yy0wLjEwMS0wLjI0NC0wLjI5Ni0wLjQzOS0wLjU0MS0wLjU0MUM1Mi4yNiwwLjAyNyw1Mi4xMywwLDUyLDBINDBjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoOS41ODYgICBMMzMuMjkzLDE4LjI5M2MtMC4zOTEsMC4zOTEtMC4zOTEsMS4wMjMsMCwxLjQxNEMzMy40ODgsMTkuOTAyLDMzLjc0NCwyMCwzNCwyMHMwLjUxMi0wLjA5OCwwLjcwNy0wLjI5M0w1MSwzLjQxNFYxMyAgIGMwLDAuNTUyLDAuNDQ4LDEsMSwxczEtMC40NDgsMS0xVjFDNTMsMC44Nyw1Mi45NzMsMC43NCw1Mi45MjMsMC42MTh6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTE4LjI5MywzMy4yOTNMMiw0OS41ODZWNDBjMC0wLjU1Mi0wLjQ0OC0xLTEtMXMtMSwwLjQ0OC0xLDF2MTJjMCwwLjEzLDAuMDI3LDAuMjYsMC4wNzcsMC4zODIgICBjMC4xMDEsMC4yNDQsMC4yOTYsMC40MzksMC41NDEsMC41NDFDMC43NCw1Mi45NzMsMC44Nyw1MywxLDUzaDEyYzAuNTUyLDAsMS0wLjQ0OCwxLTFzLTAuNDQ4LTEtMS0xSDMuNDE0bDE2LjI5My0xNi4yOTMgICBjMC4zOTEtMC4zOTEsMC4zOTEtMS4wMjMsMC0xLjQxNFMxOC42ODQsMzIuOTAyLDE4LjI5MywzMy4yOTN6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTEsMTRjMC41NTIsMCwxLTAuNDQ4LDEtMVYzLjQxNGwxNi4yOTIsMTYuMjkyYzAuMTk1LDAuMTk1LDAuNDUxLDAuMjkzLDAuNzA3LDAuMjkzczAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzICAgYzAuMzkxLTAuMzkxLDAuMzkxLTEuMDIzLDAtMS40MTRMMy40MTQsMkgxM2MwLjU1MiwwLDEtMC40NDgsMS0xcy0wLjQ0OC0xLTEtMUgxQzAuODcsMCwwLjc0LDAuMDI3LDAuNjE4LDAuMDc3ICAgQzAuMzczLDAuMTc5LDAuMTc5LDAuMzczLDAuMDc3LDAuNjE4QzAuMDI3LDAuNzQsMCwwLjg3LDAsMXYxMkMwLDEzLjU1MiwwLjQ0OCwxNCwxLDE0eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik01MiwzOWMtMC41NTIsMC0xLDAuNDQ4LTEsMXY5LjU4NkwzNC43MDcsMzMuMjkyYy0wLjM5MS0wLjM5MS0xLjAyMy0wLjM5MS0xLjQxNCwwcy0wLjM5MSwxLjAyMywwLDEuNDE0TDQ5LjU4Niw1MUg0MCAgIGMtMC41NTIsMC0xLDAuNDQ4LTEsMXMwLjQ0OCwxLDEsMWgxMmMwLjEzLDAsMC4yNi0wLjAyNywwLjM4Mi0wLjA3N2MwLjI0NC0wLjEwMSwwLjQzOS0wLjI5NiwwLjU0MS0wLjU0MSAgIEM1Mi45NzMsNTIuMjYsNTMsNTIuMTMsNTMsNTJWNDBDNTMsMzkuNDQ4LDUyLjU1MiwzOSw1MiwzOXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.delete-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4Ni40IDQ4Ni40IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODYuNCA0ODYuNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ0Niw3MEgzNDQuOFY1My41YzAtMjkuNS0yNC01My41LTUzLjUtNTMuNWgtOTYuMmMtMjkuNSwwLTUzLjUsMjQtNTMuNSw1My41VjcwSDQwLjRjLTcuNSwwLTEzLjUsNi0xMy41LDEzLjUgICAgUzMyLjksOTcsNDAuNCw5N2gyNC40djMxNy4yYzAsMzkuOCwzMi40LDcyLjIsNzIuMiw3Mi4yaDIxMi40YzM5LjgsMCw3Mi4yLTMyLjQsNzIuMi03Mi4yVjk3SDQ0NmM3LjUsMCwxMy41LTYsMTMuNS0xMy41ICAgIFM0NTMuNSw3MCw0NDYsNzB6IE0xNjguNiw1My41YzAtMTQuNiwxMS45LTI2LjUsMjYuNS0yNi41aDk2LjJjMTQuNiwwLDI2LjUsMTEuOSwyNi41LDI2LjVWNzBIMTY4LjZWNTMuNXogTTM5NC42LDQxNC4yICAgIGMwLDI0LjktMjAuMyw0NS4yLTQ1LjIsNDUuMkgxMzdjLTI0LjksMC00NS4yLTIwLjMtNDUuMi00NS4yVjk3aDMwMi45djMxNy4ySDM5NC42eiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0yNDMuMiw0MTFjNy41LDAsMTMuNS02LDEzLjUtMTMuNVYxNTguOWMwLTcuNS02LTEzLjUtMTMuNS0xMy41cy0xMy41LDYtMTMuNSwxMy41djIzOC41ICAgIEMyMjkuNyw0MDQuOSwyMzUuNyw0MTEsMjQzLjIsNDExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNTUuMSwzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzE0MS42LDM5MC4xLDE0Ny43LDM5Ni4xLDE1NS4xLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0zMzEuMywzOTYuMWM3LjUsMCwxMy41LTYsMTMuNS0xMy41VjE3My43YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjA4LjkgICAgQzMxNy44LDM5MC4xLDMyMy44LDM5Ni4xLDMzMS4zLDM5Ni4xeiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.ext-url-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPjxnPjxnPjxnPjxwYXRoIGQ9Ik00ODAsMjg4djExMmMwLDQ0LjE4My0zNS44MTcsODAtODAsODBIMTEyYy00NC4xODMsMC04MC0zNS44MTctODAtODBWMTEyYzAtNDQuMTgzLDM1LjgxNy04MCw4MC04MGg5NlYwaC05NiAgICAgQzUwLjE0NCwwLDAsNTAuMTQ0LDAsMTEydjI4OGMwLDYxLjg1Niw1MC4xNDQsMTEyLDExMiwxMTJoMjg4YzYxLjg1NiwwLDExMi01MC4xNDQsMTEyLTExMlYyODhINDgweiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik0xNzYsNDE2aDMyVjI4OGMwLTEyNS43NiwxMDcuNTItMTI4LDExMi0xMjhoMTA1LjQ0bC04NC42NCw4NC42NGwyMi41NiwyMi41NmwxMTItMTEyYzYuMjA0LTYuMjQxLDYuMjA0LTE2LjMxOSwwLTIyLjU2ICAgICBsLTExMi0xMTJsLTIyLjcyLDIyLjcybDg0LjgsODQuNjRIMzIwYy0xLjQ0LDAtMTQ0LDEuNzYtMTQ0LDE2MFY0MTZ6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.download-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3MS4yIDQ3MS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzEuMiA0NzEuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQ1Ny43LDIzMC4xNWMtNy41LDAtMTMuNSw2LTEzLjUsMTMuNXYxMjIuOGMwLDMzLjQtMjcuMiw2MC41LTYwLjUsNjAuNUg4Ny41Yy0zMy40LDAtNjAuNS0yNy4yLTYwLjUtNjAuNXYtMTI0LjggICAgYzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MTI0LjhjMCw0OC4zLDM5LjMsODcuNSw4Ny41LDg3LjVoMjk2LjJjNDguMywwLDg3LjUtMzkuMyw4Ny41LTg3LjV2LTEyMi44ICAgIEM0NzEuMiwyMzYuMjUsNDY1LjIsMjMwLjE1LDQ1Ny43LDIzMC4xNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMjI2LjEsMzQ2Ljc1YzIuNiwyLjYsNi4xLDQsOS41LDRzNi45LTEuMyw5LjUtNGw4NS44LTg1LjhjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFjLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC02Mi43LDYyLjggICAgVjMwLjc1YzAtNy41LTYtMTMuNS0xMy41LTEzLjVzLTEzLjUsNi0xMy41LDEzLjV2MjczLjlsLTYyLjgtNjIuOGMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xICAgIEwyMjYuMSwzNDYuNzV6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}.close-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3NS4yIDQ3NS4yIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NzUuMiA0NzUuMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTQwNS42LDY5LjZDMzYwLjcsMjQuNywzMDEuMSwwLDIzNy42LDBzLTEyMy4xLDI0LjctMTY4LDY5LjZTMCwxNzQuMSwwLDIzNy42czI0LjcsMTIzLjEsNjkuNiwxNjhzMTA0LjUsNjkuNiwxNjgsNjkuNiAgICBzMTIzLjEtMjQuNywxNjgtNjkuNnM2OS42LTEwNC41LDY5LjYtMTY4UzQ1MC41LDExNC41LDQwNS42LDY5LjZ6IE0zODYuNSwzODYuNWMtMzkuOCwzOS44LTkyLjcsNjEuNy0xNDguOSw2MS43ICAgIHMtMTA5LjEtMjEuOS0xNDguOS02MS43Yy04Mi4xLTgyLjEtODIuMS0yMTUuNywwLTI5Ny44QzEyOC41LDQ4LjksMTgxLjQsMjcsMjM3LjYsMjdzMTA5LjEsMjEuOSwxNDguOSw2MS43ICAgIEM0NjguNiwxNzAuOCw0NjguNiwzMDQuNCwzODYuNSwzODYuNXoiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBkPSJNMzQyLjMsMTMyLjljLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwbC04NS42LDg1LjZMMTUyLDEzMi45Yy01LjMtNS4zLTEzLjgtNS4zLTE5LjEsMGMtNS4zLDUuMy01LjMsMTMuOCwwLDE5LjEgICAgbDg1LjYsODUuNmwtODUuNiw4NS42Yy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWMyLjYsMi42LDYuMSw0LDkuNSw0czYuOS0xLjMsOS41LTRsODUuNi04NS42bDg1LjYsODUuNmMyLjYsMi42LDYuMSw0LDkuNSw0ICAgIGMzLjUsMCw2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xbC04NS40LTg1LjZsODUuNi04NS42QzM0Ny42LDE0Ni43LDM0Ny42LDEzOC4yLDM0Mi4zLDEzMi45eiIgZmlsbD0iI0ZGRkZGRiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+)}.refresh-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OS43MTEgNDg5LjcxMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDg5LjcxMSA0ODkuNzExOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48Zz48cGF0aCBkPSJNMTEyLjE1Niw5Ny4xMTFjNzIuMy02NS40LDE4MC41LTY2LjQsMjUzLjgtNi43bC01OC4xLDIuMmMtNy41LDAuMy0xMy4zLDYuNS0xMywxNGMwLjMsNy4zLDYuMywxMywxMy41LDEzICAgIGMwLjIsMCwwLjMsMCwwLjUsMGw4OS4yLTMuM2M3LjMtMC4zLDEzLTYuMiwxMy0xMy41di0xYzAtMC4yLDAtMC4zLDAtMC41di0wLjFsMCwwbC0zLjMtODguMmMtMC4zLTcuNS02LjYtMTMuMy0xNC0xMyAgICBjLTcuNSwwLjMtMTMuMyw2LjUtMTMsMTRsMi4xLDU1LjNjLTM2LjMtMjkuNy04MS00Ni45LTEyOC44LTQ5LjNjLTU5LjItMy0xMTYuMSwxNy4zLTE2MCw1Ny4xYy02MC40LDU0LjctODYsMTM3LjktNjYuOCwyMTcuMSAgICBjMS41LDYuMiw3LDEwLjMsMTMuMSwxMC4zYzEuMSwwLDIuMS0wLjEsMy4yLTAuNGM3LjItMS44LDExLjctOS4xLDkuOS0xNi4zQzM2LjY1NiwyMTguMjExLDU5LjA1NiwxNDUuMTExLDExMi4xNTYsOTcuMTExeiIgZmlsbD0iI0ZGRkZGRiIvPjxwYXRoIGQ9Ik00NjIuNDU2LDE5NS41MTFjLTEuOC03LjItOS4xLTExLjctMTYuMy05LjljLTcuMiwxLjgtMTEuNyw5LjEtOS45LDE2LjNjMTYuOSw2OS42LTUuNiwxNDIuNy01OC43LDE5MC43ICAgIGMtMzcuMywzMy43LTg0LjEsNTAuMy0xMzAuNyw1MC4zYy00NC41LDAtODguOS0xNS4xLTEyNC43LTQ0LjlsNTguOC01LjNjNy40LTAuNywxMi45LTcuMiwxMi4yLTE0LjdzLTcuMi0xMi45LTE0LjctMTIuMmwtODguOSw4ICAgIGMtNy40LDAuNy0xMi45LDcuMi0xMi4yLDE0LjdsOCw4OC45YzAuNiw3LDYuNSwxMi4zLDEzLjQsMTIuM2MwLjQsMCwwLjgsMCwxLjItMC4xYzcuNC0wLjcsMTIuOS03LjIsMTIuMi0xNC43bC00LjgtNTQuMSAgICBjMzYuMywyOS40LDgwLjgsNDYuNSwxMjguMyw0OC45YzMuOCwwLjIsNy42LDAuMywxMS4zLDAuM2M1NS4xLDAsMTA3LjUtMjAuMiwxNDguNy01Ny40ICAgIEM0NTYuMDU2LDM1Ny45MTEsNDgxLjY1NiwyNzQuODExLDQ2Mi40NTYsMTk1LjUxMXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==)}.copy{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4OC4zIDQ4OC4zIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0ODguMyA0ODguMzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGc+PGc+PHBhdGggZD0iTTMxNC4yNSw4NS40aC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42djMyNS43YzAsMjEuMywxNy4zLDM4LjYsMzguNiwzOC42aDIyN2MyMS4zLDAsMzguNi0xNy4zLDM4LjYtMzguNlYxMjQgICAgQzM1Mi43NSwxMDIuNywzMzUuNDUsODUuNCwzMTQuMjUsODUuNHogTTMyNS43NSw0NDkuNmMwLDYuNC01LjIsMTEuNi0xMS42LDExLjZoLTIyN2MtNi40LDAtMTEuNi01LjItMTEuNi0xMS42VjEyNCAgICBjMC02LjQsNS4yLTExLjYsMTEuNi0xMS42aDIyN2M2LjQsMCwxMS42LDUuMiwxMS42LDExLjZWNDQ5LjZ6IiBmaWxsPSIjRkZGRkZGIi8+PHBhdGggZD0iTTQwMS4wNSwwaC0yMjdjLTIxLjMsMC0zOC42LDE3LjMtMzguNiwzOC42YzAsNy41LDYsMTMuNSwxMy41LDEzLjVzMTMuNS02LDEzLjUtMTMuNWMwLTYuNCw1LjItMTEuNiwxMS42LTExLjZoMjI3ICAgIGM2LjQsMCwxMS42LDUuMiwxMS42LDExLjZ2MzI1LjdjMCw2LjQtNS4yLDExLjYtMTEuNiwxMS42Yy03LjUsMC0xMy41LDYtMTMuNSwxMy41czYsMTMuNSwxMy41LDEzLjVjMjEuMywwLDM4LjYtMTcuMywzOC42LTM4LjYgICAgVjM4LjZDNDM5LjY1LDE3LjMsNDIyLjM1LDAsNDAxLjA1LDB6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48L3N2Zz4=)}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: ConfigService }]; }, propDecorators: { id: [{\n                type: Input\n            }], currentImage: [{\n                type: Input\n            }], refresh: [{\n                type: Output\n            }], delete: [{\n                type: Output\n            }], navigate: [{\n                type: Output\n            }], download: [{\n                type: Output\n            }], closeButton: [{\n                type: Output\n            }], fullscreen: [{\n                type: Output\n            }], customEmit: [{\n                type: Output\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with clickable dots (small circles) to navigate between images inside the modal gallery.\n */\nclass DotsComponent extends AccessibleComponent {\n    constructor(configService) {\n        super();\n        this.configService = configService;\n        /**\n         * Output to emit clicks on dots. The payload contains a number that represent\n         * the index of the clicked dot.\n         */\n        this.clickDot = new EventEmitter();\n    }\n    /**\n     * Method ´ngOnInit´ to build `configDots` applying a default value.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        this.configDots = Object.assign({}, this.dotsConfig);\n    }\n    /**\n     * Method ´ngOnChanges´ to change `configDots` if the input dotsConfig is changed.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     */\n    ngOnChanges(changes) {\n        const dotsConfigChanges = changes.dotsConfig;\n        if (dotsConfigChanges && dotsConfigChanges.currentValue !== dotsConfigChanges.previousValue) {\n            this.configDots = dotsConfigChanges.currentValue;\n        }\n    }\n    /**\n     * Method to check if an image is active (i.e. the current image).\n     * It checks currentImage and images to prevent errors.\n     * @param number index of the image to check if it's active or not\n     * @returns boolean true if is active (and input params are valid), false otherwise\n     */\n    isActive(index) {\n        if (!this.currentImage || !this.images || this.images.length === 0) {\n            return false;\n        }\n        let imageIndex;\n        try {\n            imageIndex = getIndex(this.currentImage, this.images);\n        }\n        catch (err) {\n            console.error(`Internal error while trying to show the active 'dot'`, err);\n            return false;\n        }\n        return index === imageIndex;\n    }\n    /**\n     * Method called by events from keyboard and mouse.\n     * @param number index of the dot\n     * @param KeyboardEvent | MouseEvent event payload\n     */\n    onDotEvent(index, event) {\n        const result = super.handleImageEvent(event);\n        if (result === NEXT) {\n            this.clickDot.emit(index);\n        }\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item\n     */\n    trackById(index, item) {\n        return item.id;\n    }\n}\nDotsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DotsComponent, deps: [{ token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nDotsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: DotsComponent, selector: \"ks-dots\", inputs: { id: \"id\", currentImage: \"currentImage\", images: \"images\", dotsConfig: \"dotsConfig\" }, outputs: { clickDot: \"clickDot\" }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<nav class=\\\"dots-container\\\" [attr.aria-label]=\\\"accessibilityConfig?.dotsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.dotsContainerTitle\\\">\\n  <ng-container *ngIf=\\\"!dotsConfig || dotsConfig?.visible\\\">\\n    <div class=\\\"inside dot\\\"\\n         *ngFor=\\\"let img of images; trackBy: trackById; let index = index\\\"\\n         [ngClass]=\\\"{'active': isActive(index)}\\\"\\n         [attr.aria-label]=\\\"accessibilityConfig?.dotAriaLabel + ' ' + (index + 1)\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"navigation\\\"\\n         (click)=\\\"onDotEvent(index, $event)\\\" (keyup)=\\\"onDotEvent(index, $event)\\\"></div>\\n  </ng-container>\\n</nav>\\n\", styles: [\".dots-container{display:flex;flex-direction:row;justify-content:center;margin-bottom:30px}.dots-container>.dot{background:#fff;border-radius:5px;height:10px;margin-left:4px;margin-right:4px;width:10px;cursor:pointer;opacity:.5}.dots-container>.dot:hover{opacity:.9;transition:all .5s ease;transition-property:opacity}.dots-container>.dot.active{cursor:pointer;opacity:.9}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\"], directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i2.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DotsComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-dots', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<nav class=\\\"dots-container\\\" [attr.aria-label]=\\\"accessibilityConfig?.dotsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.dotsContainerTitle\\\">\\n  <ng-container *ngIf=\\\"!dotsConfig || dotsConfig?.visible\\\">\\n    <div class=\\\"inside dot\\\"\\n         *ngFor=\\\"let img of images; trackBy: trackById; let index = index\\\"\\n         [ngClass]=\\\"{'active': isActive(index)}\\\"\\n         [attr.aria-label]=\\\"accessibilityConfig?.dotAriaLabel + ' ' + (index + 1)\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"navigation\\\"\\n         (click)=\\\"onDotEvent(index, $event)\\\" (keyup)=\\\"onDotEvent(index, $event)\\\"></div>\\n  </ng-container>\\n</nav>\\n\", styles: [\".dots-container{display:flex;flex-direction:row;justify-content:center;margin-bottom:30px}.dots-container>.dot{background:#fff;border-radius:5px;height:10px;margin-left:4px;margin-right:4px;width:10px;cursor:pointer;opacity:.5}.dots-container>.dot:hover{opacity:.9;transition:all .5s ease;transition-property:opacity}.dots-container>.dot.active{cursor:pointer;opacity:.9}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: ConfigService }]; }, propDecorators: { id: [{\n                type: Input\n            }], currentImage: [{\n                type: Input\n            }], images: [{\n                type: Input\n            }], dotsConfig: [{\n                type: Input\n            }], clickDot: [{\n                type: Output\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with image previews\n */\nclass PreviewsComponent extends AccessibleComponent {\n    constructor(configService) {\n        super();\n        this.configService = configService;\n        /**\n         * Output to emit the clicked preview. The payload contains the `ImageEvent` associated to the clicked preview.\n         */\n        this.clickPreview = new EventEmitter();\n        /**\n         * Enum of type `Action` that represents a mouse click on a button.\n         * Declared here to be used inside the template.\n         */\n        this.clickAction = Action.CLICK;\n        /**\n         * Enum of type `Action` that represents a keyboard action.\n         * Declared here to be used inside the template.\n         */\n        this.keyboardAction = Action.KEYBOARD;\n        /**\n         * Array of `InternalLibImage` exposed to the template. This field is initialized\n         * applying transformations, default values and so on to the input of the same type.\n         */\n        this.previews = [];\n        this.defaultPreviewSize = DEFAULT_PREVIEW_SIZE;\n    }\n    /**\n     * Method ´ngOnInit´ to build `configPreview` applying a default value and also to\n     * init the `previews` array.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        this.slideConfig = libConfig.slideConfig;\n        this.previewConfig = libConfig.previewConfig;\n        if (!this.currentImage || !this.images) {\n            throw new Error('Internal library error - currentImage and images must be defined');\n        }\n        this.initPreviews(this.currentImage, this.images);\n    }\n    /**\n     * Method to check if an image is active (i.e. a preview image).\n     * @param InternalLibImage preview is an image to check if it's active or not\n     * @returns boolean true if is active, false otherwise\n     */\n    isActive(preview) {\n        if (!preview || !this.currentImage) {\n            return false;\n        }\n        return preview.id === this.currentImage.id;\n    }\n    /**\n     * Method ´ngOnChanges´ to update `previews` array.\n     * Also, both `start` and `end` local variables will be updated accordingly.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges(changes) {\n        const images = changes.images;\n        const currentImage = changes.currentImage;\n        let prev;\n        let current;\n        if (currentImage) {\n            prev = currentImage.previousValue;\n            current = currentImage.currentValue;\n        }\n        else {\n            current = this.currentImage;\n        }\n        if (current && images && images.previousValue && images.currentValue) {\n            // I'm in this if statement, if input images are changed (for instance, because I removed one of them with the 'delete button',\n            // or because users changed the images array while modal gallery is still open).\n            // In this case, I have to re-init previews, because the input array of images is changed.\n            this.initPreviews(current, images.currentValue);\n        }\n        if (prev && current && prev.id !== current.id) {\n            this.updatePreviews(prev, current);\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a preview.\n     * This will trigger the `clickpreview` output with the input preview as its payload.\n     * @param InternalLibImage preview that triggered this method\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the source event or `Action.NORMAL` if not specified\n     */\n    onImageEvent(preview, event, action = Action.NORMAL) {\n        if (!this.id || !this.images) {\n            throw new Error('Internal library error - id and images must be defined');\n        }\n        if (!this.previewConfig || !this.previewConfig.clickable) {\n            return;\n        }\n        const result = super.handleImageEvent(event);\n        if (result === NEXT || result === PREV) {\n            this.clickPreview.emit(new ImageModalEvent(this.id, action, getIndex(preview, this.images)));\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a navigation arrow.\n     * It also emits an event to specify which arrow.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the source event or `Action.NORMAL` if not specified\n     */\n    onNavigationEvent(direction, event, action = Action.NORMAL) {\n        const result = super.handleNavigationEvent(direction, event);\n        if (result === NEXT) {\n            this.next();\n        }\n        else if (result === PREV) {\n            this.previous();\n        }\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item\n     */\n    trackById(index, item) {\n        return item.id;\n    }\n    /**\n     * Private method to init previews based on the currentImage and the full array of images.\n     * The current image in mandatory to show always the current preview (as highlighted).\n     * @param InternalLibImage currentImage to decide how to show previews, because I always want to see the current image as highlighted\n     * @param InternalLibImage[] images is the array of all images.\n     */\n    initPreviews(currentImage, images) {\n        let index;\n        try {\n            index = getIndex(currentImage, images);\n        }\n        catch (err) {\n            throw err;\n        }\n        switch (index) {\n            case 0:\n                // first image\n                this.setBeginningIndexesPreviews();\n                break;\n            case images.length - 1:\n                // last image\n                this.setEndIndexesPreviews();\n                break;\n            default:\n                // other images\n                this.setIndexesPreviews();\n                break;\n        }\n        this.previews = images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to init both `start` and `end` to the beginning.\n     */\n    setBeginningIndexesPreviews() {\n        if (!this.previewConfig || !this.images) {\n            throw new Error('Internal library error - previewConfig and images must be defined');\n        }\n        this.start = 0;\n        this.end = Math.min(this.previewConfig.number, this.images.length);\n    }\n    /**\n     * Private method to init both `start` and `end` to the end.\n     */\n    setEndIndexesPreviews() {\n        if (!this.previewConfig || !this.images) {\n            throw new Error('Internal library error - previewConfig and images must be defined');\n        }\n        this.start = this.images.length - 1 - (this.previewConfig.number - 1);\n        this.end = this.images.length;\n    }\n    /**\n     * Private method to update both `start` and `end` based on the currentImage.\n     */\n    setIndexesPreviews() {\n        if (!this.previewConfig || !this.images || !this.currentImage) {\n            throw new Error('Internal library error - previewConfig, currentImage and images must be defined');\n        }\n        this.start = getIndex(this.currentImage, this.images) - Math.floor(this.previewConfig.number / 2);\n        this.end = getIndex(this.currentImage, this.images) + Math.floor(this.previewConfig.number / 2) + 1;\n    }\n    /**\n     * Private method to update the visible previews navigating to the right (next).\n     */\n    next() {\n        if (!this.images) {\n            throw new Error('Internal library error - images must be defined');\n        }\n        // check if nextImage should be blocked\n        if (this.isPreventSliding(this.images.length - 1)) {\n            return;\n        }\n        if (this.end === this.images.length) {\n            return;\n        }\n        this.start++;\n        this.end = Math.min(this.end + 1, this.images.length);\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to update the visible previews navigating to the left (previous).\n     */\n    previous() {\n        if (!this.images) {\n            throw new Error('Internal library error - images must be defined');\n        }\n        // check if prevImage should be blocked\n        if (this.isPreventSliding(0)) {\n            return;\n        }\n        if (this.start === 0) {\n            return;\n        }\n        this.start = Math.max(this.start - 1, 0);\n        this.end = Math.min(this.end - 1, this.images.length);\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to block/permit sliding between previews.\n     * @param number boundaryIndex is the first or the last index of `images` input array\n     * @returns boolean if true block sliding, otherwise not\n     */\n    isPreventSliding(boundaryIndex) {\n        if (!this.images || !this.currentImage) {\n            throw new Error('Internal library error - images and currentImage must be defined');\n        }\n        return !!this.slideConfig && this.slideConfig.infinite === false && getIndex(this.currentImage, this.images) === boundaryIndex;\n    }\n    /**\n     * Private method to handle navigation changing the previews array and other variables.\n     */\n    updatePreviews(prev, current) {\n        if (!this.images) {\n            throw new Error('Internal library error - images must be defined');\n        }\n        // to manage infinite sliding I have to reset both `start` and `end` at the beginning\n        // to show again previews from the first image.\n        // This happens when you navigate over the last image to return to the first one\n        let prevIndex;\n        let currentIndex;\n        try {\n            prevIndex = getIndex(prev, this.images);\n            currentIndex = getIndex(current, this.images);\n        }\n        catch (err) {\n            console.error('Cannot get previous and current image indexes in previews');\n            throw err;\n        }\n        if (prevIndex === this.images.length - 1 && currentIndex === 0) {\n            // first image\n            this.setBeginningIndexesPreviews();\n            this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n            return;\n        }\n        // the same for the opposite case, when you navigate back from the fist image to go to the last one.\n        if (prevIndex === 0 && currentIndex === this.images.length - 1) {\n            // last image\n            this.setEndIndexesPreviews();\n            this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n            return;\n        }\n        // otherwise manage standard scenarios\n        if (prevIndex > currentIndex) {\n            this.previous();\n        }\n        else if (prevIndex < currentIndex) {\n            this.next();\n        }\n    }\n}\nPreviewsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: PreviewsComponent, deps: [{ token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nPreviewsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: PreviewsComponent, selector: \"ks-previews\", inputs: { id: \"id\", currentImage: \"currentImage\", images: \"images\" }, outputs: { clickPreview: \"clickPreview\" }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<nav class=\\\"previews-container\\\"\\n     [class.mobile-visible]=\\\"previewConfig?.mobileVisible\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.previewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.previewsContainerTitle\\\">\\n\\n  <ng-container *ngIf=\\\"previewConfig?.visible\\\">\\n    <a class=\\\"nav-left\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollPrevAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollPrevTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image {{isActive(preview) ? 'active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img! : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.size ? previewConfig?.size?.width! : defaultPreviewSize.width,\\n                                 height: previewConfig?.size ? previewConfig?.size?.height! : defaultPreviewSize.height}\\\"\\n           [attr.aria-label]=\\\"preview.modal.ariaLabel ? preview.modal.ariaLabel : ''\\\"\\n           [title]=\\\"(preview.modal.title || preview.modal.title === '') ? preview.modal.title : ''\\\"\\n           alt=\\\"{{preview.modal.alt ? preview.modal.alt : ''}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n\\n\\n    <a class=\\\"nav-right\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollNextAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows! && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollNextTitle\\\"></div>\\n    </a>\\n  </ng-container>\\n\\n</nav>\\n\", styles: [\"@media only screen and (max-width: 767px),only screen and (max-device-width: 767px){.previews-container{display:none}.previews-container>.preview-image{display:none}.previews-container>.nav-left{display:none}.previews-container>.nav-right{display:none}.previews-container.mobile-visible{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container.mobile-visible>.nav-left{display:flex}.previews-container.mobile-visible>.nav-right{display:flex}.previews-container.mobile-visible>.preview-image{cursor:pointer;display:flex;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container.mobile-visible>.preview-image.active{opacity:1}.previews-container.mobile-visible>.preview-image.unclickable{cursor:not-allowed}.previews-container.mobile-visible>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}}@media only screen and (min-device-width: 768px){.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container>.preview-image{cursor:pointer;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container>.preview-image.active{opacity:1}.previews-container>.preview-image.unclickable{cursor:not-allowed}.previews-container>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{color:#919191;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px}.previews-container>.nav-right{margin-left:10px}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"], directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: [\"fallbackImg\"], outputs: [\"fallbackApplied\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: PreviewsComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-previews', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<nav class=\\\"previews-container\\\"\\n     [class.mobile-visible]=\\\"previewConfig?.mobileVisible\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.previewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.previewsContainerTitle\\\">\\n\\n  <ng-container *ngIf=\\\"previewConfig?.visible\\\">\\n    <a class=\\\"nav-left\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollPrevAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollPrevTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image {{isActive(preview) ? 'active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img! : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.size ? previewConfig?.size?.width! : defaultPreviewSize.width,\\n                                 height: previewConfig?.size ? previewConfig?.size?.height! : defaultPreviewSize.height}\\\"\\n           [attr.aria-label]=\\\"preview.modal.ariaLabel ? preview.modal.ariaLabel : ''\\\"\\n           [title]=\\\"(preview.modal.title || preview.modal.title === '') ? preview.modal.title : ''\\\"\\n           alt=\\\"{{preview.modal.alt ? preview.modal.alt : ''}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n\\n\\n    <a class=\\\"nav-right\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.previewScrollNextAriaLabel\\\"\\n       [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n      <div class=\\\"inside {{previewConfig?.arrows! && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.previewScrollNextTitle\\\"></div>\\n    </a>\\n  </ng-container>\\n\\n</nav>\\n\", styles: [\"@media only screen and (max-width: 767px),only screen and (max-device-width: 767px){.previews-container{display:none}.previews-container>.preview-image{display:none}.previews-container>.nav-left{display:none}.previews-container>.nav-right{display:none}.previews-container.mobile-visible{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container.mobile-visible>.nav-left{display:flex}.previews-container.mobile-visible>.nav-right{display:flex}.previews-container.mobile-visible>.preview-image{cursor:pointer;display:flex;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container.mobile-visible>.preview-image.active{opacity:1}.previews-container.mobile-visible>.preview-image.unclickable{cursor:not-allowed}.previews-container.mobile-visible>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}}@media only screen and (min-device-width: 768px){.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:15px}.previews-container>.preview-image{cursor:pointer;margin-left:2px;margin-right:2px;opacity:.7;height:50px}.previews-container>.preview-image.active{opacity:1}.previews-container>.preview-image.unclickable{cursor:not-allowed}.previews-container>.preview-image:hover{opacity:1;transition:all .5s ease;transition-property:opacity}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{color:#919191;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px}.previews-container>.nav-right{margin-left:10px}}@keyframes fadein-visible{0%{opacity:0}to{opacity:1}}@keyframes fadein-semi-visible05{0%{opacity:0}to{opacity:.5}}@keyframes fadein-semi-visible08{0%{opacity:0}to{opacity:.8}}@keyframes fadein-semi-visible09{0%{opacity:0}to{opacity:.9}}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: ConfigService }]; }, propDecorators: { id: [{\n                type: Input\n            }], currentImage: [{\n                type: Input\n            }], images: [{\n                type: Input\n            }], clickPreview: [{\n                type: Output\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to close the modal gallery clicking on the semi-transparent background.\n * In fact, it listens for a click on all elements that aren't 'inside' and it emits\n * an event using `@Output clickOutside`.\n */\nclass ClickOutsideDirective {\n    constructor() {\n        /**\n         * Output to emit an event if the clicked element class doesn't contain 'inside' or it is 'hidden'. The payload is a boolean.\n         */\n        this.clickOutside = new EventEmitter();\n    }\n    /**\n     * Method called by Angular itself every click thanks to `@HostListener`.\n     * @param MouseEvent event payload received evey click\n     */\n    onClick(event) {\n        event.stopPropagation();\n        // tslint:disable-next-line:no-any\n        const target = event.target;\n        if (!this.clickOutsideEnable || !target) {\n            return;\n        }\n        let isInside = false;\n        let isHidden = false;\n        if (typeof target.className !== 'string') {\n            // it happens with @fortawesome/fontawesome 5\n            // for some reasons className is an object with 2 empty properties inside\n            isInside = true;\n        }\n        else {\n            // in normal scenarios, use classname, because it's a simple string\n            isInside = target.className && target.className.includes('inside');\n            isHidden = target.className.includes('hidden');\n        }\n        // if inside => don't close modal gallery\n        // if hidden => close modal gallery\n        /*\n            i i' h | close\n            0 1  0 |   1 => close modal gallery\n            0 1  1 |   1 => close modal gallery\n            1 0  0 |   0\n            1 0  1 |   1 => close modal gallery\n         */\n        if (!isInside || isHidden) {\n            // close modal gallery\n            this.clickOutside.emit(true);\n        }\n    }\n}\nClickOutsideDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ClickOutsideDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nClickOutsideDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: ClickOutsideDirective, selector: \"[ksClickOutside]\", inputs: { clickOutsideEnable: \"clickOutsideEnable\" }, outputs: { clickOutside: \"clickOutside\" }, host: { listeners: { \"click\": \"onClick($event)\" } }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ClickOutsideDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksClickOutside]'\n                }]\n        }], propDecorators: { clickOutsideEnable: [{\n                type: Input\n            }], clickOutside: [{\n                type: Output\n            }], onClick: [{\n                type: HostListener,\n                args: ['click', ['$event']]\n            }] } });\n\nclass ModalGalleryComponent {\n    constructor(dialogContent, modalGalleryService, keyboardService, \n    // tslint:disable-next-line:ban-types\n    platformId, changeDetectorRef, idValidatorService, configService, sanitizer) {\n        this.dialogContent = dialogContent;\n        this.modalGalleryService = modalGalleryService;\n        this.keyboardService = keyboardService;\n        this.platformId = platformId;\n        this.changeDetectorRef = changeDetectorRef;\n        this.idValidatorService = idValidatorService;\n        this.configService = configService;\n        this.sanitizer = sanitizer;\n        /**\n         * Boolean to enable modal-gallery close behaviour when clicking\n         * on the semi-transparent background. Enabled by default.\n         */\n        this.enableCloseOutside = true;\n        /**\n         * Object of type `AccessibilityConfig` to init custom accessibility features.\n         * For instance, it contains titles, alt texts, aria-labels and so on.\n         */\n        this.accessibilityConfig = KS_DEFAULT_ACCESSIBILITY_CONFIG;\n        /**\n         * Boolean to open the modal gallery. False by default.\n         */\n        this.showGallery = false;\n        this.id = this.dialogContent.id;\n        this.images = this.dialogContent.images;\n        this.currentImage = this.dialogContent.currentImage;\n        this.libConfig = this.dialogContent.libConfig;\n        this.configService.setConfig(this.id, this.libConfig);\n        this.updateImagesSubscription = this.modalGalleryService.updateImages$.subscribe((images) => {\n            this.images = images.map((image) => {\n                const newImage = Object.assign({}, image, { previouslyLoaded: false });\n                return newImage;\n            });\n            this.initImages();\n            this.images.forEach((image) => {\n                if (image.id === this.currentImage.id) {\n                    this.currentImage = image;\n                }\n            });\n            this.changeDetectorRef.markForCheck();\n        });\n    }\n    /**\n     * HostListener to catch browser's back button and destroy the gallery.\n     * This prevents weired behaviour about scrolling.\n     * Added to fix this issue: https://github.com/Ks89/angular-modal-gallery/issues/159\n     */\n    onPopState(e) {\n        this.closeGallery();\n    }\n    /**\n     * Method ´ngOnInit´ to init images calling `initImages()`.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.idValidatorService.checkAndAdd(this.id);\n        // id is a mandatory input and must a number > 0\n        if ((!this.id && this.id !== 0) || this.id < 0) {\n            throw new Error(`'[id]=\"a number >= 0\"' is a mandatory input in angular-modal-gallery.` +\n                `If you are using multiple instances of this library, please be sure to use different ids`);\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.dotsConfig) {\n            throw new Error('Internal library error - libConfig and dotsConfig must be defined');\n        }\n        this.dotsConfig = libConfig.dotsConfig;\n        this.registerKeyboardService();\n        setTimeout(() => {\n            this.initImages();\n        }, 0);\n    }\n    /**\n     * Method called by custom upper buttons.\n     * @param event ButtonEvent event payload\n     */\n    onCustomEmit(event) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n    }\n    /**\n     * Method called by the full-screen upper button.\n     * @param event ButtonEvent event payload\n     */\n    onFullScreen(event) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        // tslint:disable-next-line:no-any\n        const doc = document;\n        // tslint:disable-next-line:no-any\n        const docEl = document.documentElement;\n        const fullscreenDisabled = !doc.fullscreenElement && !doc.webkitFullscreenElement;\n        // In Safari `requestFullscreen` and `exitFullscreen` are undefined. Safari requires the prefixed version `webkit-`\n        // and it doesn't return promises.\n        // I cannot call `emitButtonAfterHook` only if requestFullScreen is successful, because there are no guarantees across browsers and\n        // I should also handle the case with keyboard \"esc\" button.\n        if (fullscreenDisabled) {\n            if (docEl.requestFullscreen) {\n                docEl.requestFullscreen()\n                    .then(() => {\n                })\n                    .catch(() => {\n                    console.error('Cannot request full screen');\n                });\n            }\n            else if (docEl.webkitRequestFullscreen) {\n                // For Safari and it doesn't return a promise\n                docEl.webkitRequestFullscreen();\n            }\n        }\n        else {\n            if (doc.exitFullscreen) {\n                doc.exitFullscreen()\n                    .then(() => {\n                })\n                    .catch(() => {\n                    console.error('Cannot request exit full screen');\n                });\n            }\n            else if (doc.webkitExitFullscreen) {\n                // For Safari and it doesn't return a promise\n                doc.webkitExitFullscreen();\n            }\n        }\n        this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n    }\n    /**\n     * Method called by the delete upper button.\n     * @param event ButtonEvent event payload\n     */\n    onDelete(event) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        if (this.images.length === 1) {\n            this.closeGallery();\n        }\n        if (!this.currentImageComponent) {\n            throw new Error('currentImageComponent must be defined');\n        }\n        const imageIndexToDelete = this.currentImageComponent.getIndexToDelete(event.image);\n        if (imageIndexToDelete === this.images.length - 1) {\n            // last image\n            this.currentImageComponent.prevImage();\n        }\n        else {\n            this.currentImageComponent.nextImage();\n        }\n        this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n    }\n    /**\n     * Method called by the navigate upper button.\n     * @param event ButtonEvent event payload\n     */\n    onNavigate(event) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        // To support SSR\n        if (isPlatformBrowser(this.platformId)) {\n            if (eventToEmit.image && eventToEmit.image.modal.extUrl) {\n                // where I should open this link? The current tab or another one?\n                if (eventToEmit.button && eventToEmit.button.extUrlInNewTab) {\n                    // in this case I should use target _blank to open the url in a new tab, however these is a security issue.\n                    // Prevent Reverse Tabnabbing's attacks (https://www.owasp.org/index.php/Reverse_Tabnabbing)\n                    // Some resources:\n                    // - https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet#Tabnabbing\n                    // - https://medium.com/@jitbit/target-blank-the-most-underestimated-vulnerability-ever-96e328301f4c\n                    // - https://developer.mozilla.org/en-US/docs/Web/API/Window/open\n                    const newWindow = window.open(eventToEmit.image.modal.extUrl, 'noopener,noreferrer,');\n                    // it returns null if the call failed, so I have to do this check\n                    if (newWindow) {\n                        newWindow.opener = null; // required to prevent security issues\n                        // emit only in case of success\n                        this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n                    }\n                }\n                else {\n                    this.updateLocationHref(eventToEmit.image.modal.extUrl);\n                    // emit only in case of success\n                    this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n                }\n            }\n        }\n    }\n    /**\n     * This method is defined to be spied and replaced in unit testing with a fake method call.\n     * It must be public to be able to use jasmine spyOn method.\n     * @param newHref string new url\n     */\n    updateLocationHref(newHref) {\n        window.location.href = newHref;\n    }\n    /**\n     * Method called by the download upper button.\n     * @param event ButtonEvent event payload\n     */\n    onDownload(event) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        this.downloadImage();\n        this.modalGalleryService.emitButtonAfterHook(eventToEmit);\n    }\n    /**\n     * Method called by the close upper button.\n     * @param event ButtonEvent event payload\n     * @param action Action that triggered the close method. `Action.NORMAL` by default\n     */\n    onCloseGalleryButton(event, action = Action.NORMAL) {\n        const eventToEmit = this.getButtonEventToEmit(event);\n        this.modalGalleryService.emitButtonBeforeHook(eventToEmit);\n        this.closeGallery(action, false);\n    }\n    /**\n     * Method called by CurrentImageComponent and triggered via KeyboardService.\n     * @param event ImageModalEvent event payload\n     * @param action Action that triggered the close method. `Action.NORMAL` by default\n     */\n    onCloseGallery(event, action = Action.NORMAL) {\n        // remap ImageModalEvent to ButtonEvent\n        const buttonEvent = {\n            button: {\n                type: ButtonType.CLOSE\n            },\n            image: null,\n            action: event.action,\n            galleryId: event.galleryId\n        };\n        this.modalGalleryService.emitButtonBeforeHook(buttonEvent);\n        this.closeGallery(action, false);\n    }\n    /**\n     * Method to close the modal gallery specifying the action.\n     * It also reset the `keyboardService` to prevent multiple listeners.\n     * @param action Action action type. `Action.NORMAL` by default\n     * @param clickOutside boolean that is true if called clicking on the modal background. False by default.\n     */\n    closeGallery(action = Action.NORMAL, clickOutside = false) {\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.modalGalleryService.emitClose(new ImageModalEvent(this.id, action, true));\n        this.keyboardService.reset(libConfig);\n        this.modalGalleryService.close(this.id, clickOutside);\n    }\n    /**\n     * Method called when the image changes and used to update the `currentImage` object.\n     * @param event ImageModalEvent event payload\n     */\n    onChangeCurrentImage(event) {\n        const newIndex = event.result;\n        if (newIndex < 0 || newIndex >= this.images.length) {\n            return;\n        }\n        this.currentImage = this.images[newIndex];\n        // emit current visible image index\n        this.modalGalleryService.emitShow(new ImageModalEvent(this.id, event.action, newIndex + 1));\n        // emit first/last event based on newIndex value\n        this.emitBoundaryEvent(event.action, newIndex);\n    }\n    /**\n     * Method called when you click 'outside' (i.e. on the semi-transparent background)\n     * to close the modal gallery if `enableCloseOutside` is true.\n     * @param event boolean that is true to close the modal gallery, false otherwise\n     */\n    onClickOutside(event) {\n        if (event && this.enableCloseOutside) {\n            this.closeGallery(Action.CLICK, true);\n        }\n    }\n    /**\n     * Method called when an image is loaded and the loading spinner has gone.\n     * It sets the previouslyLoaded flag inside the Image to hide loading spinner when displayed again.\n     * @param event ImageLoadEvent event payload\n     */\n    onImageLoad(event) {\n        // sets as previously loaded the image with index specified by `event.status`\n        this.images = this.images.map((img) => {\n            if (img && img.id === event.id) {\n                return Object.assign({}, img, { previouslyLoaded: event.status });\n            }\n            return img;\n        });\n    }\n    /**\n     * Method called when a dot is clicked and used to update the current image.\n     * @param index number index of the clicked dot\n     */\n    onClickDot(index) {\n        this.currentImage = this.images[index];\n    }\n    /**\n     * Method called when an image preview is clicked and used to update the current image.\n     * @param event ImageModalEvent preview image\n     */\n    onClickPreview(event) {\n        this.onChangeCurrentImage(event);\n    }\n    /**\n     * Method to cleanup resources. In fact, this will reset keyboard's service.\n     * This is an Angular's lifecycle hook that is called when this component is destroyed.\n     */\n    ngOnDestroy() {\n        if (this.keyboardService) {\n            const libConfig = this.configService.getConfig(this.id);\n            if (this.id && libConfig) {\n                this.keyboardService.reset(libConfig);\n            }\n        }\n        if (this.updateImagesSubscription) {\n            this.updateImagesSubscription.unsubscribe();\n        }\n        this.idValidatorService.remove(this.id);\n    }\n    /**\n     * Method to show the modal gallery displaying the currentImage.\n     * It will also register a new `keyboardService` to catch keyboard's events to download the current\n     * image with keyboard's shortcuts. This service, will be removed either when modal gallery component\n     * will be destroyed or when the gallery is closed invoking the `closeGallery` method.\n     * @private\n     */\n    registerKeyboardService() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.keyboardService.init(libConfig).then(() => {\n            this.keyboardService.add((event, combo) => {\n                if (event.preventDefault) {\n                    event.preventDefault();\n                }\n                else {\n                    // internet explorer\n                    event.returnValue = false;\n                }\n                this.downloadImage();\n            }, libConfig);\n        });\n    }\n    /**\n     * Method to download the current image, only if `downloadable` is true.\n     * @private\n     */\n    downloadImage() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        const currentImageConfig = libConfig.currentImageConfig;\n        if (currentImageConfig && !currentImageConfig.downloadable) {\n            return;\n        }\n        this.downloadImageAllBrowsers();\n    }\n    /**\n     * Method to convert a base64 to a Blob\n     * @param base64Data string with base64 data\n     * @param contentType string with the MIME type\n     * @return Blob converted from the input base64Data\n     * @private\n     */\n    base64toBlob(base64Data, contentType = '') {\n        const sliceSize = 1024;\n        const byteCharacters = atob(base64Data);\n        const bytesLength = byteCharacters.length;\n        const slicesCount = Math.ceil(bytesLength / sliceSize);\n        const byteArrays = new Array(slicesCount);\n        for (let sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n            const begin = sliceIndex * sliceSize;\n            const end = Math.min(begin + sliceSize, bytesLength);\n            const bytes = new Array(end - begin);\n            for (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n                bytes[i] = byteCharacters[offset].charCodeAt(0);\n            }\n            byteArrays[sliceIndex] = new Uint8Array(bytes);\n        }\n        return new Blob(byteArrays, { type: contentType });\n    }\n    /**\n     * Private method to download the current image for all browsers.\n     * @private\n     */\n    downloadImageAllBrowsers() {\n        const link = document.createElement('a');\n        let isBase64 = false;\n        let img;\n        // convert a SafeResourceUrl to a string\n        if (typeof this.currentImage.modal.img === 'string') {\n            img = this.currentImage.modal.img;\n        }\n        else {\n            // if it's a SafeResourceUrl\n            img = this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, this.currentImage.modal.img);\n        }\n        if (img.includes('data:image/') || img.includes(';base64,')) {\n            const extension = img.replace('data:image/', '').split(';base64,')[0];\n            const pureBase64 = img.split(';base64,')[1];\n            const blob = this.base64toBlob(pureBase64, 'image/' + extension);\n            link.href = URL.createObjectURL(blob);\n            isBase64 = true;\n            link.setAttribute('download', this.getFileName(this.currentImage, isBase64, extension));\n        }\n        else {\n            link.href = img;\n            link.setAttribute('download', this.getFileName(this.currentImage, isBase64));\n        }\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n    /**\n     * Private method to get the `ButtonEvent` to emit, merging the input `ButtonEvent`\n     * with the current image.\n     * @param event ButtonEvent event payload to return\n     * @returns ButtonEvent event payload with the current image included\n     * @private\n     */\n    getButtonEventToEmit(event) {\n        return Object.assign(event, { image: this.currentImage });\n    }\n    /**\n     * Private method to get the file name from an input path.\n     * This is used either to get the image's name from its path or from the Image itself,\n     * if specified as 'downloadFileName' by the user.\n     * @param image Image image to extract its file name\n     * @param isBase64 boolean to set if the image is a base64 file or not. False by default.\n     * @param base64Extension string to force the extension of the base64 image. Empty string by default.\n     * @returns string string file name of the input image.\n     * @private\n     */\n    getFileName(image, isBase64 = false, base64Extension = '') {\n        if (!image.modal.downloadFileName || image.modal.downloadFileName.length === 0) {\n            if (isBase64) {\n                return `Image-${image.id}.${base64Extension !== '' ? base64Extension : 'png'}`;\n            }\n            else {\n                return image.modal.img.replace(/^.*[\\\\\\/]/, '');\n            }\n        }\n        else {\n            return image.modal.downloadFileName;\n        }\n    }\n    /**\n     * Private method to initialize `images` as array of `Image`s.\n     * Also, it will emit ImageModalEvent to say that images are loaded.\n     * @private\n     */\n    initImages() {\n        this.modalGalleryService.emitHasData(new ImageModalEvent(this.id, Action.LOAD, true));\n        const currentIndex = this.images.indexOf(this.currentImage);\n        // emit a new ImageModalEvent with the index of the current image\n        this.modalGalleryService.emitShow(new ImageModalEvent(this.id, Action.LOAD, currentIndex + 1));\n        // emit first/last event based on newIndex value\n        this.emitBoundaryEvent(Action.NORMAL, currentIndex);\n        this.showGallery = this.images.length > 0;\n    }\n    /**\n     * Private method to emit events when either the last or the first image are visible.\n     * @param action Action Enum of type Action that represents the source of the event that changed the\n     *  current image to the first one or the last one.\n     * @param indexToCheck number is the index number of the image (the first or the last one).\n     * @private\n     */\n    emitBoundaryEvent(action, indexToCheck) {\n        // to emit first/last event\n        switch (indexToCheck) {\n            case 0:\n                this.modalGalleryService.emitFirstImage(new ImageModalEvent(this.id, action, true));\n                break;\n            case this.images.length - 1:\n                this.modalGalleryService.emitLastImage(new ImageModalEvent(this.id, action, true));\n                break;\n        }\n    }\n}\nModalGalleryComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ModalGalleryComponent, deps: [{ token: DIALOG_DATA }, { token: ModalGalleryService }, { token: KeyboardService }, { token: PLATFORM_ID }, { token: i0.ChangeDetectorRef }, { token: IdValidatorService }, { token: ConfigService }, { token: i5.DomSanitizer }], target: i0.ɵɵFactoryTarget.Component });\nModalGalleryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: ModalGalleryComponent, selector: \"ks-modal-gallery\", host: { listeners: { \"window:popstate\": \"onPopState($event)\" } }, viewQueries: [{ propertyName: \"currentImageComponent\", first: true, predicate: CurrentImageComponent, descendants: true, static: true }], ngImport: i0, template: \"<div id=\\\"modal-gallery-wrapper\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig.modalGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig.modalGalleryContentTitle\\\"\\n     ksClickOutside [clickOutsideEnable]=\\\"enableCloseOutside\\\"\\n     (clickOutside)=\\\"onClickOutside($event)\\\">\\n\\n  <div id=\\\"flex-min-height-ie-fix\\\">\\n    <div id=\\\"modal-gallery-container\\\">\\n\\n      <ks-upper-buttons [id]=\\\"id\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        (delete)=\\\"onDelete($event)\\\"\\n                        (navigate)=\\\"onNavigate($event)\\\"\\n                        (download)=\\\"onDownload($event)\\\"\\n                        (closeButton)=\\\"onCloseGalleryButton($event)\\\"\\n                        (fullscreen)=\\\"onFullScreen($event)\\\"\\n                        (customEmit)=\\\"onCustomEmit($event)\\\"></ks-upper-buttons>\\n\\n      <ks-current-image [id]=\\\"id\\\"\\n                        [images]=\\\"images\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        [isOpen]=\\\"true\\\"\\n                        (loadImage)=\\\"onImageLoad($event)\\\"\\n                        (changeImage)=\\\"onChangeCurrentImage($event)\\\"\\n                        (closeGallery)=\\\"onCloseGallery($event)\\\"></ks-current-image>\\n\\n      <div>\\n        <ks-dots [id]=\\\"id\\\"\\n                 [images]=\\\"images\\\"\\n                 [currentImage]=\\\"currentImage\\\"\\n                 [dotsConfig]=\\\"dotsConfig\\\"\\n                 (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n\\n        <ks-previews [id]=\\\"id\\\"\\n                     [images]=\\\"images\\\"\\n                     [currentImage]=\\\"currentImage\\\"\\n                     (clickPreview)=\\\"onClickPreview($event)\\\"></ks-previews>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\"#flex-min-height-ie-fix{display:flex;flex-direction:column;justify-content:center}#modal-gallery-container{display:flex;flex-direction:column;justify-content:space-between;min-width:100vw;min-height:100vh}\\n\"], components: [{ type: UpperButtonsComponent, selector: \"ks-upper-buttons\", inputs: [\"id\", \"currentImage\"], outputs: [\"refresh\", \"delete\", \"navigate\", \"download\", \"closeButton\", \"fullscreen\", \"customEmit\"] }, { type: CurrentImageComponent, selector: \"ks-current-image\", inputs: [\"id\", \"currentImage\", \"images\", \"isOpen\"], outputs: [\"loadImage\", \"changeImage\", \"closeGallery\"] }, { type: DotsComponent, selector: \"ks-dots\", inputs: [\"id\", \"currentImage\", \"images\", \"dotsConfig\"], outputs: [\"clickDot\"] }, { type: PreviewsComponent, selector: \"ks-previews\", inputs: [\"id\", \"currentImage\", \"images\"], outputs: [\"clickPreview\"] }], directives: [{ type: ClickOutsideDirective, selector: \"[ksClickOutside]\", inputs: [\"clickOutsideEnable\"], outputs: [\"clickOutside\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ModalGalleryComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-modal-gallery', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div id=\\\"modal-gallery-wrapper\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig.modalGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig.modalGalleryContentTitle\\\"\\n     ksClickOutside [clickOutsideEnable]=\\\"enableCloseOutside\\\"\\n     (clickOutside)=\\\"onClickOutside($event)\\\">\\n\\n  <div id=\\\"flex-min-height-ie-fix\\\">\\n    <div id=\\\"modal-gallery-container\\\">\\n\\n      <ks-upper-buttons [id]=\\\"id\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        (delete)=\\\"onDelete($event)\\\"\\n                        (navigate)=\\\"onNavigate($event)\\\"\\n                        (download)=\\\"onDownload($event)\\\"\\n                        (closeButton)=\\\"onCloseGalleryButton($event)\\\"\\n                        (fullscreen)=\\\"onFullScreen($event)\\\"\\n                        (customEmit)=\\\"onCustomEmit($event)\\\"></ks-upper-buttons>\\n\\n      <ks-current-image [id]=\\\"id\\\"\\n                        [images]=\\\"images\\\"\\n                        [currentImage]=\\\"currentImage\\\"\\n                        [isOpen]=\\\"true\\\"\\n                        (loadImage)=\\\"onImageLoad($event)\\\"\\n                        (changeImage)=\\\"onChangeCurrentImage($event)\\\"\\n                        (closeGallery)=\\\"onCloseGallery($event)\\\"></ks-current-image>\\n\\n      <div>\\n        <ks-dots [id]=\\\"id\\\"\\n                 [images]=\\\"images\\\"\\n                 [currentImage]=\\\"currentImage\\\"\\n                 [dotsConfig]=\\\"dotsConfig\\\"\\n                 (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n\\n        <ks-previews [id]=\\\"id\\\"\\n                     [images]=\\\"images\\\"\\n                     [currentImage]=\\\"currentImage\\\"\\n                     (clickPreview)=\\\"onClickPreview($event)\\\"></ks-previews>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\", styles: [\"#flex-min-height-ie-fix{display:flex;flex-direction:column;justify-content:center}#modal-gallery-container{display:flex;flex-direction:column;justify-content:space-between;min-width:100vw;min-height:100vh}\\n\"] }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [DIALOG_DATA]\n                    }] }, { type: ModalGalleryService }, { type: KeyboardService }, { type: Object, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }, { type: i0.ChangeDetectorRef }, { type: IdValidatorService }, { type: ConfigService }, { type: i5.DomSanitizer }];\n    }, propDecorators: { currentImageComponent: [{\n                type: ViewChild,\n                args: [CurrentImageComponent, { static: true }]\n            }], onPopState: [{\n                type: HostListener,\n                args: ['window:popstate', ['$event']]\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Class that represents the modal dialog instance.\n * It is returned by the open method.\n */\nclass ModalGalleryRef {\n    constructor(overlayRef) {\n        this.overlayRef = overlayRef;\n        this.close = new Subject();\n        this.close$ = this.close.asObservable();\n        this.show = new Subject();\n        this.show$ = this.show.asObservable();\n        this.firstImage = new Subject();\n        this.firstImage$ = this.firstImage.asObservable();\n        this.lastImage = new Subject();\n        this.lastImage$ = this.lastImage.asObservable();\n        this.hasData = new Subject();\n        this.hasData$ = this.hasData.asObservable();\n        this.buttonBeforeHook = new Subject();\n        this.buttonBeforeHook$ = this.buttonBeforeHook.asObservable();\n        this.buttonAfterHook = new Subject();\n        this.buttonAfterHook$ = this.buttonAfterHook.asObservable();\n    }\n    /**\n     * Close modal dialog, disposing the Overlay.\n     */\n    closeModal() {\n        this.overlayRef.dispose();\n    }\n    /**\n     * Method to emit close event.\n     * @param event ImageModalEvent event payload\n     */\n    emitClose(event) {\n        this.close.next(event);\n    }\n    /**\n     * Method to emit show event.\n     * @param event ImageModalEvent event payload\n     */\n    emitShow(event) {\n        this.show.next(event);\n    }\n    /**\n     * Method to emit firstImage event.\n     * @param event ImageModalEvent event payload\n     */\n    emitFirstImage(event) {\n        this.firstImage.next(event);\n    }\n    /**\n     * Method to emit lastImage event.\n     * @param event ImageModalEvent event payload\n     */\n    emitLastImage(event) {\n        this.lastImage.next(event);\n    }\n    /**\n     * Method to emit hasData event.\n     * @param event ImageModalEvent event payload\n     */\n    emitHasData(event) {\n        this.hasData.next(event);\n    }\n    /**\n     * Method to emit buttonBeforeHook event.\n     * @param event ImageModalEvent event payload\n     */\n    emitButtonBeforeHook(event) {\n        this.buttonBeforeHook.next(event);\n    }\n    /**\n     * Method to emit buttonAfterHook event.\n     * @param event ImageModalEvent event payload\n     */\n    emitButtonAfterHook(event) {\n        this.buttonAfterHook.next(event);\n    }\n}\n\nconst DEFAULT_DIALOG_CONFIG = {\n    hasBackdrop: true,\n    backdropClass: 'ks-modal-gallery-backdrop',\n    panelClass: 'ks-modal-gallery-panel'\n};\nclass ModalGalleryService {\n    constructor(injector, overlay, configService) {\n        this.injector = injector;\n        this.overlay = overlay;\n        this.configService = configService;\n        this.updateImages = new Subject();\n        this.updateImages$ = this.updateImages.asObservable();\n    }\n    /**\n     * Method to open modal gallery passing the configuration\n     * @param config ModalGalleryConfig that contains: id, array of images, current image and optionally the configuration object\n     * @return ModalGalleryRef | undefined is the object used to listen for events.\n     */\n    open(config) {\n        // Returns an OverlayRef which is a PortalHost\n        const overlayRef = this.createOverlay();\n        // Instantiate a reference to the dialog\n        this.dialogRef = new ModalGalleryRef(overlayRef);\n        // Attach dialog container\n        const overlayComponent = this.attachDialogContainer(overlayRef, config, this.dialogRef);\n        overlayRef.backdropClick().subscribe(() => {\n            if (this.dialogRef) {\n                this.dialogRef.closeModal();\n            }\n        });\n        return this.dialogRef;\n    }\n    /**\n     * Method to close a modal gallery previously opened.\n     * @param id Unique identifier of the modal gallery\n     * @param clickOutside boolean is true if closed clicking on the modal backdrop, false otherwise.\n     */\n    close(id, clickOutside) {\n        const libConfig = this.configService.getConfig(id);\n        if (clickOutside) {\n            if (this.dialogRef && libConfig && libConfig.enableCloseOutside) {\n                this.dialogRef.closeModal();\n            }\n        }\n        else {\n            if (this.dialogRef) {\n                this.dialogRef.closeModal();\n            }\n        }\n    }\n    /**\n     * Method to update images array.\n     * @param images Image[] updated array of images\n     */\n    updateModalImages(images) {\n        this.updateImages.next(images);\n    }\n    /**\n     * Method to emit close event.\n     * @param event ImageModalEvent is the event payload\n     */\n    emitClose(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitClose(event);\n    }\n    /**\n     * Method to emit show event.\n     * @param event ImageModalEvent is the event payload\n     */\n    emitShow(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitShow(event);\n    }\n    /**\n     * Method to emit firstImage event.\n     * @param event ImageModalEvent is the event payload\n     */\n    emitFirstImage(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitFirstImage(event);\n    }\n    /**\n     * Method to emit lastImage event.\n     * @param event ImageModalEvent is the event payload\n     */\n    emitLastImage(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitLastImage(event);\n    }\n    /**\n     * Method to emit hasData event.\n     * @param event ImageModalEvent is the event payload\n     */\n    emitHasData(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitHasData(event);\n    }\n    /**\n     * Method to emit buttonBeforeHook event.\n     * @param event ButtonEvent is the event payload\n     */\n    emitButtonBeforeHook(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitButtonBeforeHook(event);\n    }\n    /**\n     * Method to emit buttonAfterHook event.\n     * @param event ButtonEvent is the event payload\n     */\n    emitButtonAfterHook(event) {\n        if (!this.dialogRef) {\n            return;\n        }\n        this.dialogRef.emitButtonAfterHook(event);\n    }\n    /**\n     * Private method to create an Overlay using Angular CDK APIs\n     * @private\n     */\n    createOverlay() {\n        const overlayConfig = this.getOverlayConfig();\n        return this.overlay.create(overlayConfig);\n    }\n    /**\n     * Private method to attach ModalGalleryComponent to the overlay.\n     * @param overlayRef OverlayRef is the Overlay object created using Angular CDK APIs\n     * @param config ModalGalleryConfig that contains: id, array of images, current image and optionally the configuration object\n     * @param dialogRef ModalGalleryRef is the object to control the dialog instance\n     * @private\n     */\n    attachDialogContainer(overlayRef, config, dialogRef) {\n        const injector = Injector.create({\n            parent: this.injector,\n            providers: [\n                { provide: ModalGalleryRef, useValue: dialogRef },\n                { provide: DIALOG_DATA, useValue: config }\n            ]\n        });\n        const containerPortal = new ComponentPortal(ModalGalleryComponent, null, injector);\n        const containerRef = overlayRef.attach(containerPortal);\n        return containerRef.instance;\n    }\n    /**\n     * Private method to create an OverlayConfig instance\n     * @private\n     */\n    getOverlayConfig() {\n        const positionStrategy = this.overlay.position().global().centerHorizontally().centerVertically();\n        const overlayConfig = new OverlayConfig({\n            hasBackdrop: DEFAULT_DIALOG_CONFIG.hasBackdrop,\n            backdropClass: DEFAULT_DIALOG_CONFIG.backdropClass,\n            panelClass: DEFAULT_DIALOG_CONFIG.panelClass,\n            scrollStrategy: this.overlay.scrollStrategies.block(),\n            positionStrategy\n        });\n        return overlayConfig;\n    }\n}\nModalGalleryService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ModalGalleryService, deps: [{ token: i0.Injector }, { token: i1.Overlay }, { token: ConfigService }], target: i0.ɵɵFactoryTarget.Injectable });\nModalGalleryService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ModalGalleryService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ModalGalleryService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.Injector }, { type: i1.Overlay }, { type: ConfigService }]; } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Default max height of previews.\n */\nconst DEFAULT_MAX_HEIGHT = '200px';\n/**\n * Component with image previews for carousel\n */\nclass CarouselPreviewsComponent extends AccessibleComponent {\n    constructor(ref, breakpointObserver, \n    // sanitizer is used only to sanitize style before add it to background property when legacyIE11Mode is enabled\n    sanitizer, configService) {\n        super();\n        this.ref = ref;\n        this.breakpointObserver = breakpointObserver;\n        this.sanitizer = sanitizer;\n        this.configService = configService;\n        /**\n         * Variable to change the max-width of the host component\n         */\n        this.hostMaxWidth = '100%';\n        /**\n         * Variable to set aria-label of the host component\n         */\n        this.ariaLabel = `Carousel previews`;\n        /**\n         * Output to emit the clicked preview. The payload contains the `InternalLibImage` associated to the clicked preview.\n         */\n        this.clickPreview = new EventEmitter();\n        /**\n         * Enum of type `Action` that represents a mouse click on a button.\n         * Declared here to be used inside the template.\n         */\n        this.clickAction = Action.CLICK;\n        /**\n         * Enum of type `Action` that represents a keyboard action.\n         * Declared here to be used inside the template.\n         */\n        this.keyboardAction = Action.KEYBOARD;\n        /**\n         * Array of `InternalLibImage` exposed to the template. This field is initialized\n         * applying transformations, default values and so on to the input of the same type.\n         */\n        this.previews = [];\n        /**\n         * Variable with the preview's maxHeight\n         */\n        this.previewMaxHeight = DEFAULT_MAX_HEIGHT;\n        // listen for width changes and update preview heights accordingly\n        this.breakpointSubscription = breakpointObserver\n            .observe([Breakpoints.XSmall, Breakpoints.Small, Breakpoints.Medium, Breakpoints.Large, Breakpoints.XLarge])\n            .subscribe((result) => {\n            if (!this.previewConfig || !this.previewConfig.breakpoints) {\n                return;\n            }\n            if (result.breakpoints[Breakpoints.XSmall]) {\n                this.updateHeight(this.previewConfig.breakpoints.xSmall);\n            }\n            else if (result.breakpoints[Breakpoints.Small]) {\n                this.updateHeight(this.previewConfig.breakpoints.small);\n            }\n            else if (result.breakpoints[Breakpoints.Medium]) {\n                this.updateHeight(this.previewConfig.breakpoints.medium);\n            }\n            else if (result.breakpoints[Breakpoints.Large]) {\n                this.updateHeight(this.previewConfig.breakpoints.large);\n            }\n            else if (result.breakpoints[Breakpoints.XLarge]) {\n                this.updateHeight(this.previewConfig.breakpoints.xLarge);\n            }\n        });\n    }\n    /**\n     * Method to update the height of previews, passing the desired height as input.\n     * @param configBreakpointHeight is a number that represent the desired height to set.\n     */\n    updateHeight(configBreakpointHeight) {\n        if (this.previewConfig && this.previewConfig.maxHeight) {\n            const heightNum = +this.previewConfig.maxHeight.replace('/px/g', '').replace('/%/g', '');\n            this.previewMaxHeight = Math.min(configBreakpointHeight, heightNum) + 'px';\n        }\n        else {\n            const heightNum = +DEFAULT_MAX_HEIGHT.replace('/px/g', '').replace('/%/g', '');\n            this.previewMaxHeight = Math.min(configBreakpointHeight, heightNum) + 'px';\n        }\n        this.ref.markForCheck();\n    }\n    /**\n     * Method ´ngOnInit´ to build `configPreview` applying a default value and also to\n     * init the `previews` array.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.carouselConfig = libConfig.carouselConfig;\n        this.previewConfig = libConfig.carouselPreviewsConfig;\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        if (!this.previewConfig || !this.previewConfig.maxHeight || !this.previewConfig.breakpoints) {\n            throw new Error('Internal library error - previewConfig must be defined');\n        }\n        // change the max-width of this component if there is a specified width !== 100% in carouselConfig\n        if (this.carouselConfig && this.carouselConfig.maxWidth !== '100%') {\n            this.hostMaxWidth = this.carouselConfig.maxWidth;\n        }\n        this.previewMaxHeight = this.previewConfig.maxHeight;\n        // init previews based on currentImage and the full array of images\n        this.initPreviews(this.currentImage, this.images);\n        // apply custom height based on responsive breakpoints\n        // This is required, because the breakpointSubscription is not triggered at creation,\n        // but only when the width changes\n        const isXsmallScreen = this.breakpointObserver.isMatched(Breakpoints.XSmall);\n        const isSmallScreen = this.breakpointObserver.isMatched(Breakpoints.Small);\n        const isMediumScreen = this.breakpointObserver.isMatched(Breakpoints.Medium);\n        const isLargeScreen = this.breakpointObserver.isMatched(Breakpoints.Large);\n        const isxLargeScreen = this.breakpointObserver.isMatched(Breakpoints.XLarge);\n        if (isXsmallScreen) {\n            this.updateHeight(this.previewConfig.breakpoints.xSmall);\n        }\n        else if (isSmallScreen) {\n            this.updateHeight(this.previewConfig.breakpoints.small);\n        }\n        else if (isMediumScreen) {\n            this.updateHeight(this.previewConfig.breakpoints.medium);\n        }\n        else if (isLargeScreen) {\n            this.updateHeight(this.previewConfig.breakpoints.large);\n        }\n        else if (isxLargeScreen) {\n            this.updateHeight(this.previewConfig.breakpoints.xLarge);\n        }\n    }\n    /**\n     * Method to check if an image is active (i.e. a preview image).\n     * @param InternalLibImage preview is an image to check if it's active or not\n     * @returns boolean true if is active, false otherwise\n     */\n    isActive(preview) {\n        if (!preview || !this.currentImage) {\n            return false;\n        }\n        return preview.id === this.currentImage.id;\n    }\n    /**\n     * Method ´ngOnChanges´ to update `previews` array.\n     * Also, both `start` and `end` local variables will be updated accordingly.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges(changes) {\n        const simpleChange = changes.currentImage;\n        if (!simpleChange) {\n            return;\n        }\n        const prev = simpleChange.previousValue;\n        const current = simpleChange.currentValue;\n        if (current && changes.images && changes.images.previousValue && changes.images.currentValue) {\n            // I'm in this if statement, if input images are changed (for instance, because I removed one of them with the 'delete button',\n            // or because users changed the images array while modal gallery is still open).\n            // In this case, I have to re-init previews, because the input array of images is changed.\n            this.initPreviews(current, changes.images.currentValue);\n        }\n        if (prev && current && prev.id !== current.id) {\n            // to manage infinite sliding I have to reset both `start` and `end` at the beginning\n            // to show again previews from the first image.\n            // This happens when you navigate over the last image to return to the first one\n            let prevIndex;\n            let currentIndex;\n            try {\n                prevIndex = getIndex(prev, this.images);\n                currentIndex = getIndex(current, this.images);\n            }\n            catch (err) {\n                console.error('Cannot get previous and current image indexes in previews');\n                throw err;\n            }\n            // apply a formula to get a values to be used to decide if go next, return back or stay without doing anything\n            const calc = Math.floor((this.end - this.start) / 2) + this.start;\n            if (prevIndex === this.images.length - 1 && currentIndex === 0) {\n                // first image\n                this.setBeginningIndexesPreviews();\n                this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n                return;\n            }\n            // the same for the opposite case, when you navigate back from the fist image to go to the last one.\n            if (prevIndex === 0 && currentIndex === this.images.length - 1) {\n                // last image\n                this.setEndIndexesPreviews();\n                this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n                return;\n            }\n            if (this.previewConfig && this.previewConfig.number % 2 === 0) {\n                if (calc > currentIndex) {\n                    this.previous();\n                }\n                else {\n                    this.next();\n                }\n            }\n            else {\n                if (calc > currentIndex) {\n                    this.previous();\n                }\n                if (calc < currentIndex) {\n                    this.next();\n                }\n            }\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a preview.\n     * This will trigger the `clickpreview` output with the input preview as its payload.\n     * @param InternalLibImage preview that triggered this method\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action that triggered this event (Action.NORMAL by default)\n     */\n    onImageEvent(preview, event, action = Action.NORMAL) {\n        if (!this.previewConfig || !this.previewConfig.clickable) {\n            return;\n        }\n        const clickedImageIndex = this.images.indexOf(preview);\n        const result = super.handleImageEvent(event);\n        if (result === NEXT) {\n            this.clickPreview.emit({ action, result: clickedImageIndex });\n        }\n        else if (result === PREV) {\n            this.clickPreview.emit({ action, result: clickedImageIndex });\n        }\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a navigation arrow.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent | MouseEvent event payload\n     */\n    onNavigationEvent(direction, event) {\n        const result = super.handleNavigationEvent(direction, event);\n        if (result === NEXT) {\n            this.next();\n        }\n        else if (result === PREV) {\n            this.previous();\n        }\n    }\n    /**\n     * Method to get aria-label text for a preview image.\n     * @param Image is the preview\n     */\n    getAriaLabel(preview) {\n        if (!preview.plain) {\n            return preview.modal.ariaLabel || '';\n        }\n        return preview.plain.ariaLabel || preview.modal.ariaLabel || '';\n    }\n    /**\n     * Method to get title text for a preview image.\n     * @param Image is the preview\n     */\n    getTitle(preview) {\n        if (!preview.plain) {\n            return preview.modal.title || '';\n        }\n        return preview.plain.title || preview.modal.title || '';\n    }\n    /**\n     * Method to get alt text for a preview image.\n     * @param Image is the preview\n     */\n    getAlt(preview) {\n        if (!preview.plain) {\n            return preview.modal.alt || '';\n        }\n        return preview.plain.alt || preview.modal.alt || '';\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item\n     */\n    trackById(index, item) {\n        return item.id;\n    }\n    /**\n     * Method used in template to sanitize an url when you need legacyIE11Mode.\n     * In this way you can set an url as background of a div.\n     * @param unsafeStyle is a string or a SafeResourceUrl that represents the url to sanitize.\n     * @param unsafeStyleFallback is a string or a SafeResourceUrl that represents the fallback url to sanitize.\n     * @returns a SafeStyle object that can be used in template without problems.\n     */\n    sanitizeUrlBgStyle(unsafeStyle, unsafeStyleFallback) {\n        // Method used only to sanitize background-image style before add it to background property when legacyIE11Mode is enabled\n        let bg = 'url(' + unsafeStyle + ')';\n        if (!!unsafeStyleFallback) {\n            // if a fallback image is defined, append it. In this way, it will be used by the browser as fallback.\n            bg += ', ' + 'url(' + unsafeStyleFallback + ')';\n        }\n        return this.sanitizer.bypassSecurityTrustStyle(bg);\n    }\n    /**\n     * Method to cleanup resources. In fact, it cleans breakpointSubscription.\n     * This is an Angular's lifecycle hook that is called when this component is destroyed.\n     */\n    ngOnDestroy() {\n        if (this.breakpointSubscription) {\n            this.breakpointSubscription.unsubscribe();\n        }\n    }\n    /**\n     * Private method to init previews based on the currentImage and the full array of images.\n     * The current image in mandatory to show always the current preview (as highlighted).\n     * @param InternalLibImage currentImage to decide how to show previews, because I always want to see the current image as highlighted\n     * @param InternalLibImage[] images is the array of all images.\n     */\n    initPreviews(currentImage, images) {\n        let index;\n        try {\n            index = getIndex(currentImage, images);\n        }\n        catch (err) {\n            throw err;\n        }\n        switch (index) {\n            case 0:\n                // first image\n                this.setBeginningIndexesPreviews();\n                break;\n            case images.length - 1:\n                // last image\n                this.setEndIndexesPreviews();\n                break;\n            // default:\n            //   // other images\n            //   // TODO unused because it starts always at image 0\n            //   this.setIndexesPreviews();\n            //   break;\n        }\n        this.previews = images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to init both `start` and `end` to the beginning.\n     */\n    setBeginningIndexesPreviews() {\n        if (!this.previewConfig || this.previewConfig.number === undefined) {\n            throw new Error('Internal library error - previewConfig and number must be defined');\n        }\n        this.start = 0;\n        this.end = Math.min(this.previewConfig.number, this.images.length);\n    }\n    /**\n     * Private method to init both `start` and `end` to the end.\n     */\n    setEndIndexesPreviews() {\n        if (!this.previewConfig || this.previewConfig.number === undefined) {\n            throw new Error('Internal library error - previewConfig and number must be defined');\n        }\n        this.start = this.images.length - 1 - (this.previewConfig.number - 1);\n        this.end = this.images.length;\n    }\n    /**\n     * Private method to update the visible previews navigating to the right (next).\n     */\n    next() {\n        // check if nextImage should be blocked\n        if (this.isPreventSliding(this.images.length - 1)) {\n            return;\n        }\n        if (this.end === this.images.length) {\n            return;\n        }\n        this.start++;\n        this.end = Math.min(this.end + 1, this.images.length);\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to update the visible previews navigating to the left (previous).\n     */\n    previous() {\n        // check if prevImage should be blocked\n        if (this.isPreventSliding(0)) {\n            return;\n        }\n        if (this.start === 0) {\n            return;\n        }\n        this.start = Math.max(this.start - 1, 0);\n        this.end = Math.min(this.end - 1, this.images.length);\n        this.previews = this.images.filter((img, i) => i >= this.start && i < this.end);\n    }\n    /**\n     * Private method to block/permit sliding between previews.\n     * @param number boundaryIndex is the first or the last index of `images` input array\n     * @returns boolean if true block sliding, otherwise not\n     */\n    isPreventSliding(boundaryIndex) {\n        return getIndex(this.currentImage, this.images) === boundaryIndex;\n    }\n}\nCarouselPreviewsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CarouselPreviewsComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1$1.BreakpointObserver }, { token: i5.DomSanitizer }, { token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nCarouselPreviewsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: CarouselPreviewsComponent, selector: \"ks-carousel-previews\", inputs: { id: \"id\", currentImage: \"currentImage\", images: \"images\" }, outputs: { clickPreview: \"clickPreview\" }, host: { properties: { \"style.max-width\": \"this.hostMaxWidth\", \"attr.aria-label\": \"this.ariaLabel\" } }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<nav *ngIf=\\\"previewConfig?.visible\\\"\\n     class=\\\"previews-container\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.carouselPreviewsContainerTitle\\\">\\n\\n  <a class=\\\"nav-left\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollPrevAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollPrevTitle\\\"></div>\\n  </a>\\n\\n  <div class=\\\"preview-inner-container\\\">\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image{{isActive(preview) ? ' active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.width!,\\n                                 height: previewMaxHeight}\\\"\\n           [attr.aria-label]=\\\"getAriaLabel(preview)\\\"\\n           [title]=\\\"getTitle(preview)\\\"\\n           alt=\\\"{{getAlt(preview)}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n  </div>\\n\\n  <a class=\\\"nav-right\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollNextAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollNextTitle\\\"></div>\\n  </a>\\n\\n</nav>\\n\", styles: [\":host{position:relative;margin-top:3px;margin-bottom:3px;width:100%}.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:0}.previews-container>.preview-inner-container{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:nowrap;width:100%}.previews-container>.preview-inner-container>.preview-image{cursor:pointer;object-fit:cover}.previews-container>.preview-inner-container>.preview-image.unclickable{cursor:not-allowed}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{position:absolute;top:calc(50% - 7px);color:#919191;z-index:1000;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px;left:10px}.previews-container>.nav-left>.left-arrow-preview-image{opacity:1}.previews-container>.nav-right{margin-left:10px;right:10px}.previews-container>.nav-right>.right-arrow-preview-image{opacity:1}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"], directives: [{ type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: [\"fallbackImg\"], outputs: [\"fallbackApplied\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CarouselPreviewsComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-carousel-previews', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<nav *ngIf=\\\"previewConfig?.visible\\\"\\n     class=\\\"previews-container\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewsContainerAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.carouselPreviewsContainerTitle\\\">\\n\\n  <a class=\\\"nav-left\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollPrevAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && start > 0 ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('left', $event)\\\" (keyup)=\\\"onNavigationEvent('left', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && start > 0 ? 'left-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollPrevTitle\\\"></div>\\n  </a>\\n\\n  <div class=\\\"preview-inner-container\\\">\\n    <ng-container *ngFor=\\\"let preview of previews; trackBy: trackById; let index = index\\\">\\n      <img *ngIf=\\\"preview?.modal?.img\\\"\\n           class=\\\"inside preview-image{{isActive(preview) ? ' active' : ''}}{{!previewConfig?.clickable ? ' unclickable' : ''}}\\\"\\n           [src]=\\\"preview.plain?.img ? preview.plain?.img : preview.modal.img\\\"\\n           ksFallbackImage [fallbackImg]=\\\"preview.plain?.fallbackImg ? preview.plain?.fallbackImg : preview.modal.fallbackImg\\\"\\n           ksSize [sizeConfig]=\\\"{width: previewConfig?.width!,\\n                                 height: previewMaxHeight}\\\"\\n           [attr.aria-label]=\\\"getAriaLabel(preview)\\\"\\n           [title]=\\\"getTitle(preview)\\\"\\n           alt=\\\"{{getAlt(preview)}}\\\"\\n           [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n           (click)=\\\"onImageEvent(preview, $event, clickAction)\\\" (keyup)=\\\"onImageEvent(preview, $event, keyboardAction)\\\"/>\\n    </ng-container>\\n  </div>\\n\\n  <a class=\\\"nav-right\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.carouselPreviewScrollNextAriaLabel\\\"\\n     [tabIndex]=\\\"previewConfig?.arrows && end < images.length ? 0 : -1\\\" role=\\\"button\\\"\\n     (click)=\\\"onNavigationEvent('right', $event)\\\" (keyup)=\\\"onNavigationEvent('right', $event)\\\">\\n    <div class=\\\"inside {{previewConfig?.arrows && end < images.length ? 'right-arrow-preview-image' : 'empty-arrow-preview-image'}}\\\"\\n         aria-hidden=\\\"true\\\"\\n         [title]=\\\"accessibilityConfig?.carouselPreviewScrollNextTitle\\\"></div>\\n  </a>\\n\\n</nav>\\n\", styles: [\":host{position:relative;margin-top:3px;margin-bottom:3px;width:100%}.previews-container{align-items:center;animation:fadein-semi-visible08 .8s;display:flex;flex-direction:row;justify-content:center;margin-bottom:0}.previews-container>.preview-inner-container{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:nowrap;width:100%}.previews-container>.preview-inner-container>.preview-image{cursor:pointer;object-fit:cover}.previews-container>.preview-inner-container>.preview-image.unclickable{cursor:not-allowed}.previews-container .nav,.previews-container>.nav-right,.previews-container>.nav-left{position:absolute;top:calc(50% - 7px);color:#919191;z-index:1000;cursor:pointer;transition:all .5s}.previews-container .nav:hover,.previews-container>.nav-right:hover,.previews-container>.nav-left:hover{transform:scale(1.1)}.previews-container>.nav-left{margin-right:10px;left:10px}.previews-container>.nav-left>.left-arrow-preview-image{opacity:1}.previews-container>.nav-right{margin-left:10px;right:10px}.previews-container>.nav-right>.right-arrow-preview-image{opacity:1}\\n\", \".arrow-preview-image,.right-arrow-preview-image,.left-arrow-preview-image,.empty-arrow-preview-image{width:15px;height:15px;opacity:.5}.empty-arrow-preview-image{background:black;opacity:0}.left-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.left-arrow-preview-image:hover{transform:scale(1.2)}.right-arrow-preview-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);background-size:15px;transition:all .5s}.right-arrow-preview-image:hover{transform:scale(1.2)}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1$1.BreakpointObserver }, { type: i5.DomSanitizer }, { type: ConfigService }]; }, propDecorators: { hostMaxWidth: [{\n                type: HostBinding,\n                args: ['style.max-width']\n            }], ariaLabel: [{\n                type: HostBinding,\n                args: ['attr.aria-label']\n            }],\n        // @ts-ignore\n        id: [{\n                type: Input\n            }],\n        // @ts-ignore\n        currentImage: [{\n                type: Input\n            }],\n        // @ts-ignore\n        images: [{\n                type: Input\n            }], clickPreview: [{\n                type: Output\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to change the max size of an element.\n */\nclass MaxSizeDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change both max-width and max-height of an element.\n     */\n    applyStyle() {\n        if (!this.maxSizeConfig) {\n            return;\n        }\n        if (this.maxSizeConfig.maxWidth) {\n            this.renderer.setStyle(this.el.nativeElement, 'max-width', this.maxSizeConfig.maxWidth);\n        }\n        if (this.maxSizeConfig.maxHeight) {\n            this.renderer.setStyle(this.el.nativeElement, 'max-height', this.maxSizeConfig.maxHeight);\n        }\n    }\n}\nMaxSizeDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: MaxSizeDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nMaxSizeDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: MaxSizeDirective, selector: \"[ksMaxSize]\", inputs: { maxSizeConfig: \"maxSizeConfig\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: MaxSizeDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksMaxSize]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { maxSizeConfig: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with configurable inline/plain carousel.\n */\nclass CarouselComponent extends AccessibleComponent {\n    constructor(\n    // tslint:disable-next-line:no-any\n    platformId, ngZone, modalGalleryService, configService, ref) {\n        super();\n        this.platformId = platformId;\n        this.ngZone = ngZone;\n        this.modalGalleryService = modalGalleryService;\n        this.configService = configService;\n        this.ref = ref;\n        /**\n         * Attribute to set ariaLabel of the host component\n         */\n        this.ariaLabel = `Carousel`;\n        /**\n         * Array of `InternalLibImage` that represent the model of this library with all images,\n         * thumbs and so on.\n         */\n        this.images = [];\n        /**\n         * Output to emit an event when an image is clicked.\n         */\n        this.clickImage = new EventEmitter();\n        /**\n         * Output to emit an event when current image is changed.\n         */\n        this.changeImage = new EventEmitter();\n        /**\n         * Output to emit an event when the current image is the first one.\n         */\n        this.firstImage = new EventEmitter();\n        /**\n         * Output to emit an event when the current image is the last one.\n         */\n        this.lastImage = new EventEmitter();\n        /**\n         * Enum of type `Action` that represents a mouse click on a button.\n         * Declared here to be used inside the template.\n         */\n        this.clickAction = Action.CLICK;\n        /**\n         * Enum of type `Action` that represents a keyboard action.\n         * Declared here to be used inside the template.\n         */\n        this.keyboardAction = Action.KEYBOARD;\n        /**\n         * Boolean that it's true when you are watching the first image (currently visible).\n         * False by default\n         */\n        this.isFirstImage = false;\n        /**\n         * Boolean that it's true when you are watching the last image (currently visible).\n         * False by default\n         */\n        this.isLastImage = false;\n        /**\n         * Subject to play the carousel.\n         */\n        this.start$ = new Subject();\n        /**\n         * Subject to stop the carousel.\n         */\n        this.stop$ = new Subject();\n        /**\n         * Private object without type to define all swipe actions used by hammerjs.\n         */\n        this.SWIPE_ACTION = {\n            LEFT: 'swipeleft',\n            RIGHT: 'swiperight',\n            UP: 'swipeup',\n            DOWN: 'swipedown'\n        };\n    }\n    /**\n     * Listener to stop the gallery when the mouse pointer is over the current image.\n     */\n    onMouseEnter() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!libConfig.carouselPlayConfig || !libConfig.carouselPlayConfig.pauseOnHover) {\n            return;\n        }\n        this.stopCarousel();\n    }\n    /**\n     * Listener to play the gallery when the mouse pointer leave the current image.\n     */\n    onMouseLeave() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!libConfig.carouselPlayConfig || !libConfig.carouselPlayConfig.pauseOnHover || !libConfig.carouselPlayConfig.autoPlay) {\n            return;\n        }\n        this.playCarousel();\n    }\n    /**\n     * Listener to navigate carousel images with keyboard (left).\n     */\n    onKeyDownLeft() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!libConfig.carouselConfig || !libConfig.carouselConfig.keyboardEnable) {\n            return;\n        }\n        this.prevImage();\n    }\n    /**\n     * Listener to navigate carousel images with keyboard (right).\n     */\n    onKeyDownLRight() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!libConfig.carouselConfig || !libConfig.carouselConfig.keyboardEnable) {\n            return;\n        }\n        this.nextImage();\n    }\n    ngOnInit() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        if (!this.images || this.images.length === 0) {\n            throw new Error('Internal library error - images array must be defined and with at least an element');\n        }\n        this.configService.setConfig(this.id, this.config);\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.currentImage = this.images[0];\n        this.carouselDotsConfig = libConfig.carouselDotsConfig;\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        this.carouselSlideInfinite = libConfig.carouselSlideInfinite;\n        this.carouselConfig = libConfig.carouselConfig;\n        this.carouselImageConfig = libConfig.carouselImageConfig;\n        this.manageSlideConfig();\n    }\n    ngOnChanges(changes) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        // this.configService.setConfig(this.id, this.config);\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        const configChange = changes.config;\n        // handle changes of dotsConfig.visible\n        if (configChange &&\n            !configChange.firstChange &&\n            (((_a = configChange.previousValue.carouselDotsConfig) === null || _a === void 0 ? void 0 : _a.visible) !== ((_b = configChange.currentValue.carouselDotsConfig) === null || _b === void 0 ? void 0 : _b.visible) || (!configChange.previousValue.carouselDotsConfig && !configChange.currentValue.carouselDotsConfig))) {\n            this.configService.setConfig(this.id, {\n                carouselDotsConfig: (_c = configChange.currentValue) === null || _c === void 0 ? void 0 : _c.carouselDotsConfig\n            });\n            this.carouselDotsConfig = (_d = configChange.currentValue) === null || _d === void 0 ? void 0 : _d.carouselDotsConfig;\n            this.ref.markForCheck();\n        }\n        // handle changes of carouselConfig.showArrows\n        if (configChange &&\n            !configChange.firstChange &&\n            (((_e = configChange.previousValue.carouselConfig) === null || _e === void 0 ? void 0 : _e.showArrows) !== ((_f = configChange.currentValue.carouselConfig) === null || _f === void 0 ? void 0 : _f.showArrows) || (!configChange.previousValue.carouselConfig && !configChange.currentValue.carouselConfig))) {\n            this.configService.setConfig(this.id, {\n                carouselConfig: (_g = configChange.currentValue) === null || _g === void 0 ? void 0 : _g.carouselConfig\n            });\n            this.carouselConfig = (_h = configChange.currentValue) === null || _h === void 0 ? void 0 : _h.carouselConfig;\n            this.ref.markForCheck();\n        }\n        // handle changes of playConfig starting/stopping the carousel accordingly\n        if (configChange &&\n            !configChange.firstChange &&\n            (((_j = configChange.previousValue.carouselPlayConfig) === null || _j === void 0 ? void 0 : _j.autoPlay) !== ((_k = configChange.currentValue.carouselPlayConfig) === null || _k === void 0 ? void 0 : _k.autoPlay) || (!configChange.previousValue.carouselPlayConfig && !configChange.currentValue.carouselPlayConfig))) {\n            this.configService.setConfig(this.id, {\n                carouselPlayConfig: (_l = configChange.currentValue) === null || _l === void 0 ? void 0 : _l.carouselPlayConfig\n            });\n            // this.configPlay = playConfigChange.currentValue;\n            // if autoplay is enabled, and this is not the\n            // first change (to prevent multiple starts at the beginning)\n            if (((_m = configChange.currentValue.carouselPlayConfig) === null || _m === void 0 ? void 0 : _m.autoPlay) && !configChange.firstChange) {\n                this.start$.next();\n            }\n            else {\n                this.stopCarousel();\n            }\n            this.ref.markForCheck();\n        }\n    }\n    ngAfterContentInit() {\n        // interval doesn't play well with SSR and protractor,\n        // so we should run it in the browser and outside Angular\n        if (isPlatformBrowser(this.platformId)) {\n            if (this.id === null || this.id === undefined) {\n                throw new Error('Internal library error - id must be defined');\n            }\n            const libConfig = this.configService.getConfig(this.id);\n            if (!libConfig || !libConfig.carouselPlayConfig) {\n                throw new Error('Internal library error - libConfig and carouselPlayConfig must be defined');\n            }\n            this.ngZone.runOutsideAngular(() => {\n                this.start$\n                    .pipe(map(() => { var _a; return (_a = libConfig === null || libConfig === void 0 ? void 0 : libConfig.carouselPlayConfig) === null || _a === void 0 ? void 0 : _a.interval; }), \n                // tslint:disable-next-line:no-any\n                filter((interval) => interval > 0), switchMap(interval => timer(interval).pipe(takeUntil(this.stop$))))\n                    .subscribe(() => this.ngZone.run(() => {\n                    var _a;\n                    if ((_a = libConfig.carouselPlayConfig) === null || _a === void 0 ? void 0 : _a.autoPlay) {\n                        this.nextImage();\n                    }\n                    this.ref.markForCheck();\n                }));\n                this.start$.next();\n            });\n        }\n    }\n    /**\n     * Method called when a dot is clicked and used to update the current image.\n     * @param number index of the clicked dot\n     */\n    onClickDot(index) {\n        this.changeCurrentImage(this.images[index], Action.NORMAL);\n    }\n    /**\n     * Method called by events from both keyboard and mouse on a navigation arrow.\n     * @param string direction of the navigation that can be either 'next' or 'prev'\n     * @param KeyboardEvent | MouseEvent event payload\n     * @param Action action that triggered the event or `Action.NORMAL` if not provided\n     */\n    onNavigationEvent(direction, event, action = Action.NORMAL) {\n        const result = super.handleNavigationEvent(direction, event);\n        if (result === NEXT) {\n            this.nextImage(action);\n        }\n        else if (result === PREV) {\n            this.prevImage(action);\n        }\n    }\n    /**\n     * Method triggered when you click on the current image.\n     * Also, if modalGalleryEnable is true, you can open the modal-gallery.\n     */\n    onClickCurrentImage() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.carouselConfig || !this.currentImage) {\n            throw new Error('Internal library error - libConfig, carouselConfig and currentImage must be defined');\n        }\n        if (!libConfig.carouselConfig.modalGalleryEnable) {\n            return;\n        }\n        const index = getIndex(this.currentImage, this.images);\n        this.clickImage.emit(index);\n    }\n    /**\n     * Method to get the image description based on input params.\n     * If you provide a full description this will be the visible description, otherwise,\n     * it will be built using the `Description` object, concatenating its fields.\n     * @param Image image to get its description. If not provided it will be the current image\n     * @returns String description of the image (or the current image if not provided)\n     * @throws an Error if description isn't available\n     */\n    getDescriptionToDisplay(image = this.currentImage) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        const configCurrentImageCarousel = libConfig.carouselImageConfig;\n        if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        if (!image) {\n            throw new Error('Internal library error - image must be defined');\n        }\n        const imageWithoutDescription = !image || !image.modal || !image.modal.description || image.modal.description === '';\n        switch (configCurrentImageCarousel.description.strategy) {\n            case DescriptionStrategy.HIDE_IF_EMPTY:\n                return imageWithoutDescription ? '' : image.modal.description + '';\n            case DescriptionStrategy.ALWAYS_HIDDEN:\n                return '';\n            default:\n                // ----------- DescriptionStrategy.ALWAYS_VISIBLE -----------------\n                return this.buildTextDescription(image, imageWithoutDescription);\n        }\n    }\n    /**\n     * Method used by Hammerjs to support touch gestures (you can also invert the swipe direction with configCurrentImage.invertSwipe).\n     * @param action String that represent the direction of the swipe action. 'swiperight' by default.\n     */\n    swipe(action = this.SWIPE_ACTION.RIGHT) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.carouselImageConfig) {\n            throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n        }\n        const configCurrentImageCarousel = libConfig.carouselImageConfig;\n        switch (action) {\n            case this.SWIPE_ACTION.RIGHT:\n                if (configCurrentImageCarousel.invertSwipe) {\n                    this.prevImage(Action.SWIPE);\n                }\n                else {\n                    this.nextImage(Action.SWIPE);\n                }\n                break;\n            case this.SWIPE_ACTION.LEFT:\n                if (configCurrentImageCarousel.invertSwipe) {\n                    this.nextImage(Action.SWIPE);\n                }\n                else {\n                    this.prevImage(Action.SWIPE);\n                }\n                break;\n            // case this.SWIPE_ACTION.UP:\n            //   break;\n            // case this.SWIPE_ACTION.DOWN:\n            //   break;\n        }\n    }\n    /**\n     * Method to go back to the previous image.\n     * @param action Enum of type `Action` that represents the source\n     *  action that moved back to the previous image. `Action.NORMAL` by default.\n     */\n    prevImage(action = Action.NORMAL) {\n        // check if prevImage should be blocked\n        if (this.isPreventSliding(0)) {\n            return;\n        }\n        this.changeCurrentImage(this.getPrevImage(), action);\n        this.manageSlideConfig();\n        this.start$.next();\n    }\n    /**\n     * Method to go back to the previous image.\n     * @param action Enum of type `Action` that represents the source\n     *  action that moved to the next image. `Action.NORMAL` by default.\n     */\n    nextImage(action = Action.NORMAL) {\n        // check if nextImage should be blocked\n        if (this.isPreventSliding(this.images.length - 1)) {\n            return;\n        }\n        this.changeCurrentImage(this.getNextImage(), action);\n        this.manageSlideConfig();\n        this.start$.next();\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item\n     */\n    trackById(index, item) {\n        return item.id;\n    }\n    /**\n     * Method called when an image preview is clicked and used to update the current image.\n     * @param event an ImageEvent object with the relative action and the index of the clicked preview.\n     */\n    onClickPreview(event) {\n        const imageFound = this.images[event.result];\n        if (!!imageFound) {\n            this.manageSlideConfig();\n            this.changeCurrentImage(imageFound, event.action);\n        }\n    }\n    /**\n     * Method to play carousel.\n     */\n    playCarousel() {\n        this.start$.next();\n    }\n    /**\n     * Stops the carousel from cycling through items.\n     */\n    stopCarousel() {\n        this.stop$.next();\n    }\n    // TODO remove this because duplicated\n    /**\n     * Method to get `alt attribute`.\n     * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n     * @param Image image to get its alt description. If not provided it will be the current image\n     * @returns String alt description of the image (or the current image if not provided)\n     */\n    getAltDescriptionByImage(image = this.currentImage) {\n        if (!image) {\n            return '';\n        }\n        return image.modal && image.modal.description ? image.modal.description : `Image ${getIndex(image, this.images) + 1}`;\n    }\n    // TODO remove this because duplicated\n    /**\n     * Method to get the title attributes based on descriptions.\n     * This is useful to prevent accessibility issues, because if DescriptionStrategy is ALWAYS_HIDDEN,\n     * it prevents an empty string as title.\n     * @param Image image to get its description. If not provided it will be the current image\n     * @returns String title of the image based on descriptions\n     * @throws an Error if description isn't available\n     */\n    getTitleToDisplay(image = this.currentImage) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.carouselImageConfig) {\n            throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n        }\n        const configCurrentImageCarousel = libConfig.carouselImageConfig;\n        if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        const imageWithoutDescription = !image || !image.modal || !image.modal.description || image.modal.description === '';\n        const description = this.buildTextDescription(image, imageWithoutDescription);\n        return description;\n    }\n    /**\n     * Method to reset carousel (force image with index 0 to be the current image and re-init also previews)\n     */\n    // temporary removed because never tested\n    // reset() {\n    //   if (this.configPlay && this.configPlay.autoPlay) {\n    //     this.stopCarousel();\n    //   }\n    //   this.currentImage = this.images[0];\n    //   this.handleBoundaries(0);\n    //   if (this.configPlay && this.configPlay.autoPlay) {\n    //     this.playCarousel();\n    //   }\n    //   this.ref.markForCheck();\n    // }\n    /**\n     * Method to cleanup resources. In fact, this will stop the carousel.\n     * This is an Angular's lifecycle hook that is called when this component is destroyed.\n     */\n    ngOnDestroy() {\n        this.stopCarousel();\n    }\n    /**\n     * Method to change the current image, receiving the new image as input the relative action.\n     * @param image an Image object that represents the new image to set as current.\n     * @param action Enum of type `Action` that represents the source action that triggered the change.\n     */\n    changeCurrentImage(image, action) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        this.currentImage = image;\n        const index = getIndex(image, this.images);\n        // emit first/last event based on newIndex value\n        this.emitBoundaryEvent(action, index);\n        // emit current visible image index\n        this.changeImage.emit(new ImageEvent(this.id, action, index + 1));\n    }\n    /**\n     * Private method to get the next index.\n     * This is necessary because at the end, when you call next again, you'll go to the first image.\n     * That happens because all modal images are shown like in a circle.\n     */\n    getNextImage() {\n        if (!this.currentImage) {\n            throw new Error('Internal library error - currentImage must be defined');\n        }\n        const currentIndex = getIndex(this.currentImage, this.images);\n        let newIndex = 0;\n        if (currentIndex >= 0 && currentIndex < this.images.length - 1) {\n            newIndex = currentIndex + 1;\n        }\n        else {\n            newIndex = 0; // start from the first index\n        }\n        return this.images[newIndex];\n    }\n    /**\n     * Private method to get the previous index.\n     * This is necessary because at index 0, when you call prev again, you'll go to the last image.\n     * That happens because all modal images are shown like in a circle.\n     */\n    getPrevImage() {\n        if (!this.currentImage) {\n            throw new Error('Internal library error - currentImage must be defined');\n        }\n        const currentIndex = getIndex(this.currentImage, this.images);\n        let newIndex = 0;\n        if (currentIndex > 0 && currentIndex <= this.images.length - 1) {\n            newIndex = currentIndex - 1;\n        }\n        else {\n            newIndex = this.images.length - 1; // start from the last index\n        }\n        return this.images[newIndex];\n    }\n    /**\n     * Private method to build a text description.\n     * This is used also to create titles.\n     * @param Image image to get its description. If not provided it will be the current image.\n     * @param boolean imageWithoutDescription is a boolean that it's true if the image hasn't a 'modal' description.\n     * @returns String description built concatenating image fields with a specific logic.\n     */\n    buildTextDescription(image, imageWithoutDescription) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig || !libConfig.carouselImageConfig) {\n            throw new Error('Internal library error - libConfig and carouselImageConfig must be defined');\n        }\n        const configCurrentImageCarousel = libConfig.carouselImageConfig;\n        if (!configCurrentImageCarousel || !configCurrentImageCarousel.description) {\n            throw new Error('Description input must be a valid object implementing the Description interface');\n        }\n        if (!image) {\n            throw new Error('Internal library error - image must be defined');\n        }\n        // If customFullDescription use it, otherwise proceed to build a description\n        if (configCurrentImageCarousel.description.customFullDescription && configCurrentImageCarousel.description.customFullDescription !== '') {\n            return configCurrentImageCarousel.description.customFullDescription;\n        }\n        const currentIndex = getIndex(image, this.images);\n        // If the current image hasn't a description,\n        // prevent to write the ' - ' (or this.description.beforeTextDescription)\n        const prevDescription = configCurrentImageCarousel.description.imageText ? configCurrentImageCarousel.description.imageText : '';\n        const midSeparator = configCurrentImageCarousel.description.numberSeparator ? configCurrentImageCarousel.description.numberSeparator : '';\n        const middleDescription = currentIndex + 1 + midSeparator + this.images.length;\n        if (imageWithoutDescription) {\n            return prevDescription + middleDescription;\n        }\n        const currImgDescription = image.modal && image.modal.description ? image.modal.description : '';\n        const endDescription = configCurrentImageCarousel.description.beforeTextDescription + currImgDescription;\n        return prevDescription + middleDescription + endDescription;\n    }\n    /**\n     * Private method to update both `isFirstImage` and `isLastImage` based on\n     * the index of the current image.\n     * @param number currentIndex is the index of the current image\n     */\n    handleBoundaries(currentIndex) {\n        if (this.images.length === 1) {\n            this.isFirstImage = true;\n            this.isLastImage = true;\n            return;\n        }\n        switch (currentIndex) {\n            case 0:\n                // execute this only if infinite sliding is disabled\n                this.isFirstImage = true;\n                this.isLastImage = false;\n                break;\n            case this.images.length - 1:\n                // execute this only if infinite sliding is disabled\n                this.isFirstImage = false;\n                this.isLastImage = true;\n                break;\n            default:\n                this.isFirstImage = false;\n                this.isLastImage = false;\n                break;\n        }\n    }\n    /**\n     * Private method to manage boundary arrows and sliding.\n     * This is based on the slideConfig input to enable/disable 'infinite sliding'.\n     * @param number index of the visible image\n     */\n    manageSlideConfig() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!this.currentImage) {\n            throw new Error('Internal library error - currentImage must be defined');\n        }\n        let index;\n        try {\n            index = getIndex(this.currentImage, this.images);\n        }\n        catch (err) {\n            console.error('Cannot get the current image index in current-image');\n            throw err;\n        }\n        if (libConfig.carouselSlideInfinite === true) {\n            // enable infinite sliding\n            this.isFirstImage = false;\n            this.isLastImage = false;\n        }\n        else {\n            this.handleBoundaries(index);\n        }\n    }\n    /**\n     * Private method to emit events when either the last or the first image are visible.\n     * @param action Enum of type Action that represents the source of the event that changed the\n     *  current image to the first one or the last one.\n     * @param indexToCheck is the index number of the image (the first or the last one).\n     */\n    emitBoundaryEvent(action, indexToCheck) {\n        if (this.id === null || this.id === undefined) {\n            return;\n        }\n        // to emit first/last event\n        switch (indexToCheck) {\n            case 0:\n                this.firstImage.emit(new ImageEvent(this.id, action, true));\n                break;\n            case this.images.length - 1:\n                this.lastImage.emit(new ImageEvent(this.id, action, true));\n                break;\n        }\n    }\n    /**\n     * Private method to check if next/prev actions should be blocked.\n     * It checks if carouselSlideInfinite === false and if the image index is equals to the input parameter.\n     * If yes, it returns true to say that sliding should be blocked, otherwise not.\n     * @param number boundaryIndex that could be either the beginning index (0) or the last index\n     *  of images (this.images.length - 1).\n     * @returns boolean true if carouselSlideInfinite === false and the current index is\n     *  either the first or the last one.\n     */\n    isPreventSliding(boundaryIndex) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        if (!this.currentImage) {\n            throw new Error('Internal library error - currentImage must be defined');\n        }\n        return !libConfig.carouselSlideInfinite && getIndex(this.currentImage, this.images) === boundaryIndex;\n    }\n}\nCarouselComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CarouselComponent, deps: [{ token: PLATFORM_ID }, { token: i0.NgZone }, { token: ModalGalleryService }, { token: ConfigService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\nCarouselComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: CarouselComponent, selector: \"ks-carousel\", inputs: { id: \"id\", images: \"images\", config: \"config\" }, outputs: { clickImage: \"clickImage\", changeImage: \"changeImage\", firstImage: \"firstImage\", lastImage: \"lastImage\" }, host: { listeners: { \"mouseenter\": \"onMouseEnter()\", \"mouseleave\": \"onMouseLeave()\", \"keydown.arrowLeft\": \"onKeyDownLeft()\", \"keydown.arrowRight\": \"onKeyDownLRight()\" }, properties: { \"attr.aria-label\": \"this.ariaLabel\" } }, providers: [ConfigService], usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<main id=\\\"carousel-container\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.carouselContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.carouselContainerTitle\\\"\\n      ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                               maxHeight: ''}\\\">\\n\\n\\n  <!-- Workaround to support 2 ng-content in the same template in 2 ngIf (https://github.com/angular/angular/issues/22972) -->\\n  <ng-template #content><ng-content></ng-content></ng-template>\\n\\n  <figure class=\\\"current-figure\\\" *ngIf=\\\"currentImage && currentImage.modal\\\"\\n          ksSize [sizeConfig]=\\\"{width: carouselConfig?.maxWidth,\\n                                height: ''}\\\">\\n\\n    <a class=\\\"nav-left\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isFirstImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngTemplateOutlet=\\\"content\\\"></ng-container>\\n\\n    <img id=\\\"current-image\\\"\\n         [style.object-fit]=\\\"carouselConfig?.objectFit\\\"\\n         ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                                  maxHeight: carouselConfig?.maxHeight}\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (click)=\\\"onClickCurrentImage()\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"description\\\"\\n                ksDescription [description]=\\\"carouselImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\"></figcaption>\\n\\n    <a class=\\\"nav-right\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isLastImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselNextImageTitle\\\"></div>\\n    </a>\\n\\n    <div id=\\\"dots\\\">\\n      <ks-dots [id]=\\\"id\\\"\\n               [currentImage]=\\\"currentImage\\\"\\n               [images]=\\\"images\\\"\\n               [dotsConfig]=\\\"carouselDotsConfig\\\"\\n               (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n    </div>\\n\\n  </figure>\\n\\n</main>\\n\\n<ks-carousel-previews [id]=\\\"id\\\"\\n                      [images]=\\\"images\\\"\\n                      [currentImage]=\\\"currentImage\\\"\\n                      (clickPreview)=\\\"onClickPreview($event)\\\"></ks-carousel-previews>\\n\", styles: [\":host{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#carousel-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}#carousel-container>.current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}#carousel-container>.current-figure .nav,#carousel-container>.current-figure>.nav-right,#carousel-container>.current-figure>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s;top:50%;position:absolute}#carousel-container>.current-figure .nav:hover,#carousel-container>.current-figure>.nav-right:hover,#carousel-container>.current-figure>.nav-left:hover{transform:scale(1.1)}#carousel-container>.current-figure>.nav-left{left:5px}#carousel-container>.current-figure>.nav-right{right:5px}#carousel-container>.current-figure>#current-image{width:100%;height:auto;display:block}#carousel-container>.current-figure>figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}#carousel-container>.current-figure>figcaption .description{font-weight:bold;text-align:center}#carousel-container>.current-figure>#dots{position:absolute;bottom:20px;width:100%}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\"], components: [{ type: DotsComponent, selector: \"ks-dots\", inputs: [\"id\", \"currentImage\", \"images\", \"dotsConfig\"], outputs: [\"clickDot\"] }, { type: CarouselPreviewsComponent, selector: \"ks-carousel-previews\", inputs: [\"id\", \"currentImage\", \"images\"], outputs: [\"clickPreview\"] }], directives: [{ type: MaxSizeDirective, selector: \"[ksMaxSize]\", inputs: [\"maxSizeConfig\"] }, { type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }, { type: i2.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }, { type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: [\"fallbackImg\"], outputs: [\"fallbackApplied\"] }, { type: DescriptionDirective, selector: \"[ksDescription]\", inputs: [\"description\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: CarouselComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-carousel', changeDetection: ChangeDetectionStrategy.OnPush, providers: [ConfigService], template: \"<main id=\\\"carousel-container\\\"\\n      [attr.aria-label]=\\\"accessibilityConfig?.carouselContainerAriaLabel\\\"\\n      [title]=\\\"accessibilityConfig?.carouselContainerTitle\\\"\\n      ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                               maxHeight: ''}\\\">\\n\\n\\n  <!-- Workaround to support 2 ng-content in the same template in 2 ngIf (https://github.com/angular/angular/issues/22972) -->\\n  <ng-template #content><ng-content></ng-content></ng-template>\\n\\n  <figure class=\\\"current-figure\\\" *ngIf=\\\"currentImage && currentImage.modal\\\"\\n          ksSize [sizeConfig]=\\\"{width: carouselConfig?.maxWidth,\\n                                height: ''}\\\">\\n\\n    <a class=\\\"nav-left\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselPrevImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('left', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('left', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isFirstImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'left-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselPrevImageTitle\\\"></div>\\n    </a>\\n\\n    <ng-container *ngTemplateOutlet=\\\"content\\\"></ng-container>\\n\\n    <img id=\\\"current-image\\\"\\n         [style.object-fit]=\\\"carouselConfig?.objectFit\\\"\\n         ksMaxSize [maxSizeConfig]=\\\"{maxWidth: carouselConfig?.maxWidth,\\n                                  maxHeight: carouselConfig?.maxHeight}\\\"\\n         [src]=\\\"currentImage.modal.img\\\"\\n         ksFallbackImage [fallbackImg]=\\\"currentImage.modal.fallbackImg\\\"\\n         [attr.aria-label]=\\\"currentImage.modal.ariaLabel\\\"\\n         [title]=\\\"(currentImage.modal.title || currentImage.modal.title === '') ? currentImage.modal.title : getTitleToDisplay()\\\"\\n         alt=\\\"{{currentImage.modal.alt ? currentImage.modal.alt : getAltDescriptionByImage()}}\\\"\\n         [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n         (click)=\\\"onClickCurrentImage()\\\"\\n         (swipeleft)=\\\"swipe($event.type)\\\"\\n         (swiperight)=\\\"swipe($event.type)\\\"/>\\n\\n    <figcaption *ngIf=\\\"getDescriptionToDisplay() !== ''\\\"\\n                class=\\\"description\\\"\\n                ksDescription [description]=\\\"carouselImageConfig?.description\\\"\\n                [innerHTML]=\\\"getDescriptionToDisplay()\\\"></figcaption>\\n\\n    <a class=\\\"nav-right\\\" *ngIf=\\\"carouselConfig?.showArrows\\\"\\n       [attr.aria-label]=\\\"accessibilityConfig?.carouselNextImageAriaLabel\\\"\\n       [tabIndex]=\\\"isLastImage && !carouselSlideInfinite ? -1 : 0\\\" role=\\\"button\\\"\\n       (click)=\\\"onNavigationEvent('right', $event, clickAction)\\\" (keyup)=\\\"onNavigationEvent('right', $event, keyboardAction)\\\">\\n      <div class=\\\"inside {{(isLastImage && !carouselSlideInfinite) || !carouselConfig.showArrows ? 'empty-arrow-image' : 'right-arrow-image'}}\\\"\\n           aria-hidden=\\\"true\\\"\\n           [title]=\\\"accessibilityConfig?.carouselNextImageTitle\\\"></div>\\n    </a>\\n\\n    <div id=\\\"dots\\\">\\n      <ks-dots [id]=\\\"id\\\"\\n               [currentImage]=\\\"currentImage\\\"\\n               [images]=\\\"images\\\"\\n               [dotsConfig]=\\\"carouselDotsConfig\\\"\\n               (clickDot)=\\\"onClickDot($event)\\\"></ks-dots>\\n    </div>\\n\\n  </figure>\\n\\n</main>\\n\\n<ks-carousel-previews [id]=\\\"id\\\"\\n                      [images]=\\\"images\\\"\\n                      [currentImage]=\\\"currentImage\\\"\\n                      (clickPreview)=\\\"onClickPreview($event)\\\"></ks-carousel-previews>\\n\", styles: [\":host{display:flex;flex-direction:column;justify-content:flex-start;align-items:center}#carousel-container{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}#carousel-container>.current-figure{animation:fadein-visible .8s;text-align:center;margin:0;position:relative}#carousel-container>.current-figure .nav,#carousel-container>.current-figure>.nav-right,#carousel-container>.current-figure>.nav-left{animation:animatezoom 1s;cursor:pointer;transition:all .5s;top:50%;position:absolute}#carousel-container>.current-figure .nav:hover,#carousel-container>.current-figure>.nav-right:hover,#carousel-container>.current-figure>.nav-left:hover{transform:scale(1.1)}#carousel-container>.current-figure>.nav-left{left:5px}#carousel-container>.current-figure>.nav-right{right:5px}#carousel-container>.current-figure>#current-image{width:100%;height:auto;display:block}#carousel-container>.current-figure>figcaption{padding:10px;position:absolute;bottom:0;left:0;right:0}#carousel-container>.current-figure>figcaption .description{font-weight:bold;text-align:center}#carousel-container>.current-figure>#dots{position:absolute;bottom:20px;width:100%}\\n\", \".arrow-image,.right-arrow-image,.left-arrow-image,.empty-arrow-image{width:30px;height:30px;background-size:30px}.empty-arrow-image{background:black;opacity:0}.left-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMTQ1LjE4OCwyMzguNTc1bDIxNS41LTIxNS41YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xcy0xMy44LTUuMy0xOS4xLDBsLTIyNS4xLDIyNS4xYy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWwyMjUuMSwyMjUgICBjMi42LDIuNiw2LjEsNCw5LjUsNHM2LjktMS4zLDkuNS00YzUuMy01LjMsNS4zLTEzLjgsMC0xOS4xTDE0NS4xODgsMjM4LjU3NXoiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.left-arrow-image:hover{transform:scale(1.2)}.right-arrow-image{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ3Ny4xNzUgNDc3LjE3NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDc3LjE3NSA0NzcuMTc1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij48Zz48cGF0aCBkPSJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjUgICBjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXogICAiIGZpbGw9IiNGRkZGRkYiLz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+);opacity:.8;transition:all .5s}.right-arrow-image:hover{transform:scale(1.2)}\\n\"] }]\n        }], ctorParameters: function () {\n        return [{ type: undefined, decorators: [{\n                        type: Inject,\n                        args: [PLATFORM_ID]\n                    }] }, { type: i0.NgZone }, { type: ModalGalleryService }, { type: ConfigService }, { type: i0.ChangeDetectorRef }];\n    }, propDecorators: { ariaLabel: [{\n                type: HostBinding,\n                args: ['attr.aria-label']\n            }], id: [{\n                type: Input\n            }], images: [{\n                type: Input\n            }], config: [{\n                type: Input\n            }], clickImage: [{\n                type: Output\n            }], changeImage: [{\n                type: Output\n            }], firstImage: [{\n                type: Output\n            }], lastImage: [{\n                type: Output\n            }], onMouseEnter: [{\n                type: HostListener,\n                args: ['mouseenter']\n            }], onMouseLeave: [{\n                type: HostListener,\n                args: ['mouseleave']\n            }], onKeyDownLeft: [{\n                type: HostListener,\n                args: ['keydown.arrowLeft']\n            }], onKeyDownLRight: [{\n                type: HostListener,\n                args: ['keydown.arrowRight']\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to change the flex-wrap css property of an element.\n */\nclass WrapDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change both width and flex-wrap css properties.\n     */\n    applyStyle() {\n        // TODO is this right???? If wrap is false I cannot apply width and flex-wrap\n        if (!this.wrap) {\n            return;\n        }\n        this.renderer.setStyle(this.el.nativeElement, 'width', this.width);\n        this.renderer.setStyle(this.el.nativeElement, 'flex-wrap', this.wrap ? 'wrap' : 'nowrap');\n    }\n}\nWrapDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WrapDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nWrapDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: WrapDirective, selector: \"[ksWrap]\", inputs: { wrap: \"wrap\", width: \"width\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: WrapDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksWrap]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { wrap: [{\n                type: Input\n            }], width: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to change the flex-direction of an element, based on two inputs (`direction` and `justify`).\n */\nclass DirectionDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change both direction and justify of an element.\n     */\n    applyStyle() {\n        if (!this.direction || !this.justify) {\n            return;\n        }\n        this.renderer.setStyle(this.el.nativeElement, 'flex-direction', this.direction);\n        this.renderer.setStyle(this.el.nativeElement, 'justify-content', this.justify);\n    }\n}\nDirectionDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DirectionDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nDirectionDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: DirectionDirective, selector: \"[ksDirection]\", inputs: { direction: \"direction\", justify: \"justify\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: DirectionDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksDirection]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { direction: [{\n                type: Input\n            }], justify: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to add an image to an `<a>` tag with some additional custom properties.\n */\nclass ATagBgImageDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to add an image as background of an `<a>` tag.\n     */\n    applyStyle() {\n        if (!this.image || (!this.image.plain && !this.image.modal)) {\n            return;\n        }\n        const imgPath = this.image.plain && this.image.plain.img ? this.image.plain.img : this.image.modal.img;\n        let bg = `url(\"${imgPath}\") ${this.style}`;\n        const fallbackImgPath = this.image.plain && this.image.plain.fallbackImg ? this.image.plain.fallbackImg : this.image.modal.fallbackImg;\n        if (!!fallbackImgPath) {\n            bg += `, url(\"${fallbackImgPath}\") ${this.style}`;\n        }\n        this.renderer.setStyle(this.el.nativeElement, 'background', bg);\n    }\n}\nATagBgImageDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ATagBgImageDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nATagBgImageDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: ATagBgImageDirective, selector: \"[ksATagBgImage]\", inputs: { image: \"image\", style: \"style\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: ATagBgImageDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksATagBgImage]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { image: [{\n                type: Input\n            }], style: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Component with the gallery of thumbs.\n * In receives an array of Images, a boolean to show/hide\n * the gallery (feature used by imagePointer) and a config\n * object to customize the behaviour of this component.\n * Also, it emits click events as outputs.\n */\nclass PlainGalleryComponent extends AccessibleComponent {\n    constructor(configService) {\n        super();\n        this.configService = configService;\n        /**\n         * Array of `Image` that represent the model of this library with all images, thumbs and so on.\n         */\n        this.images = [];\n        /**\n         * Output to emit an event when an image is clicked.\n         */\n        this.clickImage = new EventEmitter();\n        /**\n         * Bi-dimensional array of `Image` object to store images to display as plain gallery.\n         * [] by default.\n         */\n        this.imageGrid = [];\n        /**\n         * Boolean passed as input to `ks-wrap` directive to configure flex-wrap css property.\n         * However it's not enough, because you need to limit the width using `widthStyle` public variable.\n         * For more info check https://developer.mozilla.org/it/docs/Web/CSS/flex-wrap\n         */\n        this.wrapStyle = false;\n        /**\n         * String passed as input to `ks-wrap` directive to set width to be able to force overflow.\n         * In this way, `wrapStyle` (flex-wrap css property) will be used as requested.\n         */\n        this.widthStyle = '';\n    }\n    /**\n     * Method ´ngOnInit´ to init both `configPlainGallery` calling `initPlainGalleryConfig()`\n     * and `imageGrid invoking `initImageGrid()`.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        this.configService.setConfig(this.id, this.config);\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        this.accessibilityConfig = libConfig.accessibilityConfig;\n        this.plainGalleryConfig = libConfig.plainGalleryConfig;\n        this.initImageGrid();\n    }\n    /**\n     * Method ´ngOnChanges´ to update both `imageGrid` and`plainGalleryConfig`.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges(changes) {\n        if (this.id === null || this.id === undefined) {\n            throw new Error('Internal library error - id must be defined');\n        }\n        const libConfig = this.configService.getConfig(this.id);\n        if (!libConfig) {\n            throw new Error('Internal library error - libConfig must be defined');\n        }\n        const imagesChange = changes.images;\n        const configChange = changes.plainGalleryConfig;\n        // I'm using !change.firstChange because the first time will be called both onInit and onChange and I don't\n        // want to execute initialization two times.\n        if (configChange &&\n            !configChange.firstChange &&\n            (configChange.previousValue !== configChange.currentValue || (!configChange.previousValue && !configChange.currentValue))) {\n            this.plainGalleryConfig = libConfig.plainGalleryConfig;\n            // this.configPlainGallery = this.initPlainGalleryConfig();\n        }\n        if (imagesChange && !imagesChange.firstChange && imagesChange.previousValue !== imagesChange.currentValue) {\n            this.initImageGrid();\n        }\n    }\n    /**\n     * Method called when you click on an image of the plain (or inline) gallery.\n     * This will emit the show event with the image as payload.\n     * @param Image img is the Image to show\n     */\n    showModalGalleryByImage(img) {\n        const index = this.images.findIndex((val) => val && img && val.id === img.id);\n        this.showModalGallery(index);\n    }\n    /**\n     * Method called when you navigate between images.\n     * This will emit the show event with the image as payload.\n     * @param KeyboardEvent event that triggered the navigation\n     * @param Image img is the Image to show\n     */\n    onNavigationEvent(event, img) {\n        const result = super.handleImageEvent(event);\n        if (result === NEXT) {\n            this.showModalGalleryByImage(img);\n        }\n    }\n    /**\n     * Method to get `alt attribute`.\n     * `alt` specifies an alternate text for an image, if the image cannot be displayed.\n     * @param Image image to get its alt description.\n     * @returns string alt description of the image\n     */\n    getAltPlainDescriptionByImage(image) {\n        if (!image) {\n            return '';\n        }\n        return image.plain && image.plain.description ? image.plain.description : `Image ${getIndex(image, this.images) + 1}`;\n    }\n    /**\n     * Method to get the title for an image.\n     * @param Image image to get its title\n     * @returns string the title of the input image\n     */\n    getTitleDisplay(image) {\n        let description = '';\n        if (image.plain && image.plain.description) {\n            description = image.plain.description;\n        }\n        else if (image.modal && image.modal.description) {\n            description = image.modal.description;\n        }\n        const currentIndex = getIndex(image, this.images);\n        const prevDescription = 'Image ' + (currentIndex + 1) + '/' + this.images.length;\n        let currImgDescription = description ? description : '';\n        if (currImgDescription !== '') {\n            currImgDescription = ' - ' + currImgDescription;\n        }\n        return prevDescription + currImgDescription;\n    }\n    /**\n     * Method used in the template to track ids in ngFor.\n     * @param number index of the array\n     * @param Image item of the array\n     * @returns number the id of the item\n     */\n    trackById(index, item) {\n        return item.id;\n    }\n    /**\n     * Method called when you click on an image of the plain (or inline) gallery.\n     * This will emit the show event with the index number as payload.\n     * @param number index of the clicked image\n     */\n    showModalGallery(index) {\n        this.clickImage.emit(index);\n    }\n    /**\n     * Private method to init both `imageGrid` and other style variables,\n     * based on the layout type.\n     */\n    initImageGrid() {\n        if (!this.plainGalleryConfig) {\n            throw new Error('Internal library error - plainGalleryConfig must be defined');\n        }\n        // reset the array to prevent issues in case of GridLayout\n        this.imageGrid = [];\n        if (this.plainGalleryConfig.layout instanceof LineLayout) {\n            const layout = this.plainGalleryConfig.layout;\n            const row = this.images.filter((val, i) => i < layout.breakConfig.length || layout.breakConfig.length === -1);\n            this.imageGrid = [row];\n            this.size = this.plainGalleryConfig.layout.size;\n            switch (this.plainGalleryConfig.strategy) {\n                case PlainGalleryStrategy.ROW:\n                    this.directionStyle = 'row';\n                    break;\n                case PlainGalleryStrategy.COLUMN:\n                    this.directionStyle = 'column';\n                    this.wrapStyle = layout.breakConfig.wrap;\n                    break;\n            }\n            this.justifyStyle = layout.justify;\n        }\n        if (this.plainGalleryConfig.layout instanceof GridLayout) {\n            const layout = this.plainGalleryConfig.layout;\n            const count = Math.ceil(this.images.length / layout.breakConfig.length);\n            let start = 0;\n            let end = layout.breakConfig.length - 1;\n            for (let j = 0; j < count; j++) {\n                const row = this.images.filter((val, i) => i >= start && i <= end);\n                this.imageGrid.push(row);\n                start = end + 1;\n                end = start + layout.breakConfig.length - 1;\n            }\n            this.size = this.plainGalleryConfig.layout.size;\n            const pixels = +layout.size.width.replace('px', '');\n            this.widthStyle = pixels * layout.breakConfig.length + pixels / 2 + 'px';\n            this.wrapStyle = layout.breakConfig.wrap;\n            this.directionStyle = 'row';\n        }\n    }\n}\nPlainGalleryComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: PlainGalleryComponent, deps: [{ token: ConfigService }], target: i0.ɵɵFactoryTarget.Component });\nPlainGalleryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.0.0\", type: PlainGalleryComponent, selector: \"ks-plain-gallery\", inputs: { id: \"id\", images: \"images\", config: \"config\" }, outputs: { clickImage: \"clickImage\" }, usesInheritance: true, usesOnChanges: true, ngImport: i0, template: \"<div class=\\\"plain-container\\\"\\n     ksWrap [wrap]=\\\"wrapStyle\\\" [width]=\\\"widthStyle\\\"\\n     ksDirection [direction]=\\\"directionStyle\\\" [justify]=\\\"justifyStyle\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.plainGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.plainGalleryContentTitle\\\">\\n\\n  <ng-container *ngFor=\\\"let imgRow of imageGrid; let i = index\\\">\\n    <ng-container *ngFor=\\\"let imgCol of imgRow; let j = index\\\">\\n\\n      <ng-container *ngIf=\\\"!plainGalleryConfig?.advanced?.aTags; else aTags\\\">\\n        <img *ngIf=\\\"imgCol?.modal?.img\\\"\\n             [src]=\\\"imgCol.plain?.img! ? imgCol.plain?.img! : imgCol.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"imgCol.plain?.fallbackImg ? imgCol.plain?.fallbackImg : imgCol.modal.fallbackImg\\\"\\n             class=\\\"image\\\"\\n             ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n             [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n             [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n             alt=\\\"{{imgCol.plain?.alt! ? imgCol.plain?.alt! : getAltPlainDescriptionByImage(imgCol)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"/>\\n      </ng-container>\\n\\n      <!-- Add directive to set background with the image url as param to pass thumb or img-->\\n      <!-- to do something like this <a style=\\\"background: url('path to image') 50% 50%/cover\\\">.-->\\n      <ng-template #aTags>\\n        <a *ngIf=\\\"imgCol?.modal?.img\\\"\\n           class=\\\"a-tag-image\\\"\\n           ksATagBgImage [image]=\\\"imgCol\\\" [style]=\\\"plainGalleryConfig?.advanced?.additionalBackground\\\"\\n           ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n           [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n           [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n           [tabIndex]=\\\"0\\\"\\n           (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"></a>\\n      </ng-template>\\n\\n    </ng-container>\\n  </ng-container>\\n\\n</div>\\n\\n\", styles: [\".plain-container{align-items:center;display:flex}.plain-container .image{cursor:pointer;height:auto;margin:2px;width:50px}.plain-container .a-tag-image{cursor:pointer;margin:2px}\\n\"], directives: [{ type: WrapDirective, selector: \"[ksWrap]\", inputs: [\"wrap\", \"width\"] }, { type: DirectionDirective, selector: \"[ksDirection]\", inputs: [\"direction\", \"justify\"] }, { type: i2.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i2.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: FallbackImageDirective, selector: \"[ksFallbackImage]\", inputs: [\"fallbackImg\"], outputs: [\"fallbackApplied\"] }, { type: SizeDirective, selector: \"[ksSize]\", inputs: [\"sizeConfig\"] }, { type: ATagBgImageDirective, selector: \"[ksATagBgImage]\", inputs: [\"image\", \"style\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: PlainGalleryComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ks-plain-gallery', changeDetection: ChangeDetectionStrategy.OnPush, template: \"<div class=\\\"plain-container\\\"\\n     ksWrap [wrap]=\\\"wrapStyle\\\" [width]=\\\"widthStyle\\\"\\n     ksDirection [direction]=\\\"directionStyle\\\" [justify]=\\\"justifyStyle\\\"\\n     [attr.aria-label]=\\\"accessibilityConfig?.plainGalleryContentAriaLabel\\\"\\n     [title]=\\\"accessibilityConfig?.plainGalleryContentTitle\\\">\\n\\n  <ng-container *ngFor=\\\"let imgRow of imageGrid; let i = index\\\">\\n    <ng-container *ngFor=\\\"let imgCol of imgRow; let j = index\\\">\\n\\n      <ng-container *ngIf=\\\"!plainGalleryConfig?.advanced?.aTags; else aTags\\\">\\n        <img *ngIf=\\\"imgCol?.modal?.img\\\"\\n             [src]=\\\"imgCol.plain?.img! ? imgCol.plain?.img! : imgCol.modal.img\\\"\\n             ksFallbackImage [fallbackImg]=\\\"imgCol.plain?.fallbackImg ? imgCol.plain?.fallbackImg : imgCol.modal.fallbackImg\\\"\\n             class=\\\"image\\\"\\n             ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n             [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n             [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n             alt=\\\"{{imgCol.plain?.alt! ? imgCol.plain?.alt! : getAltPlainDescriptionByImage(imgCol)}}\\\"\\n             [tabIndex]=\\\"0\\\" role=\\\"img\\\"\\n             (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"/>\\n      </ng-container>\\n\\n      <!-- Add directive to set background with the image url as param to pass thumb or img-->\\n      <!-- to do something like this <a style=\\\"background: url('path to image') 50% 50%/cover\\\">.-->\\n      <ng-template #aTags>\\n        <a *ngIf=\\\"imgCol?.modal?.img\\\"\\n           class=\\\"a-tag-image\\\"\\n           ksATagBgImage [image]=\\\"imgCol\\\" [style]=\\\"plainGalleryConfig?.advanced?.additionalBackground\\\"\\n           ksSize [sizeConfig]=\\\"{width: size?.width!, height: size?.height!}\\\"\\n           [attr.aria-label]=\\\"imgCol.plain?.ariaLabel\\\"\\n           [title]=\\\"(imgCol.plain?.title || imgCol.plain?.title === '') ? imgCol.plain?.title : getTitleDisplay(imgCol)\\\"\\n           [tabIndex]=\\\"0\\\"\\n           (click)=\\\"showModalGalleryByImage(imgCol)\\\" (keyup)=\\\"onNavigationEvent($event, imgCol)\\\"></a>\\n      </ng-template>\\n\\n    </ng-container>\\n  </ng-container>\\n\\n</div>\\n\\n\", styles: [\".plain-container{align-items:center;display:flex}.plain-container .image{cursor:pointer;height:auto;margin:2px;width:50px}.plain-container .a-tag-image{cursor:pointer;margin:2px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: ConfigService }]; }, propDecorators: { id: [{\n                type: Input\n            }], images: [{\n                type: Input\n            }], config: [{\n                type: Input\n            }], clickImage: [{\n                type: Output\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (c) 2017 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Array of all components.\n */\nconst COMPONENTS = [\n    PlainGalleryComponent,\n    CarouselComponent,\n    CarouselPreviewsComponent,\n    UpperButtonsComponent,\n    DotsComponent,\n    PreviewsComponent,\n    CurrentImageComponent,\n    LoadingSpinnerComponent,\n    AccessibleComponent,\n    ModalGalleryComponent\n];\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Directive to change margins of an element.\n */\nclass MarginDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n    }\n    /**\n     * Method ´ngOnInit´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called only one time!!!\n     */\n    ngOnInit() {\n        this.applyStyle();\n    }\n    /**\n     * Method ´ngOnChanges´ to apply the style of this directive.\n     * This is an Angular's lifecycle hook, so its called automatically by Angular itself.\n     * In particular, it's called when any data-bound property of a directive changes!!!\n     */\n    ngOnChanges() {\n        this.applyStyle();\n    }\n    /**\n     * Private method to change both width and height of an element.\n     */\n    applyStyle() {\n        if (this.marginLeft) {\n            this.renderer.setStyle(this.el.nativeElement, 'margin-left', this.marginLeft);\n        }\n        if (this.marginRight) {\n            this.renderer.setStyle(this.el.nativeElement, 'margin-right', this.marginRight);\n        }\n        if (this.marginTop) {\n            this.renderer.setStyle(this.el.nativeElement, 'margin-top', this.marginTop);\n        }\n        if (this.marginBottom) {\n            this.renderer.setStyle(this.el.nativeElement, 'margin-bottom', this.marginBottom);\n        }\n    }\n}\nMarginDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: MarginDirective, deps: [{ token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nMarginDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.0.0\", type: MarginDirective, selector: \"[ksMargin]\", inputs: { marginLeft: \"marginLeft\", marginRight: \"marginRight\", marginTop: \"marginTop\", marginBottom: \"marginBottom\" }, usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: MarginDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ksMargin]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { marginLeft: [{\n                type: Input\n            }], marginRight: [{\n                type: Input\n            }], marginTop: [{\n                type: Input\n            }], marginBottom: [{\n                type: Input\n            }] } });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n/**\n * Array of all directives.\n */\nconst DIRECTIVES = [\n    ClickOutsideDirective,\n    SizeDirective,\n    KeyboardNavigationDirective,\n    WrapDirective,\n    DirectionDirective,\n    ATagBgImageDirective,\n    DescriptionDirective,\n    MarginDirective,\n    MaxSizeDirective,\n    FallbackImageDirective\n];\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n// to prevent bad scrolling behaviour on mobile phone with carousels.\n// From @mohaxspb (https://github.com/Ks89/angular-modal-gallery/pull/187)\nclass KsHammerGestureConfig extends HammerGestureConfig {\n    // tslint:disable-next-line:typedef\n    buildHammer(element) {\n        return new Hammer(element, {\n            touchAction: 'pan-y'\n        });\n    }\n}\nKsHammerGestureConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KsHammerGestureConfig, deps: null, target: i0.ɵɵFactoryTarget.Injectable });\nKsHammerGestureConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KsHammerGestureConfig });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: KsHammerGestureConfig, decorators: [{\n            type: Injectable\n        }] });\n/**\n * Module to import it in the root module of your application.\n */\nclass GalleryModule {\n}\nGalleryModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: GalleryModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nGalleryModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: GalleryModule, declarations: [PlainGalleryComponent, CarouselComponent, CarouselPreviewsComponent, UpperButtonsComponent, DotsComponent, PreviewsComponent, CurrentImageComponent, LoadingSpinnerComponent, AccessibleComponent, ModalGalleryComponent, ClickOutsideDirective, SizeDirective, KeyboardNavigationDirective, WrapDirective, DirectionDirective, ATagBgImageDirective, DescriptionDirective, MarginDirective, MaxSizeDirective, FallbackImageDirective], imports: [CommonModule, OverlayModule], exports: [PlainGalleryComponent, CarouselComponent] });\nGalleryModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: GalleryModule, providers: [\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: KsHammerGestureConfig\n        }\n    ], imports: [[CommonModule, OverlayModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.0.0\", ngImport: i0, type: GalleryModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, OverlayModule],\n                    declarations: [COMPONENTS, DIRECTIVES],\n                    exports: [PlainGalleryComponent, CarouselComponent],\n                    providers: [\n                        {\n                            provide: HAMMER_GESTURE_CONFIG,\n                            useClass: KsHammerGestureConfig\n                        }\n                    ]\n                }]\n        }] });\n\n/*\n The MIT License (MIT)\n\n Copyright (C) 2017-2021 Stefano Cappa (Ks89)\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Action, ButtonType, ButtonsStrategy, CarouselComponent, DescriptionStrategy, GalleryModule, GridLayout, Image, ImageEvent, ImageModalEvent, KS_DEFAULT_ACCESSIBILITY_CONFIG, KS_DEFAULT_BTN_CLOSE, KS_DEFAULT_BTN_DELETE, KS_DEFAULT_BTN_DOWNLOAD, KS_DEFAULT_BTN_EXTURL, KS_DEFAULT_BTN_FULL_SCREEN, KS_DEFAULT_SIZE, LineLayout, LoadingType, ModalGalleryComponent, ModalGalleryRef, ModalGalleryService, PlainGalleryComponent, PlainGalleryStrategy };\n"]},"metadata":{},"sourceType":"module"}